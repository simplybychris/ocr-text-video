var c9=Object.defineProperty,h9=Object.defineProperties,f9=Object.getOwnPropertyDescriptors,Oh=Object.getOwnPropertySymbols,mC=Object.prototype.hasOwnProperty,vC=Object.prototype.propertyIsEnumerable,gC=(se,ee,D)=>ee in se?c9(se,ee,{enumerable:!0,configurable:!0,writable:!0,value:D}):se[ee]=D,or=(se,ee)=>{for(var D in ee||(ee={}))mC.call(ee,D)&&gC(se,D,ee[D]);if(Oh)for(var D of Oh(ee))vC.call(ee,D)&&gC(se,D,ee[D]);return se},Oi=(se,ee)=>h9(se,f9(ee)),wC=(se,ee)=>{var D={};for(var I in se)mC.call(se,I)&&ee.indexOf(I)<0&&(D[I]=se[I]);if(null!=se&&Oh)for(var I of Oh(se))ee.indexOf(I)<0&&vC.call(se,I)&&(D[I]=se[I]);return D};(self.webpackChunkvideo_text_ocr=self.webpackChunkvideo_text_ocr||[]).push([[179],{8254:(se,ee,D)=>{"use strict";var I={};D.r(I),D.d(I,{CMYK:()=>ou,GREY:()=>mi,HSL:()=>eg,HSV:()=>tg,RGB:()=>Nr});var U={};D.r(U),D.d(U,{tagsById:()=>ng,tagsByName:()=>QD});var b={};D.r(b),D.d(b,{tagsById:()=>rg,tagsByName:()=>JD});var _={};function E(e){return"function"==typeof e}function g(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}D.r(_),D.d(_,{tagsById:()=>ig,tagsByName:()=>eE});const w=g(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function M(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class y{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(E(r))try{r()}catch(o){t=o instanceof w?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{C(o)}catch(s){t=null!=t?t:[],s instanceof w?t=[...t,...s.errors]:t.push(s)}}if(t)throw new w(t)}}add(t){var n;if(t&&t!==this)if(this.closed)C(t);else{if(t instanceof y){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&M(n,t)}remove(t){const{_finalizers:n}=this;n&&M(n,t),t instanceof y&&t._removeParent(this)}}y.EMPTY=(()=>{const e=new y;return e.closed=!0,e})();const A=y.EMPTY;function R(e){return e instanceof y||e&&"closed"in e&&E(e.remove)&&E(e.add)&&E(e.unsubscribe)}function C(e){E(e)?e():e.unsubscribe()}const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},B={setTimeout(e,t,...n){const{delegate:r}=B;return null!=r&&r.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=B;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function V(e){B.setTimeout(()=>{const{onUnhandledError:t}=T;if(!t)throw e;t(e)})}function G(){}const ae=O("C",void 0,void 0);function O(e,t,n){return{kind:e,value:t,error:n}}let Y=null;function q(e){if(T.useDeprecatedSynchronousErrorHandling){const t=!Y;if(t&&(Y={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=Y;if(Y=null,n)throw r}}else e()}class re extends y{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,R(t)&&t.add(this)):this.destination=z}static create(t,n,r){return new we(t,n,r)}next(t){this.isStopped?je(function k(e){return O("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?je(function fe(e){return O("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?je(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ue=Function.prototype.bind;function ce(e,t){return ue.call(e,t)}class ye{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){tt(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){tt(r)}else tt(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){tt(n)}}}class we extends re{constructor(t,n,r){let i;if(super(),E(t)||!t)i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0};else{let o;this&&T.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&ce(t.next,o),error:t.error&&ce(t.error,o),complete:t.complete&&ce(t.complete,o)}):i=t}this.destination=new ye(i)}}function tt(e){T.useDeprecatedSynchronousErrorHandling?function me(e){T.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=e)}(e):V(e)}function je(e,t){const{onStoppedNotification:n}=T;n&&B.setTimeout(()=>n(e,t))}const z={closed:!0,next:G,error:function Ze(e){throw e},complete:G},le="function"==typeof Symbol&&Symbol.observable||"@@observable";function ge(e){return e}let p=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function S(e){return e&&e instanceof re||function f(e){return e&&E(e.next)&&E(e.error)&&E(e.complete)}(e)&&R(e)}(n)?n:new we(n,r,i);return q(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=c(r))((i,o)=>{const s=new we({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[le](){return this}pipe(...n){return function v(e){return 0===e.length?ge:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=c(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function c(e){var t;return null!==(t=null!=e?e:T.Promise)&&void 0!==t?t:Promise}const P=g(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let F=(()=>{class e extends p{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Z(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new P}next(n){q(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){q(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){q(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?A:(this.currentObservers=null,o.push(n),new y(()=>{this.currentObservers=null,M(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new p;return n.source=this,n}}return e.create=(t,n)=>new Z(t,n),e})();class Z extends F{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:A}}function ie(e){return E(null==e?void 0:e.lift)}function Q(e){return t=>{if(ie(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function J(e,t,n,r,i){return new Me(e,t,n,r,i)}class Me extends re{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function ne(e,t){return Q((n,r)=>{let i=0;n.subscribe(J(r,o=>{r.next(e.call(t,o,i++))}))})}function qe(e){return this instanceof qe?(this.v=e,this):new qe(e)}function Ue(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(m){r[m]&&(i[m]=function(x){return new Promise(function(L,K){o.push([m,x,L,K])>1||a(m,x)})})}function a(m,x){try{!function l(m){m.value instanceof qe?Promise.resolve(m.value.v).then(u,h):d(o[0][2],m)}(r[m](x))}catch(L){d(o[0][3],L)}}function u(m){a("next",m)}function h(m){a("throw",m)}function d(m,x){m(x),o.shift(),o.length&&a(o[0][0],o[0][1])}}function ht(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Ge(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,l){!function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}(a,l,(s=e[o](s)).done,s.value)})}}}const _t=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function dn(e){return E(null==e?void 0:e.then)}function xn(e){return E(e[le])}function Gn(e){return Symbol.asyncIterator&&E(null==e?void 0:e[Symbol.asyncIterator])}function X(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ee=function _e(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Oe(e){return E(null==e?void 0:e[Ee])}function Ke(e){return Ue(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield qe(n.read());if(i)return yield qe(void 0);yield yield qe(r)}}finally{n.releaseLock()}})}function it(e){return E(null==e?void 0:e.getReader)}function Ot(e){if(e instanceof p)return e;if(null!=e){if(xn(e))return function jt(e){return new p(t=>{const n=e[le]();if(E(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(_t(e))return function sn(e){return new p(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(dn(e))return function Rn(e){return new p(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,V)})}(e);if(Gn(e))return pn(e);if(Oe(e))return function vi(e){return new p(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(it(e))return function vn(e){return pn(Ke(e))}(e)}throw X(e)}function pn(e){return new p(t=>{(function en(e,t){var n,r,i,o;return function ke(e,t,n,r){return new(n||(n=Promise))(function(o,s){function a(h){try{u(r.next(h))}catch(d){s(d)}}function l(h){try{u(r.throw(h))}catch(d){s(d)}}function u(h){h.done?o(h.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(h.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=ht(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function an(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function tn(e,t,n=1/0){return E(t)?tn((r,i)=>ne((o,s)=>t(r,o,i,s))(Ot(e(r,i))),n):("number"==typeof t&&(n=t),Q((r,i)=>function Bn(e,t,n,r,i,o,s,a){const l=[];let u=0,h=0,d=!1;const m=()=>{d&&!l.length&&!u&&t.complete()},x=K=>u<r?L(K):l.push(K),L=K=>{o&&t.next(K),u++;let W=!1;Ot(n(K,h++)).subscribe(J(t,te=>{null==i||i(te),o?x(te):t.next(te)},()=>{W=!0},void 0,()=>{if(W)try{for(u--;l.length&&u<r;){const te=l.shift();s?an(t,s,()=>L(te)):L(te)}m()}catch(te){t.error(te)}}))};return e.subscribe(J(t,x,()=>{d=!0,m()})),()=>{null==a||a()}}(r,i,e,n)))}function mr(e=1/0){return tn(ge,e)}const cn=new p(e=>e.complete());function Qr(e){return e[e.length-1]}function Xn(e){return function oo(e){return e&&E(e.schedule)}(Qr(e))?e.pop():void 0}function Fo(e,t=0){return Q((n,r)=>{n.subscribe(J(r,i=>an(r,e,()=>r.next(i),t),()=>an(r,e,()=>r.complete(),t),i=>an(r,e,()=>r.error(i),t)))})}function so(e,t=0){return Q((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function hu(e,t){if(!e)throw new Error("Iterable cannot be null");return new p(n=>{an(n,t,()=>{const r=e[Symbol.asyncIterator]();an(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Pn(e,t){return t?function Uh(e,t){if(null!=e){if(xn(e))return function ys(e,t){return Ot(e).pipe(so(t),Fo(t))}(e,t);if(_t(e))return function Nh(e,t){return new p(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(dn(e))return function ao(e,t){return Ot(e).pipe(so(t),Fo(t))}(e,t);if(Gn(e))return hu(e,t);if(Oe(e))return function Lh(e,t){return new p(n=>{let r;return an(n,t,()=>{r=e[Ee](),an(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>E(null==r?void 0:r.return)&&r.return()})}(e,t);if(it(e))return function Bh(e,t){return hu(Ke(e),t)}(e,t)}throw X(e)}(e,t):Ot(e)}function Oo(e){return e<=0?()=>cn:Q((t,n)=>{let r=0;t.subscribe(J(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Ta(e,t,...n){return!0===t?(e(),null):!1===t?null:t(...n).pipe(Oo(1)).subscribe(()=>e())}function nn(e){for(let t in e)if(e[t]===nn)return t;throw Error("Could not find renamed property on target object.")}function oe(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(oe).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function j(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const H=nn({__forward_ref__:nn});function $(e){return e.__forward_ref__=$,e.toString=function(){return oe(this())},e}function he(e){return function de(e){return"function"==typeof e&&e.hasOwnProperty(H)&&e.__forward_ref__===$}(e)?e():e}class Se extends Error{constructor(t,n){super(function Ye(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}(t,n)),this.code=t}}function Re(e){return"string"==typeof e?e:null==e?"":String(e)}function Nt(e,t){throw new Se(-201,!1)}function Sn(e,t){null==e&&function Lt(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function It(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Br(e){return{providers:e.providers||[],imports:e.imports||[]}}function bs(e){return Ra(e,_s)||Ra(e,Dg)}function Ra(e,t){return e.hasOwnProperty(t)?e[t]:null}function gu(e){return e&&(e.hasOwnProperty($h)||e.hasOwnProperty(yC))?e[$h]:null}const _s=nn({\u0275prov:nn}),$h=nn({\u0275inj:nn}),Dg=nn({ngInjectableDef:nn}),yC=nn({ngInjectorDef:nn});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let Hh;function yi(e){const t=Hh;return Hh=e,t}function Eg(e,t,n){const r=bs(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&bt.Optional?null:void 0!==t?t:void Nt(oe(e))}function co(e){return{toString:e}.toString()}var ti=(()=>((ti=ti||{})[ti.OnPush=0]="OnPush",ti[ti.Default=1]="Default",ti))(),xi=(()=>{return(e=xi||(xi={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",xi;var e})();const on=(()=>"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self)(),Ds={},Qt=[],mu=nn({\u0275cmp:nn}),zh=nn({\u0275dir:nn}),Gh=nn({\u0275pipe:nn}),Cg=nn({\u0275mod:nn}),Li=nn({\u0275fac:nn}),Pa=nn({__NG_ELEMENT_ID__:nn});let bC=0;function Es(e){return co(()=>{const n=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===ti.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||Qt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||xi.Emulated,id:"c"+bC++,styles:e.styles||Qt,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.dependencies,s=e.features;return i.inputs=Ag(e.inputs,r),i.outputs=Ag(e.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(Mg).filter(Sg):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(lr).filter(Sg):null,i})}function Mg(e){return ln(e)||ar(e)}function Sg(e){return null!==e}const DC={};function No(e){return co(()=>{const t={type:e.type,bootstrap:e.bootstrap||Qt,declarations:e.declarations||Qt,imports:e.imports||Qt,exports:e.exports||Qt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(DC[e.id]=e.type),t})}function Ag(e,t){if(null==e)return Ds;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}const Kn=Es;function ln(e){return e[mu]||null}function ar(e){return e[zh]||null}function lr(e){return e[Gh]||null}function Ir(e,t){const n=e[Cg]||null;if(!n&&!0===t)throw new Error(`Type ${oe(e)} does not have '\u0275mod' property.`);return n}function yr(e){return Array.isArray(e)&&"object"==typeof e[1]}function ri(e){return Array.isArray(e)&&!0===e[1]}function Xh(e){return 0!=(8&e.flags)}function xu(e){return 2==(2&e.flags)}function bu(e){return 1==(1&e.flags)}function ii(e){return null!==e.template}function AC(e){return 0!=(256&e[2])}function Vo(e,t){return e.hasOwnProperty(Li)?e[Li]:null}class RC{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Rg(e){return e.type.prototype.ngOnChanges&&(e.setInput=kC),PC}function PC(){const e=kg(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===Ds)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function kC(e,t,n,r){const i=kg(e)||function FC(e,t){return e[Pg]=t}(e,{previous:Ds,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],l=s[a];o[a]=new RC(l&&l.currentValue,t,s===Ds),e[r]=t}const Pg="__ngSimpleChanges__";function kg(e){return e[Pg]||null}let Jh;function bn(e){return!!e.listen}const Og={createRenderer:(e,t)=>{throw new Error("Renderer3 disabled")}};function kn(e){for(;Array.isArray(e);)e=e[0];return e}function Vr(e,t){return kn(t[e.index])}function tf(e,t){return e.data[t]}function Rr(e,t){const n=t[e];return yr(n)?n:n[0]}function Ng(e){return 4==(4&e[2])}function nf(e){return 64==(64&e[2])}function ho(e,t){return null==t?null:e[t]}function Lg(e){e[18]=0}function rf(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Mt={lFrame:Yg(null),bindingsEnabled:!0};function Ug(){return Mt.bindingsEnabled}function Ve(){return Mt.lFrame.lView}function Wt(){return Mt.lFrame.tView}function Bi(e){return Mt.lFrame.contextLView=e,e[8]}function Ui(e){return Mt.lFrame.contextLView=null,e}function jn(){let e=jg();for(;null!==e&&64===e.type;)e=e.parent;return e}function jg(){return Mt.lFrame.currentTNode}function bi(e,t){const n=Mt.lFrame;n.currentTNode=e,n.isParent=t}function sf(){return Mt.lFrame.isParent}function Ts(){return Mt.lFrame.bindingIndex++}function QC(e,t){const n=Mt.lFrame;n.bindingIndex=n.bindingRootIndex=e,lf(t)}function lf(e){Mt.lFrame.currentDirectiveIndex=e}function Hg(){return Mt.lFrame.currentQueryIndex}function cf(e){Mt.lFrame.currentQueryIndex=e}function e2(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function zg(e,t,n){if(n&bt.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&bt.Host||(i=e2(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;t=i,e=o}const r=Mt.lFrame=Gg();return r.currentTNode=t,r.lView=e,!0}function Eu(e){const t=Gg(),n=e[1];Mt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Gg(){const e=Mt.lFrame,t=null===e?null:e.child;return null===t?Yg(e):t}function Yg(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Wg(){const e=Mt.lFrame;return Mt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Xg=Wg;function Cu(){const e=Wg();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function cr(){return Mt.lFrame.selectedIndex}function fo(e){Mt.lFrame.selectedIndex=e}function Mu(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(e.contentHooks||(e.contentHooks=[])).push(-n,s),a&&((e.contentHooks||(e.contentHooks=[])).push(n,a),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,a)),l&&(e.viewHooks||(e.viewHooks=[])).push(-n,l),u&&((e.viewHooks||(e.viewHooks=[])).push(n,u),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,u)),null!=h&&(e.destroyHooks||(e.destroyHooks=[])).push(n,h)}}function Su(e,t,n){Zg(e,t,3,n)}function Au(e,t,n,r){(3&e[2])===n&&Zg(e,t,n,r)}function hf(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Zg(e,t,n,r){const o=null!=r?r:-1,s=t.length-1;let a=0;for(let l=void 0!==r?65535&e[18]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(e[18]+=65536),(a<o||-1==o)&&(u2(e,n,t,l),e[18]=(4294901760&e[18])+l+2),l++}function u2(e,t,n,r){const i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class La{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Iu(e,t,n){const r=bn(e);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],l=n[i++];r?e.setAttribute(t,a,l,s):t.setAttributeNS(s,a,l)}else{const s=o,a=n[++i];df(s)?r&&e.setProperty(t,s,a):r?e.setAttribute(t,s,a):t.setAttribute(s,a),i++}}return i}function qg(e){return 3===e||4===e||6===e}function df(e){return 64===e.charCodeAt(0)}function Tu(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Kg(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Kg(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function Qg(e){return-1!==e}function Rs(e){return 32767&e}function Ps(e,t){let n=function p2(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let pf=!0;function Ru(e){const t=pf;return pf=e,t}let g2=0;const _i={};function Ua(e,t){const n=mf(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,gf(r.data,e),gf(t,null),gf(r.blueprint,null));const i=Pu(e,t),o=e.injectorIndex;if(Qg(i)){const s=Rs(i),a=Ps(i,t),l=a[1].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|l[s+u]}return t[o+8]=i,o}function gf(e,t){e.push(0,0,0,0,0,0,0,0,t)}function mf(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Pu(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=am(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function ku(e,t,n){!function m2(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Pa)&&(r=n[Pa]),null==r&&(r=n[Pa]=g2++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function tm(e,t,n){if(n&bt.Optional)return e;Nt()}function nm(e,t,n,r){if(n&bt.Optional&&void 0===r&&(r=null),0==(n&(bt.Self|bt.Host))){const i=e[9],o=yi(void 0);try{return i?i.get(t,r,n&bt.Optional):Eg(t,r,n&bt.Optional)}finally{yi(o)}}return tm(r,0,n)}function rm(e,t,n,r=bt.Default,i){if(null!==e){if(1024&t[2]){const s=function _2(e,t,n,r,i){let o=e,s=t;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=im(o,s,n,r|bt.Self,_i);if(a!==_i)return a;let l=o.parent;if(!l){const u=s[21];if(u){const h=u.get(n,_i,r);if(h!==_i)return h}l=am(s),s=s[15]}o=l}return i}(e,t,n,r,_i);if(s!==_i)return s}const o=im(e,t,n,r,_i);if(o!==_i)return o}return nm(t,n,r,i)}function im(e,t,n,r,i){const o=function y2(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Pa)?e[Pa]:void 0;return"number"==typeof t?t>=0?255&t:x2:t}(n);if("function"==typeof o){if(!zg(t,e,r))return r&bt.Host?tm(i,0,r):nm(t,n,r,i);try{const s=o(r);if(null!=s||r&bt.Optional)return s;Nt()}finally{Xg()}}else if("number"==typeof o){let s=null,a=mf(e,t),l=-1,u=r&bt.Host?t[16][6]:null;for((-1===a||r&bt.SkipSelf)&&(l=-1===a?Pu(e,t):t[a+8],-1!==l&&sm(r,!1)?(s=t[1],a=Rs(l),t=Ps(l,t)):a=-1);-1!==a;){const h=t[1];if(om(o,a,h.data)){const d=w2(a,t,n,s,r,u);if(d!==_i)return d}l=t[a+8],-1!==l&&sm(r,t[1].data[a+8]===u)&&om(o,a,t)?(s=h,a=Rs(l),t=Ps(l,t)):a=-1}}return i}function w2(e,t,n,r,i,o){const s=t[1],a=s.data[e+8],h=Fu(a,s,n,null==r?xu(a)&&pf:r!=s&&0!=(3&a.type),i&bt.Host&&o===a);return null!==h?ja(t,s,h,a):_i}function Fu(e,t,n,r,i){const o=e.providerIndexes,s=t.data,a=1048575&o,l=e.directiveStart,h=o>>20,m=i?a+h:e.directiveEnd;for(let x=r?a:a+h;x<m;x++){const L=s[x];if(x<l&&n===L||x>=l&&L.type===n)return x}if(i){const x=s[l];if(x&&ii(x)&&x.type===n)return l}return null}function ja(e,t,n,r){let i=e[n];const o=t.data;if(function c2(e){return e instanceof La}(i)){const s=i;s.resolving&&function Fe(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Se(-200,`Circular dependency in DI detected for ${e}${n}`)}(function Ie(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Re(e)}(o[n]));const a=Ru(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?yi(s.injectImpl):null;zg(e,r,bt.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function l2(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=Rg(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==l&&yi(l),Ru(a),s.resolving=!1,Xg()}}return i}function om(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function sm(e,t){return!(e&bt.Self||e&bt.Host&&t)}class ks{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return rm(this._tNode,this._lView,t,r,n)}}function x2(){return new ks(jn(),Ve())}function am(e){const t=e[1],n=t.type;return 2===n?t.declTNode:1===n?e[6]:null}const Os="__parameters__";function Ls(e,t,n){return co(()=>{const r=function wf(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(l,u,h){const d=l.hasOwnProperty(Os)?l[Os]:Object.defineProperty(l,Os,{value:[]})[Os];for(;d.length<=h;)d.push(null);return(d[h]=d[h]||[]).push(s),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class At{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=It({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const E2=new At("AnalyzeForEntryComponents");function Pr(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),Pr(r,t)):t!==e&&t.push(r)}return t}function $i(e,t){e.forEach(n=>Array.isArray(n)?$i(n,t):t(n))}function um(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ou(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Ga={},_f="__NG_DI_FLAG__",Lu="ngTempTokenPath",O2=/\n/gm,dm="__source";let Ya;function Bu(e){const t=Ya;return Ya=e,t}function L2(e,t=bt.Default){if(void 0===Ya)throw new Se(-203,!1);return null===Ya?Eg(e,void 0,t):Ya.get(e,t&bt.Optional?null:void 0,t)}function wt(e,t=bt.Default){return(function xC(){return Hh}()||L2)(he(e),t)}function Ho(e,t=bt.Default){return wt(e,t)}function Df(e){const t=[];for(let n=0;n<e.length;n++){const r=he(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Se(900,!1);let i,o=bt.Default;for(let s=0;s<r.length;s++){const a=r[s],l=B2(a);"number"==typeof l?-1===l?i=a.token:o|=l:i=a}t.push(wt(i,o))}else t.push(wt(r))}return t}function Wa(e,t){return e[_f]=t,e.prototype[_f]=t,e}function B2(e){return e[_f]}const go=Wa(Ls("Optional"),8),Xa=Wa(Ls("SkipSelf"),4);class Cm{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const aM=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,lM=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Fn=(()=>((Fn=Fn||{})[Fn.NONE=0]="NONE",Fn[Fn.HTML=1]="HTML",Fn[Fn.STYLE=2]="STYLE",Fn[Fn.SCRIPT=3]="SCRIPT",Fn[Fn.URL=4]="URL",Fn[Fn.RESOURCE_URL=5]="RESOURCE_URL",Fn))();function zo(e){const t=function Ja(){const e=Ve();return e&&e[12]}();return t?t.sanitize(Fn.URL,e)||"":function Ka(e,t){const n=function rM(e){return e instanceof Cm&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}(e,"URL")?function mo(e){return e instanceof Cm?e.changingThisBreaksApplicationSecurity:e}(e):function Hu(e){return(e=String(e)).match(aM)||e.match(lM)?e:"unsafe:"+e}(Re(e))}function Pf(e){return e.ngOriginalError}class Vs{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Pf(t);for(;n&&Pf(n);)n=Pf(n);return n||null}}const kf=new Map;let TM=0;const Of="__ngContext__";function er(e,t){yr(t)?(e[Of]=t[20],function PM(e){kf.set(e[20],e)}(t)):e[Of]=t}function el(e){const t=e[Of];return"number"==typeof t?function Om(e){return kf.get(e)||null}(t):t||null}function Nf(e){const t=el(e);return t?yr(t)?t:t.lView:null}const VM=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(on))();function Hi(e){return e instanceof Function?e():e}var xr=(()=>((xr=xr||{})[xr.Important=1]="Important",xr[xr.DashCase=2]="DashCase",xr))();function Bf(e,t){return undefined(e,t)}function tl(e){const t=e[3];return ri(t)?t[3]:t}function Uf(e){return zm(e[13])}function jf(e){return zm(e[4])}function zm(e){for(;null!==e&&!ri(e);)e=e[4];return e}function Hs(e,t,n,r,i){if(null!=r){let o,s=!1;ri(r)?o=r:yr(r)&&(s=!0,r=r[0]);const a=kn(r);0===e&&null!==n?null==i?qm(t,n,a):Go(t,n,a,i||null,!0):1===e&&null!==n?Go(t,n,a,i||null,!0):2===e?function i1(e,t,n){const r=Gu(e,t);r&&function nS(e,t,n,r){bn(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function oS(e,t,n,r,i){const o=n[7];o!==kn(n)&&Hs(t,e,r,o,i);for(let a=10;a<n.length;a++){const l=n[a];nl(l[1],l,e,t,r,o)}}(t,e,o,n,i)}}function $f(e,t,n){if(bn(e))return e.createElement(t,n);{const r=null!==n?function BC(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(n):null;return null===r?e.createElement(t):e.createElementNS(r,t)}}function Ym(e,t){const n=e[9],r=n.indexOf(t),i=t[3];512&t[2]&&(t[2]&=-513,rf(i,-1)),n.splice(r,1)}function Hf(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&Ym(i,r),t>0&&(e[n-1][4]=r[4]);const o=Ou(e,10+t);!function XM(e,t){nl(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Wm(e,t){if(!(128&t[2])){const n=t[11];bn(n)&&n.destroyNode&&nl(e,t,n,3,null,null),function KM(e){let t=e[13];if(!t)return zf(e[1],e);for(;t;){let n=null;if(yr(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)yr(t)&&zf(t[1],t),t=t[3];null===t&&(t=e),yr(t)&&zf(t[1],t),n=t&&t[4]}t=n}}(t)}}function zf(e,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function tS(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof La)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(i)}finally{}}}}(e,t),function eS(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+1],a="function"==typeof s?s(t):kn(t[s]),l=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?a.removeEventListener(n[o],l,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const s=r[i=n[o+1]];n[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();t[7]=null}}(e,t),1===t[1].type&&bn(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&ri(t[3])){n!==t[3]&&Ym(n,t);const r=t[19];null!==r&&r.detachView(e)}!function kM(e){kf.delete(e[20])}(t)}}function Xm(e,t,n){return function Zm(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===xi.None||i===xi.Emulated)return null}return Vr(r,n)}(e,t.parent,n)}function Go(e,t,n,r,i){bn(e)?e.insertBefore(t,n,r,i):(Qm(t)?t.content:t).insertBefore(n,r,i)}function qm(e,t,n){bn(e)?e.appendChild(t,n):(Qm(t)?t.content:t).appendChild(n)}function Km(e,t,n,r,i){null!==r?Go(e,t,n,r,i):qm(e,t,n)}function Qm(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}function Gu(e,t){return bn(e)?e.parentNode(t):t.parentNode}let t1=function e1(e,t,n){return 40&e.type?Vr(e,n):null};function Yu(e,t,n,r){const i=Xm(e,r,t),o=t[11],a=function Jm(e,t,n){return t1(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)Km(o,i,n[l],a,!1);else Km(o,i,n,a,!1)}function Wu(e,t){if(null!==t){const n=t.type;if(3&n)return Vr(t,e);if(4&n)return Yf(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Wu(e,r);{const i=e[t.index];return ri(i)?Yf(-1,i):kn(i)}}if(32&n)return Bf(t,e)()||kn(e[t.index]);{const r=r1(e,t);return null!==r?Array.isArray(r)?r[0]:Wu(tl(e[16]),r):Wu(e,t.next)}}return null}function r1(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Yf(e,t){const n=10+e+1;if(n<t.length){const r=t[n],i=r[1].firstChild;if(null!==i)return Wu(r,i)}return t[7]}function Wf(e,t,n,r,i,o,s){for(;null!=n;){const a=r[n.index],l=n.type;if(s&&0===t&&(a&&er(kn(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)Wf(e,t,n.child,r,i,o,!1),Hs(t,e,i,a,o);else if(32&l){const u=Bf(n,r);let h;for(;h=u();)Hs(t,e,i,h,o);Hs(t,e,i,a,o)}else 16&l?o1(e,t,r,n,i,o):Hs(t,e,i,a,o);n=s?n.projectionNext:n.next}}function nl(e,t,n,r,i,o){Wf(n,r,e.firstChild,t,i,o,!1)}function o1(e,t,n,r,i,o){const s=n[16],l=s[6].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)Hs(t,e,i,l[u],o);else Wf(e,t,l,s[3],i,o,!0)}function s1(e,t,n){bn(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Xf(e,t,n){bn(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function a1(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}const l1="ng-template";function aS(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==a1(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function u1(e){return 4===e.type&&e.value!==l1}function lS(e,t,n){return t===(4!==e.type||n?e.value:l1)}function uS(e,t,n){let r=4;const i=e.attrs||[],o=function fS(e){for(let t=0;t<e.length;t++)if(qg(e[t]))return t;return e.length}(i);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!lS(e,l,n)||""===l&&1===t.length){if(oi(r))return!1;s=!0}}else{const u=8&r?l:t[++a];if(8&r&&null!==e.attrs){if(!aS(e.attrs,u,n)){if(oi(r))return!1;s=!0}continue}const d=cS(8&r?"class":l,i,u1(e),n);if(-1===d){if(oi(r))return!1;s=!0;continue}if(""!==u){let m;m=d>o?"":i[d+1].toLowerCase();const x=8&r?m:null;if(x&&-1!==a1(x,u,0)||2&r&&u!==m){if(oi(r))return!1;s=!0}}}}else{if(!s&&!oi(r)&&!oi(l))return!1;if(s&&oi(l))continue;s=!1,r=l|1&r}}return oi(r)||s}function oi(e){return 0==(1&e)}function cS(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function dS(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function c1(e,t,n=!1){for(let r=0;r<t.length;r++)if(uS(e,t[r],n))return!0;return!1}function h1(e,t){return e?":not("+t.trim()+")":t}function gS(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!oi(s)&&(t+=h1(o,i),i=""),r=s,o=o||!oi(r);n++}return""!==i&&(t+=h1(o,i)),t}const St={};function $r(e){f1(Wt(),Ve(),cr()+e,!1)}function f1(e,t,n,r){if(!r)if(3==(3&t[2])){const o=e.preOrderCheckHooks;null!==o&&Su(t,o,n)}else{const o=e.preOrderHooks;null!==o&&Au(t,o,0,n)}fo(n)}const Zf=new At("ENVIRONMENT_INITIALIZER"),m1=new At("INJECTOR_DEF_TYPES");function DS(...e){return{\u0275providers:v1(0,e)}}function v1(e,...t){const n=[],r=new Set;let i;return $i(t,o=>{const s=o;qf(s,n,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&w1(i,n),n}function w1(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];$i(i,o=>{t.push(o)})}}function qf(e,t,n,r){if(!(e=he(e)))return!1;let i=null,o=gu(e);const s=!o&&ln(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const l=e.ngModule;if(o=gu(l),!o)return!1;i=l}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of l)qf(u,t,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{$i(o.imports,h=>{qf(h,t,n,r)&&(u||(u=[]),u.push(h))})}finally{}void 0!==u&&w1(u,t)}if(!a){const u=Vo(i)||(()=>new i);t.push({provide:i,useFactory:u,deps:Qt},{provide:m1,useValue:i,multi:!0},{provide:Zf,useValue:()=>wt(i),multi:!0})}const l=o.providers;null==l||a||$i(l,h=>{t.push(h)})}}return i!==e&&void 0!==e.providers}const ES=nn({provide:String,useValue:nn});function Kf(e){return null!==e&&"object"==typeof e&&ES in e}function Yo(e){return"function"==typeof e}const Qf=new At("INJECTOR",-1);class b1{get(t,n=Ga){if(n===Ga){const r=new Error(`NullInjectorError: No provider for ${oe(t)}!`);throw r.name="NullInjectorError",r}return n}}const Jf=new At("Set Injector scope."),Xu={},MS={};let ed;function td(){return void 0===ed&&(ed=new b1),ed}class Wo{}class _1 extends Wo{constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rd(t,s=>this.processProvider(s)),this.records.set(Qf,zs(void 0,this)),i.has("environment")&&this.records.set(Wo,zs(void 0,this));const o=this.records.get(Jf);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(m1.multi,Qt,bt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}get(t,n=Ga,r=bt.Default){this.assertNotDestroyed();const i=Bu(this),o=yi(void 0);try{if(!(r&bt.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function RS(e){return"function"==typeof e||"object"==typeof e&&e instanceof At}(t)&&bs(t);a=l&&this.injectableDefInScope(l)?zs(nd(t),Xu):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&bt.Self?td():this.parent).get(t,n=r&bt.Optional&&n===Ga?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[Lu]=s[Lu]||[]).unshift(oe(t)),i)throw s;return function U2(e,t,n,r){const i=e[Lu];throw t[dm]&&i.unshift(t[dm]),e.message=function j2(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=oe(t);if(Array.isArray(t))i=t.map(oe).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):oe(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(O2,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[Lu]=null,e}(s,t,"R3InjectorError",this.source)}throw s}finally{yi(o),Bu(i)}}resolveInjectorInitializers(){const t=Bu(this),n=yi(void 0);try{const r=this.get(Zf.multi,Qt,bt.Self);for(const i of r)i()}finally{Bu(t),yi(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(oe(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(t){let n=Yo(t=he(t))?t:he(t&&t.provide);const r=function AS(e){return Kf(e)?zs(void 0,e.useValue):zs(function D1(e,t,n){let r;if(Yo(e)){const i=he(e);return Vo(i)||nd(i)}if(Kf(e))r=()=>he(e.useValue);else if(function x1(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Df(e.deps||[]));else if(function y1(e){return!(!e||!e.useExisting)}(e))r=()=>wt(he(e.useExisting));else{const i=he(e&&(e.useClass||e.provide));if(!function IS(e){return!!e.deps}(e))return Vo(i)||nd(i);r=()=>new i(...Df(e.deps))}return r}(e),Xu)}(t);if(Yo(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=zs(void 0,Xu,!0),i.factory=()=>Df(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Xu&&(n.value=MS,n.value=n.factory()),"object"==typeof n.value&&n.value&&function TS(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=he(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function nd(e){const t=bs(e),n=null!==t?t.factory:Vo(e);if(null!==n)return n;if(e instanceof At)throw new Se(204,!1);if(e instanceof Function)return function SS(e){const t=e.length;if(t>0)throw function za(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new Se(204,!1);const n=function du(e){const t=e&&(e[_s]||e[Dg]);if(t){const n=function pu(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Se(204,!1)}function zs(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function PS(e){return!!e.\u0275providers}function rd(e,t){for(const n of e)Array.isArray(n)?rd(n,t):PS(n)?rd(n.\u0275providers,t):t(n)}function E1(e,t=null,n=null,r){const i=C1(e,t,n,r);return i.resolveInjectorInitializers(),i}function C1(e,t=null,n=null,r,i=new Set){const o=[n||Qt,DS(e)];return r=r||("object"==typeof e?void 0:oe(e)),new _1(o,t||td(),r||null,i)}let br=(()=>{class e{static create(n,r){var i;if(Array.isArray(n))return E1({name:""},r,n,"");{const o=null!==(i=n.name)&&void 0!==i?i:"";return E1({name:o},n.parent,n.providers,o)}}}return e.THROW_IF_NOT_FOUND=Ga,e.NULL=new b1,e.\u0275prov=It({token:e,providedIn:"any",factory:()=>wt(Qf)}),e.__NG_ELEMENT_ID__=-1,e})();function gt(e,t=bt.Default){const n=Ve();return null===n?wt(e,t):rm(jn(),n,he(e),t)}function ld(){throw new Error("invalid")}function G1(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const s=e.data[o];cf(i),s.contentQueries(2,t[o],o)}}}function rl(e,t,n,r,i,o,s,a,l,u,h){const d=t.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==h||e&&1024&e[2])&&(d[2]|=1024),Lg(d),d[3]=d[15]=e,d[8]=n,d[10]=s||e&&e[10],d[11]=a||e&&e[11],d[12]=l||e&&e[12]||null,d[9]=u||e&&e[9]||null,d[6]=o,d[20]=function RM(){return TM++}(),d[21]=h,d[16]=2==t.type?e[16]:d,d}function Ys(e,t,n,r,i){let o=e.data[t];if(null===o)o=function Dd(e,t,n,r,i){const o=jg(),s=sf(),l=e.data[t]=function cA(e,t,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(e,t,n,r,i),function KC(){return Mt.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Na(){const e=Mt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return bi(o,!0),o}function Ws(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function il(e,t,n){Eu(t);try{const r=e.viewQuery;null!==r&&Pd(1,r,n);const i=e.template;null!==i&&Y1(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&G1(e,t),e.staticViewQueries&&Pd(2,e.viewQuery,n);const o=e.components;null!==o&&function aA(e,t){for(let n=0;n<t.length;n++)AA(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,Cu()}}function Xs(e,t,n,r){const i=t[2];if(128!=(128&i)){Eu(t);try{Lg(t),function Vg(e){return Mt.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Y1(e,t,n,2,r);const s=3==(3&i);if(s){const u=e.preOrderCheckHooks;null!==u&&Su(t,u,null)}else{const u=e.preOrderHooks;null!==u&&Au(t,u,0,null),hf(t,0)}if(function MA(e){for(let t=Uf(e);null!==t;t=jf(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(512&i[2])&&rf(o,1),i[2]|=512}}}(t),function CA(e){for(let t=Uf(e);null!==t;t=jf(t))for(let n=10;n<t.length;n++){const r=t[n],i=r[1];nf(r)&&Xs(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&G1(e,t),s){const u=e.contentCheckHooks;null!==u&&Su(t,u)}else{const u=e.contentHooks;null!==u&&Au(t,u,1),hf(t,1)}!function oA(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)fo(~i);else{const o=i,s=n[++r],a=n[++r];QC(s,o),a(2,t[o])}}}finally{fo(-1)}}(e,t);const a=e.components;null!==a&&function sA(e,t){for(let n=0;n<t.length;n++)SA(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&Pd(2,l,r),s){const u=e.viewCheckHooks;null!==u&&Su(t,u)}else{const u=e.viewHooks;null!==u&&Au(t,u,2),hf(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,rf(t[3],-1))}finally{Cu()}}}function lA(e,t,n,r){const i=t[10],s=Ng(t);try{!s&&i.begin&&i.begin(),s&&il(e,t,r),Xs(e,t,n,r)}finally{!s&&i.end&&i.end()}}function Y1(e,t,n,r,i){const o=cr(),s=2&r;try{fo(-1),s&&t.length>22&&f1(e,t,22,!1),n(r,i)}finally{fo(o)}}function Ed(e,t,n){!Ug()||(function vA(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Ua(n,t),er(r,t);const s=n.initialInputs;for(let a=i;a<o;a++){const l=e.data[a],u=ii(l);u&&_A(t,n,l);const h=ja(t,e,a,n);er(h,t),null!==s&&DA(0,a-i,h,l,0,s),u&&(Rr(n.index,t)[8]=h)}}(e,t,n,Vr(n,t)),128==(128&n.flags)&&function wA(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function JC(){return Mt.lFrame.currentDirectiveIndex}();try{fo(o);for(let a=r;a<i;a++){const l=e.data[a],u=t[a];lf(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&ev(l,u)}}finally{fo(-1),lf(s)}}(e,t,n))}function Cd(e,t,n=Vr){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(t,e):e[s];e[i++]=a}}}function X1(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Ju(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Ju(e,t,n,r,i,o,s,a,l,u){const h=22+r,d=h+i,m=function uA(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:St);return n}(h,d),x="function"==typeof u?u():u;return m[1]={type:e,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:t,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:x,incompleteFirstPass:!1}}function K1(e,t,n,r){const i=sv(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&av(e).push(r,i.length-1))}function Q1(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Md(e,t,n,r){let i=!1;if(Ug()){const o=function yA(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];c1(n,s.selectors,!1)&&(i||(i=[]),ku(Ua(n,t),e,s.type),ii(s)?(tv(e,n),i.unshift(s)):i.push(s))}return i}(e,t,n),s=null===r?null:{"":-1};if(null!==o){i=!0,nv(n,e.data.length,o.length);for(let h=0;h<o.length;h++){const d=o[h];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,u=Ws(e,t,o.length,null);for(let h=0;h<o.length;h++){const d=o[h];n.mergedAttrs=Tu(n.mergedAttrs,d.hostAttrs),rv(e,n,t,u,d),bA(u,d,s),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);const m=d.type.prototype;!a&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),a=!0),!l&&(m.ngOnChanges||m.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),l=!0),u++}!function hA(e,t){const r=t.directiveEnd,i=e.data,o=t.attrs,s=[];let a=null,l=null;for(let u=t.directiveStart;u<r;u++){const h=i[u],d=h.inputs,m=null===o||u1(t)?null:EA(d,o);s.push(m),a=Q1(d,u,a),l=Q1(h.outputs,u,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=a,t.outputs=l}(e,n)}s&&function xA(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new Se(-301,!1);r.push(t[i],o)}}}(n,r,s)}return n.mergedAttrs=Tu(n.mergedAttrs,n.attrs),i}function J1(e,t,n,r,i,o){const s=o.hostBindings;if(s){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const l=~t.index;(function mA(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(a)!=l&&a.push(l),a.push(r,i,s)}}function ev(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function tv(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function bA(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ii(t)&&(n[""]=e)}}function nv(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function rv(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=Vo(i.type)),s=new La(o,ii(i),gt);e.blueprint[r]=s,n[r]=s,J1(e,t,0,r,Ws(e,n,i.hostVars,St),i)}function _A(e,t,n){const r=Vr(t,e),i=X1(n),o=e[10],s=ec(e,rl(e,i,null,n.onPush?32:16,r,t,o,o.createRenderer(r,n),null,null,null));e[t.index]=s}function DA(e,t,n,r,i,o){const s=o[t];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const u=s[l++],h=s[l++],d=s[l++];null!==a?r.setInput(n,d,u,h):n[h]=d}}}function EA(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function iv(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function SA(e,t){const n=Rr(t,e);if(nf(n)){const r=n[1];48&n[2]?Xs(r,n,r.template,n[8]):n[5]>0&&Ad(n)}}function Ad(e){for(let r=Uf(e);null!==r;r=jf(r))for(let i=10;i<r.length;i++){const o=r[i];if(512&o[2]){const s=o[1];Xs(s,o,s.template,o[8])}else o[5]>0&&Ad(o)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Rr(n[r],e);nf(i)&&i[5]>0&&Ad(i)}}function AA(e,t){const n=Rr(t,e),r=n[1];(function IA(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),il(r,n,n[8])}function ec(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Id(e){for(;e;){e[2]|=32;const t=tl(e);if(AC(e)&&!t)return e;e=t}return null}function ov(e){!function Td(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Nf(n);if(null!==r){const i=r[1];lA(i,r,i.template,n)}}}(e[8])}function Pd(e,t,n){cf(0),t(e,n)}const RA=(()=>Promise.resolve(null))();function sv(e){return e[7]||(e[7]=[])}function av(e){return e.cleanup||(e.cleanup=[])}function uv(e,t){const n=e[9],r=n?n.get(Vs,null):null;r&&r.handleError(t)}function cv(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=t[s],u=e.data[s];null!==u.setInput?u.setInput(l,i,r,a):l[a]=i}}function Gi(e,t,n){const r=function _u(e,t){return kn(t[e])}(t,e);!function Gm(e,t,n){bn(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}function tc(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?i=j(i,a):2==o&&(r=j(r,a+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function $A(){const e=jn();Mu(Ve()[1],e)}let nc=null;function Xo(){if(!nc){const e=on.Symbol;if(e&&e.iterator)nc=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(nc=r)}}}return nc}function tr(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function yo(e,t,n,r,i,o,s,a){const l=Ve(),u=Wt(),h=e+22,d=u.firstCreatePass?function JA(e,t,n,r,i,o,s,a,l){const u=t.consts,h=Ys(t,e,4,s||null,ho(u,a));Md(t,n,h,ho(u,l)),Mu(t,h);const d=h.tViews=Ju(2,h,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u);return null!==t.queries&&(t.queries.template(t,h),d.queries=t.queries.embeddedTView(h)),h}(h,u,l,t,n,r,i,o,s):u.data[h];bi(d,!1);const m=l[11].createComment("");Yu(u,l,m,d),er(m,l),ec(l,l[h]=iv(m,l,m,d)),bu(d)&&Ed(u,l,d),null!=s&&Cd(l,d,a)}function nr(e,t,n){const r=Ve();return tr(r,Ts(),t)&&function Fr(e,t,n,r,i,o,s,a){const l=Vr(t,n);let h,u=t.inputs;!a&&null!=u&&(h=u[r])?(cv(e,n,h,r,i),xu(t)&&function dA(e,t){const n=Rr(t,e);16&n[2]||(n[2]|=32)}(n,t.index)):3&t.type&&(r=function fA(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,t.value||"",r):i,bn(o)?o.setProperty(l,r,i):df(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}(Wt(),function _n(){const e=Mt.lFrame;return tf(e.tView,e.selectedIndex)}(),r,e,t,r[11],n,!1),nr}function Ld(e,t,n,r,i){const s=i?"class":"style";cv(e,n,t.inputs[s],s,r)}function An(e,t,n,r){const i=Ve(),o=Wt(),s=22+e,a=i[11],l=i[s]=$f(a,t,function a2(){return Mt.lFrame.currentNamespace}()),u=o.firstCreatePass?function nI(e,t,n,r,i,o,s){const a=t.consts,u=Ys(t,e,2,i,ho(a,o));return Md(t,n,u,ho(a,s)),null!==u.attrs&&tc(u,u.attrs,!1),null!==u.mergedAttrs&&tc(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(s,o,i,0,t,n,r):o.data[s];bi(u,!0);const h=u.mergedAttrs;null!==h&&Iu(a,l,h);const d=u.classes;null!==d&&Xf(a,l,d);const m=u.styles;return null!==m&&s1(a,l,m),64!=(64&u.flags)&&Yu(o,i,l,u),0===function GC(){return Mt.lFrame.elementDepthCount}()&&er(l,i),function YC(){Mt.lFrame.elementDepthCount++}(),bu(u)&&(Ed(o,i,u),function W1(e,t,n){if(Xh(t)){const i=t.directiveEnd;for(let o=t.directiveStart;o<i;o++){const s=e.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}(o,u,i)),null!==r&&Cd(i,u),An}function Dn(){let e=jn();sf()?function af(){Mt.lFrame.isParent=!1}():(e=e.parent,bi(e,!1));const t=e;!function WC(){Mt.lFrame.elementDepthCount--}();const n=Wt();return n.firstCreatePass&&(Mu(n,e),Xh(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function f2(e){return 0!=(16&e.flags)}(t)&&Ld(n,t,Ve(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function d2(e){return 0!=(32&e.flags)}(t)&&Ld(n,t,Ve(),t.stylesWithoutHost,!1),Dn}function xo(e,t,n,r){return An(e,t,n,r),Dn(),xo}function al(){return Ve()}function ic(e){return!!e&&"function"==typeof e.then}const Ov=function Fv(e){return!!e&&"function"==typeof e.subscribe};function Or(e,t,n,r){const i=Ve(),o=Wt(),s=jn();return function Lv(e,t,n,r,i,o,s,a){const l=bu(r),h=e.firstCreatePass&&av(e),d=t[8],m=sv(t);let x=!0;if(3&r.type||a){const W=Vr(r,t),te=a?a(W):W,xe=m.length,pe=a?be=>a(kn(be[r.index])):r.index;if(bn(n)){let be=null;if(!a&&l&&(be=function iI(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=t[7],l=i[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(e,t,i,r.index)),null!==be)(be.__ngLastListenerFn__||be).__ngNextListenerFn__=o,be.__ngLastListenerFn__=o,x=!1;else{o=jd(r,t,d,o,!1);const Te=n.listen(te,i,o);m.push(o,Te),h&&h.push(i,pe,xe,xe+1)}}else o=jd(r,t,d,o,!0),te.addEventListener(i,o,s),m.push(o),h&&h.push(i,pe,xe,s)}else o=jd(r,t,d,o,!1);const L=r.outputs;let K;if(x&&null!==L&&(K=L[i])){const W=K.length;if(W)for(let te=0;te<W;te+=2){const Je=t[K[te]][K[te+1]].subscribe(o),Xe=m.length;m.push(o,Je),h&&h.push(i,r.index,Xe,-(Xe+1))}}}(o,i,i[11],s,e,t,!!n,r),Or}function Bv(e,t,n,r){try{return!1!==n(r)}catch(i){return uv(e,i),!1}}function jd(e,t,n,r,i){return function o(s){if(s===Function)return r;Id(2&e.flags?Rr(e.index,t):t);let l=Bv(t,0,r,s),u=o.__ngNextListenerFn__;for(;u;)l=Bv(t,0,u,s)&&l,u=u.__ngNextListenerFn__;return i&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function fr(e=1){return function t2(e){return(Mt.lFrame.contextLView=function n2(e,t){for(;e>0;)t=t[15],e--;return t}(e,Mt.lFrame.contextLView))[8]}(e)}function _r(e,t=""){const n=Ve(),r=Wt(),i=e+22,o=r.firstCreatePass?Ys(r,i,1,t,null):r.data[i],s=n[i]=function Vf(e,t){return bn(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Yu(r,n,s,o),bi(o,!1)}function Hd(e){return zd("",e,""),Hd}function zd(e,t,n){const r=Ve(),i=function qs(e,t,n,r){return tr(e,Ts(),n)?t+Re(n)+r:St}(r,e,t,n);return i!==St&&Gi(r,cr(),i),zd}const sa="en-US";let Tw=sa;class YT{resolveComponentFactory(t){throw function GT(e){const t=Error(`No component factory found for ${oe(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let dl=(()=>{class e{}return e.NULL=new YT,e})();class bo{}class ry{}class iy{}function XT(){return la(jn(),Ve())}function la(e,t){return new Yi(Vr(e,t))}let Yi=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=XT,e})();function ZT(e){return e instanceof Yi?e.nativeElement:e}class oy{}let QT=(()=>{class e{}return e.\u0275prov=It({token:e,providedIn:"root",factory:()=>null}),e})();class hc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const JT=new hc("14.0.4"),Kd={};function fc(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(kn(o)),ri(o))for(let a=10;a<o.length;a++){const l=o[a],u=l[1].firstChild;null!==u&&fc(l[1],l,u,r)}const s=n.type;if(8&s)fc(e,t,n.child,r);else if(32&s){const a=Bf(n,t);let l;for(;l=a();)r.push(l)}else if(16&s){const a=r1(t,n);if(Array.isArray(a))r.push(...a);else{const l=tl(t[16]);fc(l[1],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class pl{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return fc(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ri(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(Hf(t,r),Ou(n,r))}this._attachedToViewContainer=!1}Wm(this._lView[1],this._lView)}onDestroy(t){K1(this._lView[1],this._lView,null,t)}markForCheck(){Id(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Rd(e,t,n){const r=t[10];r.begin&&r.begin();try{Xs(e,t,e.template,n)}catch(i){throw uv(t,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function qM(e,t){nl(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=t}}class eR extends pl{constructor(t){super(t),this._view=t}detectChanges(){ov(this._view)}checkNoChanges(){}get context(){return null}}class Qd extends dl{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=ln(t);return new Jd(n,this.ngModule)}}function sy(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class nR{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){const i=this.injector.get(t,Kd,r);return i!==Kd||n===Kd?i:this.parentInjector.get(t,n,r)}}class Jd extends iy{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function mS(e){return e.map(gS).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return sy(this.componentDef.inputs)}get outputs(){return sy(this.componentDef.outputs)}create(t,n,r,i){let o=(i=i||this.ngModule)instanceof Wo?i:null==i?void 0:i.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new nR(t,o):t,a=s.get(oy,Og),l=s.get(QT,null),u=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",d=r?function q1(e,t,n){if(bn(e))return e.selectRootElement(t,n===xi.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(u,r,this.componentDef.encapsulation):$f(a.createRenderer(null,this.componentDef),h,function tR(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(h)),m=this.componentDef.onPush?288:272,x=function bv(e,t){return{components:[],scheduler:e||VM,clean:RA,playerHandler:t||null,flags:0}}(),L=Ju(0,null,null,1,0,null,null,null,null,null),K=rl(null,L,x,m,null,null,a,u,l,s,null);let W,te;Eu(K);try{const xe=function yv(e,t,n,r,i,o){const s=n[1];n[22]=e;const l=Ys(s,22,2,"#host",null),u=l.mergedAttrs=t.hostAttrs;null!==u&&(tc(l,u,!0),null!==e&&(Iu(i,e,u),null!==l.classes&&Xf(i,e,l.classes),null!==l.styles&&s1(i,e,l.styles)));const h=r.createRenderer(e,t),d=rl(n,X1(t),null,t.onPush?32:16,n[22],l,r,h,o||null,null,null);return s.firstCreatePass&&(ku(Ua(l,n),s,t.type),tv(s,l),nv(l,n.length,1)),ec(n,d),n[22]=d}(d,this.componentDef,K,a,u);if(d)if(r)Iu(u,d,["ng-version",JT.full]);else{const{attrs:pe,classes:be}=function vS(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!oi(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);pe&&Iu(u,d,pe),be&&be.length>0&&Xf(u,d,be.join(" "))}if(te=tf(L,22),void 0!==n){const pe=te.projection=[];for(let be=0;be<this.ngContentSelectors.length;be++){const Te=n[be];pe.push(null!=Te?Array.from(Te):null)}}W=function xv(e,t,n,r,i){const o=n[1],s=function gA(e,t,n){const r=jn();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),rv(e,r,t,Ws(e,t,1,null),n));const i=ja(t,e,r.directiveStart,r);er(i,t);const o=Vr(r,t);return o&&er(o,t),i}(o,n,t);if(r.components.push(s),e[8]=s,null!==i)for(const l of i)l(s,t);if(t.contentQueries){const l=jn();t.contentQueries(1,s,l.directiveStart)}const a=jn();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(fo(a.index),J1(n[1],a,0,a.directiveStart,a.directiveEnd,t),ev(t,s)),s}(xe,this.componentDef,K,x,[$A]),il(L,K,null)}finally{Cu()}return new iR(this.componentType,W,la(te,K),K,te)}}class iR extends class WT{}{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new eR(i),this.componentType=t}get injector(){return new ks(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class ay extends bo{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Qd(this);const r=Ir(t);this._bootstrapComponents=Hi(r.bootstrap),this._r3Injector=C1(t,n,[{provide:bo,useValue:this},{provide:dl,useValue:this.componentFactoryResolver}],oe(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(t)}get(t,n=br.THROW_IF_NOT_FOUND,r=bt.Default){return t===br||t===bo||t===Qf?this:this._r3Injector.get(t,n,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ep extends ry{constructor(t){super(),this.moduleType=t}create(t){return new ay(this.moduleType,t)}}class sR extends bo{constructor(t,n,r){super(),this.componentFactoryResolver=new Qd(this),this.instance=null;const i=new _1([...t,{provide:bo,useValue:this},{provide:dl,useValue:this.componentFactoryResolver}],n||td(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function dc(e,t=null,n=null){return new sR(e,t,n).injector}function tp(e){return t=>{setTimeout(e,void 0,t)}}const rr=class SR extends F{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){var i,o,s;let a=t,l=n||(()=>null),u=r;if(t&&"object"==typeof t){const d=t;a=null===(i=d.next)||void 0===i?void 0:i.bind(d),l=null===(o=d.error)||void 0===o?void 0:o.bind(d),u=null===(s=d.complete)||void 0===s?void 0:s.bind(d)}this.__isAsync&&(l=tp(l),a&&(a=tp(a)),u&&(u=tp(u)));const h=super.subscribe({next:a,error:l,complete:u});return t instanceof y&&t.add(h),h}};function AR(){return this._results[Xo()]()}class np{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Xo(),r=np.prototype;r[n]||(r[n]=AR)}get changes(){return this._changes||(this._changes=new rr)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const i=Pr(t);(this._changesDetected=!function C2(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Wi=(()=>{class e{}return e.__NG_ELEMENT_ID__=RR,e})();const IR=Wi,TR=class extends IR{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(t,n){const r=this._declarationTContainer.tViews,i=rl(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,n||null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(r)),il(r,i,t),new pl(i)}};function RR(){return pc(jn(),Ve())}function pc(e,t){return 4&e.type?new TR(t,e,la(e,t)):null}let ci=(()=>{class e{}return e.__NG_ELEMENT_ID__=PR,e})();function PR(){return gy(jn(),Ve())}const kR=ci,dy=class extends kR{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return la(this._hostTNode,this._hostLView)}get injector(){return new ks(this._hostTNode,this._hostLView)}get parentInjector(){const t=Pu(this._hostTNode,this._hostLView);if(Qg(t)){const n=Ps(t,this._hostLView),r=Rs(t);return new ks(n[1].data[r+8],n)}return new ks(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=py(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=t.createEmbeddedView(n||{},o);return this.insert(s,i),s}createComponent(t,n,r,i,o){const s=t&&!function Ha(e){return"function"==typeof e}(t);let a;if(s)a=n;else{const d=n||{};a=d.index,r=d.injector,i=d.projectableNodes,o=d.environmentInjector||d.ngModuleRef}const l=s?t:new Jd(ln(t)),u=r||this.parentInjector;if(!o&&null==l.ngModule){const m=(s?u:this.parentInjector).get(Wo,null);m&&(o=m)}const h=l.create(u,i,void 0,o);return this.insert(h.hostView,a),h}insert(t,n){const r=t._lView,i=r[1];if(function zC(e){return ri(e[3])}(r)){const h=this.indexOf(t);if(-1!==h)this.detach(h);else{const d=r[3],m=new dy(d,d[6],d[3]);m.detach(m.indexOf(t))}}const o=this._adjustIndex(n),s=this._lContainer;!function QM(e,t,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-10?(t[4]=n[i],um(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function JM(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=64}(i,r,s,o);const a=Yf(o,s),l=r[11],u=Gu(l,s[7]);return null!==u&&function ZM(e,t,n,r,i,o){r[0]=i,r[6]=t,nl(e,r,n,1,i,o)}(i,s[6],l,r,u,a),t.attachToViewContainerRef(),um(rp(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=py(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Hf(this._lContainer,n);r&&(Ou(rp(this._lContainer),n),Wm(r[1],r))}detach(t){const n=this._adjustIndex(t,-1),r=Hf(this._lContainer,n);return r&&null!=Ou(rp(this._lContainer),n)?new pl(r):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function py(e){return e[8]}function rp(e){return e[8]||(e[8]=[])}function gy(e,t){let n;const r=t[e.index];if(ri(r))n=r;else{let i;if(8&e.type)i=kn(r);else{const o=t[11];i=o.createComment("");const s=Vr(e,t);Go(o,Gu(o,s),i,function rS(e,t){return bn(e)?e.nextSibling(t):t.nextSibling}(o,s),!1)}t[e.index]=n=iv(r,t,i,e),ec(t,n)}return new dy(n,e,t)}class ip{constructor(t){this.queryList=t,this.matches=null}clone(){return new ip(this.queryList)}setDirty(){this.queryList.setDirty()}}class op{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new op(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==by(t,n).matches&&this.queries[n].setDirty()}}class my{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class sp{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new sp(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ap{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new ap(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(t,n,NR(n,o)),this.matchTNodeWithReadOption(t,n,Fu(n,t,o,!1,!1))}else r===Wi?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Fu(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Yi||i===ci||i===Wi&&4&n.type)this.addMatch(n.index,-2);else{const o=Fu(n,t,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function NR(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function BR(e,t,n,r){return-1===n?function LR(e,t){return 11&e.type?la(e,t):4&e.type?pc(e,t):null}(t,e):-2===n?function UR(e,t,n){return n===Yi?la(t,e):n===Wi?pc(t,e):n===ci?gy(t,e):void 0}(e,t,r):ja(e,e[1],n,t)}function vy(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const o=e.data,s=n.matches,a=[];for(let l=0;l<s.length;l+=2){const u=s[l];a.push(u<0?null:BR(t,o[u],s[l+1],n.metadata.read))}i.matches=a}return i.matches}function lp(e,t,n,r){const i=e.queries.getByIndex(n),o=i.matches;if(null!==o){const s=vy(e,t,i,n);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)r.push(s[a/2]);else{const u=o[a+1],h=t[-l];for(let d=10;d<h.length;d++){const m=h[d];m[17]===m[3]&&lp(m[1],m,u,r)}if(null!==h[9]){const d=h[9];for(let m=0;m<d.length;m++){const x=d[m];lp(x[1],x,u,r)}}}}}return r}function gc(e){const t=Ve(),n=Wt(),r=Hg();cf(r+1);const i=by(n,r);if(e.dirty&&Ng(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?lp(n,t,r,[]):vy(n,t,i,r);e.reset(o,ZT),e.notifyOnChanges()}return!0}return!1}function wy(e,t,n){const r=Wt();r.firstCreatePass&&(function xy(e,t,n){null===e.queries&&(e.queries=new sp),e.queries.track(new ap(t,n))}(r,new my(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),function yy(e,t,n){const r=new np(4==(4&n));K1(e,t,r,r.destroy),null===t[19]&&(t[19]=new op),t[19].queries.push(new ip(r))}(r,Ve(),t)}function by(e,t){return e.queries.getByIndex(t)}function wc(...e){}const yc=new At("Application Initializer");let xc=(()=>{class e{constructor(n){this.appInits=n,this.resolve=wc,this.reject=wc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(ic(o))n.push(o);else if(Ov(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(wt(yc,8))},e.\u0275prov=It({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const wl=new At("AppId",{providedIn:"root",factory:function jy(){return`${pp()}${pp()}${pp()}`}});function pp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vy=new At("Platform Initializer"),$y=new At("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Hy=new At("appBootstrapListener");let lP=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=It({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Xi=new At("LocaleId",{providedIn:"root",factory:()=>Ho(Xi,bt.Optional|bt.SkipSelf)||function uP(){return"undefined"!=typeof $localize&&$localize.locale||sa}()});class hP{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let gp=(()=>{class e{compileModuleSync(n){return new ep(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=Hi(Ir(n).declarations).reduce((s,a)=>{const l=ln(a);return l&&s.push(new Jd(l)),s},[]);return new hP(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=It({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const dP=(()=>Promise.resolve(0))();function mp(e){"undefined"==typeof Zone?dP.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class On{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rr(!1),this.onMicrotaskEmpty=new rr(!1),this.onStable=new rr(!1),this.onError=new rr(!1),"undefined"==typeof Zone)throw new Se(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function pP(){let e=on.requestAnimationFrame,t=on.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function vP(e){const t=()=>{!function mP(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(on,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,wp(e),e.isCheckStableRunning=!0,vp(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),wp(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return zy(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),Gy(e)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return zy(e),n.invoke(i,o,s,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),Gy(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,wp(e),vp(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!On.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(On.isInAngularZone())throw new Se(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,gP,wc,wc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const gP={};function vp(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function wp(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function zy(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Gy(e){e._nesting--,vp(e)}class wP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rr,this.onMicrotaskEmpty=new rr,this.onStable=new rr,this.onError=new rr}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const Yy=new At(""),bc=new At("");let yl,yp=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,yl||(function yP(e){yl=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{On.assertNotInAngularZone(),mp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())mp(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(wt(On),wt(xp),wt(bc))},e.\u0275prov=It({token:e,factory:e.\u0275fac}),e})(),xp=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){var i;return null!==(i=null==yl?void 0:yl.findTestabilityInTree(this,n,r))&&void 0!==i?i:null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=It({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),Ai=null;const Wy=new At("AllowMultipleToken"),bp=new At("PlatformDestroyListeners");class Xy{constructor(t,n){this.name=t,this.token=n}}function qy(e,t,n=[]){const r=`Platform: ${t}`,i=new At(r);return(o=[])=>{let s=_p();if(!s||s.injector.get(Wy,!1)){const a=[...n,...o,{provide:i,useValue:!0}];e?e(a):function _P(e){if(Ai&&!Ai.get(Wy,!1))throw new Se(400,!1);Ai=e;const t=e.get(Qy);(function Zy(e){const t=e.get(Vy,null);t&&t.forEach(n=>n())})(e)}(function Ky(e=[],t){return br.create({name:t,providers:[{provide:Jf,useValue:"platform"},{provide:bp,useValue:new Set([()=>Ai=null])},...e]})}(a,r))}return function EP(e){const t=_p();if(!t)throw new Se(401,!1);return t}()}}function _p(){var e;return null!==(e=null==Ai?void 0:Ai.get(Qy))&&void 0!==e?e:null}let Qy=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function CP(e,t){let n;return n="noop"===e?new wP:("zone.js"===e?void 0:e)||new On(t),n}(null==r?void 0:r.ngZone,function Jy(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:On,useValue:i}];return i.run(()=>{const s=br.create({providers:o,parent:this.injector,name:n.moduleType.name}),a=n.create(s),l=a.injector.get(Vs,null);if(!l)throw new Se(402,!1);return i.runOutsideAngular(()=>{const u=i.onError.subscribe({next:h=>{l.handleError(h)}});a.onDestroy(()=>{Dc(this._modules,a),u.unsubscribe()})}),function ex(e,t,n){try{const r=n();return ic(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(l,i,()=>{const u=a.injector.get(xc);return u.runInitializers(),u.donePromise.then(()=>(function Rw(e){Sn(e,"Expected localeId to be defined"),"string"==typeof e&&(Tw=e.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Xi,sa)||sa),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const i=tx({},r);return function xP(e,t,n){const r=new ep(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(_c);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Se(403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(bp,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(wt(br))},e.\u0275prov=It({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function tx(e,t){return Array.isArray(t)?t.reduce(tx,e):Object.assign(Object.assign({},e),t)}let _c=(()=>{class e{constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new p(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new p(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{On.assertNotInAngularZone(),mp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{On.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),u.unsubscribe()}});this.isStable=function jh(...e){const t=Xn(e),n=function ws(e,t){return"number"==typeof Qr(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Ot(r[0]):mr(n)(Pn(r,t)):cn}(o,s.pipe(function Vh(e={}){const{connector:t=(()=>new F),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s=null,a=null,l=null,u=0,h=!1,d=!1;const m=()=>{null==a||a.unsubscribe(),a=null},x=()=>{m(),s=l=null,h=d=!1},L=()=>{const K=s;x(),null==K||K.unsubscribe()};return Q((K,W)=>{u++,!d&&!h&&m();const te=l=null!=l?l:t();W.add(()=>{u--,0===u&&!d&&!h&&(a=Ta(L,i))}),te.subscribe(W),s||(s=new we({next:xe=>te.next(xe),error:xe=>{d=!0,m(),a=Ta(x,n,xe),te.error(xe)},complete:()=>{h=!0,m(),a=Ta(x,r),te.complete()}}),Pn(K).subscribe(s))})(o)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof iy;if(!this._injector.get(xc).done)throw!i&&function ca(e){const t=ln(e)||ar(e)||lr(e);return null!==t&&t.standalone}(n),new Se(405,false);let s;s=i?n:this._injector.get(dl).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function bP(e){return e.isBoundToModule}(s)?void 0:this._injector.get(bo),u=s.create(br.NULL,[],r||s.selector,a),h=u.location.nativeElement,d=u.injector.get(Yy,null);return null==d||d.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),Dc(this.components,u),null==d||d.unregisterApplication(h)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new Se(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Dc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Hy,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Dc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Se(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(wt(On),wt(br),wt(Vs))},e.\u0275prov=It({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Dc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let rx=!0,Dp=(()=>{class e{}return e.__NG_ELEMENT_ID__=AP,e})();function AP(e){return function IP(e,t,n){if(xu(e)&&!n){const r=Rr(e.index,t);return new pl(r,r)}return 47&e.type?new pl(t[16],t):null}(jn(),Ve(),16==(16&e))}const $P=qy(null,"core",[]);let HP=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(wt(_c))},e.\u0275mod=No({type:e}),e.\u0275inj=Br({}),e})(),Sc=null;function _o(){return Sc}const Dr=new At("DocumentToken");let Ac=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=It({token:e,factory:function(){return function WP(){return wt(px)}()},providedIn:"platform"}),e})();const XP=new At("Location Initialized");let px=(()=>{class e extends Ac{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _o().getBaseHref(this._doc)}onPopState(n){const r=_o().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=_o().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){gx()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){gx()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(wt(Dr))},e.\u0275prov=It({token:e,factory:function(){return function ZP(){return new px(wt(Dr))}()},providedIn:"platform"}),e})();function gx(){return!!window.history.pushState}function Ap(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function mx(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function qi(e){return e&&"?"!==e[0]?"?"+e:e}let Qo=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=It({token:e,factory:function(){return function qP(){const e=wt(Dr).location;return new wx(wt(Ac),e&&e.origin||"")}()},providedIn:"root"}),e})();const vx=new At("appBaseHref");let wx=(()=>{class e extends Qo{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Ap(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+qi(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+qi(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+qi(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return e.\u0275fac=function(n){return new(n||e)(wt(Ac),wt(vx,8))},e.\u0275prov=It({token:e,factory:e.\u0275fac}),e})(),KP=(()=>{class e extends Qo{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Ap(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+qi(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+qi(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return e.\u0275fac=function(n){return new(n||e)(wt(Ac),wt(vx,8))},e.\u0275prov=It({token:e,factory:e.\u0275fac}),e})(),Ip=(()=>{class e{constructor(n){this._subject=new rr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._baseHref=mx(yx(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){var n;null===(n=this._urlChangeSubscription)||void 0===n||n.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+qi(r))}normalize(n){return e.stripTrailingSlash(function JP(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,yx(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+qi(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+qi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){var r,i;null===(i=(r=this._locationStrategy).historyGo)||void 0===i||i.call(r,n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{var r;const i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(null===(r=this._urlChangeSubscription)||void 0===r||r.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return e.normalizeQueryParams=qi,e.joinWithSlash=Ap,e.stripTrailingSlash=mx,e.\u0275fac=function(n){return new(n||e)(wt(Qo))},e.\u0275prov=It({token:e,factory:function(){return function QP(){return new Ip(wt(Qo))}()},providedIn:"root"}),e})();function yx(e){return e.replace(/\/index.html$/,"")}let Rx=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new $k,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Px("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Px("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)(gt(ci),gt(Wi))},e.\u0275dir=Kn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class $k{constructor(){this.$implicit=null,this.ngIf=null}}function Px(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${oe(t)}'.`)}let gF=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=No({type:e}),e.\u0275inj=Br({}),e})();let yF=(()=>{class e{}return e.\u0275prov=It({token:e,providedIn:"root",factory:()=>new xF(wt(Dr),window)}),e})();class xF{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function bF(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Nx(this.window.history)||Nx(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Nx(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class Hp extends class DF extends class YP{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function GP(e){Sc||(Sc=e)}(new Hp)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function EF(){return Dl=Dl||document.querySelector("base"),Dl?Dl.getAttribute("href"):null}();return null==n?null:function CF(e){Bc=Bc||document.createElement("a"),Bc.setAttribute("href",e);const t=Bc.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Dl=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function Nk(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let Bc,Dl=null;const Lx=new At("TRANSITION_ID"),SF=[{provide:yc,useFactory:function MF(e,t,n){return()=>{n.get(xc).donePromise.then(()=>{const r=_o(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Lx,Dr,br],multi:!0}];let IF=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=It({token:e,factory:e.\u0275fac}),e})();const Uc=new At("EventManagerPlugins");let jc=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(wt(Uc),wt(On))},e.\u0275prov=It({token:e,factory:e.\u0275fac}),e})();class Bx{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=_o().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let Ux=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=It({token:e,factory:e.\u0275fac}),e})(),El=(()=>{class e extends Ux{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(jx),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(jx))}}return e.\u0275fac=function(n){return new(n||e)(wt(Dr))},e.\u0275prov=It({token:e,factory:e.\u0275fac}),e})();function jx(e){_o().remove(e)}const zp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Gp=/%COMP%/g;function Vc(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?Vc(e,i,n):(i=i.replace(Gp,e),n.push(i))}return n}function Hx(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Yp=(()=>{class e{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Wp(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case xi.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new OF(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case xi.ShadowDom:return new NF(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Vc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(wt(jc),wt(El),wt(wl))},e.\u0275prov=It({token:e,factory:e.\u0275fac}),e})();class Wp{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(zp[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(Gx(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Gx(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=zp[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=zp[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(xr.DashCase|xr.Important)?t.style.setProperty(n,r,i&xr.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&xr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,Hx(r)):this.eventManager.addEventListener(t,n,Hx(r))}}function Gx(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class OF extends Wp{constructor(t,n,r,i){super(t),this.component=r;const o=Vc(i+"-"+r.id,r.styles,[]);n.addStyles(o),this.contentAttr=function PF(e){return"_ngcontent-%COMP%".replace(Gp,e)}(i+"-"+r.id),this.hostAttr=function kF(e){return"_nghost-%COMP%".replace(Gp,e)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}class NF extends Wp{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Vc(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let LF=(()=>{class e extends Bx{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(wt(Dr))},e.\u0275prov=It({token:e,factory:e.\u0275fac}),e})();const Yx=["alt","control","meta","shift"],UF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wx={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},jF={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let VF=(()=>{class e extends Bx{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_o().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="";if(Yx.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const a={};return a.domEventName=i,a.fullKey=s,a}static getEventFullKey(n){let r="",i=function $F(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Wx.hasOwnProperty(t)&&(t=Wx[t]))}return UF[t]||t}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Yx.forEach(o=>{o!=i&&jF[o](n)&&(r+=o+".")}),r+=i,r}static eventCallback(n,r,i){return o=>{e.getEventFullKey(o)===n&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(wt(Dr))},e.\u0275prov=It({token:e,factory:e.\u0275fac}),e})();const YF=qy($P,"browser",[{provide:$y,useValue:"browser"},{provide:Vy,useValue:function HF(){Hp.makeCurrent()},multi:!0},{provide:Dr,useFactory:function GF(){return function UC(e){Jh=e}(document),document},deps:[]}]),Zx=new At(""),qx=[{provide:bc,useClass:class AF{addToWindow(t){on.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},on.getAllAngularTestabilities=()=>t.getAllTestabilities(),on.getAllAngularRootElements=()=>t.getAllRootElements(),on.frameworkStabilizers||(on.frameworkStabilizers=[]),on.frameworkStabilizers.push(r=>{const i=on.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(l){s=s||l,o--,0==o&&r(s)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,n,r){if(null==n)return null;const i=t.getTestability(n);return null!=i?i:r?_o().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null}},deps:[]},{provide:Yy,useClass:yp,deps:[On,xp,bc]},{provide:yp,useClass:yp,deps:[On,xp,bc]}],Kx=[{provide:Jf,useValue:"root"},{provide:Vs,useFactory:function zF(){return new Vs},deps:[]},{provide:Uc,useClass:LF,multi:!0,deps:[Dr,On,$y]},{provide:Uc,useClass:VF,multi:!0,deps:[Dr]},{provide:Yp,useClass:Yp,deps:[jc,El,wl]},{provide:oy,useExisting:Yp},{provide:Ux,useExisting:El},{provide:El,useClass:El,deps:[Dr]},{provide:jc,useClass:jc,deps:[Uc,On]},{provide:class _F{},useClass:IF,deps:[]},[]];let WF=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:wl,useValue:n.appId},{provide:Lx,useExisting:wl},SF]}}}return e.\u0275fac=function(n){return new(n||e)(wt(Zx,12))},e.\u0275mod=No({type:e}),e.\u0275inj=Br({providers:[...Kx,...qx],imports:[gF,HP]}),e})(),Qx=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(wt(Dr))},e.\u0275prov=It({token:e,factory:function(n){let r=null;return r=n?new n:function ZF(){return new Qx(wt(Dr))}(),r},providedIn:"root"}),e})();function Ft(...e){return Pn(e,Xn(e))}"undefined"!=typeof window&&window;class di extends F{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const{isArray:iO}=Array,{getPrototypeOf:oO,prototype:sO,keys:aO}=Object;const{isArray:cO}=Array;function tb(...e){const t=Xn(e),n=function vs(e){return E(Qr(e))?e.pop():void 0}(e),{args:r,keys:i}=function lO(e){if(1===e.length){const t=e[0];if(iO(t))return{args:t,keys:null};if(function uO(e){return e&&"object"==typeof e&&oO(e)===sO}(t)){const n=aO(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e);if(0===r.length)return Pn([],t);const o=new p(function pO(e,t,n=ge){return r=>{nb(t,()=>{const{length:i}=e,o=new Array(i);let s=i,a=i;for(let l=0;l<i;l++)nb(t,()=>{const u=Pn(e[l],t);let h=!1;u.subscribe(J(r,d=>{o[l]=d,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,i?s=>function dO(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}(i,s):ge));return n?o.pipe(function fO(e){return ne(t=>function hO(e,t){return cO(t)?e(...t):e(t)}(e,t))}(n)):o}function nb(e,t,n){e?an(n,e,t):t()}function Cl(e,t){const n=E(e)?e:()=>e,r=i=>i.error(n());return new p(t?i=>t.schedule(r,0,i):r)}const Ml=g(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function qp(...e){return function gO(){return mr(1)}()(Pn(e,Xn(e)))}function rb(e){return new p(t=>{Ot(e()).subscribe(t)})}function Kp(){return Q((e,t)=>{let n=null;e._refCount++;const r=J(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class ib extends p{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ie(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new y;const n=this.getSubject();t.add(this.source.subscribe(J(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=y.EMPTY)}return t}refCount(){return Kp()(this)}}function Jo(e,t){return Q((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(J(r,l=>{null==i||i.unsubscribe();let u=0;const h=o++;Ot(e(l,h)).subscribe(i=J(r,d=>r.next(t?t(l,d,h,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function vO(e,t,n,r,i){return(o,s)=>{let a=n,l=t,u=0;o.subscribe(J(s,h=>{const d=u++;l=a?e(l,h,d):(a=!0,h),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function ob(e,t){return Q(vO(e,t,arguments.length>=2,!0))}function da(e,t){return Q((n,r)=>{let i=0;n.subscribe(J(r,o=>e.call(t,o,i++)&&r.next(o)))})}function es(e){return Q((t,n)=>{let o,r=null,i=!1;r=t.subscribe(J(n,void 0,void 0,s=>{o=Ot(e(s,es(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Sl(e,t){return E(t)?tn(e,t,1):tn(e,1)}function Qp(e){return e<=0?()=>cn:Q((t,n)=>{let r=[];t.subscribe(J(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function sb(e=wO){return Q((t,n)=>{let r=!1;t.subscribe(J(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function wO(){return new Ml}function Jp(e){return Q((t,n)=>{let r=!1;t.subscribe(J(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function ts(e,t){const n=arguments.length>=2;return r=>r.pipe(e?da((i,o)=>e(i,o,r)):ge,Oo(1),n?Jp(t):sb(()=>new Ml))}function ir(e,t,n){const r=E(e)||t||n?{next:e,error:t,complete:n}:e;return r?Q((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(J(o,l=>{var u;null===(u=r.next)||void 0===u||u.call(r,l),o.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),o.complete()},l=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,l),o.error(l)},()=>{var l,u;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):ge}function e0(e){return Q((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}class Qi{constructor(t,n){this.id=t,this.url=n}}class t0 extends Qi{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Al extends Qi{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ab extends Qi{constructor(t,n,r){super(t,n),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bO extends Qi{constructor(t,n,r){super(t,n),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _O extends Qi{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DO extends Qi{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EO extends Qi{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class CO extends Qi{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class MO extends Qi{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SO{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class AO{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class IO{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TO{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RO{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PO{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lb{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Bt="primary";class FO{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function pa(e){return new FO(e)}const ub="ngNavigationCancelingError";function n0(e){const t=Error("NavigationCancelingError: "+e);return t[ub]=!0,t}function NO(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=e[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Ii(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!cb(e[i],t[i]))return!1;return!0}function cb(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}return e===t}function hb(e){return Array.prototype.concat.apply([],e)}function fb(e){return e.length>0?e[e.length-1]:null}function Zn(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function pi(e){return Ov(e)?e:ic(e)?Pn(Promise.resolve(e)):Ft(e)}const UO={exact:function gb(e,t,n){if(!rs(e.segments,t.segments)||!$c(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!gb(e.children[r],t.children[r],n))return!1;return!0},subset:mb},db={exact:function jO(e,t){return Ii(e,t)},subset:function VO(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>cb(e[n],t[n]))},ignored:()=>!0};function pb(e,t,n){return UO[n.paths](e.root,t.root,n.matrixParams)&&db[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function mb(e,t,n){return vb(e,t,t.segments,n)}function vb(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!rs(i,n)||t.hasChildren()||!$c(i,n,r))}if(e.segments.length===n.length){if(!rs(e.segments,n)||!$c(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!mb(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!!(rs(e.segments,i)&&$c(e.segments,i,r)&&e.children[Bt])&&vb(e.children[Bt],t,o,r)}}function $c(e,t,n){return t.every((r,i)=>db[n](e[i].parameters,r.parameters))}class ns{constructor(t,n,r){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pa(this.queryParams)),this._queryParamMap}toString(){return zO.serialize(this)}}class zt{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Zn(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hc(this)}}class Il{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=pa(this.parameters)),this._parameterMap}toString(){return _b(this)}}function rs(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}class wb{}class yb{parse(t){const n=new JO(t);return new ns(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${Tl(t.root,!0)}`,r=function WO(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${zc(n)}=${zc(i)}`).join("&"):`${zc(n)}=${zc(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function GO(e){return encodeURI(e)}(t.fragment)}`:""}`}}const zO=new yb;function Hc(e){return e.segments.map(t=>_b(t)).join("/")}function Tl(e,t){if(!e.hasChildren())return Hc(e);if(t){const n=e.children[Bt]?Tl(e.children[Bt],!1):"",r=[];return Zn(e.children,(i,o)=>{o!==Bt&&r.push(`${o}:${Tl(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function HO(e,t){let n=[];return Zn(e.children,(r,i)=>{i===Bt&&(n=n.concat(t(r,i)))}),Zn(e.children,(r,i)=>{i!==Bt&&(n=n.concat(t(r,i)))}),n}(e,(r,i)=>i===Bt?[Tl(e.children[Bt],!1)]:[`${i}:${Tl(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Bt]?`${Hc(e)}/${n[0]}`:`${Hc(e)}/(${n.join("//")})`}}function xb(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zc(e){return xb(e).replace(/%3B/gi,";")}function r0(e){return xb(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gc(e){return decodeURIComponent(e)}function bb(e){return Gc(e.replace(/\+/g,"%20"))}function _b(e){return`${r0(e.path)}${function YO(e){return Object.keys(e).map(t=>`;${r0(t)}=${r0(e[t])}`).join("")}(e.parameters)}`}const XO=/^[^\/()?;=#]+/;function Yc(e){const t=e.match(XO);return t?t[0]:""}const ZO=/^[^=?&#]+/,KO=/^[^&#]+/;class JO{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zt([],{}):new zt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Bt]=new zt(t,n)),r}parseSegment(){const t=Yc(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Il(Gc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=Yc(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Yc(this.remaining);i&&(r=i,this.capture(r))}t[Gc(n)]=Gc(r)}parseQueryParam(t){const n=function qO(e){const t=e.match(ZO);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function QO(e){const t=e.match(KO);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=bb(n),o=bb(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Yc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Bt);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[Bt]:new zt([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Db{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=o0(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=o0(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=s0(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return s0(t,this._root).map(n=>n.value)}}function o0(e,t){if(e===t.value)return t;for(const n of t.children){const r=o0(e,n);if(r)return r}return null}function s0(e,t){if(e===t.value)return[t];for(const n of t.children){const r=s0(e,n);if(r.length)return r.unshift(t),r}return[]}class Ji{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function ga(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class Eb extends Db{constructor(t,n){super(t),this.snapshot=n,a0(this,t)}toString(){return this.snapshot.toString()}}function Cb(e,t){const n=function eN(e,t){const s=new Wc([],{},{},"",{},Bt,t,null,e.root,-1,{});return new Sb("",new Ji(s,[]))}(e,t),r=new di([new Il("",{})]),i=new di({}),o=new di({}),s=new di({}),a=new di(""),l=new ma(r,i,s,a,o,Bt,t,n.root);return l.snapshot=n.root,new Eb(new Ji(l,[]),n)}class ma{constructor(t,n,r,i,o,s,a,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ne(t=>pa(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ne(t=>pa(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Mb(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function tN(e){return e.reduce((t,n)=>{var r;return{params:Object.assign(Object.assign({},t.params),n.params),data:Object.assign(Object.assign({},t.data),n.data),resolve:Object.assign(Object.assign(Object.assign(Object.assign({},n.data),t.resolve),null===(r=n.routeConfig)||void 0===r?void 0:r.data),n._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}class Wc{constructor(t,n,r,i,o,s,a,l,u,h,d,m){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=u,this._lastPathIndex=h,this._correctedLastPathIndex=null!=m?m:h,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=pa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Sb extends Db{constructor(t,n){super(n),this.url=t,a0(this,n)}toString(){return Ab(this._root)}}function a0(e,t){t.value._routerState=e,t.children.forEach(n=>a0(e,n))}function Ab(e){const t=e.children.length>0?` { ${e.children.map(Ab).join(", ")} } `:"";return`${e.value}${t}`}function l0(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Ii(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Ii(t.params,n.params)||e.params.next(n.params),function LO(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Ii(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Ii(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function u0(e,t){const n=Ii(e.params,t.params)&&function $O(e,t){return rs(e,t)&&e.every((n,r)=>Ii(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||u0(e.parent,t.parent))}function Rl(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function rN(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Rl(e,r,i);return Rl(e,r)})}(e,t,n);return new Ji(r,i)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Rl(e,a)),s}}const r=function iN(e){return new ma(new di(e.url),new di(e.params),new di(e.queryParams),new di(e.fragment),new di(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(o=>Rl(e,o));return new Ji(r,i)}}function Xc(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Pl(e){return"object"==typeof e&&null!=e&&e.outlets}function c0(e,t,n,r,i){let o={};if(r&&Zn(r,(a,l)=>{o[l]=Array.isArray(a)?a.map(u=>`${u}`):`${a}`}),e===t)return new ns(n,o,i);const s=Ib(e,t,n);return new ns(s,o,i)}function Ib(e,t,n){const r={};return Zn(e.children,(i,o)=>{r[o]=i===t?n:Ib(i,t,n)}),new zt(e.segments,r)}class Tb{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Xc(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Pl);if(i&&i!==fb(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class h0{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function Rb(e,t,n){if(e||(e=new zt([],{})),0===e.segments.length&&e.hasChildren())return Zc(e,t,n);const r=function cN(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const s=e.segments[i],a=n[r];if(Pl(a))break;const l=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===l)break;if(l&&u&&"object"==typeof u&&void 0===u.outlets){if(!kb(l,u,s))return o;r+=2}else{if(!kb(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new zt(e.segments.slice(0,r.pathIndex),{});return o.children[Bt]=new zt(e.segments.slice(r.pathIndex),e.children),Zc(o,0,i)}return r.match&&0===i.length?new zt(e.segments,{}):r.match&&!e.hasChildren()?f0(e,t,n):r.match?Zc(e,0,i):f0(e,t,n)}function Zc(e,t,n){if(0===n.length)return new zt(e.segments,{});{const r=function uN(e){return Pl(e[0])?e[0].outlets:{[Bt]:e}}(n),i={};return Zn(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=Rb(e.children[s],t,o))}),Zn(e.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new zt(e.segments,i)}}function f0(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const o=n[i];if(Pl(o)){const l=hN(o.outlets);return new zt(r,l)}if(0===i&&Xc(n[0])){r.push(new Il(e.segments[t].path,Pb(n[0]))),i++;continue}const s=Pl(o)?o.outlets[Bt]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Xc(a)?(r.push(new Il(s,Pb(a))),i+=2):(r.push(new Il(s,{})),i++)}return new zt(r,{})}function hN(e){const t={};return Zn(e,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=f0(new zt([],{}),0,n))}),t}function Pb(e){const t={};return Zn(e,(n,r)=>t[r]=`${n}`),t}function kb(e,t,n){return e==n.path&&Ii(t,n.parameters)}class fN{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new kl,this.attachRef=null}}class kl{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new fN,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}let d0=(()=>{class e{constructor(n,r,i,o,s){this.parentContexts=n,this.location=r,this.changeDetector=o,this.environmentInjector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new rr,this.deactivateEvents=new rr,this.attachEvents=new rr,this.detachEvents=new rr,this.name=i||Bt,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){var n;(null===(n=this.parentContexts.getContext(this.name))||void 0===n?void 0:n.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const i=this.location,s=n._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new dN(n,a,i.injector);if(r&&function pN(e){return!!e.resolveComponentFactory}(r)){const u=r.resolveComponentFactory(s);this.activated=i.createComponent(u,i.length,l)}else this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:null!=r?r:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)(gt(kl),gt(ci),function Va(e){return function v2(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(qg(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===t)return n[i+1];i+=2}}}return null}(jn(),e)}("name"),gt(Dp),gt(Wo))},e.\u0275dir=Kn({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),e})();class dN{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===ma?this.route:t===kl?this.childContexts:this.parent.get(t,n)}}let Fb=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Es({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&xo(0,"router-outlet")},dependencies:[d0],encapsulation:2}),e})();function Ob(e,t){var n;return e.providers&&!e._injector&&(e._injector=dc(e.providers,t,`Route: ${e.path}`)),null!==(n=e._injector)&&void 0!==n?n:t}function g0(e){const t=e.children&&e.children.map(g0),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Bt&&(n.component=Fb),n}function Yr(e){return e.outlet||Bt}function Nb(e,t){const n=e.filter(r=>Yr(r)===t);return n.push(...e.filter(r=>Yr(r)!==t)),n}function Lb(e){var t;if(!e)return null;if(null!==(t=e.routeConfig)&&void 0!==t&&t._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const r=n.routeConfig;if(null!=r&&r._loadedInjector)return r._loadedInjector;if(null!=r&&r._injector)return r._injector}return null}class yN{constructor(t,n,r,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),l0(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=ga(n);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Zn(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=ga(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=ga(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const i=ga(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new PO(o.value.snapshot))}),t.children.length&&this.forwardEvent(new TO(t.value.snapshot))}activateRoutes(t,n,r){var i;const o=t.value,s=n?n.value:null;if(l0(o),o===s)if(o.component){const a=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(o.component){const a=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const l=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),l0(l.route.value),this.activateChildRoutes(t,null,a.children)}else{const l=Lb(o.snapshot),u=null!==(i=null==l?void 0:l.get(dl))&&void 0!==i?i:null;a.attachRef=null,a.route=o,a.resolver=u,a.injector=l,a.outlet&&a.outlet.activateWith(o,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}}function Eo(e){return"function"==typeof e}function is(e){return e instanceof ns}const Fl=Symbol("INITIAL_VALUE");function Ol(){return Jo(e=>tb(e.map(t=>t.pipe(Oo(1),function mO(...e){const t=Xn(e);return Q((n,r)=>{(t?qp(e,n,t):qp(e,n)).subscribe(r)})}(Fl)))).pipe(ob((t,n)=>{let r=!1;return n.reduce((i,o,s)=>i!==Fl?i:(o===Fl&&(r=!0),r||!1!==o&&s!==n.length-1&&!is(o)?i:o),t)},Fl),da(t=>t!==Fl),ne(t=>is(t)?t:!0===t),Oo(1)))}const Bb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qc(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},Bb):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const o=(t.matcher||NO)(n,e,t);if(!o)return Object.assign({},Bb);const s={};Zn(o.posParams,(l,u)=>{s[u]=l.path});const a=o.consumed.length>0?Object.assign(Object.assign({},s),o.consumed[o.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:a,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function Kc(e,t,n,r,i="corrected"){if(n.length>0&&function SN(e,t,n){return n.some(r=>Qc(e,t,r)&&Yr(r)!==Bt)}(e,n,r)){const s=new zt(t,function MN(e,t,n,r){const i={};i[Bt]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const o of n)if(""===o.path&&Yr(o)!==Bt){const s=new zt([],{});s._sourceSegment=e,s._segmentIndexShift=t.length,i[Yr(o)]=s}return i}(e,t,r,new zt(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function AN(e,t,n){return n.some(r=>Qc(e,t,r))}(e,n,r)){const s=new zt(e.segments,function CN(e,t,n,r,i,o){const s={};for(const a of r)if(Qc(e,n,a)&&!i[Yr(a)]){const l=new zt([],{});l._sourceSegment=e,l._segmentIndexShift="legacy"===o?e.segments.length:t.length,s[Yr(a)]=l}return Object.assign(Object.assign({},i),s)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const o=new zt(e.segments,e.children);return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}function Qc(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function Ub(e,t,n,r){return!!(Yr(e)===r||r!==Bt&&Qc(t,n,e))&&("**"===e.path||qc(t,e,n).matched)}function jb(e,t,n){return 0===t.length&&!e.children[n]}class Jc{constructor(t){this.segmentGroup=t||null}}class Vb{constructor(t){this.urlTree=t}}function Nl(e){return Cl(new Jc(e))}function $b(e){return Cl(new Vb(e))}class PN{constructor(t,n,r,i,o){this.injector=t,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const t=Kc(this.urlTree.root,[],[],this.config).segmentGroup,n=new zt(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,Bt).pipe(ne(o=>this.createUrlTree(m0(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(es(o=>{if(o instanceof Vb)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Jc?this.noMatchError(o):o}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Bt).pipe(ne(i=>this.createUrlTree(m0(i),t.queryParams,t.fragment))).pipe(es(i=>{throw i instanceof Jc?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,n,r){const i=t.segments.length>0?new zt([],{[Bt]:t}):t;return new ns(i,n,r)}expandSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(ne(o=>new zt([],o))):this.expandSegment(t,r,n,r.segments,i,!0)}expandChildren(t,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Pn(i).pipe(Sl(o=>{const s=r.children[o],a=Nb(n,o);return this.expandSegmentGroup(t,a,s,o).pipe(ne(l=>({segment:l,outlet:o})))}),ob((o,s)=>(o[s.outlet]=s.segment,o),{}),function yO(e,t){const n=arguments.length>=2;return r=>r.pipe(e?da((i,o)=>e(i,o,r)):ge,Qp(1),n?Jp(t):sb(()=>new Ml))}())}expandSegment(t,n,r,i,o,s){return Pn(r).pipe(Sl(a=>this.expandSegmentAgainstRoute(t,n,r,a,i,o,s).pipe(es(u=>{if(u instanceof Jc)return Ft(null);throw u}))),ts(a=>!!a),es((a,l)=>{if(a instanceof Ml||"EmptyError"===a.name)return jb(n,i,o)?Ft(new zt([],{})):Nl(n);throw a}))}expandSegmentAgainstRoute(t,n,r,i,o,s,a){return Ub(i,n,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,n,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s):Nl(n):Nl(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?$b(o):this.lineralizeSegments(r,o).pipe(tn(s=>{const a=new zt(s,{});return this.expandSegment(t,a,n,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){const{matched:a,consumedSegments:l,remainingSegments:u,positionalParamSegments:h}=qc(n,i,o);if(!a)return Nl(n);const d=this.applyRedirectCommands(l,i.redirectTo,h);return i.redirectTo.startsWith("/")?$b(d):this.lineralizeSegments(i,d).pipe(tn(m=>this.expandSegment(t,n,r,m.concat(u),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,o){if("**"===r.path)return t=Ob(r,t),r.loadChildren?(r._loadedRoutes?Ft({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(ne(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new zt(i,{})))):Ft(new zt(i,{}));const{matched:s,consumedSegments:a,remainingSegments:l}=qc(n,r,i);return s?(t=Ob(r,t),this.getChildConfig(t,r,i).pipe(tn(h=>{var d;const m=null!==(d=h.injector)&&void 0!==d?d:t,x=h.routes,{segmentGroup:L,slicedSegments:K}=Kc(n,a,l,x),W=new zt(L.segments,L.children);if(0===K.length&&W.hasChildren())return this.expandChildren(m,x,W).pipe(ne(be=>new zt(a,be)));if(0===x.length&&0===K.length)return Ft(new zt(a,{}));const te=Yr(r)===o;return this.expandSegment(m,W,x,K,te?Bt:o,!0).pipe(ne(pe=>new zt(a.concat(pe.segments),pe.children)))}))):Nl(n)}getChildConfig(t,n,r){return n.children?Ft({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?Ft({routes:n._loadedRoutes,injector:n._loadedInjector}):this.runCanLoadGuards(t,n,r).pipe(tn(i=>i?this.configLoader.loadChildren(t,n).pipe(ir(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function TN(e){return Cl(n0(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`))}(n))):Ft({routes:[],injector:t})}runCanLoadGuards(t,n,r){const i=n.canLoad;return i&&0!==i.length?Ft(i.map(s=>{const a=t.get(s);let l;if(function bN(e){return e&&Eo(e.canLoad)}(a))l=a.canLoad(n,r);else{if(!Eo(a))throw new Error("Invalid CanLoad guard");l=a(n,r)}return pi(l)})).pipe(Ol(),ir(s=>{if(!is(s))return;const a=n0(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw a.url=s,a}),ne(s=>!0===s)):Ft(!0)}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ft(r);if(i.numberOfChildren>1||!i.children[Bt])return Cl(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));i=i.children[Bt]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreatreUrlTree(t,n,r,i){const o=this.createSegmentGroup(t,n.root,r,i);return new ns(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return Zn(t,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(t,n,r,i){const o=this.createSegments(t,n.segments,r,i);let s={};return Zn(n.children,(a,l)=>{s[l]=this.createSegmentGroup(t,a,r,i)}),new zt(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${n.path}'.`);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}function m0(e){const t={};for(const r of Object.keys(e.children)){const o=m0(e.children[r]);(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function kN(e){if(1===e.numberOfChildren&&e.children[Bt]){const t=e.children[Bt];return new zt(e.segments.concat(t.segments),t.children)}return e}(new zt(e.segments,t))}class Hb{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class eh{constructor(t,n){this.component=t,this.route=n}}function ON(e,t,n){const r=e._root;return Ll(r,t?t._root:null,n,[r.value])}function th(e,t,n){const r=Lb(t);return(null!=r?r:n).get(e)}function Ll(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ga(t);return e.children.forEach(s=>{(function LN(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function BN(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!rs(e.url,t.url);case"pathParamsOrQueryParamsChange":return!rs(e.url,t.url)||!Ii(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!u0(e,t)||!Ii(e.queryParams,t.queryParams);default:return!u0(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Hb(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ll(e,t,o.component?a?a.children:null:n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new eh(a.outlet.component,s))}else s&&Bl(t,a,i),i.canActivateChecks.push(new Hb(r)),Ll(e,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Zn(o,(s,a)=>Bl(s,n.getContext(a),i)),i}function Bl(e,t,n){const r=ga(e),i=e.value;Zn(r,(o,s)=>{Bl(o,i.component?t?t.children.getContext(s):null:t,n)}),n.canDeactivateChecks.push(new eh(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class WN{}function Gb(e){return new p(t=>t.error(e))}class ZN{constructor(t,n,r,i,o,s){this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=s}recognize(){const t=Kc(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,Bt);if(null===n)return null;const r=new Wc([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Bt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ji(r,n),o=new Sb(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(t){const n=t.value,r=Mb(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,n):this.processSegment(t,n,n.segments,r)}processChildren(t,n){const r=[];for(const o of Object.keys(n.children)){const s=n.children[o],a=Nb(t,o),l=this.processSegmentGroup(a,s,o);if(null===l)return null;r.push(...l)}const i=Yb(r);return function qN(e){e.sort((t,n)=>t.value.outlet===Bt?-1:n.value.outlet===Bt?1:t.value.outlet.localeCompare(n.value.outlet))}(i),i}processSegment(t,n,r,i){for(const o of t){const s=this.processSegmentAgainstRoute(o,n,r,i);if(null!==s)return s}return jb(n,r,i)?[]:null}processSegmentAgainstRoute(t,n,r,i){var o,s,a,l;if(t.redirectTo||!Ub(t,n,r,i))return null;let u,h=[],d=[];if("**"===t.path){const te=r.length>0?fb(r).parameters:{},xe=Xb(n)+r.length;u=new Wc(r,te,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qb(t),Yr(t),null!==(s=null!==(o=t.component)&&void 0!==o?o:t._loadedComponent)&&void 0!==s?s:null,t,Wb(n),xe,Kb(t),xe)}else{const te=qc(n,t,r);if(!te.matched)return null;h=te.consumedSegments,d=te.remainingSegments;const xe=Xb(n)+h.length;u=new Wc(h,te.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qb(t),Yr(t),null!==(l=null!==(a=t.component)&&void 0!==a?a:t._loadedComponent)&&void 0!==l?l:null,t,Wb(n),xe,Kb(t),xe)}const m=function KN(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:x,slicedSegments:L}=Kc(n,h,d,m.filter(te=>void 0===te.redirectTo),this.relativeLinkResolution);if(0===L.length&&x.hasChildren()){const te=this.processChildren(m,x);return null===te?null:[new Ji(u,te)]}if(0===m.length&&0===L.length)return[new Ji(u,[])];const K=Yr(t)===i,W=this.processSegment(m,x,L,K?Bt:i);return null===W?null:[new Ji(u,W)]}}function QN(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Yb(e){const t=[],n=new Set;for(const r of e){if(!QN(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=Yb(r.children);t.push(new Ji(r.value,i))}return t.filter(r=>!n.has(r))}function Wb(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Xb(e){var t,n;let r=e,i=null!==(t=r._segmentIndexShift)&&void 0!==t?t:0;for(;r._sourceSegment;)r=r._sourceSegment,i+=null!==(n=r._segmentIndexShift)&&void 0!==n?n:0;return i-1}function qb(e){return e.data||{}}function Kb(e){return e.resolve||{}}const v0=Symbol("RouteTitle");function Qb(e){return"string"==typeof e.title||null===e.title}function w0(e){return Jo(t=>{const n=e(t);return n?Pn(n).pipe(ne(()=>t)):Ft(t)})}class a8 extends class s8{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const y0=new At("ROUTES");let x0=(()=>{class e{constructor(n,r){this.injector=n,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Ft(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=pi(n.loadComponent()).pipe(ir(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),e0(()=>{this.componentLoaders.delete(n)})),i=new ib(r,()=>new F).pipe(Kp());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ft({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(ne(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,u,h=!1;Array.isArray(a)?u=a:(l=a.create(n).injector,u=hb(l.get(y0,[],bt.Self|bt.Optional)));return{routes:u.map(g0),injector:l}}),e0(()=>{this.childrenLoaders.delete(r)})),s=new ib(o,()=>new F).pipe(Kp());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(n){return pi(n()).pipe(tn(r=>r instanceof ry||Array.isArray(r)?Ft(r):Pn(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(n){return new(n||e)(wt(br),wt(gp))},e.\u0275prov=It({token:e,factory:e.\u0275fac}),e})();class u8{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function h8(e){throw e}function f8(e,t,n){return t.parse("/")}const d8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},p8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gr=(()=>{class e{constructor(n,r,i,o,s,a,l){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new F,this.errorHandler=h8,this.malformedUriErrorHandler=f8,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ft(void 0),this.urlHandlingStrategy=new u8,this.routeReuseStrategy=new a8,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=s.get(x0),this.configLoader.onLoadEndListener=m=>this.triggerEvent(new AO(m)),this.configLoader.onLoadStartListener=m=>this.triggerEvent(new SO(m)),this.ngModule=s.get(bo),this.console=s.get(lP);const d=s.get(On);this.isNgZoneEnabled=d instanceof On&&On.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function BO(){return new ns(new zt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Cb(this.currentUrlTree,this.rootComponentType),this.transitions=new di({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(da(i=>0!==i.id),ne(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Jo(i=>{let o=!1,s=!1;return Ft(i).pipe(ir(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Jo(a=>{const l=this.browserUrlTree.toString(),u=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||u)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return e_(a.source)&&(this.browserUrlTree=a.extractedUrl),Ft(a).pipe(Jo(d=>{const m=this.transitions.getValue();return r.next(new t0(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),m!==this.transitions.getValue()?cn:Promise.resolve(d)}),function FN(e,t,n,r){return Jo(i=>function RN(e,t,n,r,i){return new PN(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe(ne(o=>Object.assign(Object.assign({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),ir(d=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:d.urlAfterRedirects})}),function JN(e,t,n,r,i){return tn(o=>function XN(e,t,n,r,i="emptyOnly",o="legacy"){try{const s=new ZN(e,t,n,r,i,o).recognize();return null===s?Gb(new WN):Ft(s)}catch(s){return Gb(s)}}(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(ne(s=>Object.assign(Object.assign({},o),{targetSnapshot:s}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),ir(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const x=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(x,d)}this.browserUrlTree=d.urlAfterRedirects}const m=new _O(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(m)}));if(u&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:m,extractedUrl:x,source:L,restoredState:K,extras:W}=a,te=new t0(m,this.serializeUrl(x),L,K);r.next(te);const xe=Cb(x,this.rootComponentType).snapshot;return Ft(Object.assign(Object.assign({},a),{targetSnapshot:xe,urlAfterRedirects:x,extras:Object.assign(Object.assign({},W),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),cn}),ir(a=>{const l=new DO(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),ne(a=>Object.assign(Object.assign({},a),{guards:ON(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function UN(e,t){return tn(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Ft(Object.assign(Object.assign({},n),{guardsResult:!0})):function jN(e,t,n,r){return Pn(e).pipe(tn(i=>function YN(e,t,n,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?Ft(o.map(a=>{const l=th(a,t,i);let u;if(function EN(e){return e&&Eo(e.canDeactivate)}(l))u=pi(l.canDeactivate(e,t,n,r));else{if(!Eo(l))throw new Error("Invalid CanDeactivate guard");u=pi(l(e,t,n,r))}return u.pipe(ts())})).pipe(Ol()):Ft(!0)}(i.component,i.route,n,t,r)),ts(i=>!0!==i,!0))}(s,r,i,e).pipe(tn(a=>a&&function xN(e){return"boolean"==typeof e}(a)?function VN(e,t,n,r){return Pn(t).pipe(Sl(i=>qp(function HN(e,t){return null!==e&&t&&t(new IO(e)),Ft(!0)}(i.route.parent,r),function $N(e,t){return null!==e&&t&&t(new RO(e)),Ft(!0)}(i.route,r),function GN(e,t,n){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function NN(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>rb(()=>Ft(s.guards.map(l=>{const u=th(l,s.node,n);let h;if(function DN(e){return e&&Eo(e.canActivateChild)}(u))h=pi(u.canActivateChild(r,e));else{if(!Eo(u))throw new Error("Invalid CanActivateChild guard");h=pi(u(r,e))}return h.pipe(ts())})).pipe(Ol())));return Ft(o).pipe(Ol())}(e,i.path,n),function zN(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Ft(!0);const i=r.map(o=>rb(()=>{const s=th(o,t,n);let a;if(function _N(e){return e&&Eo(e.canActivate)}(s))a=pi(s.canActivate(t,e));else{if(!Eo(s))throw new Error("Invalid CanActivate guard");a=pi(s(t,e))}return a.pipe(ts())}));return Ft(i).pipe(Ol())}(e,i.route,n))),ts(i=>!0!==i,!0))}(r,o,e,t):Ft(a)),ne(a=>Object.assign(Object.assign({},n),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),ir(a=>{if(is(a.guardsResult)){const u=n0(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw u.url=a.guardsResult,u}const l=new EO(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),da(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),w0(a=>{if(a.guards.canActivateChecks.length)return Ft(a).pipe(ir(l=>{const u=new CO(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}),Jo(l=>{let u=!1;return Ft(l).pipe(function e8(e,t){return tn(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Ft(n);let o=0;return Pn(i).pipe(Sl(s=>function t8(e,t,n,r){const i=e.routeConfig,o=e._resolve;return void 0!==(null==i?void 0:i.title)&&!Qb(i)&&(o[v0]=i.title),function n8(e,t,n,r){const i=function r8(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return Ft({});const o={};return Pn(i).pipe(tn(s=>function i8(e,t,n,r){const i=th(e,t,r);return pi(i.resolve?i.resolve(t,n):i(t,n))}(e[s],t,n,r).pipe(ts(),ir(a=>{o[s]=a}))),Qp(1),function xO(e){return ne(()=>e)}(o),es(s=>s instanceof Ml?cn:Cl(s)))}(o,e,t,r).pipe(ne(s=>(e._resolvedData=s,e.data=Mb(e,n).resolve,i&&Qb(i)&&(e.data[v0]=i.title),null)))}(s.route,r,e,t)),ir(()=>o++),Qp(1),tn(s=>o===i.length?Ft(n):cn))})}(this.paramsInheritanceStrategy,this.ngModule.injector),ir({next:()=>u=!0,complete:()=>{u||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),ir(l=>{const u=new MO(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}))}),w0(()=>this.afterPreactivation()),w0(a=>{const l=u=>{var h;const d=[];(null===(h=u.routeConfig)||void 0===h?void 0:h.loadComponent)&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(ir(m=>{u.component=m}),ne(()=>{})));for(const m of u.children)d.push(...l(m));return d};return tb(l(a.targetSnapshot.root)).pipe(Jp(),Oo(1))}),ne(a=>{const l=function nN(e,t,n){const r=Rl(e,t._root,n?n._root:void 0);return new Eb(r,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:l})}),ir(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((e,t,n)=>ne(r=>(new yN(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),ir({next(){o=!0},complete(){o=!0}}),e0(()=>{var a;o||s||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===i.id&&(this.currentNavigation=null)}),es(a=>{if(s=!0,function OO(e){return e&&e[ub]}(a)){const l=is(a.url);l||(this.navigated=!0,this.restoreHistory(i,!0));const u=new ab(i.id,this.serializeUrl(i.extractedUrl),a.message);if(r.next(u),l){const h=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||e_(i.source)};this.scheduleNavigation(h,"imperative",null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new bO(i.id,this.serializeUrl(i.extractedUrl),a);r.next(l);try{i.resolve(this.errorHandler(a))}catch(u){i.reject(u)}}return cn}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const o={replaceUrl:!0},s=null!==(i=n.state)&&void 0!==i&&i.navigationId?n.state:null;if(s){const l=Object.assign({},s);delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const a=this.parseUrl(n.url);this.scheduleNavigation(a,r,s,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){this.config=n.map(g0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,u=i||this.routerState.root,h=l?this.currentUrlTree.fragment:s;let d=null;switch(a){case"merge":d=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}return null!==d&&(d=this.removeEmptyProps(d)),function oN(e,t,n,r,i){var o;if(0===n.length)return c0(t.root,t.root,t.root,r,i);const a=function sN(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Tb(!0,0,e);let t=0,n=!1;const r=e.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Zn(o.outlets,(l,u)=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?t++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new Tb(n,t,r)}(n);return a.toRoot()?c0(t.root,t.root,new zt([],{}),r,i):function l(h){var d;const m=function aN(e,t,n,r){return e.isAbsolute?new h0(t.root,!0,0):-1===r?new h0(n,n===t.root,0):function lN(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new h0(r,!1,i-o)}(n,r+(Xc(e.commands[0])?0:1),e.numberOfDoubleDots)}(a,t,null===(d=e.snapshot)||void 0===d?void 0:d._urlSegment,h),x=m.processChildren?Zc(m.segmentGroup,m.index,a.commands):Rb(m.segmentGroup,m.index,a.commands);return c0(t.root,m.segmentGroup,x,r,i)}(null===(o=e.snapshot)||void 0===o?void 0:o._lastPathIndex)}(u,this.currentUrlTree,n,d,null!=h?h:null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=is(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function g8(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?Object.assign({},d8):!1===r?Object.assign({},p8):r,is(n))return pb(this.currentUrlTree,n,i);const o=this.parseUrl(n);return pb(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(n=>{var r;this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new Al(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(r=this.titleStrategy)||void 0===r||r.updateTitle(this.routerState.snapshot),n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,o,s){var a,l;if(this.disposed)return Promise.resolve(!1);let u,h,d;s?(u=s.resolve,h=s.reject,d=s.promise):d=new Promise((L,K)=>{u=L,h=K});const m=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),x=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(l=this.browserPageId)&&void 0!==l?l:0)+1):x=0,this.setTransition({id:m,targetPageId:x,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:o,resolve:u,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(L=>Promise.reject(L))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),o=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(n,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===s?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const i=new ab(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(i),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){ld()},e.\u0275prov=It({token:e,factory:e.\u0275fac}),e})();function e_(e){return"imperative"!==e}class t_{buildTitle(t){var n;let r,i=t.root;for(;void 0!==i;)r=null!==(n=this.getResolvedTitleForRoute(i))&&void 0!==n?n:r,i=i.children.find(o=>o.outlet===Bt);return r}getResolvedTitleForRoute(t){return t.data[v0]}}let w8=(()=>{class e extends t_{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(n){return new(n||e)(wt(Qx))},e.\u0275prov=It({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class n_{}let r_=(()=>{class e{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(da(n=>n instanceof Al),Sl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){var i,o,s;const a=[];for(const l of r){l.providers&&!l._injector&&(l._injector=dc(l.providers,n,`Route: ${l.path}`));const u=null!==(i=l._injector)&&void 0!==i?i:n,h=null!==(o=l._loadedInjector)&&void 0!==o?o:u;l.loadChildren&&!l._loadedRoutes||l.loadComponent&&!l._loadedComponent?a.push(this.preloadConfig(u,l)):(l.children||l._loadedRoutes)&&a.push(this.processRoutes(h,null!==(s=l.children)&&void 0!==s?s:l._loadedRoutes))}return Pn(a).pipe(mr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):Ft(null);const o=i.pipe(tn(s=>{var a;return null===s?Ft(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(null!==(a=s.injector)&&void 0!==a?a:n,s.routes))}));return r.loadComponent&&!r._loadedComponent?Pn([o,this.loader.loadComponent(r)]).pipe(mr()):o})}}return e.\u0275fac=function(n){return new(n||e)(wt(gr),wt(gp),wt(Wo),wt(n_),wt(x0))},e.\u0275prov=It({token:e,factory:e.\u0275fac}),e})();const i_=new At("");let y8=(()=>{class e{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof t0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Al&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof lb&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new lb(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(n){ld()},e.\u0275prov=It({token:e,factory:e.\u0275fac}),e})();const D0=new At("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),o_=new At("ROUTER_FORROOT_GUARD"),s_=new At(""),x8=[Ip,{provide:wb,useClass:yb},{provide:gr,useFactory:function M8(e,t,n,r,i,o,s={},a,l,u,h){const d=new gr(null,e,t,n,r,i,hb(o));return u&&(d.urlHandlingStrategy=u),h&&(d.routeReuseStrategy=h),d.titleStrategy=null!=l?l:a,function S8(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(t.canceledNavigationResolution=e.canceledNavigationResolution)}(s,d),d},deps:[wb,kl,Ip,br,gp,y0,D0,w8,[t_,new go],[class l8{},new go],[class o8{},new go]]},kl,{provide:ma,useFactory:function A8(e){return e.routerState.root},deps:[gr]},x0];function b8(){return new Xy("Router",gr)}let a_=(()=>{class e{constructor(n,r){}static forRoot(n,r){return{ngModule:e,providers:[x8,[],l_(n),{provide:o_,useFactory:C8,deps:[[gr,new go,new Xa]]},{provide:D0,useValue:r||{}},null!=r&&r.useHash?{provide:Qo,useClass:KP}:{provide:Qo,useClass:wx},{provide:i_,useFactory:()=>{const e=Ho(gr),t=Ho(yF),n=Ho(D0);return n.scrollOffset&&t.setOffset(n.scrollOffset),new y8(e,t,n)}},null!=r&&r.preloadingStrategy?O8(r.preloadingStrategy):[],{provide:Xy,multi:!0,useFactory:b8},null!=r&&r.initialNavigation?T8(r):[],[{provide:u_,useFactory:I8},{provide:Hy,multi:!0,useExisting:u_}]]}}static forChild(n){return{ngModule:e,providers:[l_(n)]}}}return e.\u0275fac=function(n){return new(n||e)(wt(o_,8),wt(gr,8))},e.\u0275mod=No({type:e}),e.\u0275inj=Br({}),e})();function C8(e){return"guarded"}function l_(e){return[{provide:E2,multi:!0,useValue:e},{provide:y0,multi:!0,useValue:e}]}function I8(){const e=Ho(br);return t=>{var n,r;const i=e.get(_c);if(t!==i.components[0])return;const o=e.get(gr),s=e.get(c_);null===e.get(E0,null,bt.Optional)&&o.initialNavigation(),null===(n=e.get(s_,null,bt.Optional))||void 0===n||n.setUpPreloading(),null===(r=e.get(i_,null,bt.Optional))||void 0===r||r.init(),o.resetRootComponentType(i.componentTypes[0]),s.next(),s.complete()}}const u_=new At("");function T8(e){return["disabled"===e.initialNavigation?[{provide:yc,multi:!0,useFactory:()=>{const e=Ho(gr);return()=>{e.setUpLocationChangeListener()}}},{provide:E0,useValue:"disabled"}]:[],"enabledBlocking"===e.initialNavigation?[{provide:E0,useValue:"enabledBlocking"},{provide:yc,multi:!0,deps:[br],useFactory:e=>{const t=e.get(XP,Promise.resolve(null));let n=!1;return()=>t.then(()=>new Promise(r=>{const i=e.get(gr),o=e.get(c_);i.afterPreactivation=()=>n?Ft(void 0):(n=!0,r(!0),o),i.initialNavigation()}))}}]:[]]}const c_=new At("",{factory:()=>new F}),E0=new At("");function O8(e){return[r_,{provide:s_,useExisting:r_},{provide:n_,useExisting:e}]}function h_(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(u){return void n(u)}a.done?t(l):Promise.resolve(l).then(r,i)}function C0(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(l){h_(o,r,i,s,a,"next",l)}function a(l){h_(o,r,i,s,a,"throw",l)}s(void 0)})}}var N8=D(5825);const f_={getBit(e){return this.data[nh(e)]&1<<rh(e)?1:0},setBit(e){this.data[nh(e)]|=1<<rh(e)},clearBit(e){this.data[nh(e)]&=~(1<<rh(e))},toggleBit(e){this.data[nh(e)]^=1<<rh(e)},getBitXY(e,t){return e>=this.width||t>=this.height?0:this.getBit(t*this.width+e)},setBitXY(e,t){this.setBit(t*this.width+e)},clearBitXY(e,t){this.clearBit(t*this.width+e)},toggleBitXY(e,t){this.toggleBit(t*this.width+e)}};function nh(e){return e>>3}function rh(e){return 7-(7&e)}function g_(e,t,n){return"function"==typeof e.toBlob?new Promise(function(r){e.toBlob(r,t,n)}):Promise.resolve(function $8(e){var t=e.match(/data:([^;]+)/)[1],n=e.replace(/^[^,]+,/,"");return function ih(e,t){e=e||[],"string"==typeof(t=t||{})&&(t={type:t});try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}([m_(atob(n))],{type:t})}(e.toDataURL(t,n)))}function m_(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=-1;++i<t;)r[i]=e.charCodeAt(i);return n}var M0=D(5247);D(3165);const z8=new TextDecoder("utf-8"),Y8=new TextEncoder;class Ul{constructor(t=8192,n={}){let r=!1;"number"==typeof t?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const i=n.offset?n.offset>>>0:0,o=t.byteLength-i;let s=i;(ArrayBuffer.isView(t)||t instanceof Ul)&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+i),t=t.buffer),this.lastWrittenByte=r?o:0,this.buffer=t,this.length=o,this.byteLength=o,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,o),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const r=2*(this.offset+t),i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){const n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=this.readByte();return n}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let r=0;r<t;r++)n+=this.readChar();return n}readUtf8(t=1){return function G8(e){return z8.decode(e)}(this.readBytes(t))}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(function W8(e){return Y8.encode(e)}(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function va(e){let t=e.length;for(;--t>=0;)e[t]=0}const R0=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),oh=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),nL=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),E_=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),to=new Array(576);va(to);const $l=new Array(60);va($l);const Hl=new Array(512);va(Hl);const zl=new Array(256);va(zl);const P0=new Array(29);va(P0);const sh=new Array(30);function k0(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let C_,M_,S_;function F0(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}va(sh);const A_=e=>e<256?Hl[e]:Hl[256+(e>>>7)],Gl=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Cr=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Gl(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Ti=(e,t,n)=>{Cr(e,n[2*t],n[2*t+1])},I_=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},T_=(e,t,n)=>{const r=new Array(16);let o,s,i=0;for(o=1;o<=15;o++)r[o]=i=i+n[o-1]<<1;for(s=0;s<=t;s++){let a=e[2*s+1];0!==a&&(e[2*s]=I_(r[a]++,a))}},R_=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},P_=e=>{e.bi_valid>8?Gl(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},k_=(e,t,n,r)=>{const i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},O0=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&k_(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!k_(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},F_=(e,t,n)=>{let r,i,s,a,o=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],i=e.pending_buf[e.l_buf+o],o++,0===r?Ti(e,i,t):(s=zl[i],Ti(e,s+256+1,t),a=R0[s],0!==a&&(i-=P0[s],Cr(e,i,a)),r--,s=A_(r),Ti(e,s,n),a=oh[s],0!==a&&(r-=sh[s],Cr(e,r,a)))}while(o<e.last_lit);Ti(e,256,t)},N0=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,a,u,l=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<o;s++)0!==n[2*s]?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=l<2?++l:0,n[2*u]=1,e.depth[u]=0,e.opt_len--,i&&(e.static_len-=r[2*u+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)O0(e,n,s);u=o;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],O0(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[2*u]=n[2*s]+n[2*a],e.depth[u]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[2*s+1]=n[2*a+1]=u,e.heap[1]=u++,O0(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let u,h,d,m,x,L,K=0;for(m=0;m<=15;m++)e.bl_count[m]=0;for(n[2*e.heap[e.heap_max]+1]=0,u=e.heap_max+1;u<573;u++)h=e.heap[u],m=n[2*n[2*h+1]+1]+1,m>l&&(m=l,K++),n[2*h+1]=m,!(h>r)&&(e.bl_count[m]++,x=0,h>=a&&(x=s[h-a]),L=n[2*h],e.opt_len+=L*(m+x),o&&(e.static_len+=L*(i[2*h+1]+x)));if(0!==K){do{for(m=l-1;0===e.bl_count[m];)m--;e.bl_count[m]--,e.bl_count[m+1]+=2,e.bl_count[l]--,K-=2}while(K>0);for(m=l;0!==m;m--)for(h=e.bl_count[m];0!==h;)d=e.heap[--u],!(d>r)&&(n[2*d+1]!==m&&(e.opt_len+=(m-n[2*d+1])*n[2*d],n[2*d+1]=m),h--)}})(e,t),T_(n,l,e.bl_count)},O_=(e,t,n)=>{let r,o,i=-1,s=t[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=s,s=t[2*(r+1)+1],!(++a<l&&o===s)&&(a<u?e.bl_tree[2*o]+=a:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,i=o,0===s?(l=138,u=3):o===s?(l=6,u=3):(l=7,u=4))},N_=(e,t,n)=>{let r,o,i=-1,s=t[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),r=0;r<=n;r++)if(o=s,s=t[2*(r+1)+1],!(++a<l&&o===s)){if(a<u)do{Ti(e,o,e.bl_tree)}while(0!=--a);else 0!==o?(o!==i&&(Ti(e,o,e.bl_tree),a--),Ti(e,16,e.bl_tree),Cr(e,a-3,2)):a<=10?(Ti(e,17,e.bl_tree),Cr(e,a-3,3)):(Ti(e,18,e.bl_tree),Cr(e,a-11,7));a=0,i=o,0===s?(l=138,u=3):o===s?(l=6,u=3):(l=7,u=4)}};let L_=!1;const B_=(e,t,n,r)=>{Cr(e,0+(r?1:0),3),((e,t,n,r)=>{P_(e),Gl(e,n),Gl(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n})(e,t,n)};var xL={_tr_init:e=>{L_||((()=>{let e,t,n,r,i;const o=new Array(16);for(n=0,r=0;r<28;r++)for(P0[r]=n,e=0;e<1<<R0[r];e++)zl[n++]=r;for(zl[n-1]=r,i=0,r=0;r<16;r++)for(sh[r]=i,e=0;e<1<<oh[r];e++)Hl[i++]=r;for(i>>=7;r<30;r++)for(sh[r]=i<<7,e=0;e<1<<oh[r]-7;e++)Hl[256+i++]=r;for(t=0;t<=15;t++)o[t]=0;for(e=0;e<=143;)to[2*e+1]=8,e++,o[8]++;for(;e<=255;)to[2*e+1]=9,e++,o[9]++;for(;e<=279;)to[2*e+1]=7,e++,o[7]++;for(;e<=287;)to[2*e+1]=8,e++,o[8]++;for(T_(to,287,o),e=0;e<30;e++)$l[2*e+1]=5,$l[2*e]=I_(e,5);C_=new k0(to,R0,257,286,15),M_=new k0($l,oh,0,30,15),S_=new k0(new Array(0),nL,0,19,7)})(),L_=!0),e.l_desc=new F0(e.dyn_ltree,C_),e.d_desc=new F0(e.dyn_dtree,M_),e.bl_desc=new F0(e.bl_tree,S_),e.bi_buf=0,e.bi_valid=0,R_(e)},_tr_stored_block:B_,_tr_flush_block:(e,t,n,r)=>{let i,o,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let n,t=4093624447;for(n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==e.dyn_ltree[2*n])return 1;return 0})(e)),N0(e,e.l_desc),N0(e,e.d_desc),s=(e=>{let t;for(O_(e,e.dyn_ltree,e.l_desc.max_code),O_(e,e.dyn_dtree,e.d_desc.max_code),N0(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*E_[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?B_(e,t,n,r):4===e.strategy||o===i?(Cr(e,2+(r?1:0),3),F_(e,to,$l)):(Cr(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(Cr(e,t-257,5),Cr(e,n-1,5),Cr(e,r-4,4),i=0;i<r;i++)Cr(e,e.bl_tree[2*E_[i]+1],3);N_(e,e.dyn_ltree,t-1),N_(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),F_(e,e.dyn_ltree,e.dyn_dtree)),R_(e),r&&P_(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(zl[n]+256+1)]++,e.dyn_dtree[2*A_(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{Cr(e,2,3),Ti(e,256,to),(e=>{16===e.bi_valid?(Gl(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},Yl=(e,t,n,r)=>{let i=65535&e|0,o=e>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{i=i+t[r++]|0,o=o+i|0}while(--s);i%=65521,o%=65521}return i|o<<16|0};const _L=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Wn=(e,t,n,r)=>{const i=_L,o=r+n;e^=-1;for(let s=r;s<o;s++)e=e>>>8^i[255&(e^t[s])];return-1^e},ss={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},as={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:DL,_tr_stored_block:EL,_tr_flush_block:CL,_tr_tally:Co,_tr_align:ML}=xL,{Z_NO_FLUSH:ls,Z_PARTIAL_FLUSH:SL,Z_FULL_FLUSH:AL,Z_FINISH:Mo,Z_BLOCK:U_,Z_OK:Ri,Z_STREAM_END:j_,Z_STREAM_ERROR:Wr,Z_DATA_ERROR:IL,Z_BUF_ERROR:L0,Z_DEFAULT_COMPRESSION:TL,Z_FILTERED:RL,Z_HUFFMAN_ONLY:ah,Z_RLE:PL,Z_FIXED:kL,Z_DEFAULT_STRATEGY:FL,Z_UNKNOWN:OL,Z_DEFLATED:lh}=as,gi=262,Ao=(e,t)=>(e.msg=ss[t],t),V_=e=>(e<<1)-(e>4?9:0),Io=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let To=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Ro=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},qn=(e,t)=>{CL(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ro(e.strm)},Xt=(e,t)=>{e.pending_buf[e.pending++]=t},Zl=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},YL=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=Yl(e.adler,t,i,n):2===e.state.wrap&&(e.adler=Wn(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},$_=(e,t)=>{let i,o,n=e.max_chain_length,r=e.strstart,s=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-gi?e.strstart-(e.w_size-gi):0,u=e.window,h=e.w_mask,d=e.prev,m=e.strstart+258;let x=u[r+s-1],L=u[r+s];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do{if(i=t,u[i+s]===L&&u[i+s-1]===x&&u[i]===u[r]&&u[++i]===u[r+1]){r+=2,i++;do{}while(u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&r<m);if(o=258-(m-r),r=m-258,o>s){if(e.match_start=t,s=o,o>=a)break;x=u[r+s-1],L=u[r+s]}}}while((t=d[t&h])>l&&0!=--n);return s<=e.lookahead?s:e.lookahead},hs=e=>{const t=e.w_size;let n,r,i,o,s;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-gi)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,r=e.hash_size,n=r;do{i=e.head[--n],e.head[n]=i>=t?i-t:0}while(--r);r=t,n=r;do{i=e.prev[--n],e.prev[n]=i>=t?i-t:0}while(--r);o+=t}if(0===e.strm.avail_in)break;if(r=YL(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=r,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=To(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=To(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<gi&&0!==e.strm.avail_in)},j0=(e,t)=>{let n,r;for(;;){if(e.lookahead<gi){if(hs(e),e.lookahead<gi&&t===ls)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=To(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-gi&&(e.match_length=$_(e,n)),e.match_length>=3)if(r=Co(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=To(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=To(e,e.ins_h,e.window[e.strstart+1]);else r=Co(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(qn(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Mo?(qn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(qn(e,!1),0===e.strm.avail_out)?1:2},xa=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<gi){if(hs(e),e.lookahead<gi&&t===ls)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=To(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-gi&&(e.match_length=$_(e,n),e.match_length<=5&&(e.strategy===RL||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=Co(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=To(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(qn(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=Co(e,0,e.window[e.strstart-1]),r&&qn(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Co(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Mo?(qn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(qn(e,!1),0===e.strm.avail_out)?1:2};function Pi(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const ql=[new Pi(0,0,0,0,(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(hs(e),0===e.lookahead&&t===ls)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,qn(e,!1),0===e.strm.avail_out)||e.strstart-e.block_start>=e.w_size-gi&&(qn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Mo?(qn(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&qn(e,!1),1)}),new Pi(4,4,8,4,j0),new Pi(4,5,16,8,j0),new Pi(4,6,32,32,j0),new Pi(4,4,16,16,xa),new Pi(8,16,32,32,xa),new Pi(8,16,128,128,xa),new Pi(8,32,128,256,xa),new Pi(32,128,258,1024,xa),new Pi(32,258,258,4096,xa)];function KL(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=lh,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Io(this.dyn_ltree),Io(this.dyn_dtree),Io(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Io(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Io(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const H_=e=>{if(!e||!e.state)return Ao(e,Wr);e.total_in=e.total_out=0,e.data_type=OL;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=ls,DL(t),Ri},z_=e=>{const t=H_(e);return t===Ri&&(e=>{e.window_size=2*e.w_size,Io(e.head),e.max_lazy_match=ql[e.level].max_lazy,e.good_match=ql[e.level].good_length,e.nice_match=ql[e.level].nice_length,e.max_chain_length=ql[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},G_=(e,t,n,r,i,o)=>{if(!e)return Wr;let s=1;if(t===TL&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||n!==lh||r<8||r>15||t<0||t>9||o<0||o>kL)return Ao(e,Wr);8===r&&(r=9);const a=new KL;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=o,a.method=n,z_(e)};var Kl_deflateInit2=G_,Kl_deflateSetHeader=(e,t)=>e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,Ri):Wr,Kl_deflate=(e,t)=>{let n,r;if(!e||!e.state||t>U_||t<0)return e?Ao(e,Wr):Wr;const i=e.state;if(!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==Mo)return Ao(e,0===e.avail_out?L0:Wr);i.strm=e;const o=i.last_flush;if(i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,Xt(i,31),Xt(i,139),Xt(i,8),i.gzhead?(Xt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Xt(i,255&i.gzhead.time),Xt(i,i.gzhead.time>>8&255),Xt(i,i.gzhead.time>>16&255),Xt(i,i.gzhead.time>>24&255),Xt(i,9===i.level?2:i.strategy>=ah||i.level<2?4:0),Xt(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Xt(i,255&i.gzhead.extra.length),Xt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=Wn(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(Xt(i,0),Xt(i,0),Xt(i,0),Xt(i,0),Xt(i,0),Xt(i,9===i.level?2:i.strategy>=ah||i.level<2?4:0),Xt(i,3),i.status=113);else{let s=lh+(i.w_bits-8<<4)<<8,a=-1;a=i.strategy>=ah||i.level<2?0:i.level<6?1:6===i.level?2:3,s|=a<<6,0!==i.strstart&&(s|=32),s+=31-s%31,i.status=113,Zl(i,s),0!==i.strstart&&(Zl(i,e.adler>>>16),Zl(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(e.adler=Wn(e.adler,i.pending_buf,i.pending-n,n)),Ro(e),n=i.pending,i.pending!==i.pending_buf_size));)Xt(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=Wn(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=Wn(e.adler,i.pending_buf,i.pending-n,n)),Ro(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}r=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Xt(i,r)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(e.adler=Wn(e.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=Wn(e.adler,i.pending_buf,i.pending-n,n)),Ro(e),n=i.pending,i.pending===i.pending_buf_size)){r=1;break}r=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Xt(i,r)}while(0!==r);i.gzhead.hcrc&&i.pending>n&&(e.adler=Wn(e.adler,i.pending_buf,i.pending-n,n)),0===r&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Ro(e),i.pending+2<=i.pending_buf_size&&(Xt(i,255&e.adler),Xt(i,e.adler>>8&255),e.adler=0,i.status=113)):i.status=113),0!==i.pending){if(Ro(e),0===e.avail_out)return i.last_flush=-1,Ri}else if(0===e.avail_in&&V_(t)<=V_(o)&&t!==Mo)return Ao(e,L0);if(666===i.status&&0!==e.avail_in)return Ao(e,L0);if(0!==e.avail_in||0!==i.lookahead||t!==ls&&666!==i.status){let s=i.strategy===ah?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(hs(e),0===e.lookahead)){if(t===ls)return 1;break}if(e.match_length=0,n=Co(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(qn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Mo?(qn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(qn(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===PL?((e,t)=>{let n,r,i,o;const s=e.window;for(;;){if(e.lookahead<=258){if(hs(e),e.lookahead<=258&&t===ls)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=e.strstart+258;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=258-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Co(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Co(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(qn(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Mo?(qn(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(qn(e,!1),0===e.strm.avail_out)?1:2})(i,t):ql[i.level].func(i,t);if((3===s||4===s)&&(i.status=666),1===s||3===s)return 0===e.avail_out&&(i.last_flush=-1),Ri;if(2===s&&(t===SL?ML(i):t!==U_&&(EL(i,0,0,!1),t===AL&&(Io(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Ro(e),0===e.avail_out))return i.last_flush=-1,Ri}return t!==Mo?Ri:i.wrap<=0?j_:(2===i.wrap?(Xt(i,255&e.adler),Xt(i,e.adler>>8&255),Xt(i,e.adler>>16&255),Xt(i,e.adler>>24&255),Xt(i,255&e.total_in),Xt(i,e.total_in>>8&255),Xt(i,e.total_in>>16&255),Xt(i,e.total_in>>24&255)):(Zl(i,e.adler>>>16),Zl(i,65535&e.adler)),Ro(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?Ri:j_)},Kl_deflateEnd=e=>{if(!e||!e.state)return Wr;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?Ao(e,Wr):(e.state=null,113===t?Ao(e,IL):Ri)},Kl_deflateSetDictionary=(e,t)=>{let n=t.length;if(!e||!e.state)return Wr;const r=e.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return Wr;if(1===i&&(e.adler=Yl(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(Io(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(n-r.w_size,n),0),t=l,n=r.w_size}const o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,hs(r);r.lookahead>=3;){let l=r.strstart,u=r.lookahead-2;do{r.ins_h=To(r,r.ins_h,r.window[l+3-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++}while(--u);r.strstart=l,r.lookahead=2,hs(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,r.wrap=i,Ri};const f3=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var dh_assign=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const r in n)f3(n,r)&&(e[r]=n[r])}}return e},dh_flattenChunks=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,o=e.length;r<o;r++){let s=e[r];n.set(s,i),i+=s.length}return n};let Y_=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Y_=!1}const Ql=new Uint8Array(256);for(let e=0;e<256;e++)Ql[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ql[254]=Ql[254]=1;var Jl_string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,o,s=e.length,a=0;for(i=0;i<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},Jl_buf2string=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const o=new Array(2*n);for(i=0,r=0;r<n;){let s=e[r++];if(s<128){o[i++]=s;continue}let a=Ql[s];if(a>4)o[i++]=65533,r+=a-1;else{for(s&=2===a?31:3===a?15:7;a>1&&r<n;)s=s<<6|63&e[r++],a--;a>1?o[i++]=65533:s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|1023&s)}}return((e,t)=>{if(t<65534&&e.subarray&&Y_)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(o,i)},Jl_utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Ql[e[n]]>t?n:t},W_=function y3(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const X_=Object.prototype.toString,{Z_NO_FLUSH:x3,Z_SYNC_FLUSH:b3,Z_FULL_FLUSH:_3,Z_FINISH:D3,Z_OK:ph,Z_STREAM_END:E3,Z_DEFAULT_COMPRESSION:C3,Z_DEFAULT_STRATEGY:M3,Z_DEFLATED:S3}=as;function eu(e){this.options=dh_assign({level:C3,method:S3,chunkSize:16384,windowBits:15,memLevel:8,strategy:M3},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new W_,this.strm.avail_out=0;let n=Kl_deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==ph)throw new Error(ss[n]);if(t.header&&Kl_deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(r="string"==typeof t.dictionary?Jl_string2buf(t.dictionary):"[object ArrayBuffer]"===X_.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Kl_deflateSetDictionary(this.strm,r),n!==ph)throw new Error(ss[n]);this._dict_set=!0}}function V0(e,t){const n=new eu(t);if(n.push(e,!0),n.err)throw n.msg||ss[n.err];return n.result}eu.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?D3:x3,n.input="string"==typeof e?Jl_string2buf(e):"[object ArrayBuffer]"===X_.call(e)?new Uint8Array(e):e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===b3||o===_3)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Kl_deflate(n,o),i===E3)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Kl_deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===ph;if(0!==n.avail_out){if(o>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},eu.prototype.onData=function(e){this.chunks.push(e)},eu.prototype.onEnd=function(e){e===ph&&(this.result=dh_flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var O3={Deflate:eu,deflate:V0,deflateRaw:function A3(e,t){return(t=t||{}).raw=!0,V0(e,t)},gzip:function I3(e,t){return(t=t||{}).gzip=!0,V0(e,t)},constants:as},L3=function(t,n){let r,i,o,s,a,l,u,h,d,m,x,L,K,W,te,xe,pe,be,Te,Je,Xe,ft,ct,rt;const at=t.state;r=t.next_in,ct=t.input,i=r+(t.avail_in-5),o=t.next_out,rt=t.output,s=o-(n-t.avail_out),a=o+(t.avail_out-257),l=at.dmax,u=at.wsize,h=at.whave,d=at.wnext,m=at.window,x=at.hold,L=at.bits,K=at.lencode,W=at.distcode,te=(1<<at.lenbits)-1,xe=(1<<at.distbits)-1;e:do{L<15&&(x+=ct[r++]<<L,L+=8,x+=ct[r++]<<L,L+=8),pe=K[x&te];t:for(;;){if(be=pe>>>24,x>>>=be,L-=be,be=pe>>>16&255,0===be)rt[o++]=65535&pe;else{if(!(16&be)){if(0==(64&be)){pe=K[(65535&pe)+(x&(1<<be)-1)];continue t}if(32&be){at.mode=12;break e}t.msg="invalid literal/length code",at.mode=30;break e}Te=65535&pe,be&=15,be&&(L<be&&(x+=ct[r++]<<L,L+=8),Te+=x&(1<<be)-1,x>>>=be,L-=be),L<15&&(x+=ct[r++]<<L,L+=8,x+=ct[r++]<<L,L+=8),pe=W[x&xe];n:for(;;){if(be=pe>>>24,x>>>=be,L-=be,be=pe>>>16&255,!(16&be)){if(0==(64&be)){pe=W[(65535&pe)+(x&(1<<be)-1)];continue n}t.msg="invalid distance code",at.mode=30;break e}if(Je=65535&pe,be&=15,L<be&&(x+=ct[r++]<<L,L+=8,L<be&&(x+=ct[r++]<<L,L+=8)),Je+=x&(1<<be)-1,Je>l){t.msg="invalid distance too far back",at.mode=30;break e}if(x>>>=be,L-=be,be=o-s,Je>be){if(be=Je-be,be>h&&at.sane){t.msg="invalid distance too far back",at.mode=30;break e}if(Xe=0,ft=m,0===d){if(Xe+=u-be,be<Te){Te-=be;do{rt[o++]=m[Xe++]}while(--be);Xe=o-Je,ft=rt}}else if(d<be){if(Xe+=u+d-be,be-=d,be<Te){Te-=be;do{rt[o++]=m[Xe++]}while(--be);if(Xe=0,d<Te){be=d,Te-=be;do{rt[o++]=m[Xe++]}while(--be);Xe=o-Je,ft=rt}}}else if(Xe+=d-be,be<Te){Te-=be;do{rt[o++]=m[Xe++]}while(--be);Xe=o-Je,ft=rt}for(;Te>2;)rt[o++]=ft[Xe++],rt[o++]=ft[Xe++],rt[o++]=ft[Xe++],Te-=3;Te&&(rt[o++]=ft[Xe++],Te>1&&(rt[o++]=ft[Xe++]))}else{Xe=o-Je;do{rt[o++]=rt[Xe++],rt[o++]=rt[Xe++],rt[o++]=rt[Xe++],Te-=3}while(Te>2);Te&&(rt[o++]=rt[Xe++],Te>1&&(rt[o++]=rt[Xe++]))}break}}break}}while(r<i&&o<a);Te=L>>3,r-=Te,L-=Te<<3,x&=(1<<L)-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<a?a-o+257:257-(o-a),at.hold=x,at.bits=L};const B3=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),U3=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),j3=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),V3=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var tu=(e,t,n,r,i,o,s,a)=>{const l=a.bits;let pe,be,Te,Je,Xe,rt,u=0,h=0,d=0,m=0,x=0,L=0,K=0,W=0,te=0,xe=0,ft=null,ct=0;const at=new Uint16Array(16),Ut=new Uint16Array(16);let Rt,Kr,ms,Zt=null,un=0;for(u=0;u<=15;u++)at[u]=0;for(h=0;h<r;h++)at[t[n+h]]++;for(x=l,m=15;m>=1&&0===at[m];m--);if(x>m&&(x=m),0===m)return i[o++]=20971520,i[o++]=20971520,a.bits=1,0;for(d=1;d<m&&0===at[d];d++);for(x<d&&(x=d),W=1,u=1;u<=15;u++)if(W<<=1,W-=at[u],W<0)return-1;if(W>0&&(0===e||1!==m))return-1;for(Ut[1]=0,u=1;u<15;u++)Ut[u+1]=Ut[u]+at[u];for(h=0;h<r;h++)0!==t[n+h]&&(s[Ut[t[n+h]]++]=h);if(0===e?(ft=Zt=s,rt=19):1===e?(ft=B3,ct-=257,Zt=U3,un-=257,rt=256):(ft=j3,Zt=V3,rt=-1),xe=0,h=0,u=d,Xe=o,L=x,K=0,Te=-1,te=1<<x,Je=te-1,1===e&&te>852||2===e&&te>592)return 1;for(;;){Rt=u-K,s[h]<rt?(Kr=0,ms=s[h]):s[h]>rt?(Kr=Zt[un+s[h]],ms=ft[ct+s[h]]):(Kr=96,ms=0),pe=1<<u-K,be=1<<L,d=be;do{be-=pe,i[Xe+(xe>>K)+be]=Rt<<24|Kr<<16|ms|0}while(0!==be);for(pe=1<<u-1;xe&pe;)pe>>=1;if(0!==pe?(xe&=pe-1,xe+=pe):xe=0,h++,0==--at[u]){if(u===m)break;u=t[n+s[h]]}if(u>x&&(xe&Je)!==Te){for(0===K&&(K=x),Xe+=d,L=u-K,W=1<<L;L+K<m&&(W-=at[L+K],!(W<=0));)L++,W<<=1;if(te+=1<<L,1===e&&te>852||2===e&&te>592)return 1;Te=xe&Je,i[Te]=x<<24|L<<16|Xe-o|0}}return 0!==xe&&(i[Xe+xe]=u-K<<24|64<<16|0),a.bits=x,0};const{Z_FINISH:tD,Z_BLOCK:H3,Z_TREES:mh,Z_OK:fs,Z_STREAM_END:z3,Z_NEED_DICT:G3,Z_STREAM_ERROR:Xr,Z_DATA_ERROR:nD,Z_MEM_ERROR:rD,Z_BUF_ERROR:Y3,Z_DEFLATED:iD}=as,AD=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function K3(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ID=e=>{if(!e||!e.state)return Xr;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,fs},TD=e=>{if(!e||!e.state)return Xr;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,ID(e)},RD=(e,t)=>{let n;if(!e||!e.state)return Xr;const r=e.state;return t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Xr:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,TD(e))},PD=(e,t)=>{if(!e)return Xr;const n=new K3;e.state=n,n.window=null;const r=RD(e,t);return r!==fs&&(e.state=null),r};let Y0,W0,kD=!0;const J3=e=>{if(kD){Y0=new Int32Array(512),W0=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(tu(1,e.lens,0,288,Y0,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;tu(2,e.lens,0,32,W0,0,e.work,{bits:5}),kD=!1}e.lencode=Y0,e.lenbits=9,e.distcode=W0,e.distbits=5},FD=(e,t,n,r)=>{let i;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),(r-=i)?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var ro_inflateReset=TD,ro_inflateInit2=PD,ro_inflate=(e,t)=>{let n,r,i,o,s,a,l,u,h,d,m,x,L,K,te,xe,pe,be,Te,Je,Xe,ft,W=0;const ct=new Uint8Array(4);let rt,at;const Ut=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Xr;n=e.state,12===n.mode&&(n.mode=13),s=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,u=n.hold,h=n.bits,d=a,m=l,ft=fs;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;h<16;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}if(2&n.wrap&&35615===u){n.check=0,ct[0]=255&u,ct[1]=u>>>8&255,n.check=Wn(n.check,ct,2,0),u=0,h=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=30;break}if((15&u)!==iD){e.msg="unknown compression method",n.mode=30;break}if(u>>>=4,h-=4,Xe=8+(15&u),0===n.wbits)n.wbits=Xe;else if(Xe>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=512&u?10:12,u=0,h=0;break;case 2:for(;h<16;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}if(n.flags=u,(255&n.flags)!==iD){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(ct[0]=255&u,ct[1]=u>>>8&255,n.check=Wn(n.check,ct,2,0)),u=0,h=0,n.mode=3;case 3:for(;h<32;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}n.head&&(n.head.time=u),512&n.flags&&(ct[0]=255&u,ct[1]=u>>>8&255,ct[2]=u>>>16&255,ct[3]=u>>>24&255,n.check=Wn(n.check,ct,4,0)),u=0,h=0,n.mode=4;case 4:for(;h<16;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(ct[0]=255&u,ct[1]=u>>>8&255,n.check=Wn(n.check,ct,2,0)),u=0,h=0,n.mode=5;case 5:if(1024&n.flags){for(;h<16;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(ct[0]=255&u,ct[1]=u>>>8&255,n.check=Wn(n.check,ct,2,0)),u=0,h=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(x=n.length,x>a&&(x=a),x&&(n.head&&(Xe=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+x),Xe)),512&n.flags&&(n.check=Wn(n.check,r,x,o)),a-=x,o+=x,n.length-=x),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===a)break e;x=0;do{Xe=r[o+x++],n.head&&Xe&&n.length<65536&&(n.head.name+=String.fromCharCode(Xe))}while(Xe&&x<a);if(512&n.flags&&(n.check=Wn(n.check,r,x,o)),a-=x,o+=x,Xe)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===a)break e;x=0;do{Xe=r[o+x++],n.head&&Xe&&n.length<65536&&(n.head.comment+=String.fromCharCode(Xe))}while(Xe&&x<a);if(512&n.flags&&(n.check=Wn(n.check,r,x,o)),a-=x,o+=x,Xe)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;h<16;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}if(u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}u=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;h<32;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}e.adler=n.check=AD(u),u=0,h=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=u,n.bits=h,G3;e.adler=n.check=1,n.mode=12;case 12:if(t===H3||t===mh)break e;case 13:if(n.last){u>>>=7&h,h-=7&h,n.mode=27;break}for(;h<3;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}switch(n.last=1&u,u>>>=1,h-=1,3&u){case 0:n.mode=14;break;case 1:if(J3(n),n.mode=20,t===mh){u>>>=2,h-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}u>>>=2,h-=2;break;case 14:for(u>>>=7&h,h-=7&h;h<32;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&u,u=0,h=0,n.mode=15,t===mh)break e;case 15:n.mode=16;case 16:if(x=n.length,x){if(x>a&&(x=a),x>l&&(x=l),0===x)break e;i.set(r.subarray(o,o+x),s),a-=x,o+=x,l-=x,s+=x,n.length-=x;break}n.mode=12;break;case 17:for(;h<14;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}if(n.nlen=257+(31&u),u>>>=5,h-=5,n.ndist=1+(31&u),u>>>=5,h-=5,n.ncode=4+(15&u),u>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;h<3;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}n.lens[Ut[n.have++]]=7&u,u>>>=3,h-=3}for(;n.have<19;)n.lens[Ut[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,rt={bits:n.lenbits},ft=tu(0,n.lens,0,19,n.lencode,0,n.work,rt),n.lenbits=rt.bits,ft){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;W=n.lencode[u&(1<<n.lenbits)-1],te=W>>>24,xe=W>>>16&255,pe=65535&W,!(te<=h);){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}if(pe<16)u>>>=te,h-=te,n.lens[n.have++]=pe;else{if(16===pe){for(at=te+2;h<at;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}if(u>>>=te,h-=te,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}Xe=n.lens[n.have-1],x=3+(3&u),u>>>=2,h-=2}else if(17===pe){for(at=te+3;h<at;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}u>>>=te,h-=te,Xe=0,x=3+(7&u),u>>>=3,h-=3}else{for(at=te+7;h<at;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}u>>>=te,h-=te,Xe=0,x=11+(127&u),u>>>=7,h-=7}if(n.have+x>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;x--;)n.lens[n.have++]=Xe}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,rt={bits:n.lenbits},ft=tu(1,n.lens,0,n.nlen,n.lencode,0,n.work,rt),n.lenbits=rt.bits,ft){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,rt={bits:n.distbits},ft=tu(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,rt),n.distbits=rt.bits,ft){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,t===mh)break e;case 20:n.mode=21;case 21:if(a>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=u,n.bits=h,L3(e,m),s=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,u=n.hold,h=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;W=n.lencode[u&(1<<n.lenbits)-1],te=W>>>24,xe=W>>>16&255,pe=65535&W,!(te<=h);){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}if(xe&&0==(240&xe)){for(be=te,Te=xe,Je=pe;W=n.lencode[Je+((u&(1<<be+Te)-1)>>be)],te=W>>>24,xe=W>>>16&255,pe=65535&W,!(be+te<=h);){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}u>>>=be,h-=be,n.back+=be}if(u>>>=te,h-=te,n.back+=te,n.length=pe,0===xe){n.mode=26;break}if(32&xe){n.back=-1,n.mode=12;break}if(64&xe){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&xe,n.mode=22;case 22:if(n.extra){for(at=n.extra;h<at;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;W=n.distcode[u&(1<<n.distbits)-1],te=W>>>24,xe=W>>>16&255,pe=65535&W,!(te<=h);){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}if(0==(240&xe)){for(be=te,Te=xe,Je=pe;W=n.distcode[Je+((u&(1<<be+Te)-1)>>be)],te=W>>>24,xe=W>>>16&255,pe=65535&W,!(be+te<=h);){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}u>>>=be,h-=be,n.back+=be}if(u>>>=te,h-=te,n.back+=te,64&xe){e.msg="invalid distance code",n.mode=30;break}n.offset=pe,n.extra=15&xe,n.mode=24;case 24:if(n.extra){for(at=n.extra;h<at;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break e;if(x=m-l,n.offset>x){if(x=n.offset-x,x>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}x>n.wnext?(x-=n.wnext,L=n.wsize-x):L=n.wnext-x,x>n.length&&(x=n.length),K=n.window}else K=i,L=s-n.offset,x=n.length;x>l&&(x=l),l-=x,n.length-=x;do{i[s++]=K[L++]}while(--x);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;i[s++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;h<32;){if(0===a)break e;a--,u|=r[o++]<<h,h+=8}if(m-=l,e.total_out+=m,n.total+=m,m&&(e.adler=n.check=n.flags?Wn(n.check,i,m,s-m):Yl(n.check,i,m,s-m)),m=l,(n.flags?u:AD(u))!==n.check){e.msg="incorrect data check",n.mode=30;break}u=0,h=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;h<32;){if(0===a)break e;a--,u+=r[o++]<<h,h+=8}if(u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}u=0,h=0}n.mode=29;case 29:ft=z3;break e;case 30:ft=nD;break e;case 31:return rD;default:return Xr}return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=u,n.bits=h,(n.wsize||m!==e.avail_out&&n.mode<30&&(n.mode<27||t!==tD))&&FD(e,e.output,e.next_out,m-e.avail_out),d-=e.avail_in,m-=e.avail_out,e.total_in+=d,e.total_out+=m,n.total+=m,n.wrap&&m&&(e.adler=n.check=n.flags?Wn(n.check,i,m,e.next_out-m):Yl(n.check,i,m,e.next_out-m)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===d&&0===m||t===tD)&&ft===fs&&(ft=Y3),ft},ro_inflateEnd=e=>{if(!e||!e.state)return Xr;let t=e.state;return t.window&&(t.window=null),e.state=null,fs},ro_inflateGetHeader=(e,t)=>{if(!e||!e.state)return Xr;const n=e.state;return 0==(2&n.wrap)?Xr:(n.head=t,t.done=!1,fs)},ro_inflateSetDictionary=(e,t)=>{const n=t.length;let r,i,o;return e&&e.state&&(r=e.state,0===r.wrap||11===r.mode)?11===r.mode&&(i=1,i=Yl(i,t,n,0),i!==r.check)?nD:(o=FD(e,t,n,n),o?(r.mode=31,rD):(r.havedict=1,fs)):Xr},g4=function p4(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const OD=Object.prototype.toString,{Z_NO_FLUSH:m4,Z_FINISH:v4,Z_OK:nu,Z_STREAM_END:X0,Z_NEED_DICT:Z0,Z_STREAM_ERROR:w4,Z_DATA_ERROR:ND,Z_MEM_ERROR:y4}=as;function ru(e){this.options=dh_assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new W_,this.strm.avail_out=0;let n=ro_inflateInit2(this.strm,t.windowBits);if(n!==nu)throw new Error(ss[n]);if(this.header=new g4,ro_inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Jl_string2buf(t.dictionary):"[object ArrayBuffer]"===OD.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=ro_inflateSetDictionary(this.strm,t.dictionary),n!==nu)))throw new Error(ss[n])}function q0(e,t){const n=new ru(t);if(n.push(e),n.err)throw n.msg||ss[n.err];return n.result}ru.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(s=t===~~t?t:!0===t?v4:m4,n.input="[object ArrayBuffer]"===OD.call(e)?new Uint8Array(e):e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=ro_inflate(n,s),o===Z0&&i&&(o=ro_inflateSetDictionary(n,i),o===nu?o=ro_inflate(n,s):o===ND&&(o=Z0));n.avail_in>0&&o===X0&&n.state.wrap>0&&0!==e[n.next_in];)ro_inflateReset(n),o=ro_inflate(n,s);switch(o){case w4:case ND:case Z0:case y4:return this.onEnd(o),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||o===X0))if("string"===this.options.to){let l=Jl_utf8border(n.output,n.next_out),u=n.next_out-l,h=Jl_buf2string(n.output,l);n.next_out=u,n.avail_out=r-u,u&&n.output.set(n.output.subarray(l,l+u),0),this.onData(h)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(o!==nu||0!==a){if(o===X0)return o=ro_inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},ru.prototype.onData=function(e){this.chunks.push(e)},ru.prototype.onEnd=function(e){e===nu&&(this.result="string"===this.options.to?this.chunks.join(""):dh_flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var M4={Inflate:ru,inflate:q0,inflateRaw:function x4(e,t){return(t=t||{}).raw=!0,q0(e,t)},ungzip:q0,constants:as};const{deflate:A4}=O3,{Inflate:R4,inflate:P4}=M4;var LD=A4,BD=R4,K0=P4;const xh=[137,80,78,71,13,10,26,10],UD=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)1&t?t=3988292384^t>>>1:t>>>=1;UD[e]=t}const jD=4294967295;function VD(e,t){return(function V4(e,t,n){let r=e;for(let i=0;i<n;i++)r=UD[255&(r^t[i])]^r>>>8;return r}(jD,e,t)^jD)>>>0}var Mr=(()=>{return(e=Mr||(Mr={}))[e.UNKNOWN=-1]="UNKNOWN",e[e.GREYSCALE=0]="GREYSCALE",e[e.TRUECOLOUR=2]="TRUECOLOUR",e[e.INDEXED_COLOUR=3]="INDEXED_COLOUR",e[e.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",e[e.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA",Mr;var e})(),ds=(()=>{return(e=ds||(ds={}))[e.UNKNOWN=-1]="UNKNOWN",e[e.DEFLATE=0]="DEFLATE",ds;var e})(),_a=(()=>{return(e=_a||(_a={}))[e.UNKNOWN=-1]="UNKNOWN",e[e.ADAPTIVE=0]="ADAPTIVE",_a;var e})(),Da=(()=>{return(e=Da||(Da={}))[e.UNKNOWN=-1]="UNKNOWN",e[e.NO_INTERLACE=0]="NO_INTERLACE",e[e.ADAM7=1]="ADAM7",Da;var e})();const $4=new Uint8Array(0),H4=new Uint16Array([255]),z4=255===new Uint8Array(H4.buffer)[0];class G4 extends Ul{constructor(t,n={}){super(t);const{checkCrc:r=!1}=n;this._checkCrc=r,this._inflator=new BD,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._end=!1,this._hasPalette=!1,this._palette=[],this._compressionMethod=ds.UNKNOWN,this._filterMethod=_a.UNKNOWN,this._interlaceMethod=Da.UNKNOWN,this._colorType=-1,this.setBigEndian()}decode(){for(this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(let t=0;t<xh.length;t++)if(this.readUint8()!==xh[t])throw new Error(`wrong PNG signature. Byte at ${t} should be ${xh[t]}.`)}decodeChunk(){const t=this.readUint32(),n=this.readChars(4),r=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case"tEXt":this.decodetEXt(t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t)}if(this.offset-r!==t)throw new Error(`Length mismatch while decoding chunk ${n}`);if(this._checkCrc){const i=this.readUint32(),o=t+4,s=VD(new Uint8Array(this.buffer,this.byteOffset+this.offset-o-4,o),o);if(s!==i)throw new Error(`CRC mismatch for chunk ${n}. Expected ${i}, found ${s}`)}else this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=function J4(e){if(1!==e&&2!==e&&4!==e&&8!==e&&16!==e)throw new Error(`invalid bit depth: ${e}`);return e}(this.readUint8());const n=this.readUint8();let r;switch(this._colorType=n,n){case Mr.GREYSCALE:r=1;break;case Mr.TRUECOLOUR:r=3;break;case Mr.INDEXED_COLOUR:r=1;break;case Mr.GREYSCALE_ALPHA:r=2;break;case Mr.TRUECOLOUR_ALPHA:r=4;break;default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==ds.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodePLTE(t){if(t%3!=0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const n=t/3;this._hasPalette=!0;const r=[];this._palette=r;for(let i=0;i<n;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,t)),this.skip(t)}decodetRNS(t){if(3===this._colorType){if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let n=0;for(;n<t;n++){const r=this.readByte();this._palette[n].push(r)}for(;n<this._palette.length;n++)this._palette[n].push(255)}}decodeiCCP(t){let r,n="";for(;"\0"!==(r=this.readChar());)n+=r;const i=this.readUint8();if(i!==ds.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const o=this.readBytes(t-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:K0(o)}}decodetEXt(t){let r,n="";for(;"\0"!==(r=this.readChar());)n+=r;this._png.text[n]=this.readChars(t-n.length-1)}decodepHYs(){const t=this.readUint32(),n=this.readUint32(),r=this.readByte();this._png.resolution={x:t,y:n,unit:r}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._inflator.result;if(this._filterMethod!==_a.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod!==Da.NO_INTERLACE)throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this.decodeInterlaceNull(t)}decodeInterlaceNull(t){const n=this._png.height,r=this._png.channels*this._png.depth/8,i=this._png.width*r,o=new Uint8Array(this._png.height*i);let l,u,s=$4,a=0;for(let h=0;h<n;h++){switch(l=t.subarray(a+1,a+1+i),u=o.subarray(h*i,(h+1)*i),t[a]){case 0:Y4(l,u,i);break;case 1:W4(l,u,i,r);break;case 2:X4(l,u,s,i);break;case 3:Z4(l,u,s,i,r);break;case 4:q4(l,u,s,i,r);break;default:throw new Error(`Unsupported filter: ${t[a]}`)}s=u,a+=i+1}if(this._hasPalette&&(this._png.palette=this._palette),16===this._png.depth){const h=new Uint16Array(o.buffer);if(z4)for(let d=0;d<h.length;d++)h[d]=(255&(e=h[d]))<<8|e>>8&255;this._png.data=h}else this._png.data=o;var e}}function Y4(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function W4(e,t,n,r){let i=0;for(;i<r;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-r]&255}function X4(e,t,n,r){let i=0;if(0===n.length)for(;i<r;i++)t[i]=e[i];else for(;i<r;i++)t[i]=e[i]+n[i]&255}function Z4(e,t,n,r,i){let o=0;if(0===n.length){for(;o<i;o++)t[o]=e[o];for(;o<r;o++)t[o]=e[o]+(t[o-i]>>1)&255}else{for(;o<i;o++)t[o]=e[o]+(n[o]>>1)&255;for(;o<r;o++)t[o]=e[o]+(t[o-i]+n[o]>>1)&255}}function q4(e,t,n,r,i){let o=0;if(0===n.length){for(;o<i;o++)t[o]=e[o];for(;o<r;o++)t[o]=e[o]+t[o-i]&255}else{for(;o<i;o++)t[o]=e[o]+n[o]&255;for(;o<r;o++)t[o]=e[o]+K4(t[o-i],n[o],n[o-i])&255}}function K4(e,t,n){const r=e+t-n,i=Math.abs(r-e),o=Math.abs(r-t),s=Math.abs(r-n);return i<=o&&i<=s?e:o<=s?t:n}const eB={level:3};class tB extends Ul{constructor(t,n={}){super(),this._colorType=Mr.UNKNOWN,this._zlibOptions=Object.assign({},eB,n.zlib),this._png=this._checkData(t),this.setBigEndian()}encode(){return this.encodeSignature(),this.encodeIHDR(),this.encodeData(),this.encodeIEND(),this.toArray()}encodeSignature(){this.writeBytes(xh)}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(ds.DEFLATE),this.writeByte(_a.ADAPTIVE),this.writeByte(Da.NO_INTERLACE),this.writeCrc(17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),this.writeCrc(4)}encodeIDAT(t){this.writeUint32(t.length),this.writeChars("IDAT"),this.writeBytes(t),this.writeCrc(t.length+4)}encodeData(){const{width:t,height:n,channels:r,depth:i,data:o}=this._png,s=r*t,a=(new Ul).setBigEndian();let l=0;for(let d=0;d<n;d++)if(a.writeByte(0),8===i)l=rB(o,a,s,l);else{if(16!==i)throw new Error("unreachable");l=iB(o,a,s,l)}const u=a.toArray(),h=LD(u,this._zlibOptions);this.encodeIDAT(h)}_checkData(t){const{colorType:n,channels:r,depth:i}=function nB(e){const{channels:t=4,depth:n=8}=e;if(4!==t&&3!==t&&2!==t&&1!==t)throw new RangeError(`unsupported number of channels: ${t}`);if(8!==n&&16!==n)throw new RangeError(`unsupported bit depth: ${n}`);const r={channels:t,depth:n,colorType:Mr.UNKNOWN};switch(t){case 4:r.colorType=Mr.TRUECOLOUR_ALPHA;break;case 3:r.colorType=Mr.TRUECOLOUR;break;case 1:r.colorType=Mr.GREYSCALE;break;case 2:r.colorType=Mr.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return r}(t),o={width:HD(t.width,"width"),height:HD(t.height,"height"),channels:r,data:t.data,depth:i,text:{}};this._colorType=n;const s=o.width*o.height*r;if(o.data.length!==s)throw new RangeError(`wrong data size. Found ${o.data.length}, expected ${s}`);return o}writeCrc(t){this.writeUint32(VD(new Uint8Array(this.buffer,this.byteOffset+this.offset-t,t),t))}}function HD(e,t){if(Number.isInteger(e)&&e>0)return e;throw new TypeError(`${t} must be a positive integer`)}function rB(e,t,n,r){for(let i=0;i<n;i++)t.writeByte(e[r++]);return r}function iB(e,t,n,r){for(let i=0;i<n;i++)t.writeUint16(e[r++]);return r}var zD=D(7341);let Ea="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iu=new Uint8Array(256);for(let e=0;e<Ea.length;e++)iu[Ea.charCodeAt(e)]=e;function GD(e,t){const n=function aB(e){let t,n=e.length,r="";for(t=0;t<n;t+=3)r+=Ea[e[t]>>2],r+=Ea[(3&e[t])<<4|e[t+1]>>4],r+=Ea[(15&e[t+1])<<2|e[t+2]>>6],r+=Ea[63&e[t+2]];return n%3==2?r=`${r.substring(0,r.length-1)}=`:n%3==1&&(r=`${r.substring(0,r.length-2)}==`),r}(e);return`data:${t};base64,${n}`}const uB=self.ImageData,cB=self.Image;function YD(e,t){let n=self.document.createElement("canvas");return n.width=e,n.height=t,n}function Q0(e,t={}){const n={width:e.width,height:e.height,data:e.getRGBAData()};return(0,zD.encode)(n,t.quality).data}function J0(e,t){const n={width:e.width,height:e.height,channels:e.channels,depth:e.bitDepth,data:e.data};return(1===n.depth||32===n.depth)&&(n.depth=8,n.channels=4,n.data=e.getRGBAData()),function sB(e,t){return new tB(e,t).encode()}(n,t)}const WD={save(e,t={}){const{useCanvas:n=!1,encoder:r}=t;let{format:i}=t;if(!i){const o=/\.(?<format>[a-zA-Z]+)$/.exec(e);o&&(i=o.groups.format.toLowerCase())}if(!i)throw new Error("file format not provided");return new Promise((o,s)=>{let a,l;switch(i.toLowerCase()){case"png":n?a=this.getCanvas().pngStream():l=J0(this,r);break;case"jpg":case"jpeg":n?a=this.getCanvas().jpegStream():l=Q0(this,r);break;case"bmp":l=(0,M0.encode)(this,r);break;default:throw new RangeError(`invalid output format: ${i}`)}if(a){let u=function fB(){throw new Error("createWriteStream does not exist in the browser")}();u.on("finish",o),u.on("error",s),a.pipe(u)}else l&&function dB(){throw new Error("writeFile does not exist in the browser")}()})},toDataURL(e="image/png",t={}){"object"==typeof e&&(t=e,e="image/png");const{useCanvas:n=!1,encoder:r}=t;function i(o,s){return GD(o(s,r),e)}return"image/bmp"===(e=function pB(e){return e.includes("/")||(e=`image/${e}`),e}(e))?i(M0.encode,this):"image/png"!==e||n?"image/jpeg"!==e||n?this.getCanvas().toDataURL(e):i(Q0,this):i(J0,this)},toBuffer(e={}){const{format:t="png",encoder:n}=e;switch(t.toLowerCase()){case"png":return J0(this,n);case"jpeg":case"jpg":return Q0(this,n);case"bmp":return(0,M0.encode)(this,n);default:throw new RangeError(`invalid output format: ${t}`)}},toBase64(e="image/png",t={}){if(t.async)return this.toDataURL(e,t).then(function(n){return n.substring(n.indexOf(",")+1)});{const n=this.toDataURL(e,t);return n.substring(n.indexOf(",")+1)}},toBlob(e="image/png",t=.8){return g_(this.getCanvas(),e,t)},getCanvas(){const e=new uB(this.getRGBAData({clamped:!0}),this.width,this.height);let t=YD(this.width,this.height);return t.getContext("2d").putImageData(e,0,0),t}};var mB=D(1954),XD=D.n(mB);let ZD={configurable:!0,enumerable:!1,get:void 0};const mi="GREY",Nr="RGB",eg="HSL",tg="HSV",ou="CMYK",Zr="BINARY",qD="RGBA",Po={};Po[Zr]={components:1,alpha:0,bitDepth:1,colorModel:mi},Po.GREYA={components:1,alpha:1,bitDepth:8,colorModel:mi},Po.GREY={components:1,alpha:0,bitDepth:8,colorModel:mi},Po[qD]={components:3,alpha:1,bitDepth:8,colorModel:Nr},Po.RGB={components:3,alpha:0,bitDepth:8,colorModel:Nr},Po.CMYK={components:4,alpha:0,bitDepth:8,colorModel:ou},Po.CMYKA={components:4,alpha:1,bitDepth:8,colorModel:ou};const KD=[1,8,16,32];var NB=D(8869),LB=D(4940),BB=D.n(LB);D(4213);const UB=new TextDecoder("utf-8"),VB=new TextEncoder;class bh{constructor(t=8192,n={}){let r=!1;"number"==typeof t?t=new ArrayBuffer(t):(r=!0,this.lastWrittenByte=t.byteLength);const i=n.offset?n.offset>>>0:0,o=t.byteLength-i;let s=i;(ArrayBuffer.isView(t)||t instanceof bh)&&(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+i),t=t.buffer),this.lastWrittenByte=r?o:0,this.buffer=t,this.length=o,this.byteLength=o,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,o),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const r=2*(this.offset+t),i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){const n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=this.readByte();return n}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let r=0;r<t;r++)n+=this.readChar();return n}readUtf8(t=1){return function jB(e){return UB.decode(e)}(this.readBytes(t))}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(function $B(e){return VB.encode(e)}(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const ng={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},QD={};for(let e in ng)QD[ng[e]]=Number(e);const rg={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},JD={};for(let e in rg)JD[rg[e]]=Number(e);const ig={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},eE={};for(let e in ig)eE[ig[e]]=Number(e);const tE={standard:_,exif:U,gps:b};class nE{constructor(t){if(!t)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=t,this._hasMap=!1,this._map={}}get(t){if("number"==typeof t)return this.fields.get(t);if("string"==typeof t)return this.fields.get(tE[this.kind].tagsByName[t]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const t=tE[this.kind].tagsById;for(let n of this.fields.keys())t[n]&&(this._map[t[n]]=this.fields.get(n));this._hasMap=!0}return this._map}}let rE=new Map([[1,[1,iE]],[2,[1,function ZB(e,t){let n=[],r="";for(let i=0;i<t;i++){let o=String.fromCharCode(e.readUint8());"\0"===o?(n.push(r),r=""):r+=o}return 1===n.length?n[0]:n}]],[3,[2,function qB(e,t){if(1===t)return e.readUint16();let n=new Uint16Array(t);for(let r=0;r<t;r++)n[r]=e.readUint16();return n}]],[4,[4,function KB(e,t){if(1===t)return e.readUint32();let n=new Uint32Array(t);for(let r=0;r<t;r++)n[r]=e.readUint32();return n}]],[5,[8,function QB(e,t){if(1===t)return e.readUint32()/e.readUint32();let n=new Array(t);for(let r=0;r<t;r++)n[r]=e.readUint32()/e.readUint32();return n}]],[6,[1,function JB(e,t){if(1===t)return e.readInt8();let n=new Int8Array(t);for(let r=0;r<t;r++)n[r]=e.readInt8();return n}]],[7,[1,iE]],[8,[2,function e6(e,t){if(1===t)return e.readInt16();let n=new Int16Array(t);for(let r=0;r<t;r++)n[r]=e.readInt16();return n}]],[9,[4,function t6(e,t){if(1===t)return e.readInt32();let n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=e.readInt32();return n}]],[10,[8,function n6(e,t){if(1===t)return e.readInt32()/e.readInt32();let n=new Array(t);for(let r=0;r<t;r++)n[r]=e.readInt32()/e.readInt32();return n}]],[11,[4,function r6(e,t){if(1===t)return e.readFloat32();let n=new Float32Array(t);for(let r=0;r<t;r++)n[r]=e.readFloat32();return n}]],[12,[8,function i6(e,t){if(1===t)return e.readFloat64();let n=new Float64Array(t);for(let r=0;r<t;r++)n[r]=e.readFloat64();return n}]]]);function iE(e,t){if(1===t)return e.readUint8();let n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.readUint8();return n}let ps=[];const a6=[511,1023,2047,4095],l6=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095];class u6{constructor(t){this.nextData=0,this.nextBits=0,this.bytePointer=0,this.tableLength=258,this.currentBitLength=9,this.stripArray=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),this.outData=new bh(t.byteLength),this.initializeTable()}decode(){let t=0,n=0;for(;257!==(t=this.getNextCode());)if(256===t){if(this.initializeTable(),t=this.getNextCode(),257===t)break;this.writeString(this.stringFromCode(t)),n=t}else if(this.isInTable(t))this.writeString(this.stringFromCode(t)),this.addStringToTable(this.stringFromCode(n).concat(this.stringFromCode(t)[0])),n=t;else{const i=this.stringFromCode(n).concat(this.stringFromCode(n)[0]);this.writeString(i),this.addStringToTable(i),n=t}const r=this.outData.toArray();return new DataView(r.buffer,r.byteOffset,r.byteLength)}initializeTable(){(function s6(){if(0===ps.length){for(let t=0;t<256;t++)ps.push([t]);const e=[];for(let t=256;t<4096;t++)ps.push(e)}})(),this.tableLength=258,this.currentBitLength=9}writeString(t){this.outData.writeBytes(t)}stringFromCode(t){return ps[t]}isInTable(t){return t<this.tableLength}addStringToTable(t){if(ps[this.tableLength++]=t,ps.length>4096)throw ps=[],new Error("LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).");this.tableLength===l6[this.currentBitLength]&&this.currentBitLength++}getNextCode(){this.nextData=this.nextData<<8|255&this.stripArray[this.bytePointer++],this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|255&this.stripArray[this.bytePointer++],this.nextBits+=8);const t=this.nextData>>this.nextBits-this.currentBitLength&a6[this.currentBitLength-9];return this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length?257:t}}const h6=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class lE extends nE{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let t=new Date,n=h6.exec(this.dateTime);if(null===n)throw new Error(`invalid dateTime: ${this.dateTime}`);return t.setFullYear(Number(n[1]),Number(n[2])-1,Number(n[3])),t.setHours(Number(n[4]),Number(n[5]),Number(n[6])),t}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const t=this.get("BitsPerSample");return t&&"number"!=typeof t?t[0]:t}get alpha(){const t=this.extraSamples;return!!t&&0!==t[0]}get associatedAlpha(){const t=this.extraSamples;return!!t&&1===t[0]}get extraSamples(){return og(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return og(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return og(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return this.get("SampleFormat")||1}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const t=2**this.bitsPerSample,n=this.get("ColorMap");if(!n)return;if(n.length!==3*t)throw new Error(`ColorMap size must be ${t}`);const r=[];for(let i=0;i<t;i++)r.push([n[i],n[i+t],n[i+2*t]]);return r}}function og(e){return"number"==typeof e?[e]:e}function f6(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=K0(t);return new DataView(n.buffer,n.byteOffset,n.byteLength)}const d6={ignoreImageData:!1,onlyFirst:!1};class p6 extends bh{constructor(t){super(t),this._nextIFD=0}get isMultiPage(){let t=0;for(this.decodeHeader();this._nextIFD;)if(t++,this.decodeIFD({ignoreImageData:!0},!0),2===t)return!0;if(1===t)return!1;throw io("ifdCount",t)}get pageCount(){let t=0;for(this.decodeHeader();this._nextIFD;)t++,this.decodeIFD({ignoreImageData:!0},!0);if(t>0)return t;throw io("ifdCount",t)}decode(t={}){t=Object.assign({},d6,t);const n=[];for(this.decodeHeader();this._nextIFD;)if(n.push(this.decodeIFD(t,!0)),t.onlyFirst)return[n[0]];return n}decodeHeader(){const t=this.readUint16();if(18761===t)this.setLittleEndian();else{if(19789!==t)throw new Error(`invalid byte order: 0x${t.toString(16)}`);this.setBigEndian()}if(42!==this.readUint16())throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(t,n){let r;if(this.seek(this._nextIFD),n)r=new lE;else{if(!t.kind)throw new Error("kind is missing");r=new nE(t.kind)}const i=this.readUint16();for(let o=0;o<i;o++)this.decodeIFDEntry(r);if(!t.ignoreImageData){if(!(r instanceof lE))throw new Error("must be a tiff ifd");this.decodeImageData(r)}return this._nextIFD=this.readUint32(),r}decodeIFDEntry(t){const n=this.offset,r=this.readUint16(),i=this.readUint16(),o=this.readUint32();if(i<1||i>12)return void this.skip(4);(function WB(e,t){const n=rE.get(e);if(!n)throw new Error(`type not found: ${e}`);return n[0]*t})(i,o)>4&&this.seek(this.readUint32());const a=function XB(e,t,n){const r=rE.get(t);if(!r)throw new Error(`type not found: ${t}`);return r[1](e,n)}(this,i,o);if(t.fields.set(r,a),34665===r||34853===r){let l=this.offset,u="exif";34665===r?u="exif":34853===r&&(u="gps"),this._nextIFD=a,t[u]=this.decodeIFD({kind:u,ignoreImageData:!0},!1),this.offset=l}this.seek(n),this.skip(12)}decodeImageData(t){const n=t.orientation;if(n&&1!==n)throw io("orientation",n);switch(t.type){case 0:case 1:case 2:case 3:this.readStripData(t);break;default:throw io("image type",t.type)}if(this.applyPredictor(t),this.convertAlpha(t),0===t.type){const i=Math.pow(2,t.bitsPerSample)-1;for(let o=0;o<t.data.length;o++)t.data[o]=i-t.data[o]}}readStripData(t){const n=t.width,i=t.bitsPerSample,o=t.sampleFormat,s=n*t.height*t.samplesPerPixel,a=function g6(e,t,n){if(8===t)return new Uint8Array(e);if(16===t)return new Uint16Array(e);if(32===t&&3===n)return new Float32Array(e);throw io("bit depth / sample format",`${t} / ${n}`)}(s,i,o),u=t.rowsPerStrip*n*t.samplesPerPixel,h=t.stripOffsets,d=t.stripByteCounts||function zB(e){if(1!==e.compression)throw new Error("missing mandatory StripByteCounts field in compressed image");const t=e.rowsPerStrip*e.width*e.samplesPerPixel*(e.bitsPerSample/8);return new Array(e.stripOffsets.length).fill(t)}(t);let m=s,x=0;for(let L=0;L<h.length;L++){let K=new DataView(this.buffer,this.byteOffset+h[L],d[L]),W=m>u?u:m;m-=W;let te=K;switch(t.compression){case 1:break;case 5:te=new u6(K).decode();break;case 8:te=f6(K);break;case 2:throw io("Compression","CCITT Group 3");case 32773:throw io("Compression","PackBits");default:throw io("Compression",t.compression)}x=this.fillUncompressed(i,o,a,te,x,W)}t.data=a}fillUncompressed(t,n,r,i,o,s){if(8===t)return function m6(e,t,n,r){for(let i=0;i<r;i++)e[n++]=t.getUint8(i);return n}(r,i,o,s);if(16===t)return function v6(e,t,n,r,i){for(let o=0;o<2*r;o+=2)e[n++]=t.getUint16(o,i);return n}(r,i,o,s,this.isLittleEndian());if(32===t&&3===n)return function w6(e,t,n,r,i){for(let o=0;o<4*r;o+=4)e[n++]=t.getFloat32(o,i);return n}(r,i,o,s,this.isLittleEndian());throw io("bitDepth",t)}applyPredictor(t){const n=t.bitsPerSample;switch(t.predictor){case 1:break;case 2:if(8===n)!function GB(e,t,n){let r=0;for(;r<e.length;){for(let i=n;i<t*n;i+=n)for(let o=0;o<n;o++)e[r+i+o]=e[r+i+o]+e[r+i-(n-o)]&255;r+=t*n}}(t.data,t.width,t.components);else{if(16!==n)throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${n}`);!function YB(e,t,n){let r=0;for(;r<e.length;){for(let i=n;i<t*n;i+=n)for(let o=0;o<n;o++)e[r+i+o]=e[r+i+o]+e[r+i-(n-o)]&65535;r+=t*n}}(t.data,t.width,t.components)}break;default:throw new Error(`invalid predictor: ${t.predictor}`)}}convertAlpha(t){if(t.alpha&&t.associatedAlpha){const{data:n,components:r,maxSampleValue:i}=t;for(let o=0;o<n.length;o+=r){const s=n[o+r-1];for(let a=0;a<r-1;a++)n[o+a]=Math.round(n[o+a]*i/s)}}}}function io(e,t){return new Error(`Unsupported ${e}: ${t}`)}function x6(e={}){let{algorithm:t="matchToPrevious",ignoreBorder:n=[0,0]}=e;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});let r="matchToPrevious"===t,i=this[0],o=[];o[0]={position:[0,0],image:this[0]};let s=[0,0];for(let m=1;m<this.length;m++){let x=i.getBestMatch(this[m],{border:n});o[m]={position:[x[0]+s[0],x[1]+s[1]],image:this[m]},r&&(s[0]+=x[0],s[1]+=x[1],i=this[m])}let a=0,l=0,u=0,h=0;for(let m=0;m<o.length;m++){let x=o[m];x.position[0]>a&&(a=x.position[0]),x.position[0]<l&&(l=x.position[0]),x.position[1]>u&&(u=x.position[1]),x.position[1]<h&&(h=x.position[1])}l=0-l,h=0-h;for(let m=0;m<o.length;m++){let x=o[m];x.crop=x.image.crop({x:a-x.position[0],y:u-x.position[1],width:i.width-l-a,height:i.height-h-u})}let d=[];for(let m=0;m<o.length;m++)d[m]=o[m].crop;return new Sr(d)}function b6(){this.checkProcessable("min",{bitDepth:[8,16]});let e=this[0].min;for(let t=1;t<this.length;t++)for(let n=0;n<e.length;n++)e[n]=Math.min(e[n],this[t].min[n]);return e}function _6(){this.checkProcessable("min",{bitDepth:[8,16]});let e=this[0].max;for(let t=1;t<this.length;t++)for(let n=0;n<e.length;n++)e[n]=Math.max(e[n],this[t].max[n]);return e}function uE(e){let t=e.reduce((s,a)=>s+a);if(0===t)throw new Error("unreachable");let o,n=0,r=0,i=t/2;for(;;){if(e[n]>0){if(void 0!==o)return(o+n)/2;if(r+=e[n],r>i)return n;r===i&&(o=n)}n++}}function D6(e){let t=0,n=0;for(let r=0;r<e.length;r++)t+=e[r],n+=e[r]*r;return 0===t?0:n/t}function E6(){this.checkProcessable("median",{bitDepth:[8,16]});let e=this.getHistograms({maxSlots:this[0].maxValue+1}),t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=uE(e[n]);return t}function C6(e){this.checkProcessable("min",{bitDepth:[8,16]});let t=this[0].getHistogram(e);for(let n=1;n<this.length;n++){let r=this[n].getHistogram(e);for(let i=0;i<t.length;i++)t[i]+=r[i]}return t}function M6(e){this.checkProcessable("min",{bitDepth:[8,16]});let t=this[0].getHistograms(e),n=t[0].length;for(let r=1;r<this.length;r++){let i=this[r].getHistograms(e);for(let o=0;o<t.length;o++)for(let s=0;s<n;s++)t[o][s]+=i[o][s]}return t}function cE(){this.checkProcessable("averageImage",{bitDepth:[8,16]});let e=new Uint32Array(this[0].data.length);for(let r=0;r<this.length;r++){let i=this[r];for(let o=0;o<this[0].data.length;o++)e[o]+=i.data[o]}let t=nt.createFrom(this[0]),n=t.data;for(let r=0;r<this[0].data.length;r++)n[r]=e[r]/this.length;return t}function S6(){this.checkProcessable("max",{bitDepth:[8,16]});let e=nt.createFrom(this[0]);e.data.fill(0);for(const t of this)for(let n=0;n<e.data.length;n++)e.data[n]=Math.max(t.data[n],e.data[n]);return e}function A6(){this.checkProcessable("max",{bitDepth:[8,16]});let e=nt.createFrom(this[0]);e.data.fill(e.maxValue);for(const t of this)for(let n=0;n<e.data.length;n++)e.data[n]=Math.min(t.data[n],e.data[n]);return e}let hE={configurable:!0,enumerable:!1,get:void 0};class Sr extends Array{constructor(t){if(Array.isArray(t)){super(t.length);for(let n=0;n<t.length;n++)this[n]=t[n]}else"number"==typeof t?super(t):super();this.computed=null}static load(t){return Promise.all(t.map(nt.load)).then(n=>new Sr(n))}static extendMethod(t,n,r={}){let{inPlace:i=!1,returnThis:o=!0,partialArgs:s=[]}=r;return Sr.prototype[t]=i?function(...a){this.computed=null;let l=n.apply(this,[...s,...a]);return o?this:l}:function(...a){return n.apply(this,[...s,...a])},Sr}static extendProperty(t,n,r={}){let{partialArgs:i=[]}=r;return hE.get=function(){if(null===this.computed)this.computed={};else if(XD()(t,this.computed))return this.computed[t];let o=n.apply(this,i);return this.computed[t]=o,o},Object.defineProperty(Sr.prototype,t,hE),Sr}checkProcessable(t,n={}){if("string"!=typeof t)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(0===this.size)throw new TypeError(`The process: ${t} can not be applied on an empty stack`);this[0].checkProcessable(t,n);for(let r=1;r<this.length;r++){if((void 0===n.sameSize||n.sameSize)&&this[0].width!==this[r].width)throw new TypeError(`The process: ${t} can not be applied if width is not identical in all images`);if((void 0===n.sameSize||n.sameSize)&&this[0].height!==this[r].height)throw new TypeError(`The process: ${t} can not be applied if height is not identical in all images`);if((void 0===n.sameAlpha||n.sameAlpha)&&this[0].alpha!==this[r].alpha)throw new TypeError(`The process: ${t} can not be applied if alpha is not identical in all images`);if((void 0===n.sameBitDepth||n.sameBitDepth)&&this[0].bitDepth!==this[r].bitDepth)throw new TypeError(`The process: ${t} can not be applied if bitDepth is not identical in all images`);if((void 0===n.sameColorModel||n.sameColorModel)&&this[0].colorModel!==this[r].colorModel)throw new TypeError(`The process: ${t} can not be applied if colorModel is not identical in all images`);if((void 0===n.sameNumberChannels||n.sameNumberChannels)&&this[0].channels!==this[r].channels)throw new TypeError(`The process: ${t} can not be applied if channels is not identical in all images`)}}}Array[Symbol.species]||(Sr.prototype.map=function(e,t){if("function"!=typeof e)throw new TypeError(`${e} is not a function`);let n=new Sr(this.length);for(let r=0;r<this.length;r++)n[r]=e.call(t,this[r],r,this);return n}),function I6(e){e.extendMethod("matchAndCrop",x6),e.extendMethod("getMin",b6),e.extendMethod("getMax",_6),e.extendMethod("getMedian",E6),e.extendMethod("getHistogram",C6),e.extendMethod("getHistograms",M6),e.extendMethod("getAverage",cE),e.extendMethod("getAverageImage",cE),e.extendMethod("getMaxImage",S6),e.extendMethod("getMinImage",A6)}(Sr);const T6=/^data:[a-z]+\/(?:[a-z]+);base64,/;function sg(e,t,n){const r=BB()(e);if(r)switch(r.mime){case"image/png":return function k6(e){const t=function oB(e,t){return new G4(e,t).decode()}(e);let r,n=t.channels,i=0;return 2===n||4===n?(r=n-1,i=1):r=n,t.palette?function F6(e){const t=e.width*e.height,n=e.palette[0].length,r=new Uint8Array(t*n),i=8/e.depth,o=e.depth<8?i:1,s=parseInt("1".repeat(e.depth),2),a=4===n;let l=0;for(let u=0;u<t;u++){const h=Math.floor(u/o);let d=e.data[h];e.depth<8&&(d=d>>>e.depth*(i-1-u%i)&s);const m=e.palette[d];r[l++]=m[0],r[l++]=m[1],r[l++]=m[2],a&&(r[l++]=m[3])}return new nt(e.width,e.height,r,{components:3,alpha:a,bitDepth:8})}(t):new nt(t.width,t.height,t.data,{components:r,alpha:i,bitDepth:t.depth})}(e);case"image/jpeg":return function O6(e){const t=(0,NB.decode)(e);let n;t.exif&&(n=ag(t.exif));const r=(0,zD.decode)(e,{useTArray:!0,maxMemoryUsageInMB:1024});let i=new nt(r.width,r.height,r.data,{meta:n});if(n&&n.tiff.tags.Orientation){const o=n.tiff.tags.Orientation;o>2&&(i=i.rotate({3:180,4:180,5:90,6:90,7:270,8:270}[o])),[2,4,5,7].includes(o)&&(i=i.flipX())}return i}(e);case"image/tiff":return function N6(e,t){let n=function y6(e,t){return new p6(e).decode(t)}(e);return 1===n.length?fE(n[0],t):new Sr(n.map(function(r){return fE(r,t)}))}(e,n);default:return dE(i(r.mime))}return dE(i("application/octet-stream"));function i(o){return t||GD(e,o)}}function ag(e){const t={tiff:{fields:e.fields,tags:e.map}};return e.exif&&(t.exif=e.exif),e.gps&&(t.gps=e.gps),t}function fE(e,t){if(t||3!==e.type)return new nt(e.width,e.height,e.data,{components:2===e.type?3:1,alpha:e.alpha,colorModel:2===e.type?Nr:mi,bitDepth:e.bitsPerSample.length?e.bitsPerSample[0]:e.bitsPerSample,meta:ag(e)});{const n=new Uint16Array(3*e.width*e.height),r=e.palette;let i=0;for(let o=0;o<e.data.length;o++){const a=r[e.data[o]];n[i++]=a[0],n[i++]=a[1],n[i++]=a[2]}return new nt(e.width,e.height,n,{components:3,alpha:e.alpha,colorModel:Nr,bitDepth:16,meta:ag(e)})}}function dE(e,t){return t=t||{},new Promise(function(n,r){let i=new cB;i.onload=function(){let o=i.width,s=i.height,l=YD(o,s).getContext("2d");l.drawImage(i,0,0,o,s);let u=l.getImageData(0,0,o,s).data;n(new nt(o,s,u,t))},i.onerror=function(){r(new Error(`Could not load ${e}`))},i.src=e})}const pE={getValueXY(e,t,n){return this.data[(t*this.width+e)*this.channels+n]},setValueXY(e,t,n,r){return this.data[(t*this.width+e)*this.channels+n]=r,this.computed=null,this},getValue(e,t){return this.data[e*this.channels+t]},setValue(e,t,n){return this.data[e*this.channels+t]=n,this.computed=null,this},getPixelXY(e,t){return this.getPixel(t*this.width+e)},setPixelXY(e,t,n){return this.setPixel(t*this.width+e,n)},getPixel(e){const t=new Array(this.channels),n=e*this.channels;for(let r=0;r<this.channels;r++)t[r]=this.data[n+r];return t},setPixel(e,t){const n=e*this.channels;for(let r=0;r<t.length;r++)this.data[n+r]=t[r];return this.computed=null,this}};function lg(e){return{width:e.width,height:e.height,components:e.components,alpha:e.alpha,colorModel:e.colorModel,bitDepth:e.bitDepth}}function gE(e,t,n,r={}){const{out:i}=t;if(void 0===i)return r.copy?e.clone():nt.createFrom(e,n);{if(!nt.isImage(i))throw new TypeError("out must be an Image object");const o=Object.assign(lg(e),n);for(const s in o)if(i[s]!==o[s])throw new RangeError(`cannot use out. Its ${s} must be "${o[s]}" (found "${i[s]}")`);return i}}function ug(e,t,n){if(void 0!==t.inPlace&&"boolean"!=typeof t.inPlace)throw new TypeError("inPlace option must be a boolean");if(t.inPlace){if(void 0!==t.out)throw new TypeError("out option must not be set if inPlace option is true");return e}return gE(e,t,null,n)}function B6(e={}){this.checkProcessable("abs",{bitDepth:[32]});const t=ug(this,e);return function U6(e,t){for(let n=0;n<e.data.length;n++)t.data[n]=Math.abs(e.data[n])}(this,t),t}function V6(e={}){this.checkProcessable("invert",{bitDepth:[1,8,16]});const t=ug(this,e);return 1===this.bitDepth?function $6(e,t){for(let n=0;n<e.data.length;n++)t.data[n]=~e.data[n]}(this,t):(function H6(e,t){for(let n=0;n<e.data.length;n+=e.channels)for(let r=0;r<e.components;r++)t.data[n+r]=e.maxValue-e.data[n+r]}(this,t),this!==t&&function j6(e,t){if(1===e.alpha&&1===t.alpha)for(let n=0;n<e.size;n++)t.data[n*t.channels+t.components]=e.data[n*e.channels+e.components]}(this,t)),t}function z6(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(let e=0;e<this.height;e++){let t=e*this.width*this.channels;for(let n=0;n<Math.floor(this.width/2);n++){let r=n*this.channels+t,i=(this.width-n-1)*this.channels+t;for(let o=0;o<this.channels;o++){let s=this.data[r+o];this.data[r+o]=this.data[i+o],this.data[i+o]=s}}}return this}function G6(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(let e=0;e<Math.floor(this.height/2);e++)for(let t=0;t<this.width;t++){let n=t*this.channels+e*this.width*this.channels,r=t*this.channels+(this.height-1-e)*this.channels*this.width;for(let i=0;i<this.channels;i++){let o=this.data[n+i];this.data[n+i]=this.data[r+i],this.data[r+i]=o}}return this}function Y6(e={}){const{radius:t=1}=e;if(t<1)throw new Error("radius must be greater than 1");const n=2*t+1,r=new Array(n);for(let i=0;i<n;i++){r[i]=new Array(n);for(let o=0;o<n;o++)r[i][o]=1/(n*n)}return this.convolution(r)}var W6=D(3211),X6=D.n(W6);function ki(e,t={}){let{channels:n,allowAlpha:r,defaultAlpha:i}=t;return"boolean"!=typeof r&&(r=!0),void 0===n?function Z6(e,t){let n=t?e.channels:e.components,r=new Array(n);for(let i=0;i<n;i++)r[i]=i;return r}(e,i):function q6(e,t,n){Array.isArray(t)||(t=[t]);for(let r=0;r<t.length;r++)t[r]=cg(e,t[r],n);return t}(e,n,r)}function cg(e,t,n=!0){if(void 0===t)throw new RangeError(`validateChannel : the channel has to be >=0 and <${e.channels}`);if("string"==typeof t){switch(e.colorModel){case mi:break;case Nr:if("rgb".includes(t))switch(t){case"r":t=0;break;case"g":t=1;break;case"b":t=2}break;case eg:if("hsl".includes(t))switch(t){case"h":t=0;break;case"s":t=1;break;case"l":t=2}break;case tg:if("hsv".includes(t))switch(t){case"h":t=0;break;case"s":t=1;break;case"v":t=2}break;case ou:if("cmyk".includes(t))switch(t){case"c":t=0;break;case"m":t=1;break;case"y":t=2;break;case"k":t=3}break;default:throw new Error(`Unexpected color model: ${e.colorModel}`)}if("a"===t){if(!e.alpha)throw new Error("validateChannel : the image does not contain alpha channel");t=e.components}if("string"==typeof t)throw new Error(`validateChannel : undefined channel: ${t}`)}if(t>=e.channels)throw new RangeError(`validateChannel : the channel has to be >=0 and <${e.channels}`);if(!n&&t>=e.components)throw new RangeError("validateChannel : alpha channel may not be selected");return t}function K6(e={}){let{radius:t=1,border:n="copy",channels:r}=e;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),t<1)throw new Error("radius must be greater than 0");r=ki(this,r);let i=t,o=t,s=nt.createFrom(this),l=new Array((2*i+1)*(2*o+1));for(let u=0;u<r.length;u++){let h=r[u];for(let d=o;d<this.height-o;d++)for(let m=i;m<this.width-i;m++){let x=0;for(let K=-o;K<=o;K++)for(let W=-i;W<=i;W++)l[x++]=this.data[((d+K)*this.width+m+W)*this.channels+h];s.data[(d*this.width+m)*this.channels+h]=X6()(l)}}if(this.alpha&&!r.includes(this.channels))for(let u=this.components;u<this.data.length;u+=this.channels)s.data[u]=this.data[u];return s.setBorder({size:[i,o],algorithm:n}),s}function Q6(e={}){let{radius:t=1,sigma:n,channels:r,border:i="copy"}=e;this.checkProcessable("gaussian",{bitDepth:[8,16]});const o=function J6(e,t){const n=2*e+1,r=new Array(n),i=t||.3*(.5*(n-1)-1)+.8,o=-.5/(i*i);let s=0;for(let a=0;a<n;a++){const l=a-e,u=Math.exp(o*l*l);r[a]=u,s+=u}for(let a=0;a<n;a++)r[a]/=s;return r}(t,n);return this.convolution([o,o],{border:i,channels:r,algorithm:"separable"})}const e5=[[-1,0,1],[-2,0,2],[-1,0,1]],t5=[[-1,-2,-1],[0,0,0],[1,2,1]],n5=[[3,0,-3],[10,0,-10],[3,0,-3]],r5=[[3,10,3],[0,0,0],[-3,-10,-3]];var mE=D(221),i5=D(5984),vE=D.n(i5);function hg(e,t){return Math.round(Math.min(Math.max(e,0),t.maxValue))}function wE(e,t,n){void 0===n&&(n=new Array(e.length+t.length-1)),function s5(e){for(var t=0;t<e.length;t++)e[t]=0}(n);for(var r=0;r<e.length;r++)for(var i=0;i<t.length;i++)n[r+i]+=e[r]*t[i];return n}function a5(e,t,n,r){const i=new Array(e.length);let o,s,a,l;l=t[1],a=(l.length-1)/2,s=new Array(n+l.length-1),o=new Array(n);for(let u=0;u<r;u++){for(let h=0;h<n;h++)o[h]=e[u*n+h];wE(o,l,s);for(let h=0;h<n;h++)i[u*n+h]=s[a+h]}l=t[0],a=(l.length-1)/2,s=new Array(r+l.length-1),o=new Array(r);for(let u=0;u<n;u++){for(let h=0;h<r;h++)o[h]=i[h*n+u];wE(o,l,s);for(let h=0;h<r;h++)i[h*n+u]=s[a+h]}return i}D(3069),D(8765);var xE=D(6193);function su(e,t={}){let{channels:n,bitDepth:r,normalize:i=!1,divisor:o=1,border:s="copy",algorithm:a="auto"}=t,l={};r&&(l.bitDepth=r);let h,d,u=nt.createFrom(this,l);if(n=ki(this,n),"separable"!==a)({kernel:e}=function o5(e){let t,n;if(!Array.isArray(e))throw new Error(`validateKernel: Invalid Kernel: ${e}`);if(Array.isArray(e[0])){if(0==(1&e.length)||0==(1&e[0].length))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");t=Math.floor(e.length/2),n=Math.floor(e[0].length/2)}else{let r=Math.sqrt(e.length);if(!vE()(r))throw new RangeError("validateKernel: Kernel array should be a square");n=t=Math.floor(Math.sqrt(e.length)/2);let i=new Array(r);for(let o=0;o<r;o++){i[o]=new Array(r);for(let s=0;s<r;s++)i[o][s]=e[o*r+s]}e=i}return{kernel:e,kWidth:n,kHeight:t}}(e));else if(!Array.isArray(e)||2!==e.length)throw new RangeError("separable convolution requires two arrays of numbers to represent the kernel");if("auto"===a){let be=function l5(e){const t=new xE.Z(e,{autoTranspose:!0});if(1!==t.rank)return null;const n=Math.sqrt(t.s[0]);return[t.U.to2DArray().map(o=>o[0]*n),t.V.to2DArray().map(o=>o[0]*n)]}(e);null!==be?(a="separable",e=be):a=(e.length>9||e[0].length>9)&&this.width<=4096&&this.height<=4096?"fft":"direct"}"separable"===a?(h=Math.floor(e[0].length/2),d=Math.floor(e[1].length/2)):(h=Math.floor(e.length/2),d=Math.floor(e[0].length/2));let L,K,W,te,xe,pe,m=u.isClamped,x=new Array(this.height*this.width);for(te=0;te<n.length;te++){for(xe=n[te],W=0;W<this.height;W++)for(K=0;K<this.width;K++)L=W*this.width+K,x[L]=this.data[L*this.channels+xe];if("direct"===a)pe=(0,mE.direct)(x,e,{rows:this.height,cols:this.width,normalize:i,divisor:o});else if("separable"===a){if(pe=a5(x,e,this.width,this.height),i){o=0;for(let be=0;be<e[0].length;be++)for(let Te=0;Te<e[1].length;Te++)o+=e[0][be]*e[1][Te]}if(1!==o)for(let be=0;be<pe.length;be++)pe[be]/=o}else pe=(0,mE.fft)(x,e,{rows:this.height,cols:this.width,normalize:i,divisor:o});for(W=0;W<this.height;W++)for(K=0;K<this.width;K++)L=W*this.width+K,u.data[L*this.channels+xe]=m?hg(pe[L],u):pe[L]}if(this.alpha&&!n.includes(this.channels))for(K=this.components;K<this.data.length;K+=this.channels)u.data[K]=this.data[K];return"periodic"!==s&&u.setBorder({size:[d,h],algorithm:s}),u}function fg(e={}){let{direction:t="xy",border:n="copy",kernelX:r,kernelY:i,channels:o,bitDepth:s=this.bitDepth}=e;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),t){case"x":if(!r)throw new Error("kernelX option is missing");return su.call(this,r,{channels:o,border:n,bitDepth:s});case"y":if(!i)throw new Error("kernelY option is missing");return su.call(this,i,{channels:o,border:n,bitDepth:s});case"xy":{if(!r)throw new Error("kernelX option is missing");if(!i)throw new Error("kernelY option is missing");const a=su.call(this,r,{channels:o,border:n,bitDepth:32}),l=su.call(this,i,{channels:o,border:n,bitDepth:32});return a.hypotenuse(l,{bitDepth:s,channels:o})}default:throw new Error(`Unknown parameter direction: ${t}`)}}function u5(e){return fg.call(this,Object.assign({},e,{kernelX:e5,kernelY:t5}))}function c5(e){return fg.call(this,Object.assign({},e,{kernelX:n5,kernelY:r5}))}var h5=D(9537),Fi=D.n(h5);function f5(e={}){let{algorithm:t="range",channels:n,min:r=this.min,max:i=this.max}=e;if("range"!==(this.checkProcessable("level",{bitDepth:[8,16,32]}),n=ki(this,{channels:n}),n.length!==this.channel&&(Array.isArray(r)&&r.length===this.channels&&(r=r.filter((o,s)=>n.includes(s))),Array.isArray(i)&&i.length===this.channels&&(i=i.filter((o,s)=>n.includes(s)))),t))throw new Error(`level: algorithm not implement: ${t}`);return r<0&&(r=0),i>this.maxValue&&(i=this.maxValue),Array.isArray(r)||(r=Fi()(n.length,r)),Array.isArray(i)||(i=Fi()(n.length,i)),function d5(e,t,n,r){let i=1e-5,o=new Array(r.length);for(let s=0;s<r.length;s++)o[s]=0===t[s]&&n[s]===e.maxValue||n[s]===t[s]?0:(e.maxValue+1-i)/(n[s]-t[s]),t[s]+=(.5-i/2)/o[s];for(let s=0;s<r.length;s++){let a=r[s];if(0!==o[s])for(let l=0;l<e.data.length;l+=e.channels)e.data[l+a]=Math.min(Math.max(0,(e.data[l+a]-t[s])*o[s]+.5|0),e.maxValue)}}(this,r,i,n),this}var p5=D(3343),g5=D.n(p5);function _h(e){if(isNaN(e)){if(e instanceof nt)return e.data;if(!g5()(e))throw new Error("checkNumberArray: the value should be either a number, array or Image");return e}if(e<=0)throw new Error("checkNumberArray: the value must be greater than 0");return e}function m5(e,t={}){let{channels:n}=t;if(this.checkProcessable("add",{bitDepth:[8,16]}),n=ki(this,{channels:n}),e=_h(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("add: the data size is different");for(let r=0;r<n.length;r++){let i=n[r];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+i]=Math.max(0,Math.min(this.maxValue,this.data[o+i]+e[o+i]>>0))}}else for(let r=0;r<n.length;r++){let i=n[r];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+i]=Math.min(this.maxValue,this.data[o+i]+e>>0)}return this}function v5(e,t={}){let{channels:n}=t;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),n=ki(this,{channels:n}),e=_h(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("subtract: the data size is different");for(let r=0;r<n.length;r++){let i=n[r];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+i]=Math.max(0,Math.min(this.maxValue,this.data[o+i]-e[o+i]>>0))}}else for(let r=0;r<n.length;r++){let i=n[r];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+i]=Math.max(0,this.data[o+i]-e>>0)}return this}function w5(e,t={}){let{channels:n,absolute:r=!1}=t;if(this.checkProcessable("subtractImage",{bitDepth:[8,16]}),this.width!==e.width||this.height!==e.height)throw new Error("subtractImage: both images must have the same size");if(this.alpha!==e.alpha||this.bitDepth!==e.bitDepth)throw new Error("subtractImage: both images must have the same alpha and bitDepth");if(this.channels!==e.channels)throw new Error("subtractImage: both images must have the same number of channels");let i=this.clone();n=ki(this,{channels:n});for(let o=0;o<n.length;o++)for(let a=n[o];a<this.data.length;a+=this.channels){let l=this.data[a]-e.data[a];i.data[a]=r?Math.abs(l):Math.max(l,0)}return i}function y5(e,t={}){let{bitDepth:n=this.bitDepth,channels:r}=t;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==e.width||this.height!==e.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==e.alpha||this.bitDepth!==e.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==e.channels)throw new Error("hypotenuse: both images must have the same number of channels");let i=nt.createFrom(this,{bitDepth:n});r=ki(this,{channels:r});let o=i.isClamped;for(let s=0;s<r.length;s++)for(let l=r[s];l<this.data.length;l+=this.channels){let u=Math.hypot(this.data[l],e.data[l]);i.data[l]=o?Math.min(Math.max(Math.round(u),0),i.maxValue):u}return i}function x5(e,t={}){let{channels:n}=t;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),e<=0)throw new Error("multiply: the value must be greater than 0");if(n=ki(this,{channels:n}),e=_h(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("multiply: the data size is different");for(let r=0;r<n.length;r++){let i=n[r];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+i]=Math.max(0,Math.min(this.maxValue,this.data[o+i]*e[o+i]>>0))}}else for(let r=0;r<n.length;r++){let i=n[r];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+i]=Math.min(this.maxValue,this.data[o+i]*e>>0)}return this}function b5(e,t={}){let{channels:n}=t;if(this.checkProcessable("divide",{bitDepth:[8,16]}),n=ki(this,{channels:n}),e=_h(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("divide: the: the data size is different");for(let r=0;r<n.length;r++){let i=n[r];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+i]=Math.max(0,Math.min(this.maxValue,this.data[o+i]/e[o+i]>>0))}}else for(let r=0;r<n.length;r++){let i=n[r];for(let o=0;o<this.data.length;o+=this.channels)this.data[o+i]=Math.min(this.maxValue,this.data[o+i]/e>>0)}return this}var au=D(7782);class lu{constructor(){if(new.target===lu)throw new Error("BaseRegression must be subclassed")}predict(t){if("number"==typeof t)return this._predict(t);if((0,au.N)(t)){const n=[];for(let r=0;r<t.length;r++)n.push(this._predict(t[r]));return n}throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(t,n){if(!(0,au.N)(t)||!(0,au.N)(n)||t.length!==n.length)throw new Error("x and y must be arrays of the same length");const r=t.length,i=new Array(r);for(let x=0;x<r;x++)i[x]=this._predict(t[x]);let o=0,s=0,a=0,l=0,u=0,h=0,d=0;for(let x=0;x<r;x++)o+=i[x],s+=n[x],u+=i[x]*i[x],h+=n[x]*n[x],d+=i[x]*n[x],0!==n[x]&&(a+=(n[x]-i[x])*(n[x]-i[x])/n[x]),l+=(n[x]-i[x])*(n[x]-i[x]);const m=(r*d-o*s)/Math.sqrt((r*u-o*o)*(r*h-s*s));return{r:m,r2:m*m,chi2:a,rmsd:Math.sqrt(l/r)}}}var qr=D(4466),Dh=(D(5475),D(8837)),E5=D(9108),_E=D.n(E5);const C5={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class gg extends lu{constructor(t,n,r){if(super(),!0===t)this.alpha=n.alpha,this.inputs=n.inputs,this.kernelType=n.kernelType,this.kernelOptions=n.kernelOptions,this.kernel=new(_E())(n.kernelType,n.kernelOptions);else{t=qr.Z.checkMatrix(t),r=Object.assign({},C5,r);const i=new(_E())(r.kernelType,r.kernelOptions),o=i.compute(t),s=t.rows;o.add(qr.Z.eye(s,s).mul(r.lambda)),this.alpha=(0,Dh.F)(o,n),this.inputs=t,this.kernelType=r.kernelType,this.kernelOptions=r.kernelOptions,this.kernel=i}}_predict(t){return this.kernel.compute([t],this.inputs).mmul(this.alpha).getRow(0)}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(t){if("kernelRidgeRegression"!==t.name)throw new TypeError("not a KRR model");return new gg(!0,t)}}function A5(e,t,n){const r=new gg(e,t,n),i=new Array(this.size);for(let a=0;a<this.width;a++)for(let l=0;l<this.height;l++)i[l*this.width+a]=[a,l];const o=r.predict(i),s=nt.createFrom(this);for(let a=0;a<this.size;a++)s.data[a]=Math.min(this.maxValue,Math.max(0,o[a][0]));return s}function I5(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=e;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),t.columns%2==0||t.rows%2==0)throw new TypeError("dilate: The number of rows and columns of the kernel must be odd");let r=!0;e:for(const o of t)for(const s of o)if(1!==s){r=!1;break e}let i=this;for(let o=0;o<n;o++)if(1===this.bitDepth)if(r){const s=i.clone();i=k5(i,s,t.length,t[0].length)}else i=P5(i,nt.createFrom(i),t);else i=r?R5(i,nt.createFrom(i),t.length,t[0].length):T5(i,nt.createFrom(i),t);return i}function T5(e,t,n){const r=n.length,i=n[0].length;let o=(r-1)/2,s=(i-1)/2;for(let a=0;a<e.height;a++)for(let l=0;l<e.width;l++){let u=0;for(let h=0;h<i;h++)for(let d=0;d<r;d++){if(1!==n[d][h])continue;let m=d-o+l,x=h-s+a;if(m<0||x<0||m>=e.width||x>=e.height)continue;const L=e.getValueXY(m,x,0);L>u&&(u=L)}t.setValueXY(l,a,0,u)}return t}function R5(e,t,n,r){const i=(n-1)/2,o=(r-1)/2,s=[];for(let a=0;a<e.width;a++)s.push(0);for(let a=0;a<e.height;a++){for(let l=0;l<e.width;l++){let u=0;for(let h=Math.max(0,a-o);h<Math.min(e.height,a+o+1);h++){const d=e.getValueXY(l,h,0);d>u&&(u=d)}s[l]=u}for(let l=0;l<e.width;l++){let u=0;for(let h=Math.max(0,l-i);h<Math.min(e.width,l+i+1);h++)s[h]>u&&(u=s[h]);t.setValueXY(l,a,0,u)}}return t}function P5(e,t,n){const r=n.length,i=n[0].length;let o=(r-1)/2,s=(i-1)/2;for(let a=0;a<e.height;a++)for(let l=0;l<e.width;l++){let u=0;e:for(let h=0;h<i;h++)for(let d=0;d<r;d++){if(1!==n[d][h])continue;let m=d-o+l,x=h-s+a;if(!(x<0||m<0||m>=e.width||x>=e.height)&&1===e.getBitXY(m,x)){u=1;break e}}1===u&&t.setBitXY(l,a)}return t}function k5(e,t,n,r){const i=(n-1)/2,o=(r-1)/2,s=[];for(let a=0;a<e.width;a++)s.push(1);for(let a=0;a<e.height;a++){for(let l=0;l<e.width;l++){s[l]=0;for(let u=Math.max(0,a-o);u<Math.min(e.height,a+o+1);u++)if(1===e.getBitXY(l,u)){s[l]=1;break}}for(let l=0;l<e.width;l++)if(1!==t.getBitXY(l,a))for(let u=Math.max(0,l-i);u<Math.min(e.width,l+i+1);u++)if(1===s[u]){t.setBitXY(l,a);break}}return t}function F5(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=e;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),t.columns%2==0||t.rows%2==0)throw new TypeError("erode: The number of rows and columns of the kernel must be odd");let r=!0;e:for(const o of t)for(const s of o)if(1!==s){r=!1;break e}let i=this;for(let o=0;o<n;o++)if(1===this.bitDepth)if(r){const s=i.clone();i=B5(i,s,t.length,t[0].length)}else i=L5(i,nt.createFrom(i),t);else i=r?N5(i,nt.createFrom(i),t.length,t[0].length):O5(i,nt.createFrom(i),t);return i}function O5(e,t,n){const r=n.length,i=n[0].length;let o=(r-1)/2,s=(i-1)/2;for(let a=0;a<e.height;a++)for(let l=0;l<e.width;l++){let u=e.maxValue;for(let h=0;h<i;h++)for(let d=0;d<r;d++){if(1!==n[d][h])continue;let m=d-o+l,x=h-s+a;if(m<0||x<0||m>=e.width||x>=e.height)continue;const L=e.getValueXY(m,x,0);L<u&&(u=L)}t.setValueXY(l,a,0,u)}return t}function N5(e,t,n,r){const i=(n-1)/2,o=(r-1)/2,s=[];for(let a=0;a<e.width;a++)s.push(0);for(let a=0;a<e.height;a++){for(let l=0;l<e.width;l++){let u=e.maxValue;for(let h=Math.max(0,a-o);h<Math.min(e.height,a+o+1);h++){const d=e.getValueXY(l,h,0);d<u&&(u=d)}s[l]=u}for(let l=0;l<e.width;l++){let u=e.maxValue;for(let h=Math.max(0,l-i);h<Math.min(e.width,l+i+1);h++)s[h]<u&&(u=s[h]);t.setValueXY(l,a,0,u)}}return t}function L5(e,t,n){const r=n.length,i=n[0].length;let o=(r-1)/2,s=(i-1)/2;for(let a=0;a<e.height;a++)for(let l=0;l<e.width;l++){let u=1;e:for(let h=0;h<i;h++)for(let d=0;d<r;d++){if(1!==n[d][h])continue;let m=d-o+l,x=h-s+a;if(!(x<0||m<0||m>=e.width||x>=e.height)&&0===e.getBitXY(m,x)){u=0;break e}}1===u&&t.setBitXY(l,a)}return t}function B5(e,t,n,r){const i=(n-1)/2,o=(r-1)/2,s=[];for(let a=0;a<e.width;a++)s.push(0);for(let a=0;a<e.height;a++){for(let l=0;l<e.width;l++){s[l]=1;for(let u=Math.max(0,a-o);u<Math.min(e.height,a+o+1);u++)if(0===e.getBitXY(l,u)){s[l]=0;break}}for(let l=0;l<e.width;l++)if(0!==t.getBitXY(l,a))for(let u=Math.max(0,l-i);u<Math.min(e.width,l+i+1);u++)if(0===s[u]){t.clearBitXY(l,a);break}}return t}function U5(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=e;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),t.columns%2==0||t.rows%2==0)throw new TypeError("open: The number of rows and columns of the kernel must be odd");let r=this;for(let i=0;i<n;i++)r=r.erode({kernel:t}),r=r.dilate({kernel:t});return r}function j5(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=e;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),t.columns%2==0||t.rows%2==0)throw new TypeError("close: The number of rows and columns of the kernel must be odd");let r=this;for(let i=0;i<n;i++)r=r.dilate({kernel:t}).erode({kernel:t});return r}function V5(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=e;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),t.length%2==0||t[0].length%2==0)throw new TypeError("topHat: The number of rows and columns of the kernel must be odd");let r=this;for(let i=0;i<n;i++)r=r.open({kernel:t}).subtractImage(r,{absolute:!0});return r}function $5(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=e;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),t.columns%2==0||t.rows%2==0)throw new TypeError("blackHat: The number of rows and columns of the kernel must be odd");let r=this;for(let i=0;i<n;i++)r=r.close({kernel:t}).subtractImage(r,{absolute:!0});return r}function H5(e={}){let{kernel:t=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=e;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),t.columns%2==0||t.rows%2==0)throw new TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");let r=this;for(let i=0;i<n;i++){let o=r.dilate({kernel:t}),s=r.erode({kernel:t});r=o.subtractImage(s,{absolute:!0})}return r}function ko(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function Eh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Ma(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Y5(e,t,n,r,i,o,s,a,l,u,h,d){let[m,x]=[(n*e+r*t+i)/(l*e+u*t+1),(o*e+s*t+a)/(l*e+u*t+1)];return h.getValueXY(Math.floor(m),Math.floor(x),d)}function W5(e,t={}){let{calculateRatio:n=!0}=t;if(4!==e.length)throw new Error(`The array pts must have four elements, which are the four corners. Currently, pts have ${e.length} elements`);let m,x,[r,i,o,s]=e,a=[r,i,o,s],[l,u,h,d]=function z5(e){let t=0,n=0,r=0,i=0,o=e[0][0],s=0;for(let u=1;u<e.length;u++)e[u][0]<o&&(o=e[u][0],s=u);let a=e[(s+1)%e.length][0],l=(s+1)%e.length;for(let u=1;u<e.length;u++)e[u][0]<a&&u!==s&&(a=e[u][0],l=u);return e[l][1]<e[s][1]?(t=e[l],i=e[s],s!==(l+1)%4?(n=e[(l+1)%4],r=e[(l+2)%4]):(n=e[(l+2)%4],r=e[(l+3)%4])):(i=e[l],t=e[s],l!==(s+1)%4?(n=e[(s+1)%4],r=e[(s+2)%4]):(n=e[(s+2)%4],r=e[(s+3)%4])),[t,n,r,i]}(a);n?[m,x]=function G5(e,t,n,r,i,o){let s=Math.max(ko(e,t),ko(r,n)),a=Math.max(ko(e,r),ko(t,n)),l=0,u=0,h=Math.ceil(i/2),d=Math.ceil(o/2),m=s/a,x=[e[0],e[1],1],L=[t[0],t[1],1],K=[r[0],r[1],1],W=[n[0],n[1],1],te=Ma(Eh(x,W),K)/Ma(Eh(L,W),K),xe=Ma(Eh(x,W),L)/Ma(Eh(K,W),L),pe=[te*L[0]-x[0],te*L[1]-x[1],te*L[2]-x[2]],be=[xe*K[0]-x[0],xe*K[1]-x[1],xe*K[2]-x[2]],Te=pe[0],Je=pe[1],Xe=pe[2],ft=be[0],ct=be[1],rt=be[2],at=1/(Xe*rt)*(Te*ft-(Te*rt+Xe*ft)*h+Xe*rt*h*h+(Je*ct-(Je*rt+Xe*ct)*d+Xe*rt*d*d));at=at>=0?Math.sqrt(at):Math.sqrt(-at);let Ut=new qr.Z([[at,0,h],[0,at,d],[0,0,1]]),Zt=Ut.transpose(),un=(0,Dh.S)(Zt),Rt=(0,Dh.S)(Ut),Kr=qr.Z.rowVector(pe),ms=qr.Z.rowVector(be),Ia=Math.sqrt(Ma(Kr.mmul(un).mmul(Rt).to1DArray(),pe)/Ma(ms.mmul(un).mmul(Rt).to1DArray(),be));return 0===Ia||0===m?(l=Math.ceil(s),u=Math.ceil(a)):Ia<m?(l=Math.ceil(s),u=Math.ceil(l/Ia)):(u=Math.ceil(a),l=Math.ceil(Ia*u)),[l,u]}(l,u,h,d,this.width,this.height):(m=Math.ceil(Math.max(ko(l,u),ko(d,h))),x=Math.ceil(Math.max(ko(l,d),ko(u,h))));let L=nt.createFrom(this,{width:m,height:x}),[K,W]=l,[te,xe]=u,[pe,be]=h,[Te,Je]=d,[Xe,ft]=[0,0],[ct,rt]=[0,m-1],[at,Ut]=[x-1,m-1],[Zt,un]=[x-1,0],Rt=new qr.Z([[Xe,ft,1,0,0,0,-Xe*K,-ft*K],[ct,rt,1,0,0,0,-ct*te,-rt*te],[at,Ut,1,0,0,0,-at*pe,-ft*pe],[Zt,un,1,0,0,0,-Zt*Te,-un*Te],[0,0,0,Xe,ft,1,-Xe*W,-ft*W],[0,0,0,ct,rt,1,-ct*xe,-rt*xe],[0,0,0,at,Ut,1,-at*be,-Ut*be],[0,0,0,Zt,un,1,-Zt*Je,-un*Je]]),Kr=qr.Z.columnVector([K,te,pe,Te,W,xe,be,Je]),Ia=new xE.Z(Rt).solve(Kr),[n9,r9,i9,o9,s9,a9,l9,u9]=Ia.to1DArray(),pC=new qr.Z(x,m);for(let Ph=0;Ph<this.channels;Ph++){for(let kh=0;kh<x;kh++)for(let Fh=0;Fh<m;Fh++)pC.set(kh,Fh,Y5(kh,Fh,n9,r9,i9,o9,s9,a9,l9,u9,this,Ph));L.setMatrix(pC,{channel:Ph})}return L}function X5(e={}){let{x:t=0,y:n=0,width:r=this.width-t,height:i=this.height-n}=e;if(this.checkProcessable("max",{bitDepth:[8,16]}),t=Math.round(t),n=Math.round(n),r=Math.round(r),i=Math.round(i),t>this.width-1||n>this.height-1)throw new RangeError(`crop: origin (x:${t}, y:${n}) out of range (${this.width-1}; ${this.height-1})`);if(r<=0||i<=0)throw new RangeError(`crop: width and height (width:${r}; height:${i}) must be positive numbers`);if(t<0||n<0)throw new RangeError(`crop: x and y (x:${t}, y:${n}) must be positive numbers`);if(r>this.width-t||i>this.height-n)throw new RangeError(`crop: (x: ${t}, y:${n}, width:${r}, height:${i}) size is out of range`);let o=nt.createFrom(this,{width:r,height:i,position:[t,n]}),s=r*this.channels,a=n+i,l=0,u=t*this.channels;for(let h=n;h<a;h++){let d=h*this.width*this.channels+u,m=d+s;for(;d<m;d++)o.data[l++]=this.data[d]}return o}function Z5(e={}){this.checkProcessable("cropAlpha",{alpha:1});const{threshold:t=this.maxValue}=e;let n=function q5(e,t,n){for(let r=0;r<e.width;r++)for(let i=0;i<e.height;i++)if(e.getValueXY(r,i,n)>=t)return r;return-1}(this,t,this.components);if(-1===n)throw new Error("Could not find new dimensions. Threshold may be too high.");let r=function K5(e,t,n,r){for(let i=0;i<e.height;i++)for(let o=r;o<e.width;o++)if(e.getValueXY(o,i,n)>=t)return i;return-1}(this,t,this.components,n),i=function Q5(e,t,n,r){for(let i=e.height-1;i>=0;i--)for(let o=r;o<e.width;o++)if(e.getValueXY(o,i,n)>=t)return i;return-1}(this,t,this.components,n),o=function J5(e,t,n,r,i,o){for(let s=e.width-1;s>=r;s--)for(let a=i;a<=o;a++)if(e.getValueXY(s,a,n)>=t)return s;return-1}(this,t,this.components,n,r,i);return this.crop({x:n,y:r,width:o-n+1,height:i-r+1})}function ME(e,t){if(t<0||t>=e.channels)throw new RangeError(`channel must be included between 0 and ${e.channels-1}. Current value: ${t}`)}const gs={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function SE(e){if("string"!=typeof e)throw new TypeError("interpolation must be a string");if(e=e.toLowerCase(),!gs[e])throw new RangeError(`invalid interpolation algorithm: ${e}`);return gs[e]}function oU(e,t,n){const r=this.width/t,i=this.height/n;if(this.bitDepth>1)for(let o=0;o<t;o++){const s=Math.floor((o+.5)*r);for(let a=0;a<n;a++){const l=Math.floor((a+.5)*i);for(let u=0;u<this.channels;u++)e.setValueXY(o,a,u,this.getValueXY(s,l,u))}}else for(let o=0;o<t;o++){const s=Math.floor((o+.5)*r);for(let a=0;a<n;a++){const l=Math.floor((a+.5)*i);this.getBitXY(s,l)&&e.setBitXY(o,a)}}}function AE(e={}){const{factor:t=1,interpolation:n=gs.nearestneighbor,preserveAspectRatio:r=!0}=e,i=SE(n);let o=e.width,s=e.height;if(o||(o=s&&r?Math.round(s*(this.width/this.height)):this.width),s||(s=r?Math.round(o*(this.height/this.width)):this.height),({width:o,height:s}=function nU(e,t,n){e=function eU(e){if("string"==typeof e){const t=e[e.length-1];e=parseFloat(e),"%"===t&&(e/=100)}return e}(e);let r=Math.round(e*t),i=Math.round(e*n);return r<=0&&(r=1),i<=0&&(i=1),{width:r,height:i}}(t,o,s)),o===this.width&&s===this.height){const h=this.clone();return h.position=[0,0],h}let a=Math.round((this.width-o)/2),l=Math.round((this.height-s)/2);const u=nt.createFrom(this,{width:o,height:s,position:[a,l]});if(i!==gs.nearestneighbor)throw new Error(`unsupported resize interpolation: ${i}`);return oU.call(this,u,o,s),u}function sU(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[Nr]});let e=nt.createFrom(this,{colorModel:tg}),t=0,n=this.data;for(let r=0;r<n.length;r+=this.channels){let i=n[r],o=n[r+1],s=n[r+2],a=Math.min(i,o,s),l=Math.max(i,o,s),u=l-a,h=0,d=0===l?0:u/l,m=l;if(l!==a){switch(l){case i:h=(o-s)/u+(o<s?6:0);break;case o:h=(s-i)/u+2;break;case s:h=(i-o)/u+4;break;default:throw new Error("unreachable")}h/=6}e.data[t++]=h*this.maxValue,e.data[t++]=d*this.maxValue,e.data[t++]=m,this.alpha&&(e.data[t++]=n[r+3])}return e}function aU(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[Nr]});let e=nt.createFrom(this,{colorModel:eg}),t=Math.floor(this.maxValue/2),n=0,r=this.data;for(let i=0;i<r.length;i+=this.channels){let o=r[i],s=r[i+1],a=r[i+2],l=Math.max(o,s,a),u=Math.min(o,s,a),h=0,d=0,m=(l+u)/2;if(l!==u){let x=l-u;switch(d=m>t?x/(2-l-u):x/(l+u),l){case o:h=(s-a)/x+(s<a?6:0);break;case s:h=(a-o)/x+2;break;case a:h=(o-s)/x+4;break;default:throw new Error("unreachable")}h/=6}e.data[n++]=h*this.maxValue,e.data[n++]=d*this.maxValue,e.data[n++]=m,this.alpha&&(e.data[n++]=r[i+3])}return e}function lU(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[Nr]});let e=nt.createFrom(this,{components:4,colorModel:ou}),t=0,n=this.data;for(let r=0;r<n.length;r+=this.channels){let i=n[r],o=n[r+1],s=n[r+2],a=Math.min(this.maxValue-i,this.maxValue-o,this.maxValue-s),u=(this.maxValue-o-a)/(1-a/this.maxValue),h=(this.maxValue-s-a)/(1-a/this.maxValue);e.data[t++]=Math.round((this.maxValue-i-a)/(1-a/this.maxValue)),e.data[t++]=Math.round(u),e.data[t++]=Math.round(h),e.data[t++]=Math.round(a),this.alpha&&(e.data[t++]=n[r+3])}return e}function uU(){return new nt(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}const Tn={luma709:(e,t,n)=>6966*e+23436*t+2366*n>>15,luma601:(e,t,n)=>9798*e+19235*t+3735*n>>15,maximum:(e,t,n)=>Math.max(e,t,n),minimum:(e,t,n)=>Math.min(e,t,n),average:(e,t,n)=>(e+t+n)/3>>0,minmax:(e,t,n)=>(Math.max(e,t,n)+Math.min(e,t,n))/2,red:e=>e,green:(e,t)=>t,blue:(e,t,n)=>n,cyan(e,t,n,r){let i=Tn.black(e,t,n,r);return(r.maxValue-e-i)/(1-i/r.maxValue)>>0},magenta(e,t,n,r){let i=Tn.black(e,t,n,r);return(r.maxValue-t-i)/(1-i/r.maxValue)>>0},yellow(e,t,n,r){let i=Tn.black(e,t,n,r);return(r.maxValue-n-i)/(1-i/r.maxValue)>>0},black:(e,t,n,r)=>Math.min(r.maxValue-e,r.maxValue-t,r.maxValue-n),hue(e,t,n,r){let i=Tn.min(e,t,n),o=Tn.max(e,t,n);if(o===i)return 0;let s=0,a=o-i;switch(o){case e:s=(t-n)/a+(t<n?6:0);break;case t:s=(n-e)/a+2;break;case n:s=(e-t)/a+4;break;default:throw new Error("unreachable")}return s/6*r.maxValue>>0},saturation(e,t,n,r){let i=Tn.min(e,t,n),o=Tn.max(e,t,n);return 0===o?0:(o-i)/o*r.maxValue},lightness(e,t,n){let r=Tn.min(e,t,n);return(Tn.max(e,t,n)+r)/2}};Object.defineProperty(Tn,"luminosity",{enumerable:!1,value:Tn.lightness}),Object.defineProperty(Tn,"luminance",{enumerable:!1,value:Tn.lightness}),Object.defineProperty(Tn,"min",{enumerable:!1,value:Tn.minimum}),Object.defineProperty(Tn,"max",{enumerable:!1,value:Tn.maximum}),Object.defineProperty(Tn,"brightness",{enumerable:!1,value:Tn.maximum});const IE={};function TE(e={}){let{algorithm:t="luma709",keepAlpha:n=!1,mergeAlpha:r=!0}=e;if("string"!=typeof t&&"function"!=typeof t)throw new TypeError("algorithm must be a string or a function");this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),1===this.components&&(t="red"),n&=this.alpha,r&=this.alpha,n&&(r=!1);let o,i=gE(this,e,{components:1,alpha:n,colorModel:mi});if("function"==typeof t)o=t;else if(o=Tn[t.toLowerCase()],!o)throw new Error(`unsupported grey algorithm: ${t}`);let s=0;for(let a=0;a<this.data.length;a+=this.channels)r?i.data[s++]=hg(o(this.data[a],this.data[a+1],this.data[a+2],this)*this.data[a+this.components]/this.maxValue,this):(i.data[s++]=hg(o(this.data[a],this.data[a+1],this.data[a+2],this),this),i.alpha&&(i.data[s++]=this.data[a+this.components]));return i}function fU(e){let t=!1,n=0;for(let r=1;r<e.length-1;r++)if(e[r-1]<e[r]&&e[r+1]<e[r]&&(n++,n>2))return!1;return 2===n&&(t=!0),t}function RE(e,t){let n=0;for(let r=0;r<=t;r++)n+=e[r];return n}function PE(e,t){let n=0;for(let r=0;r<=t;r++)n+=r*e[r];return n}function kE(e,t){let n=0;for(let r=0;r<=t;r++)n+=r*r*e[r];return n}function yU(e){let t=new Array(e.length);for(let n=1;n<e.length-1;n++)t[n]=(e[n-1]+e[n]+e[n+1])/3;return t[0]=(e[0]+e[1])/3,t[e.length-1]=(e[e.length-2]+e[e.length-1])/3,t}function bU(e){let t=e.length,n=!1,r=0;for(let i=1;i<t-1;i++)if(e[i-1]<e[i]&&e[i+1]<e[i]&&(r++,r>2))return!1;return 2===r&&(n=!0),n}function FE(e,t){let n=0;for(let r=0;r<=t;r++)n+=e[r];return n}Object.keys(Tn).forEach(e=>{IE[e]=e});const OE={huang:function cU(e){let t=0;for(let h=0;h<e.length;h++)if(0!==e[h]){t=h;break}let n=e.length-1;for(let h=e.length-1;h>=t;h--)if(0!==e[h]){n=h;break}let r=1/(n-t),i=new Array(e.length),o=0,s=0;for(let h=t;h<e.length;h++)o+=h*e[h],s+=e[h],i[h]=o/s;let a=new Array(e.length);o=s=0;for(let h=n;h>0;h--)o+=h*e[h],s+=e[h],a[h-1]=o/s;let l=-1,u=Number.MAX_VALUE;for(let h=0;h<e.length;h++){let m,d=0;for(let x=0;x<=h;x++)m=1/(1+r*Math.abs(x-i[h])),m<1e-6||m>.999999||(d+=e[x]*(-m*Math.log(m)-(1-m)*Math.log(1-m)));for(let x=h+1;x<e.length;x++)m=1/(1+r*Math.abs(x-a[h])),m<1e-6||m>.999999||(d+=e[x]*(-m*Math.log(m)-(1-m)*Math.log(1-m)));d<u&&(u=d,l=h)}return l},intermodes:function hU(e){let t=e.slice(),n=0;for(;!fU(t);){let i=0,o=0,s=t[0];for(let a=0;a<e.length-1;a++)i=o,o=s,s=t[a+1],t[a]=(i+o+s)/3;if(t[e.length-1]=(o+s)/3,n++,n>1e4)throw new Error("Intermodes Threshold not found after 10000 iterations")}let r=0;for(let i=1;i<e.length-1;i++)t[i-1]<t[i]&&t[i+1]<t[i]&&(r+=i);return Math.floor(r/2)},isodata:function dU(e){let t,n,r,i,o=0;for(let s=1;s<e.length;s++)if(e[s]>0){o=s+1;break}for(;;){t=0,r=0;for(let s=0;s<o;s++)r+=e[s],t+=e[s]*s;i=0,n=0;for(let s=o+1;s<e.length;s++)n+=e[s],i+=e[s]*s;if(r>0&&n>0&&(t/=r,i/=n,o===Math.round((t+i)/2)))break;if(o++,o>e.length-2)throw new Error("Threshold not found")}return o},li:function pU(e,t){let n,r,i,o,s,a,l,u,h,d,m,x;m=.5,d=0;for(let L=0;L<e.length;L++)d+=L*e[L];d/=t,l=d;do{a=l,n=a+.5|0,r=0,o=0;for(let L=0;L<=n;L++)r+=L*e[L],o+=e[L];u=0===o?0:r/o,i=0,s=0;for(let L=n+1;L<e.length;L++)i+=L*e[L],s+=e[L];h=0===s?0:i/s,x=(u-h)/(Math.log(u)-Math.log(h)),l=x<-Number.EPSILON?x-.5|0:x+.5|0}while(Math.abs(l-a)>.5);return n},maxentropy:function gU(e,t){let n=new Array(e.length);for(let m=0;m<e.length;m++)n[m]=e[m]/t;let r=new Array(e.length),i=new Array(e.length);r[0]=n[0],i[0]=1-r[0];for(let m=1;m<e.length;m++)r[m]=r[m-1]+n[m],i[m]=1-r[m];let o=0;for(let m=0;m<e.length;m++)if(Math.abs(r[m])>=Number.EPSILON){o=m;break}let s=e.length-1;for(let m=e.length-1;m>=o;m--)if(Math.abs(i[m])>=Number.EPSILON){s=m;break}let l,h,d,a=-1,u=Number.MIN_VALUE;for(let m=o;m<=s;m++){h=0;for(let x=0;x<=m;x++)0!==e[x]&&(h-=n[x]/r[m]*Math.log(n[x]/r[m]));d=0;for(let x=m+1;x<e.length;x++)0!==e[x]&&(d-=n[x]/i[m]*Math.log(n[x]/i[m]));l=h+d,u<l&&(u=l,a=m)}return a},mean:function mU(e,t){let n=0;for(let r=0;r<e.length;r++)n+=r*e[r];return Math.floor(n/t)},minerror:function vU(e,t){let n,i,o,s,a,l,u,h,d,m,x,L,r=-2,K=0;for(let W=0;W<e.length;W++)K+=W*e[W];for(K/=t,n=K;n!==r;){let W=RE(e,n),te=RE(e,e.length-1),xe=PE(e,n),pe=PE(e,e.length-1),be=kE(e,n);if(i=xe/W,o=(pe-xe)/(te-W),s=W/te,a=(te-W)/te,l=be/W-i*i,u=(kE(e,e.length-1)-be)/(te-W)-o*o,h=1/l-1/u,d=i/l-o/u,m=i*i/l-o*o/u+Math.log10(l*(a*a)/(u*(s*s))),x=d*d-h*m,x<0)return n;r=n,L=(d+Math.sqrt(x))/h,n=isNaN(L)?r:Math.floor(L)}return n},minimum:function wU(e){if(e.length<2)return 0;let t=0,n=-1,r=-1,i=new Array(e.length);for(let o=0;o<e.length;o++)i[o]=e[o],e[o]>0&&(r=o);for(;!bU(i);)if(i=yU(i),t++,t>1e4)return n;return n=function xU(e,t){let n;for(let r=1;r<t;r++)if(e[r-1]>e[r]&&e[r+1]>=e[r]){n=r;break}return n}(i,r),n},moments:function _U(e,t){let a,l,u,h,d,m,r=0,i=0,o=0,s=0,x=-1,L=e.length,K=new Array(L);for(let W=0;W<L;W++)K[W]=e[W]/t;for(let W=0;W<L;W++)r+=W*K[W],i+=W*W*K[W],o+=W*W*W*K[W];l=1*i-r*r,u=(-i*i+r*o)/l,h=(1*-o+i*r)/l,d=.5*(-h-Math.sqrt(h*h-4*u)),m=.5*(-h+Math.sqrt(h*h-4*u)),a=(m-r)/(m-d);for(let W=0;W<L;W++)if(s+=K[W],s>a){x=W;break}return x},otsu:function DU(e,t){let n=0,r=0,i=0,o=0,s=0;for(let a=0;a<e.length;a++)s+=a*e[a];for(let a=0;a<e.length;a++){r+=e[a];const l=t-r;if(0===r||0===l)continue;n+=a*e[a];const u=(s-n)/l,h=r*l*(n/r-u)*(n/r-u);h>=i&&(o=a,i=h)}return o},percentile:function EU(e){let t=-1,r=new Array(e.length),i=FE(e,e.length-1),o=1;for(let s=0;s<e.length;s++)r[s]=Math.abs(FE(e,s)/i-.5),r[s]<o&&(o=r[s],t=s);return t},renyientropy:function CU(e,t){let n,r,i,o=new Array(e.length),s=new Array(e.length),a=new Array(e.length),l=0,u=0,h=0,d=0,m=0,x=0;for(let Te=0;Te<e.length;Te++)o[Te]=e[Te]/t;s[0]=o[0],a[0]=1-s[0];for(let Te=1;Te<e.length;Te++)s[Te]=s[Te-1]+o[Te],a[Te]=1-s[Te];r=0;for(let Te=0;Te<e.length;Te++)if(Math.abs(s[Te])>=Number.EPSILON){r=Te;break}i=e.length-1;for(let Te=e.length-1;Te>=r;Te--)if(Math.abs(a[Te])>=Number.EPSILON){i=Te;break}for(let Te=r;Te<=i;Te++){let Je=0,Xe=0,ft=0;for(let Rt=0;Rt<=Te;Rt++)0!==e[Rt]&&(Je-=o[Rt]/s[Te]*Math.log(o[Rt]/s[Te])),Xe+=Math.sqrt(o[Rt]/s[Te]),ft+=o[Rt]*o[Rt]/(s[Te]*s[Te]);let ct=0,rt=0,at=0;for(let Rt=Te+1;Rt<e.length;Rt++)0!==e[Rt]&&(ct-=o[Rt]/a[Te]*Math.log(o[Rt]/a[Te])),rt+=Math.sqrt(o[Rt]/a[Te]),at+=o[Rt]*o[Rt]/(a[Te]*a[Te]);let Ut=Je+ct,Zt=2*(Xe*rt>0?Math.log(Xe*rt):0),un=-1*(ft*at>0?Math.log(ft*at):0);Ut>d&&(d=Ut,l=Te),Zt>m&&(m=Zt,u=Te),un>x&&(x=un,h=Te)}let pe,xe=[l,u,h];xe.sort((Te,Je)=>Te-Je),pe=Math.abs(xe[0]-xe[1])<=5?Math.abs(xe[1]-xe[2])<=5?[1,2,1]:[0,1,3]:Math.abs(xe[1]-xe[2])<=5?[3,1,0]:[1,2,1];let be=s[xe[2]]-s[xe[0]];return n=Math.round(xe[0]*(s[xe[0]]+.25*be*pe[0])+.25*xe[1]*be*pe[1]+xe[2]*(a[xe[2]]+.25*be*pe[2])),n},shanbhag:function MU(e,t){let n=new Array(e.length);for(let x=0;x<e.length;x++)n[x]=e[x]/t;let r=new Array(e.length),i=new Array(e.length);r[0]=n[0],i[0]=1-r[0];for(let x=1;x<e.length;x++)r[x]=r[x-1]+n[x],i[x]=1-r[x];let o=0;for(let x=0;x<e.length;x++)if(Math.abs(r[x])>=Number.EPSILON){o=x;break}let s=e.length-1;for(let x=e.length-1;x>=o;x--)if(Math.abs(i[x])>=Number.EPSILON){s=x;break}let u,h,d,m,a=-1,l=Number.MAX_VALUE;for(let x=o;x<=s;x++){d=0,u=.5/r[x];for(let L=1;L<=x;L++)d-=n[L]*Math.log(1-u*r[L-1]);d*=u,m=0,u=.5/i[x];for(let L=x+1;L<e.length;L++)m-=n[L]*Math.log(1-u*i[L]);m*=u,h=Math.abs(d-m),h<l&&(l=h,a=x)}return a},triangle:function SU(e){let t=0,n=0,r=0,i=0;for(let d=0;d<e.length;d++)if(e[d]>0){t=d;break}t>0&&t--;for(let d=e.length-1;d>0;d--)if(e[d]>0){i=d;break}i<e.length-1&&i++;for(let d=0;d<e.length;d++)e[d]>n&&(r=d,n=e[d]);let s,a,l,o=!1;if(r-t<i-r){o=!0;let d=0,m=e.length-1;for(;d<m;){let x=e[d];e[d]=e[m],e[m]=x,d++,m--}t=e.length-1-i,r=e.length-1-r}if(t===r)return t;s=e[r],a=t-r,l=Math.sqrt(s*s+a*a),s/=l,a/=l,l=s*t+a*e[t];let u=t,h=0;for(let d=t+1;d<=r;d++){let m=s*d+a*e[d]-l;m>h&&(u=d,h=m)}if(u--,o){let d=0,m=e.length-1;for(;d<m;){let x=e[d];e[d]=e[m],e[m]=x,d++,m--}return e.length-1-u}return u},yen:function AU(e,t){let n=new Array(e.length);for(let u=0;u<e.length;u++)n[u]=e[u]/t;let r=new Array(e.length);r[0]=n[0];for(let u=1;u<e.length;u++)r[u]=r[u-1]+n[u];let i=new Array(e.length);i[0]=n[0]*n[0];for(let u=1;u<e.length;u++)i[u]=i[u-1]+n[u]*n[u];let o=new Array(e.length);o[e.length-1]=0;for(let u=e.length-2;u>=0;u--)o[u]=o[u+1]+n[u+1]*n[u+1];let l,s=-1,a=Number.MIN_VALUE;for(let u=0;u<e.length;u++)l=-1*(i[u]*o[u]>0?Math.log(i[u]*o[u]):0)+2*(r[u]*(1-r[u])>0?Math.log(r[u]*(1-r[u])):0),l>a&&(a=l,s=u);return s}},mg={};function NE(e={}){let{algorithm:t=mg.otsu}=e;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});let n=OE[t.toLowerCase()];if(n)return n(this.getHistogram(),this.size);throw new Error(`unknown thresholding algorithm: ${t}`)}Object.keys(OE).forEach(e=>{mg[e]=e});const LE="threshold";function IU(e={}){let{algorithm:t=LE,threshold:n=.5,useAlpha:r=!0,invert:i=!1}=e;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),n=t===LE?function tU(e,t){if(!t)throw Error("getThreshold : the maxValue should be specified");if("string"==typeof e){if("%"!==e[e.length-1])throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(e)/100*t}if("number"==typeof e)return e<1?e*t:e;throw Error("getThreshold : the value is not valid")}(n,this.maxValue):NE.call(this,e);let o=new nt(this.width,this.height,{kind:"BINARY",parent:this}),s=0;if(this.alpha&&r)for(let a=0;a<this.data.length;a+=this.channels){let l=this.data[a]+(this.maxValue-this.data[a])*(this.maxValue-this.data[a+1])/this.maxValue;(i&&l<=n||!i&&l>=n)&&o.setBit(s),s++}else for(let a=0;a<this.data.length;a+=this.channels)(i&&this.data[a]<=n||!i&&this.data[a]>=n)&&o.setBit(s),s++;return o}function RU(e={}){let{size:t=0,algorithm:n="copy",color:r}=e;if(this.checkProcessable("pad",{bitDepth:[8,16]}),"set"===n){if(r.length!==this.channels)throw new Error(`pad: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let l=0;l<r.length;l++)0===r[l]&&(r[l]=.001)}else r=Fi()(this.channels,null);Array.isArray(t)||(t=[t,t]);let i=this.width+2*t[0],o=this.height+2*t[1],s=this.channels,a=nt.createFrom(this,{width:i,height:o});!function TU(e,t,n,r){let i=e.width,o=e.height,s=t.width,a=e.channels;for(let l=0;l<i;l++)for(let u=0;u<o;u++)for(let h=0;h<a;h++)t.data[((r+u)*s+n+l)*a+h]=e.data[(u*i+l)*a+h]}(this,a,t[0],t[1]);for(let l=t[0];l<i-t[0];l++)for(let u=0;u<s;u++){let h=r[u]||a.data[(t[1]*i+l)*s+u];for(let d=0;d<t[1];d++)a.data[(d*i+l)*s+u]=h;h=r[u]||a.data[((o-t[1]-1)*i+l)*s+u];for(let d=o-t[1];d<o;d++)a.data[(d*i+l)*s+u]=h}for(let l=0;l<o;l++)for(let u=0;u<s;u++){let h=r[u]||a.data[(l*i+t[0])*s+u];for(let d=0;d<t[0];d++)a.data[(l*i+d)*s+u]=h;h=r[u]||a.data[(l*i+i-t[0]-1)*s+u];for(let d=i-t[0];d<i;d++)a.data[(l*i+d)*s+u]=h}return a}function PU(e=8){if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(e))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===e)return this.clone();let t=nt.createFrom(this,{bitDepth:e});switch(e){case 8:if(1===this.bitDepth)for(let n=0;n<this.size;n++)this.getBit(n)&&(t.data[n]=255);else for(let n=0;n<this.data.length;n++)t.data[n]=this.data[n]>>8;break;case 16:if(1===this.bitDepth)for(let n=0;n<this.size;n++)this.getBit(n)&&(t.data[n]=65535);else for(let n=0;n<this.data.length;n++)t.data[n]=this.data[n]<<8|this.data[n];break;default:throw new Error("colorDepth conversion unexpected case")}return t}function kU(e,t={}){const{interpolation:n=gs.nearestneighbor,width:r=this.width,height:i=this.height}=t;if("number"!=typeof e)throw new TypeError("degrees must be a number");const o=SE(n),s=e*Math.PI/180,a=Math.floor(Math.abs(r*Math.cos(s))+Math.abs(i*Math.sin(s))),l=Math.floor(Math.abs(i*Math.cos(s))+Math.abs(r*Math.sin(s))),u=nt.createFrom(this,{width:a,height:l}),h=Math.cos(-s),d=Math.sin(-s);let m=a/2,x=l/2;a%2==0?(m-=.5,l%2==0?x-=.5:x=Math.floor(x)):(m=Math.floor(m),l%2==0?x-=.5:x=Math.floor(x));const L=Math.floor(r/2-m),K=Math.floor(i/2-x);switch(o){case gs.nearestneighbor:return function FU(e,t,n,r,i,o,s,a){for(let l=0;l<t.width;l+=1)for(let u=0;u<t.height;u+=1)for(let h=0;h<e.channels;h++){let d=Math.round((l-i)*s-(u-o)*a+i)+n,m=Math.round((u-o)*s+(l-i)*a+o)+r;t.setValueXY(l,u,h,d<0||d>=e.width||m<0||m>=e.height?1===e.alpha&&h===e.channels-1?0:e.maxValue:e.getValueXY(d,m,h))}return t}(this,u,L,K,m,x,h,d);case gs.bilinear:return function OU(e,t,n,r,i,o,s,a){let l=e.width*e.channels;for(let u=0;u<t.height;u++)for(let h=0;h<t.width;h++){let d=(h-i)*s-(u-o)*a+i+n,m=(u-o)*s+(h-i)*a+o+r,x=0|d,L=0|m,K=d-x,W=m-L;for(let te=0;te<e.channels;te++)if(d<0||d>=e.width||m<0||m>=e.height)t.setValueXY(h,u,te,1===e.alpha&&te===e.channels-1?0:e.maxValue);else{let xe=(L*e.width+x)*e.channels+te,pe=e.data[xe],be=e.data[xe+e.channels],Te=e.data[xe+l];t.setValueXY(h,u,te,pe+K*(be-pe)+W*(Te-pe)+K*W*(pe-be-Te+e.data[xe+l+e.channels])|0)}}return t}(this,u,L,K,m,x,h,d);default:throw new Error(`unsupported rotate interpolation: ${o}`)}}function NU(e,t){if("number"!=typeof e)throw new TypeError("angle must be a number");switch(e<0&&(e=360*Math.ceil(-e/360)+e),e%360){case 0:return this.clone();case 90:return UE.call(this);case 180:return LU.call(this);case 270:return BE.call(this);default:return kU.call(this,e,t)}}function BE(){const e=nt.createFrom(this,{width:this.height,height:this.width}),t=e.height-1;for(let n=0;n<this.height;n++)for(let r=0;r<this.width;r++)for(let i=0;i<this.channels;i++)e.setValueXY(n,t-r,i,this.getValueXY(r,n,i));return e}function UE(){const e=nt.createFrom(this,{width:this.height,height:this.width}),t=e.width-1;for(let n=0;n<this.height;n++)for(let r=0;r<this.width;r++)for(let i=0;i<this.channels;i++)e.setValueXY(t-n,r,i,this.getValueXY(r,n,i));return e}function LU(){const e=nt.createFrom(this),t=e.width-1,n=e.height-1;for(let r=0;r<this.height;r++)for(let i=0;i<this.width;i++)for(let o=0;o<this.channels;o++)e.setValueXY(t-i,n-r,o,this.getValueXY(i,r,o));return e}function BU(e,t={}){const n=lg(e);this.checkProcessable("insert",n);let{x:r=0,y:i=0}=t;const o=ug(this,t,{copy:!0}),s=Math.min(o.height,i+e.height),a=Math.min(o.width,r+e.width);if(1===o.bitDepth)for(let l=i;l<s;l++)for(let u=r;u<a;u++)e.getBitXY(u-r,l-i)?o.setBitXY(u,l):o.clearBitXY(u,l);else for(let l=i;l<s;l++)for(let u=r;u<a;u++)o.setPixelXY(u,l,e.getPixelXY(u-r,l-i));return o}function UU(e={}){let{size:t=0,algorithm:n="copy",color:r}=e;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),"set"===n){if(r.length!==this.channels)throw new Error(`setBorder: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let a=0;a<r.length;a++)0===r[a]&&(r[a]=.001)}else r=Fi()(this.channels,null);Array.isArray(t)||(t=[t,t]);let i=t[0],o=t[1],s=this.channels;for(let a=i;a<this.width-i;a++)for(let l=0;l<s;l++){let u=r[l]||this.data[(a+this.width*o)*s+l];for(let h=0;h<o;h++)this.data[(h*this.width+a)*s+l]=u;u=r[l]||this.data[(a+this.width*(this.height-o-1))*s+l];for(let h=this.height-o;h<this.height;h++)this.data[(h*this.width+a)*s+l]=u}for(let a=0;a<this.height;a++)for(let l=0;l<s;l++){let u=r[l]||this.data[(a*this.width+i)*s+l];for(let h=0;h<i;h++)this.data[(a*this.width+h)*s+l]=u;u=r[l]||this.data[(a*this.width+this.width-i-1)*s+l];for(let h=this.width-i;h<this.width;h++)this.data[(a*this.width+h)*s+l]=u}return this}function jU(e={}){let{preserveAlpha:t=!0}=e;if(this.checkProcessable("split",{bitDepth:[8,16]}),1===this.components)return new Sr([this.clone()]);let n=new Sr,r=this.data;if(this.alpha&&t)for(let i=0;i<this.components;i++){let o=nt.createFrom(this,{components:1,alpha:!0,colorModel:mi}),s=0;for(let a=0;a<r.length;a+=this.channels)o.data[s++]=r[a+i],o.data[s++]=r[a+this.components];n.push(o)}else for(let i=0;i<this.channels;i++){let o=nt.createFrom(this,{components:1,alpha:!1,colorModel:mi}),s=0;for(let a=0;a<r.length;a+=this.channels)o.data[s++]=r[a+i];n.push(o)}return n}function VU(e,t={}){let{keepAlpha:n=!1,mergeAlpha:r=!1}=t;n&=this.alpha,r&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),e=cg(this,e);let i=nt.createFrom(this,{components:1,alpha:n,colorModel:mi}),o=0;for(let s=0;s<this.data.length;s+=this.channels)r?i.data[o++]=this.data[s+e]*this.data[s+this.components]/this.maxValue:(i.data[o++]=this.data[s+e],n&&(i.data[o++]=this.data[s+this.components]));return i}function $U(e=HU,t={}){let{mergeAlpha:n=!1,keepAlpha:r=!1}=t;n&=this.alpha,r&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});let i=nt.createFrom(this,{components:1,alpha:r,colorModel:mi}),o=0;for(let s=0;s<this.size;s++){let a=e(this.getPixel(s));n?i.data[o++]=a*this.data[s*this.channels+this.components]/this.maxValue:(i.data[o++]=a,r&&(i.data[o++]=this.data[s*this.channels+this.components]))}return i}function HU(e){return(e[0]+e[1]+e[2])/3}function zU(e,t){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),t.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),t.width!==this.width||t.height!==this.height)throw new Error("Images must have exactly the same width and height");let n=e=cg(this,e);for(let r=0;r<t.data.length;r++)this.data[n]=t.data[r],n+=this.channels;return this}function GU(e,t={}){let{shift:n=[0,0],average:r,channels:i,defaultAlpha:o,normalize:s,border:a=[0,0]}=t;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(a)||(a=[a,a]),i=ki(this,{channels:i,defaultAlpha:o}),this.bitDepth!==e.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==e.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==e.colorModel)throw new Error("Both images must have the same colorModel");void 0===r&&(r=!0);let l=Math.max(a[0],-n[0]),u=Math.min(this.width-a[0],this.width-n[0]),h=Math.max(a[1],-n[1]),d=Math.min(this.height-a[1],this.height-n[1]),m=Fi()(i.length,0);for(let x=0;x<i.length;x++){let L=i[x],K=s?this.sum[L]:Math.max(this.sum[L],e.sum[L]),W=s?e.sum[L]:Math.max(this.sum[L],e.sum[L]);if(0!==K&&0!==W)for(let te=l;te<u;te++)for(let xe=h;xe<d;xe++){let pe=te*this.multiplierX+xe*this.multiplierY+L;m[x]+=Math.min(this.data[pe]/K,e.data[pe+n[0]*this.multiplierX+n[1]*this.multiplierY]/W)}}return r?m.reduce((x,L)=>x+L)/m.length:m}function YU(e={}){let{sampling:t=[10,10],painted:n=!1,mask:r}=e;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(t)||(t=[t,t]);const i=t[0],o=t[1],s=[],a=[],l=this.width/i,u=this.height/o;let h=Math.floor(l/2);for(let m=0;m<i;m++){let x=Math.floor(u/2);for(let L=0;L<o;L++){let K=Math.round(h),W=Math.round(x);(!r||r.getBitXY(K,W))&&(s.push([K,W]),a.push(this.getPixelXY(K,W))),x+=u}h+=l}const d={xyS:s,zS:a};return n&&(d.painted=this.rgba8().paintPoints(s)),d}function uu(e,t,n){const r=new Array(e);for(let i=0;i<e;i++)r[i]=new Array(t);if(n)for(let i=0;i<e;i++)for(let o=0;o<t;o++)r[i][o]=n;return r.width=e,r.height=t,Object.setPrototypeOf(r,uu.prototype),r}function WU(e,t={}){let{border:n}=t;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==e.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==e.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==e.colorModel)throw new Error("Both images must have the same colorModel");let r=new uu(e.width,e.height,-1/0),i=Math.floor(e.width/2),o=Math.floor(e.height/2),s=i,a=o,l=!1;for(;!l;){let u=r.localSearch(i,o,-1/0);for(let d=0;d<u.length;d++){let m=u[d],x=this.getSimilarity(e,{border:n,shift:[s-m[0],a-m[1]]});r[m[0]][m[1]]=x}let h=r.localMax(i,o);h.position[0]!==i||h.position[1]!==o?(i=h.position[0],o=h.position[1]):l=!0}return[i-s,o-a]}function XU(e,t=0){this.checkProcessable("getRow",{bitDepth:[8,16]}),function rU(e,t){if(t<0||t>=e.height)throw new RangeError(`row must be included between 0 and ${e.height-1}. Current value: ${t}`)}(this,e),ME(this,t);let n=new Array(this.width),r=0,i=e*this.width*this.channels+t,o=i+this.width*this.channels;for(let s=i;s<o;s+=this.channels)n[r++]=this.data[s];return n}function ZU(e,t=0){this.checkProcessable("getColumn",{bitDepth:[8,16]}),function iU(e,t){if(t<0||t>=e.width)throw new RangeError(`column must be included between 0 and ${e.width-1}. Current value: ${t}`)}(this,e),ME(this,t);let n=new Array(this.height),r=0,i=this.width*this.channels;for(let o=t+e*this.channels;o<this.data.length;o+=i)n[r++]=this.data[o];return n}function qU(e={}){let{channel:t}=e;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===t){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");t=0}let n=new qr.Z(this.height,this.width);for(let r=0;r<this.height;r++)for(let i=0;i<this.width;i++)n.set(r,i,this.getValueXY(i,r,t));return n}function KU(e,t={}){e=new qr.Z(e);let{channel:n}=t;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===n){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");n=0}if(this.width!==e.columns||this.height!==e.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(let r=0;r<this.height;r++)for(let i=0;i<this.width;i++)this.setValueXY(i,r,n,e.get(r,i))}function QU(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});let e=new Array(this.size),t=0;for(let n=0;n<this.data.length;n+=this.channels){let r=new Array(this.components);for(let i=0;i<this.components;i++)r[i]=this.data[n+i];e[t++]=r}return e}function JU(e){let t=this,n=t.getClosestCommonParent(e),r=t.getRelativePosition(n,{defaultFurther:!0}),i=jE(t,r),o=e.getRelativePosition(n,{defaultFurther:!0}),s=jE(e,o),a=function ej(e,t){let n=0,r=0,i=[];for(;n<e.length&&r<t.length;)e[n][0]===t[r][0]&&e[n][1]===t[r][1]?(i.push(e[n]),n++,r++):e[n][0]<t[r][0]||e[n][0]===t[r][0]&&e[n][1]<t[r][1]?n++:r++;return i}(i,s),l={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]};for(let u=0;u<a.length;u++){let h=a[u],d=[h[0]-r[0],h[1]-r[1]],m=[h[0]-o[0],h[1]-o[1]],x=t.getBitXY(d[0],d[1]),L=e.getBitXY(m[0],m[1]);1===x&&1===L&&l.commonWhitePixels.push(h)}for(let u=0;u<i.length;u++){let h,d;0!==u&&(h=Math.floor(u/t.width),d=u%t.width),1===t.getBitXY(h,d)&&l.whitePixelsMask1.push(i[u])}for(let u=0;u<s.length;u++){let h=0,d=0;0!==u&&(h=Math.floor(u/e.width),d=u%e.width),1===e.getBitXY(h,d)&&l.whitePixelsMask2.push(s[u])}return l}function jE(e,t){let n=[];for(let r=0;r<e.height;r++)for(let i=0;i<e.width;i++){let o=[r,i];n.push([o[0]+t[0],o[1]+t[1]])}return n}function tj(e){let r,t=VE(this),n=VE(e);if(r=t>=n?$E(this,t):$E(e,n),0===t||0===n)return r;let i=this,o=e;for(;t!==n;)if(t>n){if(i=i.parent,null===i)return r;t-=1}else{if(o=o.parent,null===o)return r;n-=1}for(;i!==o&&null!==i&&null!==o;)if(i=i.parent,o=o.parent,null===i||null===o)return r;return i!==o?r:i}function VE(e){let t=0,n=e;for(;null!=n.parent;)n=n.parent,t++;return t}function $E(e,t){let n=e;for(;t>0;)n=n.parent,t-=1;return n}uu.prototype.localMin=function(e,t){let n=this[e][t],r=[e,t];for(let i=Math.max(0,e-1);i<Math.min(this.length,e+2);i++)for(let o=Math.max(0,t-1);o<Math.min(this[0].length,t+2);o++)this[i][o]<n&&(n=this[i][o],r=[i,o]);return{position:r,value:n}},uu.prototype.localMax=function(e,t){let n=this[e][t],r=[e,t];for(let i=Math.max(0,e-1);i<Math.min(this.length,e+2);i++)for(let o=Math.max(0,t-1);o<Math.min(this[0].length,t+2);o++)this[i][o]>n&&(n=this[i][o],r=[i,o]);return{position:r,value:n}},uu.prototype.localSearch=function(e,t,n){let r=[];for(let i=Math.max(0,e-1);i<Math.min(this.length,e+2);i++)for(let o=Math.max(0,t-1);o<Math.min(this[0].length,t+2);o++)this[i][o]===n&&r.push([i,o]);return r};const nj={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},rj=[[-1,0,1],[-2,0,2],[-1,0,1]],ij=[[-1,-2,-1],[0,0,0],[1,2,1]],HE={bitDepth:32,mode:"periodic"};function sj(e){return function oj(e,t){e.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),t=Object.assign({},nj,t);const n=e.width,r=e.height,i=e.maxValue,s=e.gaussianFilter({sigma:t.gaussianBlur,radius:3}),a=s.convolution(ij,HE),l=s.convolution(rj,HE),u=l.hypotenuse(a),h=e.constructor,d=new h(n,r,{kind:"GREY",bitDepth:32}),m=new h(n,r,{kind:"GREY",bitDepth:32}),x=new h(n,r,{kind:"GREY"});for(var L=1;L<n-1;L++)for(var K=1;K<r-1;K++){var W=(Math.round(Math.atan2(l.getValueXY(L,K,0),a.getValueXY(L,K,0))*(5/Math.PI))+5)%5;0===W&&(u.getValueXY(L,K,0)<=u.getValueXY(L,K-1,0)||u.getValueXY(L,K,0)<=u.getValueXY(L,K+1,0))||1===W&&(u.getValueXY(L,K,0)<=u.getValueXY(L-1,K+1,0)||u.getValueXY(L,K,0)<=u.getValueXY(L+1,K-1,0))||2===W&&(u.getValueXY(L,K,0)<=u.getValueXY(L-1,K,0)||u.getValueXY(L,K,0)<=u.getValueXY(L+1,K,0))||3===W&&(u.getValueXY(L,K,0)<=u.getValueXY(L-1,K-1,0)||u.getValueXY(L,K,0)<=u.getValueXY(L+1,K+1,0))||d.setValueXY(L,K,0,u.getValueXY(L,K,0))}for(L=0;L<n*r;++L){var te=d.data[L],xe=0;te>t.highThreshold&&(xe++,x.data[L]=i),te>t.lowThreshold&&xe++,m.data[L]=xe}var pe=[];for(L=1;L<n-1;++L)for(K=1;K<r-1;++K)if(1===m.getValueXY(L,K,0))e:for(var be=L-1;be<L+2;++be)for(var Te=K-1;Te<K+2;++Te)if(2===m.getValueXY(be,Te,0)){pe.push([L,K]),x.setValueXY(L,K,0,i);break e}for(;pe.length>0;){var Je=[];for(L=0;L<pe.length;++L)for(K=-1;K<2;++K)for(be=-1;be<2;++be)if(0!==K||0!==be){var Xe=pe[L][0]+K,ft=pe[L][1]+be;1===m.getValueXY(Xe,ft,0)&&0===x.getValueXY(Xe,ft,0)&&(Je.push([Xe,ft]),x.setValueXY(Xe,ft,0,i))}pe=Je}return x}(this,e)}function aj(e,t={}){let{position:n}=t;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!n&&(n=e.getRelativePosition(this),!n))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){let r=nt.createFrom(this,{width:e.width,height:e.height,alpha:1,position:n,parent:this});for(let i=0;i<e.width;i++)for(let o=0;o<e.height;o++){for(let s=0;s<this.channels;s++){let a=this.getValueXY(i+n[0],o+n[1],s);r.setValueXY(i,o,s,a)}e.getBitXY(i,o)||r.setValueXY(i,o,this.components,0)}return r}{let r=nt.createFrom(this,{width:e.width,height:e.height,position:n,parent:this});for(let i=0;i<e.height;i++)for(let o=0;o<e.width;o++)e.getBitXY(o,i)&&this.getBitXY(o+n[0],i+n[1])&&r.setBitXY(o,i);return r}}var lj=D(3408),uj=D.n(lj);function cj(e={}){const{x:t=0,y:n=0,inPlace:r=!0}=e,i=r?this:nt.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),this.getBitXY(t,n))return i;const s=new(uj());for(s.push(new cu(t,n));s.length>0;){const a=s.shift();i.setBitXY(a.x,a.y);for(let l=a.x+1;l<this.width&&!i.getBitXY(l,a.y)&&!this.getBitXY(l,a.y);l++)i.setBitXY(l,a.y),a.y+1<this.height&&!this.getBitXY(l,a.y+1)&&s.push(new cu(l,a.y+1)),a.y-1>=0&&!this.getBitXY(l,a.y-1)&&s.push(new cu(l,a.y-1));for(let l=a.x-1;l>=0&&!i.getBitXY(l,a.y)&&!this.getBitXY(l,a.y);l++)i.setBitXY(l,a.y),a.y+1<this.height&&!this.getBitXY(l,a.y+1)&&s.push(new cu(l,a.y+1)),a.y-1>=0&&!this.getBitXY(l,a.y-1)&&s.push(new cu(l,a.y-1))}return i}function cu(e,t){this.x=e,this.y=t}function Ch(){return Ch=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ch.apply(this,arguments)}function YE(e,t,n){var r=function pj(e,t,n){return{h:e,s:2*(t*=(n<50?n:100-n)/100)/(n+t)*100,v:n+t}}(e,t,n);return function zE(e,t,n){var r,i=(n/=100)*(t/=100),o=e/60,s=i*(1-Math.abs(o%2-1)),a=n-i;return r=o>=0&&o<1?[i,s,0]:o>=1&&o<2?[s,i,0]:o>=2&&o<3?[0,i,s]:e>=3&&o<4?[0,s,i]:e>=4&&o<5?[s,0,i]:e>=5&&o<=6?[i,0,s]:[0,0,0],{r:Math.round(255*(r[0]+a)),g:Math.round(255*(r[1]+a)),b:Math.round(255*(r[2]+a))}}(r.h,r.s,r.v)}var mj={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function Mh(e){let t=function vj(e){return function wj(e){var t=mj[e.toLowerCase()];if(t)return{r:t[0],g:t[1],b:t[2],a:100}}(e)||function _j(e){if("#"===e[0]&&4===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:100}}(e)||function bj(e){if("#"===e[0]&&7===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:100}}(e)||function yj(e){var t=e.match(/rgb\(([^)]+)\)/);if(t){var n=t[1].split(/ *, */).map(Number);return{r:n[0],g:n[1],b:n[2],a:100}}}(e)||function xj(e){var t=e.match(/rgba\(([^)]+)\)/);if(t){var n=t[1].split(/ *, */).map(Number);return{r:n[0],g:n[1],b:n[2],a:100*n[3]}}}(e)||function Dj(e){var t=e.match(/hsl\(([^)]+)\)/);if(t){var n=t[1].split(/ *, */);return Ch({},YE(parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)),{a:100})}}(e)||function Ej(e){var t=e.match(/hsla\(([^)]+)\)/);if(t){var n=t[1].split(/ *, */),r=parseInt(n[0],10),i=parseInt(n[1],10),o=parseInt(n[2],10),s=parseInt(100*parseFloat(n[3]),10);return Ch({},YE(r,i,o),{a:s})}}(e)}(e);return[t.r,t.g,t.b,Math.round(255*t.a/100)]}function wg(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Mj(e,t,n){let r,i,o,s,a,l;return n/=100,0==(t/=100)?s=a=l=255*n:(i=n<=.5?n*(t+1):n+t-n*t,r=2*n-i,o=e/360,s=wg(r,i,o+1/3),a=wg(r,i,o),l=wg(r,i,o-1/3)),{r:s,g:a,b:l}}function Sh(e){let{color:t,colors:n,randomColors:r,numberColors:i=50}=e;if(t&&!Array.isArray(t)&&(t=Mh(t)),t)return[t];if(n)return n=n.map(function(o){return Array.isArray(o)?o:Mh(o)}),n;if(r){n=new Array(i);for(let o=0;o<i;o++)n[o]=[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())]}return function Sj(e){let t=new Array(e),n=0;for(let r=0;r<360;r+=360/e){n++;let i=Mj(r,100,30+n%4*15);t[n-1]=[Math.round(255*i.r),Math.round(255*i.g),Math.round(255*i.b)]}return t}(i)}function Ij(e,t,n={}){let{color:r="blue",colors:i,font:o="12px Helvetica",rotate:s=0}=n;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:Nr}),!Array.isArray(e))throw Error("paintLabels: labels must be an array");if(!Array.isArray(t))throw Error("paintLabels: positions must be an array");if(r&&!Array.isArray(r)&&(r=Mh(r)),i=i?i.map(function(u){return Array.isArray(u)?u:Mh(u)}):[r],e.length!==t.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(o)||(o=[o]),Array.isArray(s)||(s=[s]);let l=this.getCanvas().getContext("2d");for(let u=0;u<e.length;u++){l.save();let h=i[u%i.length];l.fillStyle=`rgba(${h[0]},${h[1]},${h[2]},${h[3]/this.maxValue})`,l.font=o[u%o.length];let d=t[u];l.translate(d[0],d[1]),l.rotate(s[u%s.length]/180*Math.PI),l.fillText(e[u],0,0),l.restore()}return this.data=Uint8Array.from(l.getImageData(0,0,this.width,this.height).data),this}function Tj(e,t={}){let{alpha:n=255,labels:r=[],labelsPosition:i=[],labelColor:o="blue",labelFont:s="12px Helvetica"}=t;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:Nr});let a=Sh(Object.assign({},t,{numberColors:e.length}));Array.isArray(e)||(e=[e]);for(let l=0;l<e.length;l++){let u=e[l],h=a[l%a.length];for(let d=0;d<u.width;d++)for(let m=0;m<u.height;m++)if(u.getBitXY(d,m))for(let x=0;x<Math.min(this.components,h.length);x++)if(255===n)this.setValueXY(d+u.position[0],m+u.position[1],x,h[x]);else{let L=this.getValueXY(d+u.position[0],m+u.position[1],x);L=Math.round((L*(255-n)+h[x]*n)/255),this.setValueXY(d+u.position[0],m+u.position[1],x,L)}}if(Array.isArray(r)&&r.length>0){let u=this.getCanvas().getContext("2d");u.fillStyle=o,u.font=s;for(let h=0;h<Math.min(e.length,r.length);h++){let d=i[h]?i[h]:e[h].position;u.fillText(r[h],d[0],d[1])}this.data=Uint8Array.from(u.getImageData(0,0,this.width,this.height).data)}return this}function yg(e,t){let n=new Array(e);for(let r=0;r<e;r++)n[r]=new Array(t).fill(0);return n}const Rj=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],Pj=[[0,1,0],[1,1,1],[0,1,0]];class xg{constructor(t={}){let{kind:n="cross",shape:r,size:i,width:o,height:s,filled:a=!0}=t;if(i&&(o=i,s=i),r)switch(r.toLowerCase()){case"square":case"rectangle":this.matrix=function kj(e,t,n){const r=yg(t,e);if(n.filled)for(let i=0;i<t;i++)for(let o=0;o<e;o++)r[i][o]=1;else{for(let i of[0,t-1])for(let o=0;o<e;o++)r[i][o]=1;for(let i=0;i<t;i++)for(let o of[0,e-1])r[i][o]=1}return r}(o,s,{filled:a});break;case"circle":case"ellipse":this.matrix=function Fj(e,t,n){const r=yg(t,e);let i=1-t%2,o=1-e%2,s=Math.floor((e-1)/2),a=Math.floor((t-1)/2),l=s*s,u=a*a;if(n.filled)for(let h=0;h<=a;h++)for(let m=s-Math.floor(Math.sqrt(l-l*h*h/u));m<=s;m++)r[a-h][m]=1,r[a+h+i][m]=1,r[a-h][e-m-1]=1,r[a+h+i][e-m-1]=1;else{for(let h=0;h<=a;h++){let m=s-Math.floor(Math.sqrt(l-l*h*h/u));r[a-h][m]=1,r[a+h+i][m]=1,r[a-h][e-m-1]=1,r[a+h+i][e-m-1]=1}for(let h=0;h<=s;h++){let m=a-Math.floor(Math.sqrt(u-u*h*h/l));r[m][s-h]=1,r[m][s+h+o]=1,r[t-m-1][s-h]=1,r[t-m-1][s+h+o]=1}}return r}(o,s,{filled:a});break;case"triangle":this.matrix=function Oj(e,t,n){if(!n.filled)throw new Error("Non filled triangle is not implemented");const r=yg(t,e);for(let i=0;i<t;i++){let o=Math.floor((1-i/t)*e/2);for(let s=o;s<e-o;s++)r[i][s]=1}return r}(o,s,{filled:a});break;default:throw new Error(`Shape: unexpected shape: ${r}`)}else{if(!n)throw new Error("Shape: expected a kind or a shape option");switch(n.toLowerCase()){case"cross":this.matrix=Rj;break;case"smallcross":this.matrix=Pj;break;default:throw new Error(`Shape: unexpected kind: ${n}`)}}this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){let t=this.matrix,n=[];for(let r=0;r<t.length;r++)for(let i=0;i<t[0].length;i++)t[r][i]&&n.push([i-this.halfWidth,r-this.halfHeight]);return n}getMask(){let t=new nt(this.width,this.height,{kind:Zr});for(let n=0;n<this.matrix.length;n++)for(let r=0;r<this.matrix[0].length;r++)this.matrix[n][r]&&t.setBitXY(r,n);return t}}function Nj(e,t={}){let{shape:n}=t;this.checkProcessable("paintPoints",{bitDepth:[8,16]});let r=Sh(Object.assign({},t,{numberColors:e.length})),i=new xg(n).getPoints(),o=Math.min(this.channels,r[0].length);for(let s=0;s<e.length;s++){let a=r[s%r.length],l=e[s][0],u=e[s][1];for(let h=0;h<i.length;h++){let d=i[h][0],m=i[h][1];if(l+d>=0&&u+m>=0&&l+d<this.width&&u+m<this.height){let x=(l+d+(u+m)*this.width)*this.channels;for(let L=0;L<o;L++)this.data[x+L]=a[L]}}}return this}function Lj(e,t={}){let{color:n=[this.maxValue,0,0],closed:r=!1}=t;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]});let i=Math.min(this.channels,n.length);for(let o=0;o<e.length-1+r;o++){let s=e[o],a=e[(o+1)%e.length],l=a[0]-s[0],u=a[1]-s[1],h=Math.max(Math.abs(l),Math.abs(u)),d=l/h,m=u/h,x=s[0],L=s[1];for(let K=0;K<=h;K++){let W=Math.round(x),te=Math.round(L);if(W>=0&&te>=0&&W<this.width&&te<this.height)if(1===this.bitDepth)this.setBitXY(W,te);else{let xe=(W+te*this.width)*this.channels;for(let pe=0;pe<i;pe++)this.data[xe+pe]=n[pe]}x+=d,L+=m}}return this}function Bj(e,t={}){let n=Object.assign({},t);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});let r=Sh(Object.assign({},t,{numberColors:e.length}));for(let i=0;i<e.length;i++)n.color=r[i%r.length],this.paintPolyline(e[i],n);return this}function Uj(e,t={}){let{color:n=[this.maxValue,0,0],filled:r=!1}=t;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]}),t.closed=!0;let i=function jj(e){let t=[];for(let n=0;n<e.length;n++)if(e[n][0]!==e[(n+1)%e.length][0]||e[n][1]!==e[(n+1)%e.length][1]){if(e[n][0]===e[(n-1+e.length)%e.length][0]&&e[n][1]===e[(n-1+e.length)%e.length][1])continue;if(e[(n+1)%e.length][0]===e[(n-1+e.length)%e.length][0]&&e[(n-1+e.length)%e.length][1]===e[(n+1)%e.length][1])continue;t.push(e[n])}return t}(e);if(!1===r)return this.paintPolyline(e,t);{let o=Array(this.height);for(let s=0;s<this.height;s++){o[s]=[];for(let a=0;a<this.width;a++)o[s].push(0)}for(let s=0;s<i.length;s++){const a=Vj(i[s],i[(s+1)%i.length]);for(let l=0;l<this.height;l++)for(let u=0;u<this.width;u++)$j(u,l,a,this.height)&&(o[l][u]=0===o[l][u]?1:0)}for(let s=0;s<this.height;s++)for(let a=0;a<this.width;a++)if(1===o[s][a])if(1===this.bitDepth)this.setBitXY(a,s);else{let l=Math.min(this.channels,n.length),u=(a+s*this.width)*this.channels;for(let h=0;h<l;h++)this.data[u+h]=n[h]}return this.paintPolyline(e,t)}}function Vj(e,t){if(e[0]===t[0])return{a:0,b:e[0],vertical:!0};{const n=(t[1]-e[1])/(t[0]-e[0]);return{a:n,b:e[1]-n*e[0],vertical:!1}}}function $j(e,t,n,r){if(!0===n.vertical)return n.b<=e;if(0===n.a)return!1;{const i=(t-n.b)/n.a;return i<e&&i>=0&&i<=r}}function Hj(e,t={}){let n=Object.assign({},t);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});let r=Sh(Object.assign({},t,{numberColors:e.length}));for(let i=0;i<e.length;i++)n.color=r[i%r.length],this.paintPolygon(e[i],n);return this}function WE(e={}){let{maxSlots:t=256,channel:n,useAlpha:r=!0}=e;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),void 0===n){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");n=0}return ZE.call(this,n,{useAlpha:r,maxSlots:t})}function XE(e={}){const{maxSlots:t=256,useAlpha:n=!0}=e;this.checkProcessable("getHistograms",{bitDepth:[8,16]});let r=new Array(n?this.components:this.channels);for(let i=0;i<r.length;i++)r[i]=ZE.call(this,i,{useAlpha:n,maxSlots:t});return r}function ZE(e,t){let{useAlpha:n,maxSlots:r}=t;if(1===this.bitDepth){let l=[0,0];for(let u=0;u<this.height;u++)for(let h=0;h<this.width;h++){let d=this.getBitXY(u,h);0===d?l[0]+=1:1===d&&(l[1]+=1)}return l}let i=Math.log2(r);if(!vE()(i))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");let o=0;this.bitDepth>i&&(o=this.bitDepth-i);let s=this.data,a=Fi()(Math.pow(2,Math.min(this.bitDepth,i)),0);if(n&&this.alpha){let l=this.channels-e-1;for(let u=e;u<s.length;u+=this.channels)a[s[u]>>o]+=s[u+l]/this.maxValue}else for(let l=e;l<s.length;l+=this.channels)a[s[l]>>o]++;return a}function qE(e={}){let{useAlpha:t=!0,nbSlots:n=512}=e;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});let r=Math.log(n)/Math.log(8);if(r!==Math.floor(r))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");let i=this.bitDepth-r,o=this.data,s=Fi()(Math.pow(8,r),0),a=Math.pow(2,2*r),l=Math.pow(2,r);for(let u=0;u<o.length;u+=this.channels){let h=(o[u]>>i)*a+(o[u+1]>>i)*l+(o[u+2]>>i);t&&this.alpha?s[h]+=o[u+this.channels-1]/this.maxValue:s[h]++}return s}function KE(){this.checkProcessable("min",{bitDepth:[8,16,32]});let e=Fi()(this.channels,1/0);for(let t=0;t<this.data.length;t+=this.channels)for(let n=0;n<this.channels;n++)this.data[t+n]<e[n]&&(e[n]=this.data[t+n]);return e}function QE(){this.checkProcessable("max",{bitDepth:[8,16,32]});let e=Fi()(this.channels,-1/0);for(let t=0;t<this.data.length;t+=this.channels)for(let n=0;n<this.channels;n++)this.data[t+n]>e[n]&&(e[n]=this.data[t+n]);return e}function JE(){this.checkProcessable("sum",{bitDepth:[8,16]});let e=Fi()(this.channels,0);for(let t=0;t<this.data.length;t+=this.channels)for(let n=0;n<this.channels;n++)e[n]+=this.data[t+n];return e}function eC(e=0,t=0){this.checkProcessable("getMoment",{bitDepth:[1]});let n=0;for(let r=0;r<this.width;r++)for(let i=0;i<this.height;i++)1===this.getBitXY(r,i)&&(n+=r**e*i**t);return n}function zj(e={}){let{mask:t,region:n=3,removeClosePoints:r=0,invert:i=!1,maxEquals:o=2}=e,s=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),n*=4;let a=i?0:1,l=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],u=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],h=n<=8?1:2,d=[];for(let m=h;m<s.height-h;m++)for(let x=h;x<s.width-h;x++){if(t&&t.getBitXY(x,m)!==a)continue;let L=0,K=0,W=s.data[x+m*s.width];for(let te=0;te<n;te++)i?s.data[x+l[te]+(m+u[te])*s.width]>W&&L++:s.data[x+l[te]+(m+u[te])*s.width]<W&&L++,s.data[x+l[te]+(m+u[te])*s.width]===W&&K++;L+K===n&&K<=o&&d.push([x,m])}if(r>0)for(let m=0;m<d.length;m++)for(let x=m+1;x<d.length;x++)Math.sqrt(Math.pow(d[m][0]-d[x][0],2)+Math.pow(d[m][1]-d[x][1],2))<r&&(d[m][0]=d[m][0]+d[x][0]>>1,d[m][1]=d[m][1]+d[x][1]>>1,d.splice(x,1),x--);return d}function tC(){let e=this.getHistograms({maxSlots:this.maxValue+1}),t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=D6(e[n]);return t}function nC(){let e=this.getHistograms({maxSlots:this.maxValue+1}),t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=uE(e[n]);return t}function rC(){this.checkProcessable("points",{bitDepth:[1]});const e=[];for(let t=0;t<this.width;t++)for(let n=0;n<this.height;n++)1===this.getBitXY(t,n)&&e.push([t,n]);return e}function iC(){this.checkProcessable("extendedPoints",{bitDepth:[1]});const e=[];for(let t=0;t<this.height;t++)for(let n=0;n<this.width;n++)if(1===this.getBitXY(n,t))for(e.push([n,t]),1!==this.getBitXY(n+1,t)?(e.push([n+1,t]),e.push([n+1,t+1]),1!==this.getBitXY(n,t+1)&&e.push([n,t+1])):1!==this.getBitXY(n,t+1)&&(e.push([n,t+1]),e.push([n+1,t+1]));n<this.width-2&&1===this.getBitXY(n+1,t)&&1===this.getBitXY(n+2,t);)n++;return e}function Gj(e,t={}){if(this===e)return[0,0];let n=[0,0],r=this;for(;r;){if(r===e)return n;r.position&&(n[0]+=r.position[0],n[1]+=r.position[1]),r=r.parent}return!!t.defaultFurther&&n}function Yj(e={}){let{alpha:t=1}=e;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});let n=0;if(void 0!==t){for(let r=this.components;r<this.data.length;r+=this.channels)this.data[r]===t&&n++;return n}return this.size}function oC(e,t={}){t.sorted||e.sort(Wj);const n=e.length,r=new Array(2*n);for(var i=0,o=0;o<n;o++){const a=e[o];for(;i>=2&&sC(r[i-2],r[i-1],a)<=0;)i--;r[i++]=a}const s=i+1;for(o=n-2;o>=0;o--){const a=e[o];for(;i>=s&&sC(r[i-2],r[i-1],a)<=0;)i--;r[i++]=a}return r.slice(0,i-1)}function sC(e,t,n){return(t[1]-e[1])*(n[0]-e[0])-(t[0]-e[0])*(n[1]-e[1])}function Wj(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}function bg(){return oC(this.extendedPoints,{sorted:!1})}function Ah(e,t){return[e[0]-t[0],e[1]-t[1]]}function Ih(e){let t=Math.sqrt(e[0]**2+e[1]**2);return[e[0]/t,e[1]/t]}function Th(e,t,n){void 0===n&&(n=new Array(t.length));let r=Math.cos(e),i=Math.sin(e);for(let o=0;o<n.length;++o)n[o]=[r*t[o][0]-i*t[o][1],i*t[o][0]+r*t[o][1]];return n}function qj(e){let t=0;for(let n=0;n<e.length;n++)t+=Math.sqrt((e[n===e.length-1?0:n+1][0]-e[n][0])**2+(e[n===e.length-1?0:n+1][1]-e[n][1])**2);return t}function Kj(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n][0]*e[n===e.length-1?0:n+1][1]*.5,t-=e[n===e.length-1?0:n+1][0]*e[n][1]*.5;return Math.abs(t)}function _g(e){let t=1/0,n=1/0,r=-1/0,i=-1/0;for(let o=0;o<e.length;o++)e[o][0]<t&&(t=e[o][0]),e[o][0]>r&&(r=e[o][0]),e[o][1]<n&&(n=e[o][1]),e[o][1]>i&&(i=e[o][1]);return[[t,n],[r,i]]}function aC(e={}){const{originalPoints:t=bg.call(this)}=e;if(0===t.length)return[];if(1===t.length)return[t[0],t[0],t[0],t[0]];const n=new Array(t.length);let o,r=1/0,i=0;for(let s=0;s<n.length;s++){let a=Jj(t[s],t[(s+1)%n.length]);Th(-a,t,n);let l=n[s][0],u=n[s][1],h=n[(s+1)%n.length][0],d=n[(s+1)%n.length][1],m=!0,x=0,L=0,K=0;for(let pe=0;pe<n.length;pe++){let Je=(n[pe][0]-l)/(h-l);!0===m?(m=!1,x=Je,L=Je):(Je<x&&(x=Je),Je>L&&(L=Je));let Xe=(-(h-l)*n[pe][1]+h*u-d*l)/(h-l);Math.abs(Xe)>Math.abs(K)&&(K=Xe)}let W=[l+x*(h-l),u],te=[l+L*(h-l),u],xe=Math.abs(K*(x-L)*(h-l));xe<r&&(i=a,r=xe,o=[W,te,[te[0],te[1]-K],[W[0],W[1]-K]])}return Th(i,o,o),o}function Jj(e,t){let r=Ih(Ah(t,e)),i=Math.acos(r[0]);return r[1]<0?-i:i}var tV=D(7611),nV=D.n(tV),iV=D(5077),lC=D.n(iV);function sV(e,t){let r=Ih(Ah(t,e)),i=Math.acos(r[0]);return r[1]<0?-i:i}class aV{constructor(t,n){this.map=t,this.id=n,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(t={}){const{scale:n=1,kind:r=""}=t;let i;switch(r){case"contour":i=this.contourMask;break;case"box":i=this.boxMask;break;case"filled":i=this.filledMask;break;case"center":i=this.centerMask;break;case"mbr":i=this.mbrFilledMask;break;case"hull":i=this.convexHullFilledMask;break;case"hullContour":i=this.convexHullMask;break;case"mbrContour":i=this.mbrMask;break;case"feret":i=this.feretMask;break;default:i=this.mask}return n<1&&(i=i.resize({factor:n}),i.parent=this.mask.parent,i.position[0]+=this.minX,i.position[1]+=this.minY),i}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}get ratio(){return this.width/this.height}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){let t=this.borderIDs,n=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];let r=this.internalIDs;for(let i=0;i<t.length;i++)r.includes(t[i])||(this.computed.externalIDs.push(t[i]),this.computed.externalLengths.push(n[i]))}get externalIDs(){return this.computed.externalIDs||this._computExternalIDs(),this.computed.externalIDs}get externalLengths(){return this.computed.externalLengths||this._computExternalIDs(),this.computed.externalLengths}_computeBorderIDs(){let t=function lV(e){let t=e.map,n=t.data,r=new Set,i=new Map,o=new Set,s=[1,0,-1,0],a=[0,1,0,-1];for(let h=e.minX;h<=e.maxX;h++)for(let d=e.minY;d<=e.maxY;d++)if(n[h+d*t.width]===e.id)for(let x=0;x<4;x++){let L=h+s[x],K=d+a[x];if(L>=0&&K>=0&&L<t.width&&K<t.height){let W=L+K*t.width;if(n[W]!==e.id&&!o.has(W)){o.add(W),r.add(n[W]);let te=i.get(n[W]);i.set(n[W],te?++te:1)}}}let l=Array.from(r),u=l.map(function(h){return i.get(h)});return{ids:l,lengths:u}}(this);this.computed.borderIDs=t.ids,this.computed.borderLengths=t.lengths}get borderIDs(){return this.computed.borderIDs||this._computeBorderIDs(),this.computed.borderIDs}get borderLengths(){return this.computed.borderLengths||this._computeBorderIDs(),this.computed.borderLengths}get boxIDs(){return this.computed.boxIDs||(this.computed.boxIDs=function uV(e){let t=new Set,n=e.map,r=n.data;for(let i of[0,e.height-1])for(let o=0;o<e.width;o++){let s=(i+e.minY)*n.width+o+e.minX;o-e.minX>0&&r[s]===e.id&&r[s-1]!==e.id&&t.add(r[s-1]),n.width-o-e.minX>1&&r[s]===e.id&&r[s+1]!==e.id&&t.add(r[s+1])}for(let i of[0,e.width-1])for(let o=0;o<e.height;o++){let s=(o+e.minY)*n.width+i+e.minX;o-e.minY>0&&r[s]===e.id&&r[s-n.width]!==e.id&&t.add(r[s-n.width]),n.height-o-e.minY>1&&r[s]===e.id&&r[s+n.width]!==e.id&&t.add(r[s+n.width])}return Array.from(t)}(this)),this.computed.boxIDs}get internalIDs(){return this.computed.internalIDs||(this.computed.internalIDs=function gV(e){let t=[e.id],n=e.map,r=n.data;if(e.height>2)for(let o=0;o<e.width;o++){let s=e.minY*n.width+o+e.minX;if(t.includes(r[s])){let a=r[s+n.width];!t.includes(a)&&!e.boxIDs.includes(a)&&t.push(a)}}let i=new Array(4);for(let o=1;o<e.width-1;o++)for(let s=1;s<e.height-1;s++){let a=(s+e.minY)*n.width+o+e.minX;if(t.includes(r[a])){i[0]=r[a-1],i[1]=r[a+1],i[2]=r[a-n.width],i[3]=r[a+n.width];for(let l=0;l<4;l++){let u=i[l];!t.includes(u)&&!e.boxIDs.includes(u)&&t.push(u)}}}return t}(this)),this.computed.internalIDs}get box(){return this.computed.box||(this.computed.box=function cV(e){let t=0,n=e.map,r=n.data,i=[0];e.height>1&&(i[1]=e.height-1);for(let s of i)for(let a=1;a<e.width-1;a++)r[(s+e.minY)*n.width+a+e.minX]===e.id&&t++;let o=[0];e.width>1&&(o[1]=e.width-1);for(let s of o)for(let a=0;a<e.height;a++)r[(a+e.minY)*n.width+s+e.minX]===e.id&&t++;return t}(this)),this.computed.box}get external(){return this.computed.external||(this.computed.external=function dV(e){let t=0,n=e.map,r=n.data;for(let i=1;i<e.width-1;i++)for(let o=1;o<e.height-1;o++){let s=(o+e.minY)*n.width+i+e.minX;r[s]===e.id&&(e.externalIDs.includes(r[s-1])||e.externalIDs.includes(r[s+1])||e.externalIDs.includes(r[s-n.width])||e.externalIDs.includes(r[s+n.width]))&&t++}return t+e.box}(this)),this.computed.external}get holesInfo(){return this.computed.holesInfo||(this.computed.holesInfo=function pV(e){let t=0,n=e.map.width,r=e.map.data;for(let i=1;i<e.width-1;i++)for(let o=1;o<e.height-1;o++){let s=(o+e.minY)*n+i+e.minX;e.internalIDs.includes(r[s])&&r[s]!==e.id&&t++}return{number:e.internalIDs.length-1,surface:t}}(this)),this.computed.holesInfo}get border(){return this.computed.border||(this.computed.border=function hV(e){let t=0,n=e.map,r=n.data;for(let i=1;i<e.width-1;i++)for(let o=1;o<e.height-1;o++){let s=(o+e.minY)*n.width+i+e.minX;r[s]===e.id&&(r[s-1]!==e.id||r[s+1]!==e.id||r[s-n.width]!==e.id||r[s+n.width]!==e.id)&&t++}return t+e.box}(this)),this.computed.border}get contourMask(){if(!this.computed.contourMask){let t=new nt(this.width,this.height,{kind:Zr,position:[this.minX,this.minY],parent:this.map.parent});for(let n=0;n<this.width;n++)for(let r=0;r<this.height;r++)this.map.data[n+this.minX+(r+this.minY)*this.map.width]===this.id&&(n>0&&n<this.width-1&&r>0&&r<this.height-1?(this.map.data[n-1+this.minX+(r+this.minY)*this.map.width]!==this.id||this.map.data[n+1+this.minX+(r+this.minY)*this.map.width]!==this.id||this.map.data[n+this.minX+(r-1+this.minY)*this.map.width]!==this.id||this.map.data[n+this.minX+(r+1+this.minY)*this.map.width]!==this.id)&&t.setBitXY(n,r):t.setBitXY(n,r));this.computed.contourMask=t}return this.computed.contourMask}get boxMask(){if(!this.computed.boxMask){let t=new nt(this.width,this.height,{kind:Zr,position:[this.minX,this.minY],parent:this.map.parent});for(let n=0;n<this.width;n++)t.setBitXY(n,0),t.setBitXY(n,this.height-1);for(let n=0;n<this.height;n++)t.setBitXY(0,n),t.setBitXY(this.width-1,n);this.computed.boxMask=t}return this.computed.boxMask}get mask(){if(!this.computed.mask){let t=new nt(this.width,this.height,{kind:Zr,position:[this.minX,this.minY],parent:this.map.parent});for(let n=0;n<this.width;n++)for(let r=0;r<this.height;r++)this.map.data[n+this.minX+(r+this.minY)*this.map.width]===this.id&&t.setBitXY(n,r);this.computed.mask=t}return this.computed.mask}get filledMask(){if(!this.computed.filledMask){let t=new nt(this.width,this.height,{kind:Zr,position:[this.minX,this.minY],parent:this.map.parent});for(let n=0;n<this.width;n++)for(let r=0;r<this.height;r++)this.internalIDs.includes(this.map.data[n+this.minX+(r+this.minY)*this.map.width])&&t.setBitXY(n,r);this.computed.filledMask=t}return this.computed.filledMask}get centerMask(){if(!this.computed.centerMask){let t=new xg({kind:"smallCross"}).getMask();t.parent=this.map.parent,t.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=t}return this.computed.centerMask}get convexHull(){if(!this.computed.convexHull){const t=[];for(let r=0;r<this.width;r++)for(let i=0;i<this.height;i++)this.map.data[r+this.minX+(i+this.minY)*this.map.width]===this.id&&(r>0&&r<this.width-1&&i>0&&i<this.height-1?(this.map.data[r-1+this.minX+(i+this.minY)*this.map.width]!==this.id||this.map.data[r+1+this.minX+(i+this.minY)*this.map.width]!==this.id||this.map.data[r+this.minX+(i-1+this.minY)*this.map.width]!==this.id||this.map.data[r+this.minX+(i+1+this.minY)*this.map.width]!==this.id)&&(t.push([r,i]),t.push([r+1,i]),t.push([r,i+1]),t.push([r+1,i+1])):(t.push([r,i]),t.push([r+1,i]),t.push([r,i+1]),t.push([r+1,i+1])));const n=oC(t);this.computed.convexHull={polyline:n,surface:Kj(n),perimeter:qj(n)}}return this.computed.convexHull}get convexHullMask(){if(!this.computed.convexHullMask){const t=this.convexHull,n=new nt(this.width+1,this.height+1,{kind:Zr,position:[this.minX,this.minY],parent:this.map.parent});n.paintPolyline(t.polyline,{closed:!0}),this.computed.convexHullMask=n}return this.computed.convexHullMask}get convexHullFilledMask(){if(!this.computed.convexHullFilledMask){const t=this.convexHull,n=new nt(this.width,this.height,{kind:Zr,position:[this.minX,this.minY],parent:this.map.parent});for(let r=0;r<this.width;r++)for(let i=0;i<this.height;i++)1!==lC()(t.polyline,[r,i])&&n.setBitXY(r,i);this.computed.convexHullFilledMask=n}return this.computed.convexHullFilledMask}get mbr(){if(!this.computed.mbr){let t=aC({originalPoints:this.convexHull.polyline});if(0===t.length)this.computed.mbr={width:0,height:0,surface:0,perimeter:0,rectangle:t};else{let n=t[0],r=t[1],i=t[2],o=Math.sqrt((n[0]-r[0])**2+(n[1]-r[1])**2),s=Math.sqrt((i[0]-r[0])**2+(i[1]-r[1])**2);this.computed.mbr={width:o,height:s,elongation:1-o/s,aspectRatio:o/s,surface:o*s,perimeter:2*(o+s),rectangle:t}}}return this.computed.mbr}get fillRatio(){return this.surface/(this.surface+this.holesInfo.surface)}get feretDiameters(){return this.computed.feretDiameters||(this.computed.feretDiameters=function oV(e={}){const{originalPoints:t=bg.call(this)}=e;if(0===t.length)return{min:0,max:0,minLine:[],maxLine:[],aspectRatio:1};if(1===t.length)return{min:1,max:1,minLine:[t[0],t[0]],maxLine:[t[0],t[0]],aspectRatio:1};const n=new Array(t.length);let r=1/0,i=0,o=[];for(let u=0;u<t.length;u++){let h=sV(t[u],t[(u+1)%t.length]);Th(-h,t,n);let d=0,m=[];for(let x=0;x<t.length;x++){let L=Math.abs(n[u][1]-n[x][1]);L>d&&(d=L,m=[],m.push([n[x][0],n[u][1]],[n[x][0],n[x][1]]))}d<r&&(r=d,i=h,o=m)}Th(i,o,o);let s=0,a=[],l=0;for(let u=0;u<t.length-1;u++)for(let h=u+1;h<t.length;h++){let d=(t[u][0]-t[h][0])**2+(t[u][1]-t[h][1])**2;d>l&&(l=d,s=Math.sqrt(d),a=[t[u],t[h]])}return{min:r,minLine:o,max:s,maxLine:a,aspectRatio:r/s}}({originalPoints:this.convexHull.polyline})),this.computed.feretDiameters}get eqpc(){return this.computed.eqpc||(this.computed.eqpc=2*Math.sqrt(this.surface/Math.PI)),this.computed.eqpc}get perimeterInfo(){return this.computed.perimeterInfo||(this.computed.perimeterInfo=function fV(e){let t=e.map,n=t.data,r=0,i=0,o=0,s=0;for(let a=0;a<e.width;a++)for(let l=0;l<e.height;l++){let u=(l+e.minY)*t.width+a+e.minX;if(n[u]===e.id){let h=0;switch((0===a||e.externalIDs.includes(n[u-1]))&&h++,(a===e.width-1||e.externalIDs.includes(n[u+1]))&&h++,(0===l||e.externalIDs.includes(n[u-t.width]))&&h++,(l===e.height-1||e.externalIDs.includes(n[u+t.width]))&&h++,h){case 1:r++;break;case 2:i++;break;case 3:o++;break;case 4:s++}}}return{one:r,two:i,three:o,four:s}}(this)),this.computed.perimeterInfo}get perimeter(){let t=this.perimeterInfo,n=2-Math.sqrt(2);return t.one+2*t.two+3*t.three+4*t.four-n*(t.two+2*t.three+t.four)}get ped(){return this.computed.ped||(this.computed.ped=this.perimeter/Math.PI),this.computed.ped}get feretMask(){if(!this.computed.feretMask){const t=new nt(this.width+1,this.height+1,{kind:Zr,position:[this.minX,this.minY],parent:this.map.parent});t.paintPolyline(this.feretDiameters.minLine),t.paintPolyline(this.feretDiameters.maxLine),this.computed.feretMask=t}return this.computed.feretMask}get mbrMask(){if(!this.computed.mbrMask){let t=function Xj(e){for(let t=0;t<e.length;t++)e[t][0]=Math.round(e[t][0]),e[t][1]=Math.round(e[t][1]);return e}(this.mbr.rectangle);if(t.length>0){const n=_g(t),r=new nt(n[1][0]-n[0][0]+1,n[1][1]-n[0][1]+1,{kind:Zr,position:[this.minX+n[0][0],this.minY+n[0][1]],parent:this.map.parent});t=function Qj(e,t){void 0===t&&(t=new Array(e.length).fill(0).map(()=>[]));let n=_g(e),r=n[0][0],i=n[0][1];for(let o=0;o<e.length;o++)t[o][0]=e[o][0]-r,t[o][1]=e[o][1]-i;return t}(t),r.paintPolyline(t,{closed:!0}),this.computed.mbrMask=r}else this.computed.mbrMask=new nt(1,1,{kind:Zr,position:[this.minX,this.minY],parent:this.map.parent})}return this.computed.mbrMask}get mbrFilledMask(){if(!this.computed.mbrFilledMask){const t=new nt(this.width,this.height,{kind:Zr,position:[this.minX,this.minY],parent:this.map.parent}),n=this.mask.minimalBoundingRectangle();for(let r=0;r<this.width;r++)for(let i=0;i<this.height;i++)1!==lC()(n,[r,i])&&t.setBitXY(r,i);this.computed.mbrFilledMask=t}return this.computed.mbrFilledMask}get points(){if(!this.computed.points){let t=[];for(let n=0;n<this.height;n++)for(let r=0;r<this.width;r++)this.map.data[(n+this.minY)*this.map.width+r+this.minX]===this.id&&t.push([r,n]);this.computed.points=t}return this.computed.points}get maxLengthPoints(){if(!this.computed.maxLengthPoints){let n,t=0;const r=this.points;for(let i=0;i<r.length;i++)for(let o=i+1;o<r.length;o++){let s=Math.pow(r[i][0]-r[o][0],2)+Math.pow(r[i][1]-r[o][1],2);s>=t&&(t=s,n=[r[i],r[o]])}this.computed.maxLengthPoints=n}return this.computed.maxLengthPoints}get maxLength(){if(!this.computed.maxLength){let t=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=t}return this.computed.maxLength}get roundness(){return 4*this.surface/(Math.PI*this.feretDiameters.max**2)}get sphericity(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}get solidity(){return this.surface/this.convexHull.surface}get angle(){if(!this.computed.angle){let t=this.maxLengthPoints,n=180*-Math.atan2(t[0][1]-t[1][1],t[0][0]-t[1][0])/Math.PI;this.computed.angle=n}return this.computed.angle}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface,mbrWidth:this.mbr.width,mbrHeight:this.mbr.height,mbrSurface:this.mbr.surface,eqpc:this.eqpc,ped:this.ped,feretDiameterMin:this.feretDiameters.min,feretDiameterMax:this.feretDiameters.max,aspectRatio:this.feretDiameters.aspectRatio,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter}}}class Sa{constructor(t,n){this.roiMap=t,this.options=n,this.roi=this.createRoi()}createRoi(){let t=this.roiMap.data,n={};this.roiMap.positive=0,this.roiMap.negative=0;for(let a=0;a<t.length;a++)t[a]&&!n[t[a]]&&(n[t[a]]=!0,t[a]>0?this.roiMap.positive++:this.roiMap.negative++);let r={};for(let a in n)r[a]=new aV(this.roiMap,1*a);let i=this.roiMap.width,o=this.roiMap.height;for(let a=0;a<o;a++)for(let l=0;l<i;l++){let u=a*i+l;if(0!==t[u]){const d=r[t[u]];l<d.minX&&(d.minX=l),l>d.maxX&&(d.maxX=l),a<d.minY&&(d.minY=a),a>d.maxY&&(d.maxY=a),d.meanX+=l,d.meanY+=a,d.surface++}}let s=[];for(let a in n)r[a].meanX/=r[a].surface,r[a].meanY/=r[a].surface,s.push(r[a]);return s}}function vV(e={}){const{algorithm:t="commonBorderLength",minCommonBorderLength:n=5,maxCommonBorderLength:r=100,minCommonBorderRatio:i=.3,maxCommonBorderRatio:o=1}=e;let s=function(W,te,xe){return W[xe]>=n&&W[xe]<=r};"function"==typeof t&&(s=t),"commonborderratio"===t.toLowerCase()&&(s=function(W,te,xe){let pe=Math.min(W[xe]/W[te],1);return pe>=i&&pe<=o});const a=this,l=a.commonBorderLength;let u={},h={};for(let W of Object.keys(l)){let te=l[W],xe=Object.keys(te);for(let pe of xe)if(pe!==W&&s(te,W,pe)){let be=pe;h[pe]&&(be=h[pe]);let Te=W;if(h[W]&&(Te=h[W]),Number(be)!==Te){let Je=Math.min(be,Te),Xe=Math.max(be,Te);if(u[Je]||(u[Je]={}),u[Je][Xe]=!0,h[Xe]=Je,u[Xe]){for(let ft of Object.keys(u[Xe]))u[Je][ft]=!0,h[ft]=Je;delete u[Xe]}}}}let d=a.minMax,m=-d.min,L=new Array(d.max+m+1).fill(0);for(let W of Object.keys(h))L[Number(W)+m]=h[W];let K=a.data;for(let W=0;W<K.length;W++){let te=K[W];if(0!==te){let xe=L[te+m];0!==xe&&(K[W]=xe)}}return a.computed={},a}class Aa{constructor(t,n){this.parent=t,this.width=t.width,this.height=t.height,this.data=n,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}get minMax(){let t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r=0;r<this.data.length;r++)this.data[r]<t&&(t=this.data[r]),this.data[r]>n&&(n=this.data[r]);return{min:t,max:n}}get commonBorderLength(){return function mV(e){let t=e.data,n=[1,0,-1,0],r=[0,1,0,-1],i=e.minMax,o=-i.min,s=i.max+o,a=[];for(let u=0;u<=s;u++)a.push(Object.create(null));for(let u=0;u<e.width;u++)for(let h=0;h<e.height;h++){let m=t[u+h*e.width];if(0!==m){let x=Object.create(null),L=!1;for(let K=0;K<4;K++){let W=u+n[K],te=h+r[K];if(W>=0&&te>=0&&W<e.width&&te<e.height){let xe=t[W+te*e.width];m!==xe&&(L=!0,0!==xe&&void 0===x[xe]&&(x[xe]=!0,a[xe+o][m]?a[xe+o][m]++:a[xe+o][m]=1))}else L=!0}L&&(a[m+o][m]?a[m+o][m]++:a[m+o][m]=1)}}let l={};for(let u=0;u<a.length;u++)Object.keys(a[u]).length>0&&(l[u-o]=a[u]);return l}(this)}mergeRoi(t={}){return vV.call(this,t)}mergeRois(t){const n=t[0],r=t.slice(1);for(let i=0;i<this.data.length;i++)r.includes(this.data[i])&&(this.data[i]=n)}rowsInfo(){let t=new Array(this.height),n=0;for(let r=0;r<this.data.length;r+=this.width){let i={row:n,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};t[n++]=i;let o={},s={},a=[],l=this.data[r],u=0;for(let h=r;h<r+this.width;h++){let d=this.data[h];l!==d&&(l=d,a.push(u),u=0),u++,d>0?(i.positivePixel++,o[d]||(o[d]=!0)):d<0?(i.negativePixel++,s[d]||(s[d]=!0)):i.zeroPixel++}a.push(u),i.medianChange=a.sort((h,d)=>h-d)[Math.floor(a.length/2)],i.positiveRoiIDs=Object.keys(o),i.negativeRoiIDs=Object.keys(s),i.positiveRoi=i.positiveRoiIDs.length,i.negativeRoi=i.negativeRoiIDs.length}return t}colsInfo(){let t=new Array(this.width),n=0;for(let r=0;r<this.width;r++){let i={col:n,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};t[n++]=i;let o={},s={},a=[],l=this.data[r],u=0;for(let h=r;h<r+this.data.length;h+=this.width){let d=this.data[h];l!==d&&(l=d,a.push(u),u=0),u++,d>0?(i.positivePixel++,o[d]||(o[d]=!0)):d<0?(i.negativePixel++,s[d]||(s[d]=!0)):i.zeroPixel++}a.push(u),i.medianChange=a.sort((h,d)=>h-d)[Math.floor(a.length/2)],i.positiveRoiIDs=Object.keys(o),i.negativeRoiIDs=Object.keys(s),i.positiveRoi=i.positiveRoiIDs.length,i.negativeRoi=i.negativeRoiIDs.length}return t}}function wV(e,t={}){const{allowCorners:n=!1}=t,r=65535;let i=new Int16Array(e.size),o=0,s=0,a=new Uint16Array(r+1),l=new Uint16Array(r+1);for(let h=0;h<e.width;h++)for(let d=0;d<e.height;d++)0===i[d*e.width+h]&&u(h,d);function u(h,d){let m=0,x=0,L=e.getBitXY(h,d),K=L?++o:--s;if(o>32767||s<-32768)throw new Error("Too many regions of interest");for(a[0]=h,l[0]=d;m<=x;){let W=a[m&r],te=l[m&r];if(i[te*e.width+W]=K,W>0&&0===i[te*e.width+W-1]&&e.getBitXY(W-1,te)===L&&(x++,a[x&r]=W-1,l[x&r]=te,i[te*e.width+W-1]=-32768),te>0&&0===i[(te-1)*e.width+W]&&e.getBitXY(W,te-1)===L&&(x++,a[x&r]=W,l[x&r]=te-1,i[(te-1)*e.width+W]=-32768),W<e.width-1&&0===i[te*e.width+W+1]&&e.getBitXY(W+1,te)===L&&(x++,a[x&r]=W+1,l[x&r]=te,i[te*e.width+W+1]=-32768),te<e.height-1&&0===i[(te+1)*e.width+W]&&e.getBitXY(W,te+1)===L&&(x++,a[x&r]=W,l[x&r]=te+1,i[(te+1)*e.width+W]=-32768),n&&(W>0&&te>0&&0===i[(te-1)*e.width+W-1]&&e.getBitXY(W-1,te-1)===L&&(x++,a[x&r]=W-1,l[x&r]=te-1,i[(te-1)*e.width+W-1]=-32768),W<e.width-1&&te>0&&0===i[(te-1)*e.width+W+1]&&e.getBitXY(W+1,te-1)===L&&(x++,a[x&r]=W+1,l[x&r]=te-1,i[(te-1)*e.width+W+1]=-32768),W>0&&te<e.height-1&&0===i[(te+1)*e.width+W-1]&&e.getBitXY(W-1,te+1)===L&&(x++,a[x&r]=W-1,l[x&r]=te+1,i[(te+1)*e.width+W-1]=-32768),W<e.width-1&&te<e.height-1&&0===i[(te+1)*e.width+W+1]&&e.getBitXY(W+1,te+1)===L&&(x++,a[x&r]=W+1,l[x&r]=te+1,i[(te+1)*e.width+W+1]=-32768)),m++,x-m>r)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new Aa(e,i)}var yV=D(7596),xV=D.n(yV);const bV=[-1,0],_V=[0,-1],DV=[null,null],EV=[-1,-1,0,1],CV=[0,-1,-1,-1],MV=[null,null,null,null];function SV(e,t={}){const{allowCorners:n=!1}=t;let i,o,s,r=4;if(n&&(r=8),8===r)i=EV,o=CV,s=MV;else{if(4!==r)throw new RangeError(`unsupported neighbours count: ${r}`);i=bV,o=_V,s=DV}const a=e.size,l=e.width,u=e.height,h=new Array(a),d=new Uint32Array(a),m=new(xV());let x=1;for(let L=0;L<u;L++)for(let K=0;K<l;K++){const W=K+L*l;if(e.getBit(W)){let te=null;for(let xe=0;xe<s.length;xe++){const pe=K+i[xe],be=L+o[xe];if(pe>=0&&be>=0&&pe<l&&be<u){let Je=h[pe+be*l];Je?(s[xe]=Je,(!te||s[xe].value<te.value)&&(te=s[xe])):s[xe]=null}}if(te){h[W]=te;for(let xe=0;xe<s.length;xe++)s[xe]&&s[xe]!==te&&m.union(te,s[xe])}else h[W]=m.add(x++)}}for(let L=0;L<u;L++)for(let K=0;K<l;K++){const W=K+L*l;e.getBit(W)&&(d[W]=m.find(h[W]).value)}return new Aa(e,d)}function AV(e={}){let{allowCorner:t=!0,onlyTop:n=!1,invert:r=!1}=e,i=this;i.checkProcessable("fromMaxima",{components:[1]});let a=0,l=0,u=new Int16Array(i.size),h=new Int8Array(i.size),d=new Float32Array(i.size),m=1048575,x=new Uint16Array(m+1),L=new Uint16Array(m+1),K=0,W=0,te=new Uint16Array(m+1),xe=new Uint16Array(m+1),pe=0,be=0;for(function Te({maxima:ft=!0}){for(let ct=1;ct<i.height-1;ct++)for(let rt=1;rt<i.width-1;rt++){let at=rt+ct*i.width;if(0===h[at]){let Ut=ft?i.data[at]:-i.data[rt+ct*i.width];if(i.data[ct*i.width+rt-1]>Ut||i.data[ct*i.width+rt+1]>Ut||i.data[(ct-1)*i.width+rt]>Ut||i.data[(ct+1)*i.width+rt]>Ut||t&&(i.data[(ct-1)*i.width+rt-1]>Ut||i.data[(ct-1)*i.width+rt+1]>Ut||i.data[(ct+1)*i.width+rt-1]>Ut||i.data[(ct+1)*i.width+rt+1]>Ut))continue;u[at]=ft?++a:--l,Je(rt,ct)||(ft?--a:++l)}}}(i);K<W;)Xe(x[K&m],L[K&m],2),K++;return new Aa(i,u);function Je(ft,ct){let rt=W;pe=0,be=1,te[0]=ft,xe[0]=ct;let at=!0;for(;pe<be;)at&=Xe(te[pe&m],xe[pe&m],1),pe++;if(!at){for(let Ut=0;Ut<be;Ut++)u[xe[Ut&m]*i.width+te[Ut&m]]=0;W=rt}return at}function Xe(ft,ct,rt){let at=u[ct*i.width+ft],Ut=i.data[ct*i.width+ft];for(let Zt=ct-1;Zt<=ct+1;Zt++)for(let un=ft-1;un<=ft+1;un++){let Rt=Zt*i.width+un;if(0===h[Rt])switch(h[Rt]=1,d[Rt]=i.data[Rt]-Ut,rt){case 1:if(0===d[Rt]){if(0===un||0===Zt||un===i.width-1||Zt===i.height-1)return!1;u[Rt]=at,te[be&m]=un,xe[be&m]=Zt,be++}else{if(d[Rt]>0)return!1;n||(u[Rt]=at,x[W&m]=un,L[W&m]=Zt,W++)}break;case 2:d[Rt]<=0&&(u[Rt]=at,x[W&m]=un,L[W&m]=Zt,W++);break;default:throw new Error("unreachable")}}return!0}}function IV(e,t={}){let n=new xg(t),r=new Int16Array(this.size),i=0,o=n.getPoints();for(let s=0;s<e.length;s++){i++;let a=e[s][0],l=e[s][1];for(let u=0;u<o.length;u++){let h=o[u][0],d=o[u][1];a+h>=0&&l+d>=0&&a+h<this.width&&l+d<this.height&&(r[a+h+(l+d)*this.width]=i)}}return new Aa(this,r)}var TV=D(232),uC=D.n(TV);const cC=[1,0,-1,0,1,1,-1,-1],hC=[0,1,0,-1,1,-1,1,-1];function RV(e={}){let{points:t,mask:n,image:r,fillMaxValue:i=this.maxValue,invert:o=!1}=e,s=r||this;s.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),o=!o,t||(t=s.getLocalMaxima({invert:o,mask:n}));let a=o?0:1,l=new Int16Array(s.size),u=s.width,h=s.height,d=new(uC())({comparator:(m,x)=>m[2]-x[2],strategy:uC().BinaryHeapStrategy});for(let m=0;m<t.length;m++){let x=t[m][0]+t[m][1]*u;l[x]=m+1;let L=s.data[x];(o&&L<=i||!o&&L>=i)&&d.queue([t[m][0],t[m][1],L])}for(;d.length>0;){let m=d.dequeue(),x=m[0]+m[1]*u;for(let L=0;L<4;L++){let K=m[0]+cC[L],W=m[1]+hC[L];if(K>=0&&W>=0&&K<u&&W<h){let te=K+W*u;if(!n||n.getBit(te)===a){let xe=s.data[te];(o&&xe<=i||!o&&xe>=i)&&0===l[te]&&(l[te]=l[x],d.queue([m[0]+cC[L],m[1]+hC[L],xe]))}}}}return new Aa(s,l)}class PV{constructor(t,n={}){this._image=t,this._options=n,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(t={}){let n=Object.assign({},this._options,t),r=AV.call(this._image,t);this._layers[n.label]=new Sa(r,n)}fromPoints(t,n={}){let r=Object.assign({},this._options,n),i=IV.call(this._image,t,n);return this._layers[r.label]=new Sa(i,r),this}putMap(t,n={}){let r=new Aa(this._image,t),i=Object.assign({},this._options,n);return this._layers[i.label]=new Sa(r,i),this}fromWaterShed(t={}){let n=Object.assign({},this._options,t),r=RV.call(this._image,t);this._layers[n.label]=new Sa(r,n)}fromMask(t,n={}){let r=Object.assign({},this._options,n),i=wV.call(this._image,t,n);return this._layers[r.label]=new Sa(i,r),this}fromMaskConnectedComponentLabelingAlgorithm(t,n={}){let r=Object.assign({},this._options,n),i=SV.call(this._image,t,n);return this._layers[r.label]=new Sa(i,r),this}getMap(t={}){let n=Object.assign({},this._options,t);return this._assertLayerWithLabel(n.label),this._layers[n.label].roiMap}rowsInfo(t={}){return this.getMap(t).rowsInfo()}colsInfo(t={}){return this.getMap(t).rowsInfo()}getRoiIds(t={}){let n=this.getRois(t);if(n){let r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n[i].id;return r}throw new Error("ROIs not found")}getRois(t={}){let{label:n=this._options.label,positive:r=!0,negative:i=!0,minSurface:o=0,maxSurface:s=Number.POSITIVE_INFINITY,minWidth:a=0,maxWidth:l=Number.POSITIVE_INFINITY,minHeight:u=0,maxHeight:h=Number.POSITIVE_INFINITY,minRatio:d=0,maxRatio:m=Number.POSITIVE_INFINITY}=t;if(!this._layers[n])throw new Error(`this Roi layer (${n}) does not exist`);const x=this._layers[n].roi,L=[];for(const K of x)(K.id<0&&i||K.id>0&&r)&&K.surface>=o&&K.surface<=s&&K.width>=a&&K.width<=l&&K.height>=u&&K.height<=h&&K.ratio>=d&&K.ratio<=m&&L.push(K);return L}getRoi(t,n={}){const{label:r=this._options.label}=n;if(!this._layers[r])throw new Error(`this Roi layer (${r}) does not exist`);const i=this._layers[r].roi.find(o=>o.id===t);if(!i)throw new Error(`found no Roi with id ${t}`);return i}getMasks(t={}){let n=this.getRois(t),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n[i].getMask(t);return r}getAnalysisMasks(t={}){const{analysisProperty:n}=t;let r=`${n}Mask`,i=this.getRois(t);return 0!==i.length&&i[0][r]?i.map(o=>o[r]):[]}getData(t={}){let n=Object.assign({},this._options,t);return this._assertLayerWithLabel(n.label),this._layers[n.label].roiMap.data}paint(t={}){let{labelProperty:n,analysisProperty:r}=t;this._painted||(this._painted=this._image.rgba8());let i=this.getMasks(t);if(n){const o=this.getRois(t);t.labels=o.map(u=>function rV(e,t=""){let n=t.split(".");for(let r of n){if(void 0===e[r])return;e=e[r]}return e}(u,n));const s=Math.max(...t.labels);let a=!1,l=!1;if(n.includes("surface")?a=!0:/(?:perimeter|min|max|external|width|height|length)/.test(n)&&(l=!0),isFinite(s)){let u="";if("pixel"!==t.unit&&t.pixelSize&&(l||a)){u=a?`${t.unit}^2`:t.unit;let h=a?"m^2":"m",d=a?t.pixelSize**2:t.pixelSize;const m=nV().swiftConverter(h,u);t.labels=t.labels.map(x=>m(d*x))}t.labels=t.labels.map(s>50?h=>Math.round(h)+u:s>10?h=>h.toFixed(1)+u:h=>h.toFixed(2)+u)}t.labelsPosition=o.map(u=>[u.meanX,u.meanY])}if(this._painted.paintMasks(i,t),r){let o=this.getAnalysisMasks(t);this._painted.paintMasks(o,{color:t.analysisColor,alpha:t.analysisAlpha})}return this._painted}getMask(t={}){let n=new nt(this._image.width,this._image.height,{kind:"BINARY"}),r=this.getMasks(t);for(let i=0;i<r.length;i++){let o=r[i];for(let s=0;s<o.width;s++)for(let a=0;a<o.height;a++)o.getBitXY(s,a)&&n.setBitXY(s+o.position[0],a+o.position[1])}return n}resetPainted(t={}){const{image:n}=t;this._painted=n?this.image.rgba8():this._image.rgba8()}mergeRoi(t={}){const n=this.getMap(t);return n.mergeRoi(t),this.putMap(n.data,t),this}mergeRois(t,n={}){if(!Array.isArray(t)||t.some(i=>!Number.isInteger(i)))throw new Error("Roi ids must be an array of integers");if(t.length<2)throw new Error("Roi ids must have at least two elements");if(new Set(t).size!==t.length)throw new Error("Roi ids must be all different");t.forEach(i=>this.getRoi(i));const r=this.getMap(n);return r.mergeRois(t),this.putMap(r.data,n),this}findCorrespondingRoi(t,n={}){let r=this.getRois(n),i=[];for(let o=0;o<r.length;o++){let s=r[o],d=kV(s.minX,s.minY,s.points,t,Math.sign(s.id));i.push(d)}return i}_assertLayerWithLabel(t){if(!this._layers[t])throw new Error(`no layer with label ${t}`)}}function kV(e,t,n,r,i){let o={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(let s=0;s<n.length;s++){let a=n[s],d=r.data[a[0]+e+(a[1]+t)*r.width];(d>0||d<0)&&(o.id.includes(d)?o.surface[o.id.indexOf(d)]+=1:(o.id.push(d),o.surface.push(1)))}for(let s=0;s<o.id.length;s++)Math.sign(o.id[s])===i?o.same+=o.surface[s]:o.opposite+=o.surface[s],o.roiSurfaceCovered[s]=o.surface[s]/n.length;return o.total=o.opposite+o.same,o}const FV=Object.prototype.toString;class nt{constructor(t,n,r,i){if(1===arguments.length?(i=t,({width:t,height:n,data:r}=i)):r&&!r.length&&(i=r,({data:r}=i)),void 0===t&&(t=1),void 0===n&&(n=1),void 0===i&&(i={}),"object"!=typeof i||null===i)throw new TypeError("options must be an object");if(!Number.isInteger(t)||t<=0)throw new RangeError("width must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new RangeError("height must be a positive integer");const{kind:o=qD}=i;if("string"!=typeof o)throw new TypeError("kind must be a string");const s=function PB(e){const t=Po[e];if(!t)throw new RangeError(`invalid image kind: ${e}`);return t}(o),a=Object.assign({},i);for(const K in s)void 0===a[K]&&(a[K]=s[K]);!function kB(e){const{components:t,alpha:n,bitDepth:r,colorModel:i}=e;if(!Number.isInteger(t)||t<=0)throw new RangeError(`invalid components: ${t}. Must be a positive integer`);if(0!==n&&1!==n&&"boolean"!=typeof n)throw new TypeError(`invalid alpha: ${n}: must be a boolean, 0 or 1`);if(!KD.includes(r))throw new RangeError(`invalid bitDepth: ${r}. Must be one of ${KD.join(", ")}`);if(!I[i])throw new RangeError(`invalid colorModel: ${i}. Must be one of ${Object.keys(I).join(", ")}`)}(a);const{components:l,bitDepth:u,colorModel:h}=a,d=a.alpha+0,m=t*n,x=l+d,L=32===u?Number.MAX_VALUE:2**u-1;if(void 0===r)r=function OB(e,t,n,r,i,o){const s=r*e;let a;switch(i){case 1:a=new Uint8Array(Math.ceil(s/8));break;case 8:a=new Uint8Array(s);break;case 16:a=new Uint16Array(s);break;case 32:a=new Float32Array(s);break;default:throw new Error(`Cannot create pixel array for bit depth ${i}`)}if(n)for(let l=t;l<a.length;l+=r)a[l]=o;return a}(m,l,d,x,u,L);else{const K=function FB(e,t,n){let r=t*e;return 1===n&&(r=Math.ceil(r/8)),r}(m,x,u);if(r.length!==K)throw new RangeError(`incorrect data size: ${r.length}. Should be ${K}`)}this.width=t,this.height=n,this.data=r,this.size=m,this.components=l,this.alpha=d,this.bitDepth=u,this.maxValue=L,this.colorModel=h,this.channels=x,this.meta=i.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:i.parent||null}),this.position=i.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}get[Symbol.toStringTag](){return"IJSImage"}static isImage(t){return"[object IJSImage]"===FV.call(t)}static fromCanvas(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return new nt(r.width,r.height,r.data)}static createFrom(t,n){const r=lg(t);return Object.assign(r,{parent:t,position:[0,0]},n),new nt(r)}getRoiManager(t){return new PV(this,t)}clone(){const t=this.data.slice();return new nt(this.width,this.height,t,this)}apply(t){for(let n=0;n<this.height;n++)for(let r=0;r<this.width;r++)t.call(this,(n*this.width+r)*this.channels)}}(function L6(e){for(const t in pE)e.prototype[t]=pE[t]})(nt),function L8(e){for(const t in f_)e.prototype[t]=f_[t]}(nt),function gB(e){for(const t in WD)e.prototype[t]=WD[t]}(nt),nt.prototype.checkProcessable=function B8(e,t={}){let{bitDepth:n,alpha:r,colorModel:i,components:o,channels:s}=t;if("string"!=typeof e||0===e.length)throw new TypeError("processName must be a string");if(n&&(Array.isArray(n)||(n=[n]),!n.includes(this.bitDepth)))throw new TypeError(`The process: ${e} can only be applied if bit depth is in: ${n}`);if(r&&(Array.isArray(r)||(r=[r]),!r.includes(this.alpha)))throw new TypeError(`The process: ${e} can only be applied if alpha is in: ${r}`);if(i&&(Array.isArray(i)||(i=[i]),!i.includes(this.colorModel)))throw new TypeError(`The process: ${e} can only be applied if color model is in: ${i}`);if(o&&(Array.isArray(o)||(o=[o]),!o.includes(this.components))){let a=`The process: ${e} can only be applied if the number of components is in: ${o}`;throw 1===o.length&&1===o[0]?new TypeError(`${a}.\rYou should transform your image using "image.grey()" before applying the algorithm.`):new TypeError(a)}if(s&&(Array.isArray(s)||(s=[s]),!s.includes(this.channels)))throw new TypeError(`The process: ${e} can only be applied if the number of channels is in: ${s}`)},nt.prototype.getRGBAData=function yB(e={}){const{clamped:t}=e;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});const n=this.width*this.height*4;let r=t?new Uint8ClampedArray(n):new Uint8Array(n);return 1===this.bitDepth?function xB(e,t){for(let n=0;n<e.size;n++){const r=e.getBit(n);t[4*n]=255*r,t[4*n+1]=255*r,t[4*n+2]=255*r}}(this,r):32===this.bitDepth?(this.checkProcessable("getRGBAData",{alpha:0}),1===this.components?function bB(e,t){const n=e.min[0],i=e.max[0]-n;for(let o=0;o<e.size;o++){const s=Math.floor(255*(e.data[o]-n)/i);t[4*o]=s,t[4*o+1]=s,t[4*o+2]=s}}(this,r):3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[Nr]}),function _B(e,t){const n=Math.min(...e.min),i=Math.max(...e.max)-n;for(let o=0;o<e.size;o++){const s=Math.floor(255*(e.data[3*o]-n)/i),a=Math.floor(255*(e.data[3*o+1]-n)/i),l=Math.floor(255*(e.data[3*o+2]-n)/i);t[4*o]=s,t[4*o+1]=a,t[4*o+2]=l}}(this,r))):1===this.components?function DB(e,t){for(let n=0;n<e.size;n++)t[4*n]=e.data[n*e.channels]>>>e.bitDepth-8,t[4*n+1]=e.data[n*e.channels]>>>e.bitDepth-8,t[4*n+2]=e.data[n*e.channels]>>>e.bitDepth-8}(this,r):3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[Nr]}),function EB(e,t){for(let n=0;n<e.size;n++)t[4*n]=e.data[n*e.channels]>>>e.bitDepth-8,t[4*n+1]=e.data[n*e.channels+1]>>>e.bitDepth-8,t[4*n+2]=e.data[n*e.channels+2]>>>e.bitDepth-8}(this,r)),1===this.alpha?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),function CB(e,t){for(let n=0;n<e.size;n++)t[4*n+3]=e.data[n*e.channels+e.components]>>e.bitDepth-8}(this,r)):function MB(e,t){for(let n=0;n<e.size;n++)t[4*n+3]=255}(this,r),r},nt.load=function R6(e,t){if("string"==typeof e)return function P6(e,t){const n=e.slice(0,64).match(T6);let r;return r=null!==n?Promise.resolve(function lB(e){let i,o,s,a,t=.75*e.length,n=e.length,r=0;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);const l=new Uint8Array(t);for(let u=0;u<n;u+=4)i=iu[e.charCodeAt(u)],o=iu[e.charCodeAt(u+1)],s=iu[e.charCodeAt(u+2)],a=iu[e.charCodeAt(u+3)],l[r++]=i<<2|o>>4,l[r++]=(15&o)<<4|s>>2,l[r++]=(3&s)<<6|63&a;return l}(e.slice(n[0].length))):function hB(e,{withCredentials:t=!1}={}){return new Promise(function(n,r){let i=new self.XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.withCredentials=t,i.onload=function(o){200!==this.status?r(o):n(this.response)},i.onerror=r,i.send()})}(e,t),r.then(i=>sg(new Uint8Array(i),n?e:void 0,t&&t.ignorePalette))}(e,t);if(e instanceof ArrayBuffer)return Promise.resolve(sg(new Uint8Array(e),void 0,t&&t.ignorePalette));if(e.buffer)return Promise.resolve(sg(e,void 0,t&&t.ignorePalette));throw new Error('argument to "load" must be a string or buffer.')},nt.extendMethod=function vB(e,t,n={}){let{inPlace:r=!1,returnThis:i=!0,partialArgs:o=[]}=n;return nt.prototype[e]=r?function(...s){this.computed=null;let a=t.apply(this,[...o,...s]);return i?this:a}:function(...s){return t.apply(this,[...o,...s])},nt},nt.extendProperty=function wB(e,t,n={}){let{partialArgs:r=[]}=n;return ZD.get=function(){if(null===this.computed)this.computed={};else if(XD()(e,this.computed))return this.computed[e];let i=t.apply(this,r);return this.computed[e]=i,i},Object.defineProperty(nt.prototype,e,ZD),nt},function eV(e){let t={inPlace:!0};e.extendMethod("invert",V6),e.extendMethod("abs",B6),e.extendMethod("level",f5,t),e.extendMethod("add",m5,t),e.extendMethod("subtract",v5,t),e.extendMethod("subtractImage",w5),e.extendMethod("multiply",x5,t),e.extendMethod("divide",b5,t),e.extendMethod("hypotenuse",y5),e.extendMethod("background",A5),e.extendMethod("flipX",z6),e.extendMethod("flipY",G6),e.extendMethod("blurFilter",Y6),e.extendMethod("medianFilter",K6),e.extendMethod("gaussianFilter",Q6),e.extendMethod("sobelFilter",u5),e.extendMethod("gradientFilter",fg),e.extendMethod("scharrFilter",c5),e.extendMethod("dilate",I5),e.extendMethod("erode",F5),e.extendMethod("open",U5),e.extendMethod("close",j5),e.extendMethod("topHat",V5),e.extendMethod("blackHat",$5),e.extendMethod("morphologicalGradient",H5),e.extendMethod("warpingFourPoints",W5),e.extendMethod("crop",X5),e.extendMethod("cropAlpha",Z5),e.extendMethod("resize",AE).extendMethod("scale",AE),e.extendMethod("hsv",sU),e.extendMethod("hsl",aU),e.extendMethod("cmyk",lU),e.extendMethod("rgba8",uU),e.extendMethod("grey",TE).extendMethod("gray",TE),e.extendMethod("mask",IU),e.extendMethod("pad",RU),e.extendMethod("colorDepth",PU),e.extendMethod("setBorder",UU,t),e.extendMethod("rotate",NU),e.extendMethod("rotateLeft",BE),e.extendMethod("rotateRight",UE),e.extendMethod("insert",BU),e.extendMethod("getRow",XU),e.extendMethod("getColumn",ZU),e.extendMethod("getMatrix",qU),e.extendMethod("setMatrix",KU),e.extendMethod("getPixelsArray",QU),e.extendMethod("getIntersection",JU),e.extendMethod("getClosestCommonParent",tj),e.extendMethod("getThreshold",NE),e.extendMethod("split",jU),e.extendMethod("getChannel",VU),e.extendMethod("combineChannels",$U),e.extendMethod("setChannel",zU),e.extendMethod("getSimilarity",GU),e.extendMethod("getPixelsGrid",YU),e.extendMethod("getBestMatch",WU),e.extendMethod("cannyEdge",sj),e.extendMethod("convolution",su),e.extendMethod("extract",aj),e.extendMethod("floodFill",cj),e.extendMethod("paintLabels",Ij,t),e.extendMethod("paintMasks",Tj,t),e.extendMethod("paintPoints",Nj,t),e.extendMethod("paintPolyline",Lj,t),e.extendMethod("paintPolylines",Bj,t),e.extendMethod("paintPolygon",Uj,t),e.extendMethod("paintPolygons",Hj,t),e.extendMethod("countAlphaPixels",Yj),e.extendMethod("monotoneChainConvexHull",bg),e.extendMethod("minimalBoundingRectangle",aC),e.extendMethod("getHistogram",WE).extendProperty("histogram",WE),e.extendMethod("getHistograms",XE).extendProperty("histograms",XE),e.extendMethod("getColorHistogram",qE).extendProperty("colorHistogram",qE),e.extendMethod("getMin",KE).extendProperty("min",KE),e.extendMethod("getMax",QE).extendProperty("max",QE),e.extendMethod("getSum",JE).extendProperty("sum",JE),e.extendMethod("getMoment",eC).extendProperty("moment",eC),e.extendMethod("getLocalMaxima",zj),e.extendMethod("getMedian",nC).extendProperty("median",nC),e.extendMethod("getMean",tC).extendProperty("mean",tC),e.extendMethod("getPoints",rC).extendProperty("points",rC),e.extendMethod("getExtendedPoints",iC).extendProperty("extendedPoints",iC),e.extendMethod("getRelativePosition",Gj)}(nt);var OV=D(814),fC=D.n(OV);const NV={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function dC(e,t,n){return e.post("data",[t,n]).then(function(r){for(let i in r)r[i]=new nt(r[i]);return r})}const UV={run:function LV(e,t,n){t=Object.assign({},NV,t);const r=this.manager;return Array.isArray(e)?Promise.all(e.map(function(i){const o=dC(r,i,t);return"function"==typeof n&&o.then(n),o})):dC(r,e,t)},work:function BV(){worker.on("data",function(e,t,n){t=new IJS(t);const r={},i=[],o=t.grey(),s=o.sobelFilter();x("sobel",s);const a=s.level().mask({threshold:n.threshold});x("mask",a);const l=s.getRoiManager();l.fromMask(a);const u=l.getMask(n.roi);x("realMask",u);const h=o.getPixelsGrid({sampling:n.sampling,mask:u}),d=t.getBackground(h.xyS,h.zS,n.regression);x("background",d);const m=t.subtract(d);function x(L,K){n.include.includes(L)&&(r[L]=K,i.push(K.data.buffer))}r.result=m,i.push(m.data.buffer),e(r,i)})}};class Rh{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(null===this._url)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url(t){if("string"!=typeof t)throw new TypeError("worker URL must be a string");this._url=t,this._deps[0]=t}static extendMethod(t,n){let r,i,o={};function s(...a){return r||(this.checkUrl(),i=this.url,r=new(fC())(n.work,{deps:i}),o.manager=r),n.run.call(o,...a)}s.reset=function(){r&&(r.terminate(),r=new(fC())(n.work,{deps:i}),o.manager=r)},Rh.prototype[t]=s}}!function jV(e){e.extendMethod("background",UV)}(Rh),new Rh;var VV=D(4763),$V=D.n(VV);const HV=["image"];let zV=(()=>{class e{constructor(){this.imgCropped=new rr,this.imageDestination=""}ngOnInit(){}ngAfterViewInit(){this.cropper=new($V())(this.imageElement.nativeElement,{zoomable:!1,scalable:!1,crop:()=>{const n=this.cropper.getCroppedCanvas();this.imageDestination=n.toDataURL("image/png")}})}applyCrop(){this.imgCropped.emit(this.imageDestination)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Es({type:e,selectors:[["app-cropper"]],viewQuery:function(n,r){if(1&n&&wy(HV,5),2&n){let i;gc(i=function mc(){return function jR(e,t){return e[19].queries[t].queryList}(Ve(),Hg())}())&&(r.imageElement=i.first)}},inputs:{imageSource:["src","imageSource"]},outputs:{imgCropped:"imgCropped"},decls:6,vars:2,consts:[[1,"img-container"],[3,"src"],["image",""],[1,"upload-btn",2,"margin-left","15px",3,"click"],[1,"img-preview",3,"src"]],template:function(n,r){1&n&&(An(0,"div",0),xo(1,"img",1,2),Dn(),An(3,"button",3),Or("click",function(){return r.applyCrop()}),_r(4,"Apply"),Dn(),xo(5,"img",4)),2&n&&($r(1),nr("src",r.imageSource,zo),$r(4),nr("src",r.imageDestination,zo))},styles:[".img-container[_ngcontent-%COMP%]{width:420px;height:260px;float:left}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.img-preview[_ngcontent-%COMP%]{margin-left:15px;width:420px;height:260px;color:#f5f5f5;border-radius:15px;border-color:#252525;border-width:5px;background:#252525;overflow:hidden;box-shadow:0 4px 15px #8233c5;backdrop-filter:blur(2.5px);-webkit-backdrop-filter:blur(2.5px)}.img-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}"]}),e})();function GV(e,t){1&e&&(An(0,"video",12),_r(1," Your browser does not support the video tag. "),Dn()),2&e&&nr("src",fr(2).url,zo)}function YV(e,t){if(1&e){const n=al();An(0,"div",2)(1,"h1",3),_r(2,"You can upload your video"),Dn(),An(3,"p",4),_r(4,"Click on the button to upload your media"),Dn(),An(5,"div",5)(6,"div",6)(7,"label",7),_r(8,"Upload File"),Dn(),An(9,"input",8,9),Or("change",function(i){return Bi(n),Ui(fr().fileEvent(i))}),Dn()()(),yo(11,GV,2,1,"video",10),An(12,"button",11),Or("click",function(){return Bi(n),Ui(fr().getScreenshot(2))}),_r(13,"Process"),Dn()()}if(2&e){const n=fr();$r(11),nr("ngIf",n.url),$r(1),nr("disabled",!n.url)}}function WV(e,t){if(1&e){const n=al();An(0,"app-cropper",20),Or("imgCropped",function(i){return Bi(n),Ui(fr(2).onImageCrop(i))}),Dn()}2&e&&nr("src",fr(2).imgSrc)}function XV(e,t){1&e&&xo(0,"img",27),2&e&&nr("src",fr(3).imgSrc,zo)}function ZV(e,t){if(1&e&&(An(0,"div",21)(1,"div",22),yo(2,XV,1,1,"img",23),Dn(),xo(3,"img",24),An(4,"div",25)(5,"div",26),_r(6),Dn()()()),2&e){const n=fr(2);$r(2),nr("ngIf",n.imgSrc),$r(4),Hd(n.imgText)}}function qV(e,t){if(1&e){const n=al();An(0,"button",28),Or("click",function(){return Bi(n),Ui(fr(2).doOCR())}),_r(1,"Convert "),Dn()}}function KV(e,t){if(1&e){const n=al();An(0,"div",13)(1,"div",14)(2,"button",15),Or("click",function(){Bi(n);const i=fr();return Ui(i.isCropping=!i.isCropping)}),_r(3,"Crop"),Dn(),An(4,"button",15),Or("click",function(){return Bi(n),Ui(fr().onGaussian())}),_r(5,"Gaussian"),Dn(),An(6,"button",15),Or("click",function(){return Bi(n),Ui(fr().onGrey())}),_r(7,"Grey"),Dn(),An(8,"button",15),Or("click",function(){return Bi(n),Ui(fr().refresh())}),_r(9,"Refresh"),Dn()(),yo(10,WV,1,1,"app-cropper",16),yo(11,ZV,7,2,"div",17),An(12,"span",18)(13,"b"),_r(14,"Processing ..."),Dn()(),yo(15,qV,2,0,"button",19),Dn()}if(2&e){const n=fr();$r(10),nr("ngIf",n.isCropping),$r(1),nr("ngIf",!n.isCropping),$r(1),nr("hidden",!n.isLoading),$r(3),nr("ngIf",!n.isLoading)}}const QV=[{path:"converter",component:(()=>{class e{constructor(n){this.elRef=n,this.blobURL=null,this.url=null,this.imgSrc="",this.originalSrc="",this.imageProcessed=!1,this.isLoading=!1,this.isCropping=!1,this.imgText=""}ngOnInit(){}getFileDetails(n){}fileEvent(n){const r=n.target.files&&n.target.files[0];if(r){var i=new FileReader;i.readAsDataURL(r),i.onload=o=>{this.url=o.target.result}}}getScreenshot(n){n=n||1;const r=this.elRef.nativeElement.querySelector("video"),i=document.createElement("canvas");i.width=r.clientWidth*n,i.height=r.clientHeight*n,i.getContext("2d").drawImage(r,0,0,i.width,i.height),this.imgSrc=i.toDataURL(),this.imageProcessed=!0}doOCR(){var n=this;return C0(function*(){n.isLoading=!0;const r=(0,N8.createWorker)();yield r.load(),yield r.loadLanguage("eng"),yield r.initialize("eng");const{data:{text:i}}=yield r.recognize(n.imgSrc);n.imgText=n.trimStringBefore(i,"<"),n.imgText=n.trimStringAfter(i,">"),n.isLoading=!1,yield r.terminate()})()}trimStringAfter(n,r){const i=n.lastIndexOf(r);return n.substring(0,-1===i?n.length:i+1)}trimStringBefore(n,r){const i=n.indexOf(r);return n.substring(-1===i?0:i+1,n.length)}onImageCrop(n){this.imgSrc=n,this.isCropping=!1}onGaussian(){var n=this;return C0(function*(){let o=(yield nt.load(n.imgSrc)).gaussianFilter({radius:1}).mask({threshold:.25});n.imgSrc=o.toDataURL()})()}refresh(){this.imgSrc="",this.imageProcessed=!1}onGrey(){var n=this;return C0(function*(){let i=(yield nt.load(n.imgSrc)).grey();n.imgSrc=i.toDataURL()})()}contrastImage(n,r){for(var i=n.data,o=259*(r+255)/(255*(259-r)),s=0;s<i.length;s+=4)i[s]=o*(i[s]-128)+128,i[s+1]=o*(i[s+1]-128)+128,i[s+2]=o*(i[s+2]-128)+128;return n.src}}return e.\u0275fac=function(n){return new(n||e)(gt(Yi))},e.\u0275cmp=Es({type:e,selectors:[["app-converter"]],decls:2,vars:2,consts:[["class","upload-container",4,"ngIf"],["class","process-container",4,"ngIf"],[1,"upload-container"],[1,"glass-text",2,"margin","15px 0 5px"],[1,"description","glass-text"],[1,"input-file-container"],[1,"button-wrap"],["for","upload",1,"button","glass-text"],["type","file","name","file","id","upload","accept","video/*",1,"inputfile",3,"change"],["inputFile",""],["width","750","height","460","controls","","type","video/mp4","autoplay","",3,"src",4,"ngIf"],[1,"upload-btn",3,"disabled","click"],["width","750","height","460","controls","","type","video/mp4","autoplay","",3,"src"],[1,"process-container"],[1,"control-panel"],[1,"upload-btn",2,"margin-top","20px",3,"click"],[3,"src","imgCropped",4,"ngIf"],["class","process-convert",4,"ngIf"],[2,"height","90px",3,"hidden"],["class","upload-btn file-upload","style","margin:20px 0;",3,"click",4,"ngIf"],[3,"src","imgCropped"],[1,"process-convert"],[1,"start-process"],[3,"src",4,"ngIf"],["src","assets/arrow.png",1,"arrow"],[1,"end-process"],[1,"text"],[3,"src"],[1,"upload-btn","file-upload",2,"margin","20px 0",3,"click"]],template:function(n,r){1&n&&(yo(0,YV,14,2,"div",0),yo(1,KV,16,4,"div",1)),2&n&&(nr("ngIf",!r.imageProcessed),$r(1),nr("ngIf",r.imageProcessed))},dependencies:[Rx,zV],styles:[".upload-container[_ngcontent-%COMP%]{min-height:45vh;min-width:65vh;display:flex;align-items:center;flex-direction:column;padding:10px;background:rgba(255,255,255,.35);box-shadow:0 8px 32px #1f26875e;backdrop-filter:blur(11.5px);-webkit-backdrop-filter:blur(11.5px);border-radius:30px;border:1px solid rgba(255,255,255,.18)}.upload-container[_ngcontent-%COMP%]   .glass-text[_ngcontent-%COMP%]{color:#fff;text-shadow:2px 2px 5px rgba(31,38,135,.37)}.upload-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700}.upload-container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:10px 0}.upload-container[_ngcontent-%COMP%]   .inputfile[_ngcontent-%COMP%]{color:#000!important;display:none}.upload-container[_ngcontent-%COMP%]   .input-file-container[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;margin:auto 0}.upload-container[_ngcontent-%COMP%]   .input-file-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{position:relative;display:inline-block;color:#fff;text-align:center;font-size:20px;padding:8px;width:100px;transition:all .5s;cursor:pointer;margin:5px;z-index:10;background:#8233C5;box-shadow:0 4px 15px #8233c5;backdrop-filter:blur(2.5px);-webkit-backdrop-filter:blur(2.5px);border-radius:10px;border:1px solid rgba(255,255,255,.18)}.upload-container[_ngcontent-%COMP%]   .input-file-container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{transition:1s ease;background:#b767ff}.upload-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;z-index:0;top:15px;left:20px;font-size:17px;color:#b8b8b8}.upload-container[_ngcontent-%COMP%]   .button-wrap[_ngcontent-%COMP%]{position:relative}.upload-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{margin:20px 0}.process-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;margin:20px 0;height:60vh;width:1100px;background:rgba(255,255,255,.35);box-shadow:0 8px 32px #1f26875e;backdrop-filter:blur(11.5px);-webkit-backdrop-filter:blur(11.5px);border-radius:30px;border:1px solid rgba(255,255,255,.18)}.process-container[_ngcontent-%COMP%]   .process-convert[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:400px}.process-container[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{width:50px;margin:0 20px}.process-container[_ngcontent-%COMP%]   .start-process[_ngcontent-%COMP%], .process-container[_ngcontent-%COMP%]   .end-process[_ngcontent-%COMP%]{height:300px;width:450px;color:#f5f5f5;overflow:hidden;background:rgba(32,7,153,.35);box-shadow:0 8px 15px #1f26875e;backdrop-filter:blur(1.5px);-webkit-backdrop-filter:blur(1.5px);border-radius:10px;border:1px solid rgba(255,255,255,.18);text-shadow:2px 2px 5px rgba(31,38,135,.37)}.process-container[_ngcontent-%COMP%]   .start-process[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .process-container[_ngcontent-%COMP%]   .end-process[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.process-container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{padding:10px 15px}.process-container[_ngcontent-%COMP%]   .control-panel[_ngcontent-%COMP%]{display:flex}.process-container[_ngcontent-%COMP%]   .control-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}"]}),e})()},{path:"**",redirectTo:"converter"}];let JV=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=No({type:e}),e.\u0275inj=Br({imports:[a_.forRoot(QV),a_]}),e})(),e9=(()=>{class e{constructor(){this.title="Video OCR"}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Es({type:e,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"main"]],template:function(n,r){1&n&&(An(0,"div",0),xo(1,"router-outlet"),Dn())},dependencies:[d0],styles:["*{margin:0;padding:0}.main[_ngcontent-%COMP%]{background-image:linear-gradient(310deg,#274B74 0%,#8233C5 48%,#E963FD 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column}"]}),e})(),t9=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=No({type:e,bootstrap:[e9]}),e.\u0275inj=Br({imports:[WF,JV]}),e})();(function SP(){rx=!1})(),YF().bootstrapModule(t9).catch(e=>console.error(e))},8403:(se,ee,D)=>{se.exports=D(1883),D(4114),D(5684),D(8701),D(4433),D(8019),D(2910),D(9792),D(4876)},8019:(se,ee,D)=>{var I,U,b;!function(_){"use strict";U=[D(1883),D(4433)],I=function(_){var E=_.ExifMap.prototype;E.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},E.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},E.getText=function(g){var w=this.get(g);switch(g){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[g][w];case"ExifVersion":case"FlashpixVersion":return w?String.fromCharCode(w[0],w[1],w[2],w[3]):void 0;case"ComponentsConfiguration":return w?this.stringValues[g][w[0]]+this.stringValues[g][w[1]]+this.stringValues[g][w[2]]+this.stringValues[g][w[3]]:void 0;case"GPSVersionID":return w?w[0]+"."+w[1]+"."+w[2]+"."+w[3]:void 0}return String(w)},E.getAll=function(){var w,M,y,g={};for(w in this)Object.prototype.hasOwnProperty.call(this,w)&&((M=this[w])&&M.getAll?g[this.privateIFDs[w].name]=M.getAll():(y=this.tags[w])&&(g[y]=this.getText(y)));return g},E.getName=function(g){var w=this.tags[g];return"object"==typeof w?this.privateIFDs[g].name:w},function(){var w,M,y,g=E.tags;for(w in g)if(Object.prototype.hasOwnProperty.call(g,w))if(M=E.privateIFDs[w])for(w in y=g[w])Object.prototype.hasOwnProperty.call(y,w)&&(M.map[y[w]]=Number(w));else E.map[g[w]]=Number(w)}()},void 0!==(b=I.apply(ee,U))&&(se.exports=b)}()},4433:(se,ee,D)=>{var I,U,b;!function(_){"use strict";U=[D(1883),D(5684)],I=function(_){function E(R){R&&(Object.defineProperty(this,"map",{value:this.privateIFDs[R].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[R]||{}}))}E.prototype.map={Orientation:274,Thumbnail:513,Exif:34665,GPSInfo:34853,Interoperability:40965},E.prototype.privateIFDs={34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},E.prototype.get=function(R){return this[R]||this[this.map[R]]};var w={1:{getValue:function(R,C){return R.getUint8(C)},size:1},2:{getValue:function(R,C){return String.fromCharCode(R.getUint8(C))},size:1,ascii:!0},3:{getValue:function(R,C,T){return R.getUint16(C,T)},size:2},4:{getValue:function(R,C,T){return R.getUint32(C,T)},size:4},5:{getValue:function(R,C,T){return R.getUint32(C,T)/R.getUint32(C+4,T)},size:8},9:{getValue:function(R,C,T){return R.getInt32(C,T)},size:4},10:{getValue:function(R,C,T){return R.getInt32(C,T)/R.getInt32(C+4,T)},size:8}};function M(R,C,T,B,V,G){var fe,k,O,Y,q,me,ae=w[B];if(ae){if(!((k=(fe=ae.size*V)>4?C+R.getUint32(T+8,G):T+8)+fe>R.byteLength)){if(1===V)return ae.getValue(R,k,G);for(O=[],Y=0;Y<V;Y+=1)O[Y]=ae.getValue(R,k+Y*ae.size,G);if(ae.ascii){for(q="",Y=0;Y<O.length&&"\0"!==(me=O[Y]);Y+=1)q+=me;return q}return O}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")}function y(R,C,T,B,V,G,ae,fe){var k,O,Y,q,me,re;if(T+6>R.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((O=T+2+12*(k=R.getUint16(T,B)))+4>R.byteLength)){for(Y=0;Y<k;Y+=1)me=R.getUint16(q=T+2+12*Y,B),(!ae||ae[me])&&(fe&&!0===fe[me]||(re=M(R,C,q,R.getUint16(q+2,B),R.getUint32(q+4,B),B),V[me]=re,G&&(G[me]=q)));return R.getUint32(O,B)}console.log("Invalid Exif data: Invalid directory size.")}}w[7]=w[1],_.parseExifData=function(R,C,T,B,V){if(!V.disableExif){var k,O,G=V.includeExifTags,ae=V.excludeExifTags||{34665:{37500:!0}},fe=C+10;if(1165519206===R.getUint32(C+4)){if(fe+8>R.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==R.getUint16(C+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(R.getUint16(fe)){case 18761:k=!0;break;case 19789:k=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==R.getUint16(fe+2,k))return void console.log("Invalid Exif data: Missing TIFF marker.");O=R.getUint32(fe+4,k),B.exif=new E,V.disableExifOffsets||(B.exifOffsets=new E,B.exifTiffOffset=fe,B.exifLittleEndian=k),(O=y(R,fe,fe+O,k,B.exif,B.exifOffsets,G,ae))&&!V.disableExifThumbnail&&(O=y(R,fe,fe+O,k,B.exif,B.exifOffsets,G,ae),B.exif[513]&&B.exif[514]&&(B.exif[513]=function g(R,C,T){if(T&&!(C+T>R.byteLength))return new Blob([R.buffer.slice(C,C+T)],{type:"image/jpeg"});console.log("Invalid Exif data: Invalid thumbnail data.")}(R,fe+B.exif[513],B.exif[514]))),Object.keys(B.exif.privateIFDs).forEach(function(q){!function A(R,C,T,B,V,G,ae){var fe=R.exif[C];fe&&(R.exif[C]=new E(C),R.exifOffsets&&(R.exifOffsets[C]=new E(C)),y(T,B,B+fe,V,R.exif[C],R.exifOffsets&&R.exifOffsets[C],G&&G[C],ae&&ae[C]))}(B,q,R,fe,k,G,ae)})}}},_.metaDataParsers.jpeg[65505].push(_.parseExifData),_.exifWriters={274:function(R,C,T){return new DataView(R,C.exifOffsets[274]+8,2).setUint16(0,T,C.exifLittleEndian),R}},_.writeExifData=function(R,C,T,B){_.exifWriters[C.exif.map[T]](R,C,B)},_.ExifMap=E},void 0!==(b=I.apply(ee,U))&&(se.exports=b)}()},8701:(se,ee,D)=>{var I,U,b;!function(_){"use strict";U=[D(1883)],I=function(_){"undefined"!=typeof fetch&&"undefined"!=typeof Request?_.fetchBlob=function(E,g,w){fetch(new Request(E,w)).then(function(M){return M.blob()}).then(g).catch(function(M){g(null,M)})}:"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof ProgressEvent&&(_.fetchBlob=function(E,g,w){w=w||{};var M=new XMLHttpRequest;M.open(w.method||"GET",E),w.headers&&Object.keys(w.headers).forEach(function(y){M.setRequestHeader(y,w.headers[y])}),M.withCredentials="include"===w.credentials,M.responseType="blob",M.onload=function(){g(M.response)},M.onerror=M.onabort=M.ontimeout=function(y){g(null,y)},M.send(w.body)})},void 0!==(b=I.apply(ee,U))&&(se.exports=b)}()},9792:(se,ee,D)=>{var I,U,b;!function(_){"use strict";U=[D(1883),D(2910)],I=function(_){var E=_.IptcMap.prototype;E.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},E.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},E.getText=function(g){var w=this.get(g),y=this.stringValues[this.map[g]];return y?y[w]:String(w)},E.getAll=function(){var w,M,g={};for(w in this)Object.prototype.hasOwnProperty.call(this,w)&&(M=this.tags[w])&&(g[M]=this.getText(M));return g},E.getName=function(g){return this.tags[g]},function(){var M,g=E.tags,w=E.map||{};for(M in g)Object.prototype.hasOwnProperty.call(g,M)&&(w[g[M]]=Number(M))}()},void 0!==(b=I.apply(ee,U))&&(se.exports=b)}()},2910:(se,ee,D)=>{var I,U,b;!function(_){"use strict";U=[D(1883),D(5684)],I=function(_){function E(){}function w(C,T,B,V,G){return"binary"===T.types[C]?new Blob([B.buffer.slice(V,V+G)]):"Uint16"===T.types[C]?B.getUint16(V):function g(C,T,B){for(var V="",G=T+B,ae=T;ae<G;ae+=1)V+=String.fromCharCode(C.getUint8(ae));return V}(B,V,G)}function M(C,T){return void 0===C?T:C instanceof Array?(C.push(T),C):[C,T]}function y(C,T,B,V,G,ae){for(var fe,k,O,Y=T+B,q=T;q<Y;)28===C.getUint8(q)&&2===C.getUint8(q+1)&&(O=C.getUint8(q+2),(!G||G[O])&&(!ae||!ae[O])&&(k=C.getInt16(q+3),fe=w(O,V.iptc,C,q+5,k),V.iptc[O]=M(V.iptc[O],fe),V.iptcOffsets&&(V.iptcOffsets[O]=q))),q+=1}function A(C,T){return 943868237===C.getUint32(T)&&1028===C.getUint16(T+4)}function R(C,T){var B=C.getUint8(T+7);return B%2!=0&&(B+=1),0===B&&(B=4),B}E.prototype.map={ObjectName:5},E.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},E.prototype.get=function(C){return this[C]||this[this.map[C]]},_.parseIptcData=function(C,T,B,V,G){if(!G.disableIptc)for(var ae=T+B;T+8<ae;){if(A(C,T)){var fe=R(C,T),k=T+8+fe;if(k>ae){console.log("Invalid IPTC data: Invalid segment offset.");break}var O=C.getUint16(T+6+fe);if(T+O>ae){console.log("Invalid IPTC data: Invalid segment size.");break}return V.iptc=new E,G.disableIptcOffsets||(V.iptcOffsets=new E),void y(C,k,O,V,G.includeIptcTags,G.excludeIptcTags||{202:!0})}T+=1}},_.metaDataParsers.jpeg[65517].push(_.parseIptcData),_.IptcMap=E},void 0!==(b=I.apply(ee,U))&&(se.exports=b)}()},5684:(se,ee,D)=>{var I,U,b;!function(_){"use strict";U=[D(1883)],I=function(_){var E="undefined"!=typeof Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);_.blobSlice=E&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_.metaDataParsers={jpeg:{65505:[],65517:[]}},_.parseMetaData=function(w,M,y,A){y=y||{},A=A||{};var R=this;(!("undefined"!=typeof DataView&&w&&w.size>=12&&"image/jpeg"===w.type&&_.blobSlice)||!_.readFile(_.blobSlice.call(w,0,y.maxMetaDataSize||262144),function(B){if(B.target.error)return console.log(B.target.error),void M(A);var O,Y,q,me,V=B.target.result,G=new DataView(V),ae=2,fe=G.byteLength-4,k=ae;if(65496===G.getUint16(0)){for(;ae<fe&&((O=G.getUint16(ae))>=65504&&O<=65519||65534===O);){if(ae+(Y=G.getUint16(ae+2)+2)>G.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if((q=_.metaDataParsers.jpeg[O])&&!y.disableMetaDataParsers)for(me=0;me<q.length;me+=1)q[me].call(R,G,ae,Y,A,y);k=ae+=Y}!y.disableImageHead&&k>6&&(A.imageHead=V.slice?V.slice(0,k):new Uint8Array(V).subarray(0,k))}else console.log("Invalid JPEG file: Missing JPEG marker.");M(A)},"readAsArrayBuffer"))&&M(A)},_.replaceHead=function(w,M,y){_.parseMetaData(w,function(A){y(new Blob([M,_.blobSlice.call(w,A.imageHead.byteLength)],{type:"image/jpeg"}))},{maxMetaDataSize:256,disableMetaDataParsers:!0})};var g=_.transform;_.transform=function(w,M,y,A,R){_.hasMetaOption(M)?_.parseMetaData(A,function(C){g.call(_,w,M,y,A,C)},M,R):g.apply(_,arguments)}},void 0!==(b=I.apply(ee,U))&&(se.exports=b)}()},4876:(se,ee,D)=>{var I,U,b;!function(_){"use strict";U=[D(1883),D(4114),D(5684)],I=function(_){var A,E=_.hasCanvasOption,g=_.hasMetaOption,w=_.transformCoordinates,M=_.getTransformedOptions;(A=document.createElement("img")).onload=function(){_.orientation=1===A.width&&2===A.height},A.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",_.hasCanvasOption=function(y){return!!y.orientation&&!_.orientation||y.orientation>1&&y.orientation<9||E.call(_,y)},_.hasMetaOption=function(y){return y&&!0===y.orientation&&!_.orientation||g.call(_,y)},_.transformCoordinates=function(y,A){w.call(_,y,A);var R=y.getContext("2d"),C=y.width,T=y.height,B=y.style.width,V=y.style.height,G=A.orientation;if(G>1&&G<9)switch(G>4&&(y.width=T,y.height=C,y.style.width=V,y.style.height=B),G){case 2:R.translate(C,0),R.scale(-1,1);break;case 3:R.translate(C,T),R.rotate(Math.PI);break;case 4:R.translate(0,T),R.scale(1,-1);break;case 5:R.rotate(.5*Math.PI),R.scale(1,-1);break;case 6:R.rotate(.5*Math.PI),R.translate(0,-T);break;case 7:R.rotate(.5*Math.PI),R.translate(C,-T),R.scale(-1,1);break;case 8:R.rotate(-.5*Math.PI),R.translate(-C,0)}},_.getTransformedOptions=function(y,A,R){var B,V,C=M.call(_,y,A),T=C.orientation;if(!0===T){if(_.orientation)return C;T=R&&R.exif&&R.exif.get("Orientation")}if(!(T>1&&T<9))return C;for(V in B={},C)Object.prototype.hasOwnProperty.call(C,V)&&(B[V]=C[V]);switch(B.orientation=T,T){case 2:B.left=C.right,B.right=C.left;break;case 3:B.left=C.right,B.top=C.bottom,B.right=C.left,B.bottom=C.top;break;case 4:B.top=C.bottom,B.bottom=C.top;break;case 5:B.left=C.top,B.top=C.left,B.right=C.bottom,B.bottom=C.right;break;case 6:B.left=C.top,B.top=C.right,B.right=C.bottom,B.bottom=C.left;break;case 7:B.left=C.bottom,B.top=C.right,B.right=C.top,B.bottom=C.left;break;case 8:B.left=C.bottom,B.top=C.left,B.right=C.top,B.bottom=C.right}return B.orientation>4&&(B.maxWidth=C.maxHeight,B.maxHeight=C.maxWidth,B.minWidth=C.minHeight,B.minHeight=C.minWidth,B.sourceWidth=C.sourceHeight,B.sourceHeight=C.sourceWidth),B}},void 0!==(b=I.apply(ee,U))&&(se.exports=b)}()},4114:(se,ee,D)=>{var I,U,b;!function(_){"use strict";U=[D(1883)],I=function(_){var E=_.transform;_.transform=function(g,w,M,y,A){E.call(_,_.scale(g,w,A),w,M,y,A)},_.transformCoordinates=function(){},_.getTransformedOptions=function(g,w){var y,A,R,C,M=w.aspectRatio;if(!M)return w;for(A in y={},w)Object.prototype.hasOwnProperty.call(w,A)&&(y[A]=w[A]);return y.crop=!0,(R=g.naturalWidth||g.width)/(C=g.naturalHeight||g.height)>M?(y.maxWidth=C*M,y.maxHeight=C):(y.maxWidth=R,y.maxHeight=R/M),y},_.renderImageToCanvas=function(g,w,M,y,A,R,C,T,B,V,G){var ae=g.getContext("2d");return!1===G.imageSmoothingEnabled?ae.imageSmoothingEnabled=!1:G.imageSmoothingQuality&&(ae.imageSmoothingQuality=G.imageSmoothingQuality),ae.drawImage(w,M,y,A,R,C,T,B,V),g},_.hasCanvasOption=function(g){return g.canvas||g.crop||!!g.aspectRatio},_.scale=function(g,w,M){w=w||{};var V,G,ae,fe,k,O,Y,q,me,re,ue,y=document.createElement("canvas"),A=g.getContext||_.hasCanvasOption(w)&&y.getContext,R=g.naturalWidth||g.width,C=g.naturalHeight||g.height,T=R,B=C;function ce(){var we=Math.max((ae||T)/T,(fe||B)/B);we>1&&(T*=we,B*=we)}function ye(){var we=Math.min((V||T)/T,(G||B)/B);we<1&&(T*=we,B*=we)}if(A&&(Y=(w=_.getTransformedOptions(g,w,M)).left||0,q=w.top||0,w.sourceWidth?(k=w.sourceWidth,void 0!==w.right&&void 0===w.left&&(Y=R-k-w.right)):k=R-Y-(w.right||0),w.sourceHeight?(O=w.sourceHeight,void 0!==w.bottom&&void 0===w.top&&(q=C-O-w.bottom)):O=C-q-(w.bottom||0),T=k,B=O),V=w.maxWidth,G=w.maxHeight,ae=w.minWidth,fe=w.minHeight,A&&V&&G&&w.crop?(T=V,B=G,(ue=k/O-V/G)<0?(O=G*k/V,void 0===w.top&&void 0===w.bottom&&(q=(C-O)/2)):ue>0&&(k=V*O/G,void 0===w.left&&void 0===w.right&&(Y=(R-k)/2))):((w.contain||w.cover)&&(ae=V=V||ae,fe=G=G||fe),w.cover?(ye(),ce()):(ce(),ye())),A){if((me=w.pixelRatio)>1&&(y.style.width=T+"px",y.style.height=B+"px",T*=me,B*=me,y.getContext("2d").scale(me,me)),(re=w.downsamplingRatio)>0&&re<1&&T<k&&B<O)for(;k*re>T;)y.width=k*re,y.height=O*re,_.renderImageToCanvas(y,g,Y,q,k,O,0,0,y.width,y.height,w),Y=0,q=0,k=y.width,O=y.height,(g=document.createElement("canvas")).width=k,g.height=O,_.renderImageToCanvas(g,y,0,0,k,O,0,0,k,O,w);return y.width=T,y.height=B,_.transformCoordinates(y,w),_.renderImageToCanvas(y,g,Y,q,k,O,0,0,T,B,w)}return g.width=T,g.height=B,g}},void 0!==(b=I.apply(ee,U))&&(se.exports=b)}()},1883:function(se,ee,D){var I;!function(U){"use strict";function b(g,w,M){var A,y=document.createElement("img");function R(C,T){T&&console.log(T),C&&b.isInstanceOf("Blob",C)?A=b.createObjectURL(g=C):(A=g,M&&M.crossOrigin&&(y.crossOrigin=M.crossOrigin)),y.src=A}return y.onerror=function(C){return b.onerror(y,C,g,A,w,M)},y.onload=function(C){return b.onload(y,C,g,A,w,M)},"string"==typeof g?(b.hasMetaOption(M)?b.fetchBlob(g,R,M):R(),y):b.isInstanceOf("Blob",g)||b.isInstanceOf("File",g)?(A=b.createObjectURL(g))?(y.src=A,y):b.readFile(g,function(C){var T=C.target;T&&T.result?y.src=T.result:w&&w(C)}):void 0}var _=U.createObjectURL&&U||U.URL&&URL.revokeObjectURL&&URL||U.webkitURL&&webkitURL;function E(g,w){g&&"blob:"===g.slice(0,5)&&(!w||!w.noRevoke)&&b.revokeObjectURL(g)}b.hasMetaOption=function(g){return g&&g.meta},b.fetchBlob=function(g,w){w()},b.isInstanceOf=function(g,w){return Object.prototype.toString.call(w)==="[object "+g+"]"},b.transform=function(g,w,M,y,A){M(g,A)},b.onerror=function(g,w,M,y,A,R){E(y,R),A&&A.call(g,w)},b.onload=function(g,w,M,y,A,R){E(y,R),A&&b.transform(g,R,A,M,{originalWidth:g.naturalWidth||g.width,originalHeight:g.naturalHeight||g.height})},b.createObjectURL=function(g){return!!_&&_.createObjectURL(g)},b.revokeObjectURL=function(g){return!!_&&_.revokeObjectURL(g)},b.readFile=function(g,w,M){if(U.FileReader){var y=new FileReader;if(y.onload=y.onerror=w,y[M=M||"readAsDataURL"])return y[M](g),y}return!1},void 0!==(I=function(){return b}.call(ee,D,ee,se))&&(se.exports=I)}("undefined"!=typeof window&&window||this)},4763:function(se){se.exports=function(){"use strict";function ee(oe,j){var H=Object.keys(oe);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(oe);j&&($=$.filter(function(he){return Object.getOwnPropertyDescriptor(oe,he).enumerable})),H.push.apply(H,$)}return H}function D(oe){for(var j=1;j<arguments.length;j++){var H=null!=arguments[j]?arguments[j]:{};j%2?ee(Object(H),!0).forEach(function($){E(oe,$,H[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(H)):ee(Object(H)).forEach(function($){Object.defineProperty(oe,$,Object.getOwnPropertyDescriptor(H,$))})}return oe}function I(oe){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(oe)}function U(oe,j){if(!(oe instanceof j))throw new TypeError("Cannot call a class as a function")}function b(oe,j){for(var H=0;H<j.length;H++){var $=j[H];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(oe,$.key,$)}}function E(oe,j,H){return j in oe?Object.defineProperty(oe,j,{value:H,enumerable:!0,configurable:!0,writable:!0}):oe[j]=H,oe}function g(oe){return function w(oe){if(Array.isArray(oe))return A(oe)}(oe)||function M(oe){if("undefined"!=typeof Symbol&&null!=oe[Symbol.iterator]||null!=oe["@@iterator"])return Array.from(oe)}(oe)||function y(oe,j){if(oe){if("string"==typeof oe)return A(oe,j);var H=Object.prototype.toString.call(oe).slice(8,-1);if("Object"===H&&oe.constructor&&(H=oe.constructor.name),"Map"===H||"Set"===H)return Array.from(oe);if("Arguments"===H||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H))return A(oe,j)}}(oe)||function R(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(oe,j){(null==j||j>oe.length)&&(j=oe.length);for(var H=0,$=new Array(j);H<j;H++)$[H]=oe[H];return $}var C="undefined"!=typeof window&&void 0!==window.document,T=C?window:{},B=!(!C||!T.document.documentElement)&&"ontouchstart"in T.document.documentElement,V=!!C&&"PointerEvent"in T,G="cropper",k="move",O="zoom",Y="e",q="w",re="n",ue="ne",ce="nw",ye="se",we="sw",tt="".concat(G,"-crop"),Ze="".concat(G,"-disabled"),je="".concat(G,"-hidden"),z="".concat(G,"-hide"),le="".concat(G,"-invisible"),ge="".concat(G,"-modal"),N="".concat(G,"-move"),v="".concat(G,"Action"),p="".concat(G,"Preview"),c="crop",f="move",S="none",P="crop",F="cropend",Z="cropmove",ie="cropstart",Q="dblclick",ve=V?"pointerdown":B?"touchstart":"mousedown",Le=V?"pointermove":B?"touchmove":"mousemove",Pe=V?"pointerup pointercancel":B?"touchend touchcancel":"mouseup",Be="zoom",ke="image/jpeg",Ae=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,$e=/^data:/,et=/^data:image\/jpeg;base64,/,Ge=/^img|canvas$/i,yt={viewMode:0,dragMode:c,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},qe=Number.isNaN||T.isNaN;function Ue(oe){return"number"==typeof oe&&!qe(oe)}var ze=function(j){return j>0&&j<1/0};function ht(oe){return void 0===oe}function dt(oe){return"object"===I(oe)&&null!==oe}var Ct=Object.prototype.hasOwnProperty;function pt(oe){if(!dt(oe))return!1;try{var j=oe.constructor,H=j.prototype;return j&&H&&Ct.call(H,"isPrototypeOf")}catch($){return!1}}function lt(oe){return"function"==typeof oe}var Gt=Array.prototype.slice;function rn(oe){return Array.from?Array.from(oe):Gt.call(oe)}function vt(oe,j){return oe&&lt(j)&&(Array.isArray(oe)||Ue(oe.length)?rn(oe).forEach(function(H,$){j.call(oe,H,$,oe)}):dt(oe)&&Object.keys(oe).forEach(function(H){j.call(oe,oe[H],H,oe)})),oe}var _t=Object.assign||function(j){for(var H=arguments.length,$=new Array(H>1?H-1:0),he=1;he<H;he++)$[he-1]=arguments[he];return dt(j)&&$.length>0&&$.forEach(function(de){dt(de)&&Object.keys(de).forEach(function(De){j[De]=de[De]})}),j},dn=/\.\d*(?:0|9){12}\d*$/;function xn(oe){var j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return dn.test(oe)?Math.round(oe*j)/j:oe}var Gn=/^width|height|left|top|marginLeft|marginTop$/;function X(oe,j){var H=oe.style;vt(j,function($,he){Gn.test(he)&&Ue($)&&($="".concat($,"px")),H[he]=$})}function Ee(oe,j){if(j){if(Ue(oe.length))return void vt(oe,function($){Ee($,j)});if(oe.classList)return void oe.classList.add(j);var H=oe.className.trim();H?H.indexOf(j)<0&&(oe.className="".concat(H," ").concat(j)):oe.className=j}}function Oe(oe,j){if(j){if(Ue(oe.length))return void vt(oe,function(H){Oe(H,j)});if(oe.classList)return void oe.classList.remove(j);oe.className.indexOf(j)>=0&&(oe.className=oe.className.replace(j,""))}}function Ke(oe,j,H){if(j){if(Ue(oe.length))return void vt(oe,function($){Ke($,j,H)});H?Ee(oe,j):Oe(oe,j)}}var it=/([a-z\d])([A-Z])/g;function Ot(oe){return oe.replace(it,"$1-$2").toLowerCase()}function jt(oe,j){return dt(oe[j])?oe[j]:oe.dataset?oe.dataset[j]:oe.getAttribute("data-".concat(Ot(j)))}function sn(oe,j,H){dt(H)?oe[j]=H:oe.dataset?oe.dataset[j]=H:oe.setAttribute("data-".concat(Ot(j)),H)}var vi=/\s\s*/,pn=function(){var oe=!1;if(C){var j=!1,H=function(){},$=Object.defineProperty({},"once",{get:function(){return oe=!0,j},set:function(de){j=de}});T.addEventListener("test",H,$),T.removeEventListener("test",H,$)}return oe}();function vn(oe,j,H){var $=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},he=H;j.trim().split(vi).forEach(function(de){if(!pn){var De=oe.listeners;De&&De[de]&&De[de][H]&&(he=De[de][H],delete De[de][H],0===Object.keys(De[de]).length&&delete De[de],0===Object.keys(De).length&&delete oe.listeners)}oe.removeEventListener(de,he,$)})}function en(oe,j,H){var $=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},he=H;j.trim().split(vi).forEach(function(de){if($.once&&!pn){var De=oe.listeners,Se=void 0===De?{}:De;he=function(){delete Se[de][H],oe.removeEventListener(de,he,$);for(var Re=arguments.length,Ie=new Array(Re),Fe=0;Fe<Re;Fe++)Ie[Fe]=arguments[Fe];H.apply(oe,Ie)},Se[de]||(Se[de]={}),Se[de][H]&&oe.removeEventListener(de,Se[de][H],$),Se[de][H]=he,oe.listeners=Se}oe.addEventListener(de,he,$)})}function an(oe,j,H){var $;return lt(Event)&&lt(CustomEvent)?$=new CustomEvent(j,{detail:H,bubbles:!0,cancelable:!0}):($=document.createEvent("CustomEvent")).initCustomEvent(j,!0,!0,H),oe.dispatchEvent($)}function Bn(oe){var j=oe.getBoundingClientRect();return{left:j.left+(window.pageXOffset-document.documentElement.clientLeft),top:j.top+(window.pageYOffset-document.documentElement.clientTop)}}var tn=T.location,mr=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function cn(oe){var j=oe.match(mr);return null!==j&&(j[1]!==tn.protocol||j[2]!==tn.hostname||j[3]!==tn.port)}function Ni(oe){var j="timestamp=".concat((new Date).getTime());return oe+(-1===oe.indexOf("?")?"?":"&")+j}function Lr(oe){var j=oe.rotate,H=oe.scaleX,$=oe.scaleY,he=oe.translateX,de=oe.translateY,De=[];Ue(he)&&0!==he&&De.push("translateX(".concat(he,"px)")),Ue(de)&&0!==de&&De.push("translateY(".concat(de,"px)")),Ue(j)&&0!==j&&De.push("rotate(".concat(j,"deg)")),Ue(H)&&1!==H&&De.push("scaleX(".concat(H,")")),Ue($)&&1!==$&&De.push("scaleY(".concat($,")"));var Se=De.length?De.join(" "):"none";return{WebkitTransform:Se,msTransform:Se,transform:Se}}function Qr(oe,j){var H=oe.pageX,$=oe.pageY,he={endX:H,endY:$};return j?he:D({startX:H,startY:$},he)}function Xn(oe){var j=oe.aspectRatio,H=oe.height,$=oe.width,he=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",de=ze($),De=ze(H);if(de&&De){var Se=H*j;"contain"===he&&Se>$||"cover"===he&&Se<$?H=$/j:$=H*j}else de?H=$/j:De&&($=H*j);return{width:$,height:H}}function Fo(oe,j,H,$){var he=j.aspectRatio,de=j.naturalWidth,De=j.naturalHeight,Se=j.rotate,Ye=void 0===Se?0:Se,Re=j.scaleX,Ie=void 0===Re?1:Re,Fe=j.scaleY,We=void 0===Fe?1:Fe,Ht=H.aspectRatio,Nt=H.naturalWidth,Vt=H.naturalHeight,qt=$.fillColor,Cn=void 0===qt?"transparent":qt,Un=$.imageSmoothingEnabled,Jt=void 0===Un||Un,wi=$.imageSmoothingQuality,vr=void 0===wi?"low":wi,Qe=$.maxWidth,Kt=void 0===Qe?1/0:Qe,Mn=$.maxHeight,Ar=void 0===Mn?1/0:Mn,Jr=$.minWidth,lo=void 0===Jr?0:Jr,Sn=$.minHeight,Lt=void 0===Sn?0:Sn,ei=document.createElement("canvas"),sr=ei.getContext("2d"),uo=Xn({aspectRatio:Ht,width:Kt,height:Ar}),It=Xn({aspectRatio:Ht,width:lo,height:Lt},"cover"),fu=Math.min(uo.width,Math.max(It.width,Nt)),Br=Math.min(uo.height,Math.max(It.height,Vt)),bs=Xn({aspectRatio:he,width:Kt,height:Ar}),Ra=Xn({aspectRatio:he,width:lo,height:Lt},"cover"),du=Math.min(bs.width,Math.max(Ra.width,de)),pu=Math.min(bs.height,Math.max(Ra.height,De)),gu=[-du/2,-pu/2,du,pu];return ei.width=xn(fu),ei.height=xn(Br),sr.fillStyle=Cn,sr.fillRect(0,0,fu,Br),sr.save(),sr.translate(fu/2,Br/2),sr.rotate(Ye*Math.PI/180),sr.scale(Ie,We),sr.imageSmoothingEnabled=Jt,sr.imageSmoothingQuality=vr,sr.drawImage.apply(sr,[oe].concat(g(gu.map(function(_s){return Math.floor(xn(_s))})))),sr.restore(),ei}var so=String.fromCharCode;var ao=/^data:.*,/;function hu(oe){var H,j=new DataView(oe);try{var $,he,de;if(255===j.getUint8(0)&&216===j.getUint8(1))for(var De=j.byteLength,Se=2;Se+1<De;){if(255===j.getUint8(Se)&&225===j.getUint8(Se+1)){he=Se;break}Se+=1}if(he){var Re=he+10;if("Exif"===function ys(oe,j,H){var $="";H+=j;for(var he=j;he<H;he+=1)$+=so(oe.getUint8(he));return $}(j,he+4,4)){var Ie=j.getUint16(Re);if((($=18761===Ie)||19789===Ie)&&42===j.getUint16(Re+2,$)){var Fe=j.getUint32(Re+4,$);Fe>=8&&(de=Re+Fe)}}}if(de){var Ht,Nt,We=j.getUint16(de,$);for(Nt=0;Nt<We;Nt+=1)if(274===j.getUint16(Ht=de+12*Nt+2,$)){H=j.getUint16(Ht+=8,$),j.setUint16(Ht,1,$);break}}}catch(Vt){H=1}return H}var Uh={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var j=this.element,H=this.options,$=this.container,he=this.cropper,de=Number(H.minContainerWidth),De=Number(H.minContainerHeight);Ee(he,je),Oe(j,je);var Se={width:Math.max($.offsetWidth,de>=0?de:200),height:Math.max($.offsetHeight,De>=0?De:100)};this.containerData=Se,X(he,{width:Se.width,height:Se.height}),Ee(j,je),Oe(he,je)},initCanvas:function(){var j=this.containerData,H=this.imageData,$=this.options.viewMode,he=Math.abs(H.rotate)%180==90,de=he?H.naturalHeight:H.naturalWidth,De=he?H.naturalWidth:H.naturalHeight,Se=de/De,Ye=j.width,Re=j.height;j.height*Se>j.width?3===$?Ye=j.height*Se:Re=j.width/Se:3===$?Re=j.width/Se:Ye=j.height*Se;var Ie={aspectRatio:Se,naturalWidth:de,naturalHeight:De,width:Ye,height:Re};this.canvasData=Ie,this.limited=1===$||2===$,this.limitCanvas(!0,!0),Ie.width=Math.min(Math.max(Ie.width,Ie.minWidth),Ie.maxWidth),Ie.height=Math.min(Math.max(Ie.height,Ie.minHeight),Ie.maxHeight),Ie.left=(j.width-Ie.width)/2,Ie.top=(j.height-Ie.height)/2,Ie.oldLeft=Ie.left,Ie.oldTop=Ie.top,this.initialCanvasData=_t({},Ie)},limitCanvas:function(j,H){var $=this.options,he=this.containerData,de=this.canvasData,De=this.cropBoxData,Se=$.viewMode,Ye=de.aspectRatio,Re=this.cropped&&De;if(j){var Ie=Number($.minCanvasWidth)||0,Fe=Number($.minCanvasHeight)||0;Se>1?(Ie=Math.max(Ie,he.width),Fe=Math.max(Fe,he.height),3===Se&&(Fe*Ye>Ie?Ie=Fe*Ye:Fe=Ie/Ye)):Se>0&&(Ie?Ie=Math.max(Ie,Re?De.width:0):Fe?Fe=Math.max(Fe,Re?De.height:0):Re&&((Fe=De.height)*Ye>(Ie=De.width)?Ie=Fe*Ye:Fe=Ie/Ye));var We=Xn({aspectRatio:Ye,width:Ie,height:Fe});Fe=We.height,de.minWidth=Ie=We.width,de.minHeight=Fe,de.maxWidth=1/0,de.maxHeight=1/0}if(H)if(Se>(Re?0:1)){var Ht=he.width-de.width,Nt=he.height-de.height;de.minLeft=Math.min(0,Ht),de.minTop=Math.min(0,Nt),de.maxLeft=Math.max(0,Ht),de.maxTop=Math.max(0,Nt),Re&&this.limited&&(de.minLeft=Math.min(De.left,De.left+(De.width-de.width)),de.minTop=Math.min(De.top,De.top+(De.height-de.height)),de.maxLeft=De.left,de.maxTop=De.top,2===Se&&(de.width>=he.width&&(de.minLeft=Math.min(0,Ht),de.maxLeft=Math.max(0,Ht)),de.height>=he.height&&(de.minTop=Math.min(0,Nt),de.maxTop=Math.max(0,Nt))))}else de.minLeft=-de.width,de.minTop=-de.height,de.maxLeft=he.width,de.maxTop=he.height},renderCanvas:function(j,H){var $=this.canvasData,he=this.imageData;if(H){var de=function ws(oe){var j=oe.width,H=oe.height,$=oe.degree;if(90==($=Math.abs($)%180))return{width:H,height:j};var he=$%90*Math.PI/180,de=Math.sin(he),De=Math.cos(he),Se=j*De+H*de,Ye=j*de+H*De;return $>90?{width:Ye,height:Se}:{width:Se,height:Ye}}({width:he.naturalWidth*Math.abs(he.scaleX||1),height:he.naturalHeight*Math.abs(he.scaleY||1),degree:he.rotate||0}),De=de.width,Se=de.height,Ye=$.width*(De/$.naturalWidth),Re=$.height*(Se/$.naturalHeight);$.left-=(Ye-$.width)/2,$.top-=(Re-$.height)/2,$.width=Ye,$.height=Re,$.aspectRatio=De/Se,$.naturalWidth=De,$.naturalHeight=Se,this.limitCanvas(!0,!1)}($.width>$.maxWidth||$.width<$.minWidth)&&($.left=$.oldLeft),($.height>$.maxHeight||$.height<$.minHeight)&&($.top=$.oldTop),$.width=Math.min(Math.max($.width,$.minWidth),$.maxWidth),$.height=Math.min(Math.max($.height,$.minHeight),$.maxHeight),this.limitCanvas(!1,!0),$.left=Math.min(Math.max($.left,$.minLeft),$.maxLeft),$.top=Math.min(Math.max($.top,$.minTop),$.maxTop),$.oldLeft=$.left,$.oldTop=$.top,X(this.canvas,_t({width:$.width,height:$.height},Lr({translateX:$.left,translateY:$.top}))),this.renderImage(j),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(j){var H=this.canvasData,$=this.imageData,he=$.naturalWidth*(H.width/H.naturalWidth),de=$.naturalHeight*(H.height/H.naturalHeight);_t($,{width:he,height:de,left:(H.width-he)/2,top:(H.height-de)/2}),X(this.image,_t({width:$.width,height:$.height},Lr(_t({translateX:$.left,translateY:$.top},$)))),j&&this.output()},initCropBox:function(){var j=this.options,H=this.canvasData,$=j.aspectRatio||j.initialAspectRatio,he=Number(j.autoCropArea)||.8,de={width:H.width,height:H.height};$&&(H.height*$>H.width?de.height=de.width/$:de.width=de.height*$),this.cropBoxData=de,this.limitCropBox(!0,!0),de.width=Math.min(Math.max(de.width,de.minWidth),de.maxWidth),de.height=Math.min(Math.max(de.height,de.minHeight),de.maxHeight),de.width=Math.max(de.minWidth,de.width*he),de.height=Math.max(de.minHeight,de.height*he),de.left=H.left+(H.width-de.width)/2,de.top=H.top+(H.height-de.height)/2,de.oldLeft=de.left,de.oldTop=de.top,this.initialCropBoxData=_t({},de)},limitCropBox:function(j,H){var $=this.options,he=this.containerData,de=this.canvasData,De=this.cropBoxData,Se=this.limited,Ye=$.aspectRatio;if(j){var Re=Number($.minCropBoxWidth)||0,Ie=Number($.minCropBoxHeight)||0,Fe=Se?Math.min(he.width,de.width,de.width+de.left,he.width-de.left):he.width,We=Se?Math.min(he.height,de.height,de.height+de.top,he.height-de.top):he.height;Re=Math.min(Re,he.width),Ie=Math.min(Ie,he.height),Ye&&(Re&&Ie?Ie*Ye>Re?Ie=Re/Ye:Re=Ie*Ye:Re?Ie=Re/Ye:Ie&&(Re=Ie*Ye),We*Ye>Fe?We=Fe/Ye:Fe=We*Ye),De.minWidth=Math.min(Re,Fe),De.minHeight=Math.min(Ie,We),De.maxWidth=Fe,De.maxHeight=We}H&&(Se?(De.minLeft=Math.max(0,de.left),De.minTop=Math.max(0,de.top),De.maxLeft=Math.min(he.width,de.left+de.width)-De.width,De.maxTop=Math.min(he.height,de.top+de.height)-De.height):(De.minLeft=0,De.minTop=0,De.maxLeft=he.width-De.width,De.maxTop=he.height-De.height))},renderCropBox:function(){var j=this.options,H=this.containerData,$=this.cropBoxData;($.width>$.maxWidth||$.width<$.minWidth)&&($.left=$.oldLeft),($.height>$.maxHeight||$.height<$.minHeight)&&($.top=$.oldTop),$.width=Math.min(Math.max($.width,$.minWidth),$.maxWidth),$.height=Math.min(Math.max($.height,$.minHeight),$.maxHeight),this.limitCropBox(!1,!0),$.left=Math.min(Math.max($.left,$.minLeft),$.maxLeft),$.top=Math.min(Math.max($.top,$.minTop),$.maxTop),$.oldLeft=$.left,$.oldTop=$.top,j.movable&&j.cropBoxMovable&&sn(this.face,v,$.width>=H.width&&$.height>=H.height?k:"all"),X(this.cropBox,_t({width:$.width,height:$.height},Lr({translateX:$.left,translateY:$.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),an(this.element,P,this.getData())}},Pn={initPreview:function(){var j=this.element,H=this.crossOrigin,$=this.options.preview,he=H?this.crossOriginUrl:this.url,de=j.alt||"The image to preview",De=document.createElement("img");if(H&&(De.crossOrigin=H),De.src=he,De.alt=de,this.viewBox.appendChild(De),this.viewBoxImage=De,$){var Se=$;"string"==typeof $?Se=j.ownerDocument.querySelectorAll($):$.querySelector&&(Se=[$]),this.previews=Se,vt(Se,function(Ye){var Re=document.createElement("img");sn(Ye,p,{width:Ye.offsetWidth,height:Ye.offsetHeight,html:Ye.innerHTML}),H&&(Re.crossOrigin=H),Re.src=he,Re.alt=de,Re.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',Ye.innerHTML="",Ye.appendChild(Re)})}},resetPreview:function(){vt(this.previews,function(j){var H=jt(j,p);X(j,{width:H.width,height:H.height}),j.innerHTML=H.html,function Rn(oe,j){if(dt(oe[j]))try{delete oe[j]}catch(H){oe[j]=void 0}else if(oe.dataset)try{delete oe.dataset[j]}catch(H){oe.dataset[j]=void 0}else oe.removeAttribute("data-".concat(Ot(j)))}(j,p)})},preview:function(){var j=this.imageData,H=this.canvasData,$=this.cropBoxData,he=$.width,de=$.height,De=j.width,Se=j.height,Ye=$.left-H.left-j.left,Re=$.top-H.top-j.top;!this.cropped||this.disabled||(X(this.viewBoxImage,_t({width:De,height:Se},Lr(_t({translateX:-Ye,translateY:-Re},j)))),vt(this.previews,function(Ie){var Fe=jt(Ie,p),We=Fe.width,Ht=Fe.height,Nt=We,Vt=Ht,qt=1;he&&(Vt=de*(qt=We/he)),de&&Vt>Ht&&(Nt=he*(qt=Ht/de),Vt=Ht),X(Ie,{width:Nt,height:Vt}),X(Ie.getElementsByTagName("img")[0],_t({width:De*qt,height:Se*qt},Lr(_t({translateX:-Ye*qt,translateY:-Re*qt},j))))}))}},jh={bind:function(){var j=this.element,H=this.options,$=this.cropper;lt(H.cropstart)&&en(j,ie,H.cropstart),lt(H.cropmove)&&en(j,Z,H.cropmove),lt(H.cropend)&&en(j,F,H.cropend),lt(H.crop)&&en(j,P,H.crop),lt(H.zoom)&&en(j,Be,H.zoom),en($,ve,this.onCropStart=this.cropStart.bind(this)),H.zoomable&&H.zoomOnWheel&&en($,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),H.toggleDragModeOnDblclick&&en($,Q,this.onDblclick=this.dblclick.bind(this)),en(j.ownerDocument,Le,this.onCropMove=this.cropMove.bind(this)),en(j.ownerDocument,Pe,this.onCropEnd=this.cropEnd.bind(this)),H.responsive&&en(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var j=this.element,H=this.options,$=this.cropper;lt(H.cropstart)&&vn(j,ie,H.cropstart),lt(H.cropmove)&&vn(j,Z,H.cropmove),lt(H.cropend)&&vn(j,F,H.cropend),lt(H.crop)&&vn(j,P,H.crop),lt(H.zoom)&&vn(j,Be,H.zoom),vn($,ve,this.onCropStart),H.zoomable&&H.zoomOnWheel&&vn($,"wheel",this.onWheel,{passive:!1,capture:!0}),H.toggleDragModeOnDblclick&&vn($,Q,this.onDblclick),vn(j.ownerDocument,Le,this.onCropMove),vn(j.ownerDocument,Pe,this.onCropEnd),H.responsive&&vn(window,"resize",this.onResize)}},Oo={resize:function(){if(!this.disabled){var Se,Ye,j=this.options,H=this.container,$=this.containerData,he=H.offsetWidth/$.width,de=H.offsetHeight/$.height,De=Math.abs(he-1)>Math.abs(de-1)?he:de;1!==De&&(j.restore&&(Se=this.getCanvasData(),Ye=this.getCropBoxData()),this.render(),j.restore&&(this.setCanvasData(vt(Se,function(Re,Ie){Se[Ie]=Re*De})),this.setCropBoxData(vt(Ye,function(Re,Ie){Ye[Ie]=Re*De}))))}},dblclick:function(){this.disabled||this.options.dragMode===S||this.setDragMode(function _e(oe,j){return oe.classList?oe.classList.contains(j):oe.className.indexOf(j)>-1}(this.dragBox,tt)?f:c)},wheel:function(j){var H=this,$=Number(this.options.wheelZoomRatio)||.1,he=1;this.disabled||(j.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){H.wheeling=!1},50),j.deltaY?he=j.deltaY>0?1:-1:j.wheelDelta?he=-j.wheelDelta/120:j.detail&&(he=j.detail>0?1:-1),this.zoom(-he*$,j)))},cropStart:function(j){var H=j.buttons,$=j.button;if(!(this.disabled||("mousedown"===j.type||"pointerdown"===j.type&&"mouse"===j.pointerType)&&(Ue(H)&&1!==H||Ue($)&&0!==$||j.ctrlKey))){var De,he=this.options,de=this.pointers;j.changedTouches?vt(j.changedTouches,function(Se){de[Se.identifier]=Qr(Se)}):de[j.pointerId||0]=Qr(j),De=Object.keys(de).length>1&&he.zoomable&&he.zoomOnTouch?O:jt(j.target,v),Ae.test(De)&&!1!==an(this.element,ie,{originalEvent:j,action:De})&&(j.preventDefault(),this.action=De,this.cropping=!1,"crop"===De&&(this.cropping=!0,Ee(this.dragBox,ge)))}},cropMove:function(j){var H=this.action;if(!this.disabled&&H){var $=this.pointers;j.preventDefault(),!1!==an(this.element,Z,{originalEvent:j,action:H})&&(j.changedTouches?vt(j.changedTouches,function(he){_t($[he.identifier]||{},Qr(he,!0))}):_t($[j.pointerId||0]||{},Qr(j,!0)),this.change(j))}},cropEnd:function(j){if(!this.disabled){var H=this.action,$=this.pointers;j.changedTouches?vt(j.changedTouches,function(he){delete $[he.identifier]}):delete $[j.pointerId||0],H&&(j.preventDefault(),Object.keys($).length||(this.action=""),this.cropping&&(this.cropping=!1,Ke(this.dragBox,ge,this.cropped&&this.options.modal)),an(this.element,F,{originalEvent:j,action:H}))}}},Vh={change:function(j){var wi,$=this.canvasData,he=this.containerData,de=this.cropBoxData,De=this.pointers,Se=this.action,Ye=this.options.aspectRatio,Re=de.left,Ie=de.top,Fe=de.width,We=de.height,Ht=Re+Fe,Nt=Ie+We,Vt=0,qt=0,Cn=he.width,Un=he.height,Jt=!0;!Ye&&j.shiftKey&&(Ye=Fe&&We?Fe/We:1),this.limited&&(qt=de.minTop,Cn=(Vt=de.minLeft)+Math.min(he.width,$.width,$.left+$.width),Un=qt+Math.min(he.height,$.height,$.top+$.height));var vr=De[Object.keys(De)[0]],Qe={x:vr.endX-vr.startX,y:vr.endY-vr.startY},Kt=function(Ar){switch(Ar){case Y:Ht+Qe.x>Cn&&(Qe.x=Cn-Ht);break;case q:Re+Qe.x<Vt&&(Qe.x=Vt-Re);break;case re:Ie+Qe.y<qt&&(Qe.y=qt-Ie);break;case"s":Nt+Qe.y>Un&&(Qe.y=Un-Nt)}};switch(Se){case"all":Re+=Qe.x,Ie+=Qe.y;break;case Y:if(Qe.x>=0&&(Ht>=Cn||Ye&&(Ie<=qt||Nt>=Un))){Jt=!1;break}Kt(Y),(Fe+=Qe.x)<0&&(Se=q,Re-=Fe=-Fe),Ye&&(Ie+=(de.height-(We=Fe/Ye))/2);break;case re:if(Qe.y<=0&&(Ie<=qt||Ye&&(Re<=Vt||Ht>=Cn))){Jt=!1;break}Kt(re),Ie+=Qe.y,(We-=Qe.y)<0&&(Se="s",Ie-=We=-We),Ye&&(Re+=(de.width-(Fe=We*Ye))/2);break;case q:if(Qe.x<=0&&(Re<=Vt||Ye&&(Ie<=qt||Nt>=Un))){Jt=!1;break}Kt(q),Re+=Qe.x,(Fe-=Qe.x)<0&&(Se=Y,Re-=Fe=-Fe),Ye&&(Ie+=(de.height-(We=Fe/Ye))/2);break;case"s":if(Qe.y>=0&&(Nt>=Un||Ye&&(Re<=Vt||Ht>=Cn))){Jt=!1;break}Kt("s"),(We+=Qe.y)<0&&(Se=re,Ie-=We=-We),Ye&&(Re+=(de.width-(Fe=We*Ye))/2);break;case ue:if(Ye){if(Qe.y<=0&&(Ie<=qt||Ht>=Cn)){Jt=!1;break}Kt(re),Ie+=Qe.y,Fe=(We-=Qe.y)*Ye}else Kt(re),Kt(Y),Qe.x>=0?Ht<Cn?Fe+=Qe.x:Qe.y<=0&&Ie<=qt&&(Jt=!1):Fe+=Qe.x,Qe.y<=0?Ie>qt&&(We-=Qe.y,Ie+=Qe.y):(We-=Qe.y,Ie+=Qe.y);Fe<0&&We<0?(Se=we,Ie-=We=-We,Re-=Fe=-Fe):Fe<0?(Se=ce,Re-=Fe=-Fe):We<0&&(Se=ye,Ie-=We=-We);break;case ce:if(Ye){if(Qe.y<=0&&(Ie<=qt||Re<=Vt)){Jt=!1;break}Kt(re),Ie+=Qe.y,Re+=de.width-(Fe=(We-=Qe.y)*Ye)}else Kt(re),Kt(q),Qe.x<=0?Re>Vt?(Fe-=Qe.x,Re+=Qe.x):Qe.y<=0&&Ie<=qt&&(Jt=!1):(Fe-=Qe.x,Re+=Qe.x),Qe.y<=0?Ie>qt&&(We-=Qe.y,Ie+=Qe.y):(We-=Qe.y,Ie+=Qe.y);Fe<0&&We<0?(Se=ye,Ie-=We=-We,Re-=Fe=-Fe):Fe<0?(Se=ue,Re-=Fe=-Fe):We<0&&(Se=we,Ie-=We=-We);break;case we:if(Ye){if(Qe.x<=0&&(Re<=Vt||Nt>=Un)){Jt=!1;break}Kt(q),Re+=Qe.x,We=(Fe-=Qe.x)/Ye}else Kt("s"),Kt(q),Qe.x<=0?Re>Vt?(Fe-=Qe.x,Re+=Qe.x):Qe.y>=0&&Nt>=Un&&(Jt=!1):(Fe-=Qe.x,Re+=Qe.x),Qe.y>=0?Nt<Un&&(We+=Qe.y):We+=Qe.y;Fe<0&&We<0?(Se=ue,Ie-=We=-We,Re-=Fe=-Fe):Fe<0?(Se=ye,Re-=Fe=-Fe):We<0&&(Se=ce,Ie-=We=-We);break;case ye:if(Ye){if(Qe.x>=0&&(Ht>=Cn||Nt>=Un)){Jt=!1;break}Kt(Y),We=(Fe+=Qe.x)/Ye}else Kt("s"),Kt(Y),Qe.x>=0?Ht<Cn?Fe+=Qe.x:Qe.y>=0&&Nt>=Un&&(Jt=!1):Fe+=Qe.x,Qe.y>=0?Nt<Un&&(We+=Qe.y):We+=Qe.y;Fe<0&&We<0?(Se=ce,Ie-=We=-We,Re-=Fe=-Fe):Fe<0?(Se=we,Re-=Fe=-Fe):We<0&&(Se=ue,Ie-=We=-We);break;case k:this.move(Qe.x,Qe.y),Jt=!1;break;case O:this.zoom(function oo(oe){var j=D({},oe),H=0;return vt(oe,function($,he){delete j[he],vt(j,function(de){var De=Math.abs($.startX-de.startX),Se=Math.abs($.startY-de.startY),Ye=Math.abs($.endX-de.endX),Re=Math.abs($.endY-de.endY),Ie=Math.sqrt(De*De+Se*Se),We=(Math.sqrt(Ye*Ye+Re*Re)-Ie)/Ie;Math.abs(We)>Math.abs(H)&&(H=We)})}),H}(De),j),Jt=!1;break;case"crop":if(!Qe.x||!Qe.y){Jt=!1;break}wi=Bn(this.cropper),Re=vr.startX-wi.left,Ie=vr.startY-wi.top,Fe=de.minWidth,We=de.minHeight,Qe.x>0?Se=Qe.y>0?ye:ue:Qe.x<0&&(Re-=Fe,Se=Qe.y>0?we:ce),Qe.y<0&&(Ie-=We),this.cropped||(Oe(this.cropBox,je),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}Jt&&(de.width=Fe,de.height=We,de.left=Re,de.top=Ie,this.action=Se,this.renderCropBox()),vt(De,function(Mn){Mn.startX=Mn.endX,Mn.startY=Mn.endY})}},Ta={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Ee(this.dragBox,ge),Oe(this.cropBox,je),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=_t({},this.initialImageData),this.canvasData=_t({},this.initialCanvasData),this.cropBoxData=_t({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(_t(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Oe(this.dragBox,ge),Ee(this.cropBox,je)),this},replace:function(j){var H=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&j&&(this.isImg&&(this.element.src=j),H?(this.url=j,this.image.src=j,this.ready&&(this.viewBoxImage.src=j,vt(this.previews,function($){$.getElementsByTagName("img")[0].src=j}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(j))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Oe(this.cropper,Ze)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Ee(this.cropper,Ze)),this},destroy:function(){var j=this.element;return j[G]?(j[G]=void 0,this.isImg&&this.replaced&&(j.src=this.originalUrl),this.uncreate(),this):this},move:function(j){var H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,$=this.canvasData,he=$.left,de=$.top;return this.moveTo(ht(j)?j:he+Number(j),ht(H)?H:de+Number(H))},moveTo:function(j){var H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,$=this.canvasData,he=!1;return j=Number(j),H=Number(H),this.ready&&!this.disabled&&this.options.movable&&(Ue(j)&&($.left=j,he=!0),Ue(H)&&($.top=H,he=!0),he&&this.renderCanvas(!0)),this},zoom:function(j,H){var $=this.canvasData;return j=Number(j),this.zoomTo($.width*(j=j<0?1/(1-j):1+j)/$.naturalWidth,null,H)},zoomTo:function(j,H,$){var he=this.options,de=this.canvasData,De=de.width,Se=de.height,Ye=de.naturalWidth,Re=de.naturalHeight;if((j=Number(j))>=0&&this.ready&&!this.disabled&&he.zoomable){var Ie=Ye*j,Fe=Re*j;if(!1===an(this.element,Be,{ratio:j,oldRatio:De/Ye,originalEvent:$}))return this;if($){var We=this.pointers,Ht=Bn(this.cropper),Nt=We&&Object.keys(We).length?function vs(oe){var j=0,H=0,$=0;return vt(oe,function(he){j+=he.startX,H+=he.startY,$+=1}),{pageX:j/=$,pageY:H/=$}}(We):{pageX:$.pageX,pageY:$.pageY};de.left-=(Nt.pageX-Ht.left-de.left)/De*(Ie-De),de.top-=(Nt.pageY-Ht.top-de.top)/Se*(Fe-Se)}else pt(H)&&Ue(H.x)&&Ue(H.y)?(de.left-=(H.x-de.left)/De*(Ie-De),de.top-=(H.y-de.top)/Se*(Fe-Se)):(de.left-=(Ie-De)/2,de.top-=(Fe-Se)/2);de.width=Ie,de.height=Fe,this.renderCanvas(!0)}return this},rotate:function(j){return this.rotateTo((this.imageData.rotate||0)+Number(j))},rotateTo:function(j){return Ue(j=Number(j))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=j%360,this.renderCanvas(!0,!0)),this},scaleX:function(j){var H=this.imageData.scaleY;return this.scale(j,Ue(H)?H:1)},scaleY:function(j){var H=this.imageData.scaleX;return this.scale(Ue(H)?H:1,j)},scale:function(j){var H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,$=this.imageData,he=!1;return j=Number(j),H=Number(H),this.ready&&!this.disabled&&this.options.scalable&&(Ue(j)&&($.scaleX=j,he=!0),Ue(H)&&($.scaleY=H,he=!0),he&&this.renderCanvas(!0,!0)),this},getData:function(){var De,j=arguments.length>0&&void 0!==arguments[0]&&arguments[0],H=this.options,$=this.imageData,he=this.canvasData,de=this.cropBoxData;if(this.ready&&this.cropped){var Se=$.width/$.naturalWidth;if(vt(De={x:de.left-he.left,y:de.top-he.top,width:de.width,height:de.height},function(Ie,Fe){De[Fe]=Ie/Se}),j){var Ye=Math.round(De.y+De.height),Re=Math.round(De.x+De.width);De.x=Math.round(De.x),De.y=Math.round(De.y),De.width=Re-De.x,De.height=Ye-De.y}}else De={x:0,y:0,width:0,height:0};return H.rotatable&&(De.rotate=$.rotate||0),H.scalable&&(De.scaleX=$.scaleX||1,De.scaleY=$.scaleY||1),De},setData:function(j){var H=this.options,$=this.imageData,he=this.canvasData,de={};if(this.ready&&!this.disabled&&pt(j)){var De=!1;H.rotatable&&Ue(j.rotate)&&j.rotate!==$.rotate&&($.rotate=j.rotate,De=!0),H.scalable&&(Ue(j.scaleX)&&j.scaleX!==$.scaleX&&($.scaleX=j.scaleX,De=!0),Ue(j.scaleY)&&j.scaleY!==$.scaleY&&($.scaleY=j.scaleY,De=!0)),De&&this.renderCanvas(!0,!0);var Se=$.width/$.naturalWidth;Ue(j.x)&&(de.left=j.x*Se+he.left),Ue(j.y)&&(de.top=j.y*Se+he.top),Ue(j.width)&&(de.width=j.width*Se),Ue(j.height)&&(de.height=j.height*Se),this.setCropBoxData(de)}return this},getContainerData:function(){return this.ready?_t({},this.containerData):{}},getImageData:function(){return this.sized?_t({},this.imageData):{}},getCanvasData:function(){var j=this.canvasData,H={};return this.ready&&vt(["left","top","width","height","naturalWidth","naturalHeight"],function($){H[$]=j[$]}),H},setCanvasData:function(j){var H=this.canvasData,$=H.aspectRatio;return this.ready&&!this.disabled&&pt(j)&&(Ue(j.left)&&(H.left=j.left),Ue(j.top)&&(H.top=j.top),Ue(j.width)?(H.width=j.width,H.height=j.width/$):Ue(j.height)&&(H.height=j.height,H.width=j.height*$),this.renderCanvas(!0)),this},getCropBoxData:function(){var H,j=this.cropBoxData;return this.ready&&this.cropped&&(H={left:j.left,top:j.top,width:j.width,height:j.height}),H||{}},setCropBoxData:function(j){var he,de,H=this.cropBoxData,$=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&pt(j)&&(Ue(j.left)&&(H.left=j.left),Ue(j.top)&&(H.top=j.top),Ue(j.width)&&j.width!==H.width&&(he=!0,H.width=j.width),Ue(j.height)&&j.height!==H.height&&(de=!0,H.height=j.height),$&&(he?H.height=H.width/$:de&&(H.width=H.height*$)),this.renderCropBox()),this},getCroppedCanvas:function(){var j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var H=this.canvasData,$=Fo(this.image,this.imageData,H,j);if(!this.cropped)return $;var he=this.getData(),de=he.x,De=he.y,Se=he.width,Ye=he.height,Re=$.width/Math.floor(H.naturalWidth);1!==Re&&(de*=Re,De*=Re,Se*=Re,Ye*=Re);var Ie=Se/Ye,Fe=Xn({aspectRatio:Ie,width:j.maxWidth||1/0,height:j.maxHeight||1/0}),We=Xn({aspectRatio:Ie,width:j.minWidth||0,height:j.minHeight||0},"cover"),Ht=Xn({aspectRatio:Ie,width:j.width||(1!==Re?$.width:Se),height:j.height||(1!==Re?$.height:Ye)}),Nt=Ht.width,Vt=Ht.height;Nt=Math.min(Fe.width,Math.max(We.width,Nt)),Vt=Math.min(Fe.height,Math.max(We.height,Vt));var qt=document.createElement("canvas"),Cn=qt.getContext("2d");qt.width=xn(Nt),qt.height=xn(Vt),Cn.fillStyle=j.fillColor||"transparent",Cn.fillRect(0,0,Nt,Vt);var Un=j.imageSmoothingEnabled,wi=j.imageSmoothingQuality;Cn.imageSmoothingEnabled=void 0===Un||Un,wi&&(Cn.imageSmoothingQuality=wi);var Ar,Jr,lo,Sn,Lt,ei,vr=$.width,Qe=$.height,Kt=de,Mn=De;Kt<=-Se||Kt>vr?(Kt=0,Ar=0,lo=0,Lt=0):Kt<=0?(lo=-Kt,Kt=0,Lt=Ar=Math.min(vr,Se+Kt)):Kt<=vr&&(lo=0,Lt=Ar=Math.min(Se,vr-Kt)),Ar<=0||Mn<=-Ye||Mn>Qe?(Mn=0,Jr=0,Sn=0,ei=0):Mn<=0?(Sn=-Mn,Mn=0,ei=Jr=Math.min(Qe,Ye+Mn)):Mn<=Qe&&(Sn=0,ei=Jr=Math.min(Ye,Qe-Mn));var sr=[Kt,Mn,Ar,Jr];if(Lt>0&&ei>0){var uo=Nt/Se;sr.push(lo*uo,Sn*uo,Lt*uo,ei*uo)}return Cn.drawImage.apply(Cn,[$].concat(g(sr.map(function(It){return Math.floor(xn(It))})))),qt},setAspectRatio:function(j){var H=this.options;return!this.disabled&&!ht(j)&&(H.aspectRatio=Math.max(0,j)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(j){var H=this.options,$=this.dragBox,he=this.face;if(this.ready&&!this.disabled){var de=j===c,De=H.movable&&j===f;H.dragMode=j=de||De?j:S,sn($,v,j),Ke($,tt,de),Ke($,N,De),H.cropBoxMovable||(sn(he,v,j),Ke(he,tt,de),Ke(he,N,De))}return this}},nn=T.Cropper,xs=function(){function oe(j){var H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(U(this,oe),!j||!Ge.test(j.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=j,this.options=_t({},yt,pt(H)&&H),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return function _(oe,j,H){return j&&b(oe.prototype,j),H&&b(oe,H),oe}(oe,[{key:"init",value:function(){var he,H=this.element,$=H.tagName.toLowerCase();if(!H[G]){if(H[G]=this,"img"===$){if(this.isImg=!0,he=H.getAttribute("src")||"",this.originalUrl=he,!he)return;he=H.src}else"canvas"===$&&window.HTMLCanvasElement&&(he=H.toDataURL());this.load(he)}}},{key:"load",value:function(H){var $=this;if(H){this.url=H,this.imageData={};var he=this.element,de=this.options;if(!de.rotatable&&!de.scalable&&(de.checkOrientation=!1),!de.checkOrientation||!window.ArrayBuffer)return void this.clone();if($e.test(H))return void(et.test(H)?this.read(function Nh(oe){var j=oe.replace(ao,""),H=atob(j),$=new ArrayBuffer(H.length),he=new Uint8Array($);return vt(he,function(de,De){he[De]=H.charCodeAt(De)}),$}(H)):this.clone());var De=new XMLHttpRequest,Se=this.clone.bind(this);this.reloading=!0,this.xhr=De,De.onabort=Se,De.onerror=Se,De.ontimeout=Se,De.onprogress=function(){De.getResponseHeader("content-type")!==ke&&De.abort()},De.onload=function(){$.read(De.response)},De.onloadend=function(){$.reloading=!1,$.xhr=null},de.checkCrossOrigin&&cn(H)&&he.crossOrigin&&(H=Ni(H)),De.open("GET",H,!0),De.responseType="arraybuffer",De.withCredentials="use-credentials"===he.crossOrigin,De.send()}}},{key:"read",value:function(H){var $=this.options,he=this.imageData,de=hu(H),De=0,Se=1,Ye=1;if(de>1){this.url=function Lh(oe,j){for(var H=[],he=new Uint8Array(oe);he.length>0;)H.push(so.apply(null,rn(he.subarray(0,8192)))),he=he.subarray(8192);return"data:".concat(j,";base64,").concat(btoa(H.join("")))}(H,ke);var Re=function Bh(oe){var j=0,H=1,$=1;switch(oe){case 2:H=-1;break;case 3:j=-180;break;case 4:$=-1;break;case 5:j=90,$=-1;break;case 6:j=90;break;case 7:j=90,H=-1;break;case 8:j=-90}return{rotate:j,scaleX:H,scaleY:$}}(de);De=Re.rotate,Se=Re.scaleX,Ye=Re.scaleY}$.rotatable&&(he.rotate=De),$.scalable&&(he.scaleX=Se,he.scaleY=Ye),this.clone()}},{key:"clone",value:function(){var H=this.element,$=this.url,he=H.crossOrigin,de=$;this.options.checkCrossOrigin&&cn($)&&(he||(he="anonymous"),de=Ni($)),this.crossOrigin=he,this.crossOriginUrl=de;var De=document.createElement("img");he&&(De.crossOrigin=he),De.src=de||$,De.alt=H.alt||"The image to crop",this.image=De,De.onload=this.start.bind(this),De.onerror=this.stop.bind(this),Ee(De,z),H.parentNode.insertBefore(De,H.nextSibling)}},{key:"start",value:function(){var H=this,$=this.image;$.onload=null,$.onerror=null,this.sizing=!0;var he=T.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(T.navigator.userAgent),de=function(Re,Ie){_t(H.imageData,{naturalWidth:Re,naturalHeight:Ie,aspectRatio:Re/Ie}),H.initialImageData=_t({},H.imageData),H.sizing=!1,H.sized=!0,H.build()};if(!$.naturalWidth||he){var De=document.createElement("img"),Se=document.body||document.documentElement;this.sizingImage=De,De.onload=function(){de(De.width,De.height),he||Se.removeChild(De)},De.src=$.src,he||(De.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",Se.appendChild(De))}else de($.naturalWidth,$.naturalHeight)}},{key:"stop",value:function(){var H=this.image;H.onload=null,H.onerror=null,H.parentNode.removeChild(H),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var H=this.element,$=this.options,he=this.image,de=H.parentNode,De=document.createElement("div");De.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var Se=De.querySelector(".".concat(G,"-container")),Ye=Se.querySelector(".".concat(G,"-canvas")),Re=Se.querySelector(".".concat(G,"-drag-box")),Ie=Se.querySelector(".".concat(G,"-crop-box")),Fe=Ie.querySelector(".".concat(G,"-face"));this.container=de,this.cropper=Se,this.canvas=Ye,this.dragBox=Re,this.cropBox=Ie,this.viewBox=Se.querySelector(".".concat(G,"-view-box")),this.face=Fe,Ye.appendChild(he),Ee(H,je),de.insertBefore(Se,H.nextSibling),this.isImg||Oe(he,z),this.initPreview(),this.bind(),$.initialAspectRatio=Math.max(0,$.initialAspectRatio)||NaN,$.aspectRatio=Math.max(0,$.aspectRatio)||NaN,$.viewMode=Math.max(0,Math.min(3,Math.round($.viewMode)))||0,Ee(Ie,je),$.guides||Ee(Ie.getElementsByClassName("".concat(G,"-dashed")),je),$.center||Ee(Ie.getElementsByClassName("".concat(G,"-center")),je),$.background&&Ee(Se,"".concat(G,"-bg")),$.highlight||Ee(Fe,le),$.cropBoxMovable&&(Ee(Fe,N),sn(Fe,v,"all")),$.cropBoxResizable||(Ee(Ie.getElementsByClassName("".concat(G,"-line")),je),Ee(Ie.getElementsByClassName("".concat(G,"-point")),je)),this.render(),this.ready=!0,this.setDragMode($.dragMode),$.autoCrop&&this.crop(),this.setData($.data),lt($.ready)&&en(H,"ready",$.ready,{once:!0}),an(H,"ready")}}},{key:"unbuild",value:function(){!this.ready||(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),Oe(this.element,je))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=nn,oe}},{key:"setDefaults",value:function(H){_t(yt,pt(H)&&H)}}]),oe}();return _t(xs.prototype,Uh,Pn,jh,Oo,Vh,Ta),xs}()},6313:se=>{"use strict";se.exports={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}}},5185:(se,ee,D)=>{"use strict";const I=D(9373),U=D(6313),b=[];for(var _=0;_<=8;_++)b.push(255<<_);se.exports=function(y){if(1!==y.bitDepth)throw new Error("Only bitDepth of 1 is supported");if(!y.height||!y.width)throw new Error("ImageData width and height are required");if(1!==y.components)throw new Error("Only 1 component is supported");if(1!==y.channels)throw new Error("Only 1 channel is supported");var A=new I;A.skip(14),function M(y,A){y.writeUint32(124).writeInt32(A.width).writeInt32(A.height).writeUint16(1).writeUint16(A.bitDepth).writeUint32(U.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(A.width*A.height*A.bitDepth).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,A.bitDepth)).writeUint32(Math.pow(2,A.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(U.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(U.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}(A,y),function g(y,A){A.bitDepth>8||y.writeUint32(0).writeUint32(16777215)}(A,y);const R=A.offset;return function E(y,A){const R=4*Math.floor((A.bitDepth*A.width+31)/32),C=Math.ceil(A.bitDepth*A.width/8),T=R-C,B=A.bitDepth*A.width%8,V=0===B?0:8-B,G=R*A.height;var ae,fe;const k=new I(A.data);let O=0,Y=0,q=8;y.mark(),fe=k.readUint8();for(var me=A.height-1;me>=0;me--){const ue=0===me;y.reset(),y.skip(me*R);for(var re=0;re<C;re++){const ce=re===C-1;Y<=V&&ce?(y.writeByte(fe<<Y),(0===V||V===Y)&&!ue&&(ae=fe,fe=k.readByte())):0===Y?(ae=fe,fe=k.readUint8(),y.writeByte(ae)):(ae=fe,fe=k.readUint8(),y.writeByte(ae<<Y&b[Y]|fe>>q)),ce?(O+=B||8,y.skip(T),Y=O%8,q=8-Y):O+=8}}R>C&&(y.reset(),y.skip(G-1),y.writeUint8(0))}(A,y),A.rewind(),function w(y,A){y.writeChars("BM"),y.writeInt32(y._lastWrittenByte),y.writeUint16(0),y.writeUint16(0),y.writeUint32(A)}(A,R),A.getBuffer()}},5247:(se,ee,D)=>{"use strict";ee.encode=D(5185)},3362:se=>{"use strict";const D=[];se.exports=class I{constructor(b,_){_=_||{},void 0===b&&(b=8192),"number"==typeof b&&(b=new ArrayBuffer(b));let E=b.byteLength;const g=_.offset?_.offset>>>0:0;b.buffer&&(E=b.byteLength-g,b=b.byteLength!==b.buffer.byteLength?b.buffer.slice(b.byteOffset+g,b.byteOffset+b.byteLength):g?b.buffer.slice(g):b.buffer),this.buffer=b,this.length=E,this.byteLength=E,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=E||8192,this._mark=0}available(b){return void 0===b&&(b=1),this.offset+b<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(b){void 0===b&&(b=1),this.offset+=b}seek(b){this.offset=b}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(b){if(void 0===b&&(b=1),!this.available(b)){const _=this._increment+this._increment;this._increment=_;const E=this.length+_,g=new Uint8Array(E);g.set(new Uint8Array(this.buffer)),this.buffer=g.buffer,this.length=E,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(b){void 0===b&&(b=1);for(var _=new Uint8Array(b),E=0;E<b;E++)_[E]=this.readByte();return _}readInt16(){var b=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,b}readUint16(){var b=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,b}readInt32(){var b=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,b}readUint32(){var b=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,b}readFloat32(){var b=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,b}readFloat64(){var b=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,b}readChar(){return String.fromCharCode(this.readInt8())}readChars(b){void 0===b&&(b=1),D.length=b;for(var _=0;_<b;_++)D[_]=this.readChar();return D.join("")}writeBoolean(b){this.writeUint8(b?255:0)}writeInt8(b){this.ensureAvailable(1),this._data.setInt8(this.offset++,b)}writeUint8(b){this.ensureAvailable(1),this._data.setUint8(this.offset++,b)}writeByte(b){this.writeUint8(b)}writeBytes(b){this.ensureAvailable(b.length);for(var _=0;_<b.length;_++)this._data.setUint8(this.offset++,b[_])}writeInt16(b){this.ensureAvailable(2),this._data.setInt16(this.offset,b,this.littleEndian),this.offset+=2}writeUint16(b){this.ensureAvailable(2),this._data.setUint16(this.offset,b,this.littleEndian),this.offset+=2}writeInt32(b){this.ensureAvailable(4),this._data.setInt32(this.offset,b,this.littleEndian),this.offset+=4}writeUint32(b){this.ensureAvailable(4),this._data.setUint32(this.offset,b,this.littleEndian),this.offset+=4}writeFloat32(b){this.ensureAvailable(4),this._data.setFloat32(this.offset,b,this.littleEndian),this.offset+=4}writeFloat64(b){this.ensureAvailable(8),this._data.setFloat64(this.offset,b,this.littleEndian),this.offset+=8}writeChar(b){this.writeUint8(b.charCodeAt(0))}writeChars(b){for(var _=0;_<b.length;_++)this.writeUint8(b.charCodeAt(_))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}},8793:(se,ee,D)=>{"use strict";const I=D(2858);se.exports=function(b,_){return new I(b,_).decode(_)}},2816:(se,ee,D)=>{"use strict";const I={standard:D(516),exif:D(2302),gps:D(1928)};se.exports=class U{constructor(_){if(!_)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=_,this._map=null}get(_){if("number"==typeof _)return this.fields.get(_);if("string"==typeof _)return this.fields.get(I[this.kind].tagsByName[_]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};const E=I[this.kind].tagsById;for(var _ of this.fields.keys())E[_]&&(this._map[E[_]]=this.fields.get(_))}return this._map}}},3493:(se,ee)=>{"use strict";var D=new Map([[1,[1,I]],[2,[1,function U(C,T){for(var B=[],V="",G=0;G<T;G++){var ae=String.fromCharCode(C.readUint8());"\0"===ae?(B.push(V),V=""):V+=ae}return 1===B.length?B[0]:B}]],[3,[2,function b(C,T){if(1===T)return C.readUint16();for(var B=new Uint16Array(T),V=0;V<T;V++)B[V]=C.readUint16();return B}]],[4,[4,function _(C,T){if(1===T)return C.readUint32();for(var B=new Uint32Array(T),V=0;V<T;V++)B[V]=C.readUint32();return B}]],[5,[8,function E(C,T){if(1===T)return C.readUint32()/C.readUint32();for(var B=new Array(T),V=0;V<T;V++)B[V]=C.readUint32()/C.readUint32();return B}]],[6,[1,function g(C,T){if(1===T)return C.readInt8();for(var B=new Int8Array(T),V=0;V<T;V++)B[V]=C.readInt8();return B}]],[7,[1,I]],[8,[2,function w(C,T){if(1===T)return C.readInt16();for(var B=new Int16Array(T),V=0;V<T;V++)B[V]=C.readInt16();return B}]],[9,[4,function M(C,T){if(1===T)return C.readInt32();for(var B=new Int32Array(T),V=0;V<T;V++)B[V]=C.readInt32();return B}]],[10,[8,function y(C,T){if(1===T)return C.readInt32()/C.readInt32();for(var B=new Array(T),V=0;V<T;V++)B[V]=C.readInt32()/C.readInt32();return B}]],[11,[4,function A(C,T){if(1===T)return C.readFloat32();for(var B=new Float32Array(T),V=0;V<T;V++)B[V]=C.readFloat32();return B}]],[12,[8,function R(C,T){if(1===T)return C.readFloat64();for(var B=new Float64Array(T),V=0;V<T;V++)B[V]=C.readFloat64();return B}]]]);function I(C,T){if(1===T)return C.readUint8();for(var B=new Uint8Array(T),V=0;V<T;V++)B[V]=C.readUint8();return B}ee.getByteLength=function(C,T){return D.get(C)[0]*T},ee.readData=function(C,T,B){return D.get(T)[1](C,B)}},6156:(se,ee,D)=>{"use strict";ee.decode=D(8793)},2302:se=>{"use strict";const ee={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},D={};for(var I in ee)D[ee[I]]=I;se.exports={tagsById:ee,tagsByName:D}},1928:se=>{"use strict";const ee={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},D={};for(var I in ee)D[ee[I]]=I;se.exports={tagsById:ee,tagsByName:D}},516:se=>{"use strict";const ee={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},D={};for(var I in ee)D[ee[I]]=I;se.exports={tagsById:ee,tagsByName:D}},2858:(se,ee,D)=>{"use strict";const I=D(3362),U=D(2816),b=D(9339),_=D(3493),E={ignoreImageData:!1,onlyFirst:!1};function M(T,B,V,G){for(var ae=0;ae<G;ae++)T[V++]=B.getUint8(ae);return V}function y(T,B,V,G,ae){for(var fe=0;fe<2*G;fe+=2)T[V++]=B.getUint16(fe,ae);return V}function A(T,B,V,G,ae){for(var fe=0;fe<4*G;fe+=4)T[V++]=B.getFloat32(fe,ae);return V}function R(T,B){throw new Error("Unsupported "+T+": "+B)}se.exports=class g extends I{constructor(B,V){super(B,V),this._nextIFD=0}decode(B){B=Object.assign({},E,B);const V=[];for(this.decodeHeader();this._nextIFD;)if(V.push(this.decodeIFD(B)),B.onlyFirst)return V[0];return V}decodeHeader(){let B=this.readUint16();if(18761===B)this.setLittleEndian();else{if(19789!==B)throw new Error("invalid byte order: 0x"+B.toString(16));this.setBigEndian()}if(B=this.readUint16(),42!==B)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(B){var V;this.seek(this._nextIFD),V=B.kind?new U(B.kind):new b;const G=this.readUint16();for(var ae=0;ae<G;ae++)this.decodeIFDEntry(V);return B.ignoreImageData||this.decodeImageData(V),this._nextIFD=this.readUint32(),V}decodeIFDEntry(B){const V=this.offset,G=this.readUint16(),ae=this.readUint16(),fe=this.readUint32();if(ae<1||ae>12)return void this.skip(4);_.getByteLength(ae,fe)>4&&this.seek(this.readUint32());const O=_.readData(this,ae,fe);if(B.fields.set(G,O),34665===G||34853===G){let q,Y=this.offset;34665===G?q="exif":34853===G&&(q="gps"),this._nextIFD=O,B[q]=this.decodeIFD({kind:q,ignoreImageData:!0}),this.offset=Y}this.seek(V),this.skip(12)}decodeImageData(B){const V=B.orientation;switch(V&&1!==V&&R("orientation",V),B.type){case 1:case 2:this.readStripData(B);break;default:R("image type",B.type)}}readStripData(B){const V=B.width,G=B.height,ae=function C(T){if(T.length){const V=T;T=V[0];for(var B=0;B<V.length;B++)V[B]!==T&&R("bit depth",V)}return T}(B.bitsPerSample),fe=B.sampleFormat;let k=V*G;const O=function w(T,B,V,G){return 8===V?new Uint8Array(T*B):16===V?new Uint16Array(T*B):32===V&&3===G?new Float32Array(T*B):R("bit depth / sample format",V+" / "+G)}(k,1,ae,fe),Y=B.compression,me=B.rowsPerStrip*V,re=B.stripOffsets,ue=B.stripByteCounts;for(var ce=0,ye=0;ye<re.length;ye++){var we=this.getStripData(Y,re[ye],ue[ye]),tt=k>me?me:k;k-=tt,8===ae?ce=M(O,we,ce,tt):16===ae?ce=y(O,we,ce,tt,this.isLittleEndian()):32===ae&&3===fe?ce=A(O,we,ce,tt,this.isLittleEndian()):R("bitDepth",ae)}B.data=O}getStripData(B,V,G){switch(B){case 1:return new DataView(this.buffer,V,G);case 2:case 32773:return R("Compression",B);default:throw new Error("invalid compression: "+B)}}}},9339:(se,ee,D)=>{"use strict";const I=D(2816),U=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;function _(E){return"number"==typeof E?[E]:E}se.exports=class b extends I{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var g=new Date,w=U.exec(this.dateTime);return g.setFullYear(w[1],w[2]-1,w[3]),g.setHours(w[4],w[5],w[6]),g}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return _(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return _(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}},6762:(se,ee,D)=>{"use strict";const I=D(3362),U=D(6156);se.exports=function b(_){const E=new I(_),g={};if(E.setBigEndian(),65496!==E.readUint16())throw new Error("SOI marker not found. Not a valid JPEG file");if(65505===E.readUint16()){E.readUint16();const A=E.readBytes(6);if(69===A[0]&&120===A[1]&&105===A[2]&&102===A[3]&&0===A[4]&&0===A[5]){const R=U.decode(E,{onlyFirst:!0,ignoreImageData:!0,offset:E.offset});g.exif=R}}return g}},8869:(se,ee,D)=>{"use strict";ee.decode=D(6762)},3408:se=>{!function(){function ee(I,U,b){this.next=b,b&&(b.prev=this),this.prev=U,U&&(U.next=this),this.data=I}function D(){if(!(this instanceof D))return new D;this._head=null,this._tail=null,this.length=0}D.prototype={push:function(I){this._tail=new ee(I,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(0!==this.length){var I=this._tail;return this._tail=I.prev,I.prev&&(I.prev=this._tail.next=null),this.length--,1===this.length?this._head=this._tail:0===this.length&&(this._head=this._tail=null),I.data}},unshift:function(I){this._head=new ee(I,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(0!==this.length){var I=this._head;return this._head=I.next,I.next&&(I.next=this._head.prev=null),this.length--,1===this.length?this._tail=this._head:0===this.length&&(this._head=this._tail=null),I.data}},item:function(I){I<0&&(I=this.length+I);for(var U=this._head;I-- >0&&U;)U=U.next;return U?U.data:void 0},slice:function(I,U){if(I||(I=0),U||(U=this.length),U<0&&(U=this.length+U),I<0&&(I=this.length+I),U===I)return[];if(U<I)throw new Error("invalid offset: "+I+","+U+" (length="+this.length+")");for(var b=U-I,_=new Array(b),E=0,g=this._head;I-- >0&&g;)g=g.next;for(;E<b&&g;)_[E++]=g.data,g=g.next;return _},drop:function(){D.call(this)},forEach:function(I,U){for(var b=this._head,_=0,E=this.length;_<E&&b;)I.call(U||this,b.data,_,this),b=b.next,_++},map:function(I,U){var b=new D;return this.forEach(function(_,E,g){b.push(I.call(U||g,_,E,g))}),b},filter:function(I,U){var b=new D;return this.forEach(function(_,E,g){I.call(U||g,_,E,g)&&b.push(_)}),b},reduce:function(I,U,b){var _=0,E=this._head,g=this.length;for(U||(_=1,U=E&&E.data,E=E&&E.next);_<g&&E;)U=I.call(b||this,U,E.data,this),_++,E=E.next;return U}},se.exports=D}()},3165:function(){"use strict";!function(se){if(se.TextEncoder&&se.TextDecoder)return!1;function ee(I="utf-8"){if("utf-8"!==I)throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${I}') is invalid.`)}function D(I="utf-8",U={fatal:!1}){if("utf-8"!==I)throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${I}') is invalid.`);if(U.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(ee.prototype,"encoding",{value:"utf-8"}),ee.prototype.encode=function(I,U={stream:!1}){if(U.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let b=0;const _=I.length;let g=0,w=Math.max(32,_+(_>>1)+7),M=new Uint8Array(w>>3<<3);for(;b<_;){let y=I.charCodeAt(b++);if(y>=55296&&y<=56319){if(b<_){const A=I.charCodeAt(b);56320==(64512&A)&&(++b,y=((1023&y)<<10)+(1023&A)+65536)}if(y>=55296&&y<=56319)continue}if(g+4>M.length){w+=8,w*=1+b/I.length*2,w=w>>3<<3;const A=new Uint8Array(w);A.set(M),M=A}if(0!=(4294967168&y)){if(0==(4294965248&y))M[g++]=y>>6&31|192;else if(0==(4294901760&y))M[g++]=y>>12&15|224,M[g++]=y>>6&63|128;else{if(0!=(4292870144&y))continue;M[g++]=y>>18&7|240,M[g++]=y>>12&63|128,M[g++]=y>>6&63|128}M[g++]=63&y|128}else M[g++]=y}return M.slice(0,g)},Object.defineProperty(D.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(D.prototype,"fatal",{value:!1}),Object.defineProperty(D.prototype,"ignoreBOM",{value:!1}),D.prototype.decode=function(I,U={stream:!1}){if(U.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const b=new Uint8Array(I);let _=0;const E=b.length,g=[];for(;_<E;){const w=b[_++];if(0===w)break;if(0==(128&w))g.push(w);else if(192==(224&w)){const M=63&b[_++];g.push((31&w)<<6|M)}else if(224==(240&w)){const M=63&b[_++],y=63&b[_++];g.push((31&w)<<12|M<<6|y)}else if(240==(248&w)){let R=(7&w)<<18|(63&b[_++])<<12|(63&b[_++])<<6|63&b[_++];R>65535&&(R-=65536,g.push(R>>>10&1023|55296),R=56320|1023&R),g.push(R)}}return String.fromCharCode.apply(null,g)},se.TextEncoder=ee,se.TextDecoder=D}("undefined"!=typeof window?window:"undefined"!=typeof self?self:this)},3069:se=>{"use strict";function ee(D){if(this.size=0|D,this.size<=1||0!=(this.size&this.size-1))throw new Error("FFT size must be a power of two and bigger than 1");this._csize=D<<1;for(var I=new Array(2*this.size),U=0;U<I.length;U+=2){const M=Math.PI*U/this.size;I[U]=Math.cos(M),I[U+1]=-Math.sin(M)}this.table=I;for(var b=0,_=1;this.size>_;_<<=1)b++;this._width=b%2==0?b-1:b,this._bitrev=new Array(1<<this._width);for(var E=0;E<this._bitrev.length;E++){this._bitrev[E]=0;for(var g=0;g<this._width;g+=2)this._bitrev[E]|=(E>>>g&3)<<this._width-g-2}this._out=null,this._data=null,this._inv=0}se.exports=ee,ee.prototype.fromComplexArray=function(I,U){for(var b=U||new Array(I.length>>>1),_=0;_<I.length;_+=2)b[_>>>1]=I[_];return b},ee.prototype.createComplexArray=function(){const I=new Array(this._csize);for(var U=0;U<I.length;U++)I[U]=0;return I},ee.prototype.toComplexArray=function(I,U){for(var b=U||this.createComplexArray(),_=0;_<b.length;_+=2)b[_]=I[_>>>1],b[_+1]=0;return b},ee.prototype.completeSpectrum=function(I){for(var U=this._csize,b=U>>>1,_=2;_<b;_+=2)I[U-_]=I[_],I[U-_+1]=-I[_+1]},ee.prototype.transform=function(I,U){if(I===U)throw new Error("Input and output buffers must be different");this._out=I,this._data=U,this._inv=0,this._transform4(),this._out=null,this._data=null},ee.prototype.realTransform=function(I,U){if(I===U)throw new Error("Input and output buffers must be different");this._out=I,this._data=U,this._inv=0,this._realTransform4(),this._out=null,this._data=null},ee.prototype.inverseTransform=function(I,U){if(I===U)throw new Error("Input and output buffers must be different");this._out=I,this._data=U,this._inv=1,this._transform4();for(var b=0;b<I.length;b++)I[b]/=this.size;this._out=null,this._data=null},ee.prototype._transform4=function(){var g,w,I=this._out,U=this._csize,_=1<<this._width,E=U/_<<1,M=this._bitrev;if(4===E)for(g=0,w=0;g<U;g+=E,w++)this._singleTransform2(g,M[w],_);else for(g=0,w=0;g<U;g+=E,w++)this._singleTransform4(g,M[w],_);var y=this._inv?-1:1,A=this.table;for(_>>=2;_>=2;_>>=2){var R=(E=U/_<<1)>>>2;for(g=0;g<U;g+=E)for(var C=g+R,T=g,B=0;T<C;T+=2,B+=_){const V=T,G=V+R,ae=G+R,fe=ae+R,k=I[V],O=I[V+1],Y=I[G],q=I[G+1],me=I[ae],re=I[ae+1],ue=I[fe],ce=I[fe+1],tt=A[B],Ze=y*A[B+1],je=Y*tt-q*Ze,z=Y*Ze+q*tt,le=A[2*B],ge=y*A[2*B+1],N=me*le-re*ge,v=me*ge+re*le,p=A[3*B],c=y*A[3*B+1],f=ue*p-ce*c,S=ue*c+ce*p,P=k+N,F=O+v,Z=k-N,ie=O-v,Q=je+f,J=z+S,Me=y*(je-f),ne=y*(z-S),Le=F+J,Pe=P-Q,Ne=F-J,xt=Z+ne,Ce=ie-Me,Be=Z-ne,ke=ie+Me;I[V]=P+Q,I[V+1]=Le,I[G]=xt,I[G+1]=Ce,I[ae]=Pe,I[ae+1]=Ne,I[fe]=Be,I[fe+1]=ke}}},ee.prototype._singleTransform2=function(I,U,b){const _=this._out,E=this._data,g=E[U],w=E[U+1],M=E[U+b],y=E[U+b+1],R=w+y,C=g-M,T=w-y;_[I]=g+M,_[I+1]=R,_[I+2]=C,_[I+3]=T},ee.prototype._singleTransform4=function(I,U,b){const _=this._out,E=this._data,g=this._inv?-1:1,w=2*b,M=3*b,y=E[U],A=E[U+1],R=E[U+b],C=E[U+b+1],T=E[U+w],B=E[U+w+1],V=E[U+M],G=E[U+M+1],ae=y+T,fe=A+B,k=y-T,O=A-B,Y=R+V,q=C+G,me=g*(R-V),re=g*(C-G),ce=fe+q,ye=k+re,we=O-me,tt=ae-Y,Ze=fe-q,je=k-re,z=O+me;_[I]=ae+Y,_[I+1]=ce,_[I+2]=ye,_[I+3]=we,_[I+4]=tt,_[I+5]=Ze,_[I+6]=je,_[I+7]=z},ee.prototype._realTransform4=function(){var g,w,I=this._out,U=this._csize,_=1<<this._width,E=U/_<<1,M=this._bitrev;if(4===E)for(g=0,w=0;g<U;g+=E,w++)this._singleRealTransform2(g,M[w]>>>1,_>>>1);else for(g=0,w=0;g<U;g+=E,w++)this._singleRealTransform4(g,M[w]>>>1,_>>>1);var y=this._inv?-1:1,A=this.table;for(_>>=2;_>=2;_>>=2){var R=(E=U/_<<1)>>>1,C=R>>>1,T=C>>>1;for(g=0;g<U;g+=E)for(var B=0,V=0;B<=T;B+=2,V+=_){var G=g+B,ae=G+C,fe=ae+C,k=fe+C,O=I[G],Y=I[G+1],q=I[ae],me=I[ae+1],re=I[fe],ue=I[fe+1],ce=I[k],ye=I[k+1],Ze=A[V],je=y*A[V+1],z=q*Ze-me*je,le=q*je+me*Ze,ge=A[2*V],N=y*A[2*V+1],v=re*ge-ue*N,p=re*N+ue*ge,c=A[3*V],f=y*A[3*V+1],S=ce*c-ye*f,P=ce*f+ye*c,F=O+v,Z=Y+p,ie=O-v,Q=Y-p,J=z+S,Me=le+P,ne=y*(z-S),ve=y*(le-P),Pe=Z+Me,Ne=ie+ve,xt=Q-ne;if(I[G]=F+J,I[G+1]=Pe,I[ae]=Ne,I[ae+1]=xt,0!==B){if(B!==T){var qe=-y*ne-Q,Ue=F+-y*J,ze=-Z- -y*Me,ht=g+C-B,dt=g+R-B;I[ht]=ie+-y*ve,I[ht+1]=qe,I[dt]=Ue,I[dt+1]=ze}}else{var Be=Z-Me;I[fe]=F-J,I[fe+1]=Be}}}},ee.prototype._singleRealTransform2=function(I,U,b){const _=this._out,E=this._data,g=E[U],w=E[U+b],y=g-w;_[I]=g+w,_[I+1]=0,_[I+2]=y,_[I+3]=0},ee.prototype._singleRealTransform4=function(I,U,b){const _=this._out,E=this._data,y=E[U],A=E[U+b],R=E[U+2*b],C=E[U+3*b],T=y+R,B=y-R,V=A+C,G=(this._inv?-1:1)*(A-C),fe=B,k=-G,O=T-V,Y=B,q=G;_[I]=T+V,_[I+1]=0,_[I+2]=fe,_[I+3]=k,_[I+4]=O,_[I+5]=0,_[I+6]=Y,_[I+7]=q}},4275:module=>{"use strict";const toBytes=se=>[...se].map(ee=>ee.charCodeAt(0)),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(se,ee=0){let D=se[ee],I=1,U=0;for(;++U<8;)I*=256,D+=se[ee+U]*I;return D}const fileType=se=>{if(!(se instanceof Uint8Array||se instanceof ArrayBuffer||Buffer.isBuffer(se)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof se}\``);const ee=se instanceof Uint8Array?se:new Uint8Array(se);if(!(ee&&ee.length>1))return null;const D=(U,b)=>{b=Object.assign({offset:0},b);for(let _=0;_<U.length;_++)if(b.mask){if(U[_]!==(b.mask[_]&ee[_+b.offset]))return!1}else if(U[_]!==ee[_+b.offset])return!1;return!0},I=(U,b)=>D(toBytes(U),b);if(D([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(D([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(D([71,73,70]))return{ext:"gif",mime:"image/gif"};if(D([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(D([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((D([73,73,42,0])||D([77,77,0,42]))&&D([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(D([73,73,42,0])||D([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(D([66,77]))return{ext:"bmp",mime:"image/bmp"};if(D([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(D([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(D([80,75,3,4])){if(D([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(D(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(I("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(I("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(I("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const U=(g,w=0)=>g.findIndex((M,y,A)=>y>=w&&80===A[y]&&75===A[y+1]&&3===A[y+2]&&4===A[y+3]);let b=0,_=!1,E=null;do{const g=b+30;if(_||(_=D(oxmlContentTypes,{offset:g})||D(oxmlRels,{offset:g})),E||(I("word/",{offset:g})?E={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:I("ppt/",{offset:g})?E={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:I("xl/",{offset:g})&&(E={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),_&&E)return E;b=U(ee,g)}while(b>=0);if(E)return E}if(D([80,75])&&(3===ee[2]||5===ee[2]||7===ee[2])&&(4===ee[3]||6===ee[3]||8===ee[3]))return{ext:"zip",mime:"application/zip"};if(D([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(D([82,97,114,33,26,7])&&(0===ee[6]||1===ee[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(D([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(D([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(D([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(D([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(D([51,103,112,53])||D([0,0,0])&&D([102,116,121,112],{offset:4})&&(D([109,112,52,49],{offset:8})||D([109,112,52,50],{offset:8})||D([105,115,111,109],{offset:8})||D([105,115,111,50],{offset:8})||D([109,109,112,52],{offset:8})||D([77,52,86],{offset:8})||D([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(D([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(D([26,69,223,163])){const U=ee.subarray(4,4100),b=U.findIndex((_,E,g)=>66===g[E]&&130===g[E+1]);if(-1!==b){const _=b+3,E=g=>[...g].every((w,M)=>U[_+M]===w.charCodeAt(0));if(E("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(E("webm"))return{ext:"webm",mime:"video/webm"}}}if(D([0,0,0,20,102,116,121,112,113,116,32,32])||D([102,114,101,101],{offset:4})||D([102,116,121,112,113,116,32,32],{offset:4})||D([109,100,97,116],{offset:4})||D([109,111,111,118],{offset:4})||D([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(D([82,73,70,70])){if(D([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(D([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(D([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(D([48,38,178,117,142,102,207,17,166,217])){let U=30;do{const b=readUInt64LE(ee,U+16);if(D([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:U})){if(D([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:U+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(D([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:U+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}U+=b}while(U+24<=ee.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(D([0,0,1,186])||D([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(D([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let U=0;U<2&&U<ee.length-16;U++){if(D([73,68,51],{offset:U})||D([255,226],{offset:U,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(D([255,228],{offset:U,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(D([255,248],{offset:U,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(D([255,240],{offset:U,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(D([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(D([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(D([79,103,103,83]))return D([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:D([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:D([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:D([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:D([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(D([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(D([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(D([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(D([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(D([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(D([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((67===ee[0]||70===ee[0])&&D([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(D([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(D([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(D([119,79,70,70])&&(D([0,1,0,0],{offset:4})||D([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(D([119,79,70,50])&&(D([0,1,0,0],{offset:4})||D([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(D([76,80],{offset:34})&&(D([0,0,1],{offset:8})||D([1,0,2],{offset:8})||D([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(D([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(D([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(D([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(D([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(D([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(D([37,33]))return{ext:"ps",mime:"application/postscript"};if(D([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(D([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(D([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(D([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(D([77,83,67,70])||D([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(D([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(D([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(D([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(D([31,160])||D([31,157]))return{ext:"Z",mime:"application/x-compress"};if(D([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(D([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(D([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(D([71],{offset:4})&&(D([71],{offset:192})||D([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(D([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(D([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(D([0,0,0,12,106,80,32,32,13,10,135,10])){if(D([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(D([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(D([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(D([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(D([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(I("<?xml "))return{ext:"xml",mime:"application/xml"};if(D([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(D([102,116,121,112],{offset:4})){if(D([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(D([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(D([104,101,105,99],{offset:8})||D([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(D([104,101,118,99],{offset:8})||D([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return D([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:D([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:D([77,80,43])||D([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:D([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:D([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:D([212,195,178,161])||D([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",()=>{const se=new stream.PassThrough,ee=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{se.fileType=fileType(ee)}catch(D){reject(D)}readableStream.unshift(ee),resolve(stream.pipeline?stream.pipeline(readableStream,se,()=>{}):readableStream.pipe(se))})})},1954:(se,ee,D)=>{var I=Object.prototype.hasOwnProperty;se.exports=ee=function(b,_){return I.call(_,b)},ee.version=D(2898).version},4940:(se,ee,D)=>{"use strict";const I=D(4275),U=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),b=_=>{const E=I(_);return U.has(E&&E.ext)?E:null};se.exports=b,se.exports.default=b,Object.defineProperty(b,"minimumBytes",{value:I.minimumBytes})},9373:(se,ee,D)=>{"use strict";const I=D(87),b=[];se.exports=class _{constructor(g,w){w=w||{};var M=!1;void 0===g&&(g=8192),"number"==typeof g?g=new ArrayBuffer(g):(M=!0,this._lastWrittenByte=g.byteLength);const y=w.offset?w.offset>>>0:0;let A=g.byteLength-y,R=y;g.buffer&&(g.byteLength!==g.buffer.byteLength&&(R=g.byteOffset+y),g=g.buffer),this._lastWrittenByte=M?A:0,this.buffer=g,this.length=A,this.byteLength=A,this.byteOffset=R,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,R,A),this._mark=0,this._marks=[]}available(g){return void 0===g&&(g=1),this.offset+g<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(g){return void 0===g&&(g=1),this.offset+=g,this}seek(g){return this.offset=g,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const g=this._marks.pop();if(void 0===g)throw new Error("Mark stack empty");return this.seek(g),this}rewind(){return this.offset=0,this}ensureAvailable(g){if(void 0===g&&(g=1),!this.available(g)){const M=2*(this.offset+g),y=new Uint8Array(M);y.set(new Uint8Array(this.buffer)),this.buffer=y.buffer,this.length=this.byteLength=M,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(g){void 0===g&&(g=1);for(var w=new Uint8Array(g),M=0;M<g;M++)w[M]=this.readByte();return w}readInt16(){var g=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,g}readUint16(){var g=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,g}readInt32(){var g=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,g}readUint32(){var g=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,g}readFloat32(){var g=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,g}readFloat64(){var g=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,g}readChar(){return String.fromCharCode(this.readInt8())}readChars(g){void 0===g&&(g=1),b.length=g;for(var w=0;w<g;w++)b[w]=this.readChar();return b.join("")}readUtf8(g){void 0===g&&(g=1);const w=this.readChars(g);return I.decode(w)}writeBoolean(g){return this.writeUint8(g?255:0),this}writeInt8(g){return this.ensureAvailable(1),this._data.setInt8(this.offset++,g),this._updateLastWrittenByte(),this}writeUint8(g){return this.ensureAvailable(1),this._data.setUint8(this.offset++,g),this._updateLastWrittenByte(),this}writeByte(g){return this.writeUint8(g)}writeBytes(g){this.ensureAvailable(g.length);for(var w=0;w<g.length;w++)this._data.setUint8(this.offset++,g[w]);return this._updateLastWrittenByte(),this}writeInt16(g){return this.ensureAvailable(2),this._data.setInt16(this.offset,g,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(g){return this.ensureAvailable(2),this._data.setUint16(this.offset,g,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(g){return this.ensureAvailable(4),this._data.setInt32(this.offset,g,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(g){return this.ensureAvailable(4),this._data.setUint32(this.offset,g,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(g){return this.ensureAvailable(4),this._data.setFloat32(this.offset,g,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(g){return this.ensureAvailable(8),this._data.setFloat64(this.offset,g,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(g){return this.writeUint8(g.charCodeAt(0))}writeChars(g){for(var w=0;w<g.length;w++)this.writeUint8(g.charCodeAt(w));return this}writeUtf8(g){const w=I.encode(g);return this.writeChars(w)}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this._lastWrittenByte)}getBuffer(){return"undefined"!=typeof Buffer?Buffer.from(this.toArray()):this.toArray()}_updateLastWrittenByte(){this.offset>this._lastWrittenByte&&(this._lastWrittenByte=this.offset)}}},7782:(se,ee,D)=>{"use strict";D.d(ee,{N:()=>U});const I=Object.prototype.toString;function U(b){return I.call(b).endsWith("Array]")}},3343:se=>{"use strict";var ee=Object.prototype.toString;se.exports=function(I){return"Array"===ee.call(I).substr(-6,5)}},9456:se=>{se.exports=function ee(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&!!process.versions.electron||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}},2327:se=>{"use strict";se.exports=Number.isFinite||function(ee){return!("number"!=typeof ee||ee!=ee||ee===1/0||ee===-1/0)}},5984:(se,ee,D)=>{var I=D(2327);se.exports=Number.isInteger||function(U){return"number"==typeof U&&I(U)&&Math.floor(U)===U}},7341:(se,ee,D)=>{var I=D(8679),U=D(8328);se.exports={encode:I,decode:U}},8328:se=>{var ee=function(){"use strict";var U=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),b=4017,_=799,E=3406,g=2276,w=1567,M=3784,y=5793,A=2896;function R(){}function C(k,O){for(var me,re,Y=0,q=[],ue=16;ue>0&&!k[ue-1];)ue--;q.push({children:[],index:0});var ye,ce=q[0];for(me=0;me<ue;me++){for(re=0;re<k[me];re++){for((ce=q.pop()).children[ce.index]=O[Y];ce.index>0;){if(0===q.length)throw new Error("Could not recreate Huffman Table");ce=q.pop()}for(ce.index++,q.push(ce);q.length<=me;)q.push(ye={children:[],index:0}),ce.children[ce.index]=ye.children,ce=ye;Y++}me+1<ue&&(q.push(ye={children:[],index:0}),ce.children[ce.index]=ye.children,ce=ye)}return q[0].children}function T(k,O,Y,q,me,re,ue,ce,ye,we){var z=Y.mcusPerLine,v=O,p=0,c=0;function f(){if(c>0)return c--,p>>c&1;if(255==(p=k[O++])){var qe=k[O++];if(qe)throw new Error("unexpected marker: "+(p<<8|qe).toString(16))}return c=7,p>>>7}function S(qe){for(var ze,Ue=qe;null!==(ze=f());){if("number"==typeof(Ue=Ue[ze]))return Ue;if("object"!=typeof Ue)throw new Error("invalid huffman sequence")}return null}function P(qe){for(var Ue=0;qe>0;){var ze=f();if(null===ze)return;Ue=Ue<<1|ze,qe--}return Ue}function F(qe){var Ue=P(qe);return Ue>=1<<qe-1?Ue:Ue+(-1<<qe)+1}var ve,J=0,ne=0;function Pe(qe,Ue,ze,ht,dt){var lt=(ze/z|0)*qe.v+ht;void 0===qe.blocks[lt]&&we.tolerantDecoding||Ue(qe,qe.blocks[lt][ze%z*qe.h+dt])}var Ce,Be,ke,Ae,$e,et,xt=q.length;et=Y.progressive?0===re?0===ce?function ie(qe,Ue){var ze=S(qe.huffmanTableDC),ht=0===ze?0:F(ze)<<ye;Ue[0]=qe.pred+=ht}:function Q(qe,Ue){Ue[0]|=f()<<ye}:0===ce?function Me(qe,Ue){if(J>0)J--;else for(var ze=re,ht=ue;ze<=ht;){var dt=S(qe.huffmanTableAC),Ct=15&dt,pt=dt>>4;if(0!==Ct)Ue[U[ze+=pt]]=F(Ct)*(1<<ye),ze++;else{if(pt<15){J=P(pt)+(1<<pt)-1;break}ze+=16}}}:function Le(qe,Ue){for(var ze=re,ht=ue,dt=0;ze<=ht;){var Ct=U[ze],pt=Ue[Ct]<0?-1:1;switch(ne){case 0:var lt=S(qe.huffmanTableAC),Gt=15&lt;if(dt=lt>>4,0===Gt)dt<15?(J=P(dt)+(1<<dt),ne=4):(dt=16,ne=1);else{if(1!==Gt)throw new Error("invalid ACn encoding");ve=F(Gt),ne=dt?2:3}continue;case 1:case 2:Ue[Ct]?Ue[Ct]+=(f()<<ye)*pt:0==--dt&&(ne=2==ne?3:0);break;case 3:Ue[Ct]?Ue[Ct]+=(f()<<ye)*pt:(Ue[Ct]=ve<<ye,ne=0);break;case 4:Ue[Ct]&&(Ue[Ct]+=(f()<<ye)*pt)}ze++}4===ne&&0==--J&&(ne=0)}:function Z(qe,Ue){var ze=S(qe.huffmanTableDC),ht=0===ze?0:F(ze);Ue[0]=qe.pred+=ht;for(var dt=1;dt<64;){var Ct=S(qe.huffmanTableAC),pt=15&Ct,lt=Ct>>4;if(0!==pt)Ue[U[dt+=lt]]=F(pt),dt++;else{if(lt<15)break;dt+=16}}};var He,ut,yt,mt,qe,ze,ht,Ge=0;for(ut=1==xt?q[0].blocksPerLine*q[0].blocksPerColumn:z*Y.mcusPerColumn,me||(me=ut);Ge<ut;){for(Be=0;Be<xt;Be++)q[Be].pred=0;if(J=0,1==xt)for(Ce=q[0],$e=0;$e<me;$e++)void 0,void 0===(qe=Ce).blocks[ht=(ze=Ge)/qe.blocksPerLine|0]&&we.tolerantDecoding||et(qe,qe.blocks[ht][ze%qe.blocksPerLine]),Ge++;else for($e=0;$e<me;$e++){for(Be=0;Be<xt;Be++)for(yt=(Ce=q[Be]).h,mt=Ce.v,ke=0;ke<mt;ke++)for(Ae=0;Ae<yt;Ae++)Pe(Ce,et,Ge,ke,Ae);if(++Ge===ut)break}if(Ge===ut)do{if(255===k[O]&&0!==k[O+1])break;O+=1}while(O<k.length-2);if(c=0,(He=k[O]<<8|k[O+1])<65280)throw new Error("marker was not found");if(!(He>=65488&&He<=65495))break;O+=2}return O-v}function B(k,O){var Y=[],q=O.blocksPerLine,me=O.blocksPerColumn,re=q<<3,ue=new Int32Array(64),ce=new Uint8Array(64);function ye(v,p,c){var S,P,F,Z,ie,Q,J,Me,ne,Le,f=O.quantizationTable,ve=c;for(Le=0;Le<64;Le++)ve[Le]=v[Le]*f[Le];for(Le=0;Le<8;++Le){var Pe=8*Le;0!=ve[1+Pe]||0!=ve[2+Pe]||0!=ve[3+Pe]||0!=ve[4+Pe]||0!=ve[5+Pe]||0!=ve[6+Pe]||0!=ve[7+Pe]?(ne=(S=y*ve[0+Pe]+128>>8)-(P=y*ve[4+Pe]+128>>8)+1>>1,S=S+P+1>>1,P=ne,ne=(F=ve[2+Pe])*M+(Z=ve[6+Pe])*w+128>>8,F=F*w-Z*M+128>>8,Z=ne,ne=(ie=A*(ve[1+Pe]-ve[7+Pe])+128>>8)-(J=ve[5+Pe]<<4)+1>>1,ie=ie+J+1>>1,J=ne,ne=(Me=A*(ve[1+Pe]+ve[7+Pe])+128>>8)+(Q=ve[3+Pe]<<4)+1>>1,Q=Me-Q+1>>1,Me=ne,ne=S-Z+1>>1,S=S+Z+1>>1,Z=ne,ne=P-F+1>>1,P=P+F+1>>1,F=ne,ne=ie*g+Me*E+2048>>12,ie=ie*E-Me*g+2048>>12,Me=ne,ne=Q*_+J*b+2048>>12,Q=Q*b-J*_+2048>>12,J=ne,ve[0+Pe]=S+Me,ve[7+Pe]=S-Me,ve[1+Pe]=P+J,ve[6+Pe]=P-J,ve[2+Pe]=F+Q,ve[5+Pe]=F-Q,ve[3+Pe]=Z+ie,ve[4+Pe]=Z-ie):(ve[0+Pe]=ne=y*ve[0+Pe]+512>>10,ve[1+Pe]=ne,ve[2+Pe]=ne,ve[3+Pe]=ne,ve[4+Pe]=ne,ve[5+Pe]=ne,ve[6+Pe]=ne,ve[7+Pe]=ne)}for(Le=0;Le<8;++Le){var Ne=Le;0!=ve[8+Ne]||0!=ve[16+Ne]||0!=ve[24+Ne]||0!=ve[32+Ne]||0!=ve[40+Ne]||0!=ve[48+Ne]||0!=ve[56+Ne]?(ne=(S=y*ve[0+Ne]+2048>>12)-(P=y*ve[32+Ne]+2048>>12)+1>>1,S=S+P+1>>1,P=ne,ne=(F=ve[16+Ne])*M+(Z=ve[48+Ne])*w+2048>>12,F=F*w-Z*M+2048>>12,Z=ne,ne=(ie=A*(ve[8+Ne]-ve[56+Ne])+2048>>12)-(J=ve[40+Ne])+1>>1,ie=ie+J+1>>1,J=ne,ne=(Me=A*(ve[8+Ne]+ve[56+Ne])+2048>>12)+(Q=ve[24+Ne])+1>>1,Q=Me-Q+1>>1,Me=ne,ne=S-Z+1>>1,S=S+Z+1>>1,Z=ne,ne=P-F+1>>1,P=P+F+1>>1,F=ne,ne=ie*g+Me*E+2048>>12,ie=ie*E-Me*g+2048>>12,Me=ne,ne=Q*_+J*b+2048>>12,Q=Q*b-J*_+2048>>12,J=ne,ve[0+Ne]=S+Me,ve[56+Ne]=S-Me,ve[8+Ne]=P+J,ve[48+Ne]=P-J,ve[16+Ne]=F+Q,ve[40+Ne]=F-Q,ve[24+Ne]=Z+ie,ve[32+Ne]=Z-ie):(ve[0+Ne]=ne=y*c[Le+0]+8192>>14,ve[8+Ne]=ne,ve[16+Ne]=ne,ve[24+Ne]=ne,ve[32+Ne]=ne,ve[40+Ne]=ne,ve[48+Ne]=ne,ve[56+Ne]=ne)}for(Le=0;Le<64;++Le){var xt=128+(ve[Le]+8>>4);p[Le]=xt<0?0:xt>255?255:xt}}fe(re*me*8);for(var we,tt,Ze=0;Ze<me;Ze++){var je=Ze<<3;for(we=0;we<8;we++)Y.push(new Uint8Array(re));for(var z=0;z<q;z++){ye(O.blocks[Ze][z],ce,ue);var le=0,ge=z<<3;for(tt=0;tt<8;tt++){var N=Y[je+tt];for(we=0;we<8;we++)N[ge+we]=ce[le++]}}}return Y}function V(k){return k<0?0:k>255?255:k}R.prototype={load:function(O){var Y=new XMLHttpRequest;Y.open("GET",O,!0),Y.responseType="arraybuffer",Y.onload=function(){var q=new Uint8Array(Y.response||Y.mozResponseArrayBuffer);this.parse(q),this.onload&&this.onload()}.bind(this),Y.send(null)},parse:function(O){var Y=1e3*this.opts.maxResolutionInMP*1e3,q=0;function re(){var lt=O[q]<<8|O[q+1];return q+=2,lt}function ce(lt){var vt,_t,Gt=1,rn=1;for(_t in lt.components)lt.components.hasOwnProperty(_t)&&(Gt<(vt=lt.components[_t]).h&&(Gt=vt.h),rn<vt.v&&(rn=vt.v));var dn=Math.ceil(lt.samplesPerLine/8/Gt),xn=Math.ceil(lt.scanLines/8/rn);for(_t in lt.components)if(lt.components.hasOwnProperty(_t)){vt=lt.components[_t];var Gn=Math.ceil(Math.ceil(lt.samplesPerLine/8)*vt.h/Gt),X=Math.ceil(Math.ceil(lt.scanLines/8)*vt.v/rn),_e=dn*vt.h,Ee=xn*vt.v,Ke=[];fe(Ee*_e*256);for(var it=0;it<Ee;it++){for(var Ot=[],jt=0;jt<_e;jt++)Ot.push(new Int32Array(64));Ke.push(Ot)}vt.blocksPerLine=Gn,vt.blocksPerColumn=X,vt.blocks=Ke}lt.maxH=Gt,lt.maxV=rn,lt.mcusPerLine=dn,lt.mcusPerColumn=xn}var Ze,je,lt,Gt,ye=null,we=null,z=[],le=[],ge=[],N=[],v=re(),p=-1;if(this.comments=[],65496!=v)throw new Error("SOI not found");for(v=re();65497!=v;){switch(v){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var P=(void 0,void 0,lt=re(),Gt=O.subarray(q,q+lt-2),q+=Gt.length,Gt);if(65534===v){var F=String.fromCharCode.apply(null,P);this.comments.push(F)}65504===v&&74===P[0]&&70===P[1]&&73===P[2]&&70===P[3]&&0===P[4]&&(ye={version:{major:P[5],minor:P[6]},densityUnits:P[7],xDensity:P[8]<<8|P[9],yDensity:P[10]<<8|P[11],thumbWidth:P[12],thumbHeight:P[13],thumbData:P.subarray(14,14+3*P[12]*P[13])}),65505===v&&69===P[0]&&120===P[1]&&105===P[2]&&102===P[3]&&0===P[4]&&(this.exifBuffer=P.subarray(5,P.length)),65518===v&&65===P[0]&&100===P[1]&&111===P[2]&&98===P[3]&&101===P[4]&&0===P[5]&&(we={version:P[6],flags0:P[7]<<8|P[8],flags1:P[9]<<8|P[10],transformCode:P[11]});break;case 65499:for(var ie=re()+q-2;q<ie;){var Q=O[q++];fe(256);var J=new Int32Array(64);if(Q>>4==0)for(f=0;f<64;f++)J[U[f]]=O[q++];else{if(Q>>4!=1)throw new Error("DQT: invalid table spec");for(f=0;f<64;f++)J[U[f]]=re()}z[15&Q]=J}break;case 65472:case 65473:case 65474:re(),(Ze={}).extended=65473===v,Ze.progressive=65474===v,Ze.precision=O[q++],Ze.scanLines=re(),Ze.samplesPerLine=re(),Ze.components={},Ze.componentsOrder=[];var ne=Ze.scanLines*Ze.samplesPerLine;if(ne>Y){var ve=Math.ceil((ne-Y)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${ve}MP`)}var Pe,Le=O[q++];for(c=0;c<Le;c++){Pe=O[q];var Ce=O[q+1]>>4,Be=15&O[q+1],ke=O[q+2];if(Ce<=0||Be<=0)throw new Error("Invalid sampling factor, expected values above 0");Ze.componentsOrder.push(Pe),Ze.components[Pe]={h:Ce,v:Be,quantizationIdx:ke},q+=3}ce(Ze),le.push(Ze);break;case 65476:var Ae=re();for(c=2;c<Ae;){var $e=O[q++],et=new Uint8Array(16),Ge=0;for(f=0;f<16;f++,q++)Ge+=et[f]=O[q];fe(16+Ge);var He=new Uint8Array(Ge);for(f=0;f<Ge;f++,q++)He[f]=O[q];c+=17+Ge,($e>>4==0?N:ge)[15&$e]=C(et,He)}break;case 65501:re(),je=re();break;case 65500:re(),re();break;case 65498:re();var yt=O[q++],mt=[];for(c=0;c<yt;c++){qe=Ze.components[O[q++]];var Ue=O[q++];qe.huffmanTableDC=N[Ue>>4],qe.huffmanTableAC=ge[15&Ue],mt.push(qe)}var ze=O[q++],ht=O[q++],dt=O[q++],Ct=T(O,q,Ze,mt,je,ze,ht,dt>>4,15&dt,this.opts);q+=Ct;break;case 65535:255!==O[q]&&q--;break;default:if(255==O[q-3]&&O[q-2]>=192&&O[q-2]<=254){q-=3;break}if(224===v||225==v){if(-1!==p)throw new Error(`first unknown JPEG marker at offset ${p.toString(16)}, second unknown JPEG marker ${v.toString(16)} at offset ${(q-1).toString(16)}`);p=q-1;const lt=re();if(255===O[q+lt-2]){q+=lt-2;break}}throw new Error("unknown JPEG marker "+v.toString(16))}v=re()}if(1!=le.length)throw new Error("only single frame JPEGs supported");for(var c=0;c<le.length;c++){var pt=le[c].components;for(var f in pt)pt[f].quantizationTable=z[pt[f].quantizationIdx],delete pt[f].quantizationIdx}for(this.width=Ze.samplesPerLine,this.height=Ze.scanLines,this.jfif=ye,this.adobe=we,this.components=[],c=0;c<Ze.componentsOrder.length;c++){var qe;this.components.push({lines:B(0,qe=Ze.components[Ze.componentsOrder[c]]),scaleX:qe.h/Ze.maxH,scaleY:qe.v/Ze.maxV})}},getData:function(O,Y){var re,ue,ce,ye,we,tt,Ze,je,z,le,N,v,p,c,f,S,P,F,Z,ie,Q,q=this.width/O,me=this.height/Y,ge=0,J=O*Y*this.components.length;fe(J);var Me=new Uint8Array(J);switch(this.components.length){case 1:for(re=this.components[0],le=0;le<Y;le++)for(we=re.lines[0|le*re.scaleY*me],z=0;z<O;z++)Me[ge++]=N=we[0|z*re.scaleX*q];break;case 2:for(re=this.components[0],ue=this.components[1],le=0;le<Y;le++)for(we=re.lines[0|le*re.scaleY*me],tt=ue.lines[0|le*ue.scaleY*me],z=0;z<O;z++)Me[ge++]=N=we[0|z*re.scaleX*q],Me[ge++]=N=tt[0|z*ue.scaleX*q];break;case 3:for(Q=!0,this.adobe&&this.adobe.transformCode?Q=!0:void 0!==this.opts.colorTransform&&(Q=!!this.opts.colorTransform),re=this.components[0],ue=this.components[1],ce=this.components[2],le=0;le<Y;le++)for(we=re.lines[0|le*re.scaleY*me],tt=ue.lines[0|le*ue.scaleY*me],Ze=ce.lines[0|le*ce.scaleY*me],z=0;z<O;z++)Q?(v=tt[0|z*ue.scaleX*q],F=V((N=we[0|z*re.scaleX*q])+1.402*((p=Ze[0|z*ce.scaleX*q])-128)),Z=V(N-.3441363*(v-128)-.71413636*(p-128)),ie=V(N+1.772*(v-128))):(F=we[0|z*re.scaleX*q],Z=tt[0|z*ue.scaleX*q],ie=Ze[0|z*ce.scaleX*q]),Me[ge++]=F,Me[ge++]=Z,Me[ge++]=ie;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(Q=!1,this.adobe&&this.adobe.transformCode?Q=!0:void 0!==this.opts.colorTransform&&(Q=!!this.opts.colorTransform),re=this.components[0],ue=this.components[1],ce=this.components[2],ye=this.components[3],le=0;le<Y;le++)for(we=re.lines[0|le*re.scaleY*me],tt=ue.lines[0|le*ue.scaleY*me],Ze=ce.lines[0|le*ce.scaleY*me],je=ye.lines[0|le*ye.scaleY*me],z=0;z<O;z++)Q?(v=tt[0|z*ue.scaleX*q],c=je[0|z*ye.scaleX*q],f=255-V((N=we[0|z*re.scaleX*q])+1.402*((p=Ze[0|z*ce.scaleX*q])-128)),S=255-V(N-.3441363*(v-128)-.71413636*(p-128)),P=255-V(N+1.772*(v-128))):(f=we[0|z*re.scaleX*q],S=tt[0|z*ue.scaleX*q],P=Ze[0|z*ce.scaleX*q],c=je[0|z*ye.scaleX*q]),Me[ge++]=255-f,Me[ge++]=255-S,Me[ge++]=255-P,Me[ge++]=255-c;break;default:throw new Error("Unsupported color mode")}return Me},copyToImageData:function(O,Y){var we,tt,Ze,je,z,le,ge,N,v,q=O.width,me=O.height,re=O.data,ue=this.getData(q,me),ce=0,ye=0;switch(this.components.length){case 1:for(tt=0;tt<me;tt++)for(we=0;we<q;we++)Ze=ue[ce++],re[ye++]=Ze,re[ye++]=Ze,re[ye++]=Ze,Y&&(re[ye++]=255);break;case 3:for(tt=0;tt<me;tt++)for(we=0;we<q;we++)ge=ue[ce++],N=ue[ce++],v=ue[ce++],re[ye++]=ge,re[ye++]=N,re[ye++]=v,Y&&(re[ye++]=255);break;case 4:for(tt=0;tt<me;tt++)for(we=0;we<q;we++)z=ue[ce++],le=ue[ce++],Ze=ue[ce++],ge=255-V(z*(1-(je=ue[ce++])/255)+je),N=255-V(le*(1-je/255)+je),v=255-V(Ze*(1-je/255)+je),re[ye++]=ge,re[ye++]=N,re[ye++]=v,Y&&(re[ye++]=255);break;default:throw new Error("Unsupported color mode")}}};var G=0,ae=0;function fe(k=0){var O=G+k;if(O>ae){var Y=Math.ceil((O-ae)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${Y}MB`)}G=O}return R.resetMaxMemoryUsage=function(k){G=0,ae=k},R.getBytesAllocated=function(){return G},R.requestMemoryAllocation=fe,R}();se.exports=function D(I,U={}){var _=or(or({},{colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512}),U),E=new Uint8Array(I),g=new ee;g.opts=_,ee.resetMaxMemoryUsage(1024*_.maxMemoryUsageInMB*1024),g.parse(E);var M=g.width*g.height*(_.formatAsRGBA?4:3);try{ee.requestMemoryAllocation(M);var y={width:g.width,height:g.height,exifBuffer:g.exifBuffer,data:_.useTArray?new Uint8Array(M):Buffer.alloc(M)};g.comments.length>0&&(y.comments=g.comments)}catch(A){throw A instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+M):A instanceof ReferenceError&&"Buffer is not defined"===A.message?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):A}return g.copyToImageData(y,_.formatAsRGBA),y}},8679:se=>{function D(b){Math;var R,C,T,B,ye,g=Math.floor,w=new Array(64),M=new Array(64),y=new Array(64),A=new Array(64),V=new Array(65535),G=new Array(65535),ae=new Array(64),fe=new Array(64),k=[],O=0,Y=7,q=new Array(64),me=new Array(64),re=new Array(64),ue=new Array(256),ce=new Array(2048),we=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],tt=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ze=[0,1,2,3,4,5,6,7,8,9,10,11],je=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],le=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ge=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],v=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function c(Ae,$e){for(var et=0,Ge=0,He=new Array,ut=1;ut<=16;ut++){for(var yt=1;yt<=Ae[ut];yt++)He[$e[Ge]]=[],He[$e[Ge]][0]=et,He[$e[Ge]][1]=ut,Ge++,et++;et*=2}return He}function F(Ae){for(var $e=Ae[0],et=Ae[1]-1;et>=0;)$e&1<<et&&(O|=1<<Y),et--,--Y<0&&(255==O?(Z(255),Z(0)):Z(O),Y=7,O=0)}function Z(Ae){k.push(Ae)}function ie(Ae){Z(Ae>>8&255),Z(255&Ae)}function xt(Ae,$e,et,Ge,He){for(var mt,ut=He[0],yt=He[240],ht=function Q(Ae,$e){var et,Ge,He,ut,yt,mt,qe,Ue,ht,ao,ze=0;for(ht=0;ht<8;++ht){var pt=(et=Ae[ze])+(Ue=Ae[ze+7]),lt=et-Ue,Gt=(Ge=Ae[ze+1])+(qe=Ae[ze+6]),rn=Ge-qe,vt=(He=Ae[ze+2])+(mt=Ae[ze+5]),_t=He-mt,dn=(ut=Ae[ze+3])+(yt=Ae[ze+4]),xn=ut-yt,Gn=pt+dn,X=pt-dn,_e=Gt+vt,Ee=Gt-vt;Ae[ze]=Gn+_e,Ae[ze+4]=Gn-_e;var Oe=.707106781*(Ee+X);Ae[ze+2]=X+Oe,Ae[ze+6]=X-Oe;var Ke=.382683433*((Gn=xn+_t)-(Ee=rn+lt)),it=.5411961*Gn+Ke,Ot=1.306562965*Ee+Ke,jt=.707106781*(_e=_t+rn),sn=lt+jt,Rn=lt-jt;Ae[ze+5]=Rn+it,Ae[ze+3]=Rn-it,Ae[ze+1]=sn+Ot,Ae[ze+7]=sn-Ot,ze+=8}for(ze=0,ht=0;ht<8;++ht){var vi=(et=Ae[ze])+(Ue=Ae[ze+56]),pn=et-Ue,vn=(Ge=Ae[ze+8])+(qe=Ae[ze+48]),en=Ge-qe,an=(He=Ae[ze+16])+(mt=Ae[ze+40]),Bn=He-mt,tn=(ut=Ae[ze+24])+(yt=Ae[ze+32]),mr=ut-yt,cn=vi+tn,Ni=vi-tn,Lr=vn+an,oo=vn-an;Ae[ze]=cn+Lr,Ae[ze+32]=cn-Lr;var Qr=.707106781*(oo+Ni);Ae[ze+16]=Ni+Qr,Ae[ze+48]=Ni-Qr;var vs=.382683433*((cn=mr+Bn)-(oo=en+pn)),Xn=.5411961*cn+vs,ws=1.306562965*oo+vs,Fo=.707106781*(Lr=Bn+en),so=pn+Fo,ys=pn-Fo;Ae[ze+40]=ys+Xn,Ae[ze+24]=ys-Xn,Ae[ze+8]=so+ws,Ae[ze+56]=so-ws,ze++}for(ht=0;ht<64;++ht)ae[ht]=(ao=Ae[ht]*$e[ht])>0?ao+.5|0:ao-.5|0;return ae}(Ae,$e),dt=0;dt<64;++dt)fe[we[dt]]=ht[dt];var Ct=fe[0]-et;et=fe[0],0==Ct?F(Ge[0]):(F(Ge[G[mt=32767+Ct]]),F(V[mt]));for(var pt=63;pt>0&&0==fe[pt];pt--);if(0==pt)return F(ut),et;for(var Gt,lt=1;lt<=pt;){for(var rn=lt;0==fe[lt]&&lt<=pt;++lt);var vt=lt-rn;if(vt>=16){Gt=vt>>4;for(var _t=1;_t<=Gt;++_t)F(yt);vt&=15}F(He[(vt<<4)+G[mt=32767+fe[lt]]]),F(V[mt]),lt++}return 63!=pt&&F(ut),et}function Be(Ae){Ae<=0&&(Ae=1),Ae>100&&(Ae=100),ye!=Ae&&(function p(Ae){for(var $e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],et=0;et<64;et++){var Ge=g(($e[et]*Ae+50)/100);Ge<1?Ge=1:Ge>255&&(Ge=255),w[we[et]]=Ge}for(var He=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ut=0;ut<64;ut++){var yt=g((He[ut]*Ae+50)/100);yt<1?yt=1:yt>255&&(yt=255),M[we[ut]]=yt}for(var mt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],qe=0,Ue=0;Ue<8;Ue++)for(var ze=0;ze<8;ze++)y[qe]=1/(w[we[qe]]*mt[Ue]*mt[ze]*8),A[qe]=1/(M[we[qe]]*mt[Ue]*mt[ze]*8),qe++}(Ae<50?Math.floor(5e3/Ae):Math.floor(200-2*Ae)),ye=Ae)}this.encode=function(Ae,$e){(new Date).getTime(),$e&&Be($e),k=new Array,O=0,Y=7,ie(65496),function J(){ie(65504),ie(16),Z(74),Z(70),Z(73),Z(70),Z(0),Z(1),Z(1),Z(0),ie(1),ie(1),Z(0),Z(0)}(),function Pe(Ae){void 0===Ae||Ae.constructor!==Array||Ae.forEach($e=>{if("string"==typeof $e){ie(65534);var Ge,et=$e.length;for(ie(et+2),Ge=0;Ge<et;Ge++)Z($e.charCodeAt(Ge))}})}(Ae.comments),function Me(Ae){if(Ae){ie(65505),69===Ae[0]&&120===Ae[1]&&105===Ae[2]&&102===Ae[3]?ie(Ae.length+2):(ie(Ae.length+5+2),Z(69),Z(120),Z(105),Z(102),Z(0));for(var $e=0;$e<Ae.length;$e++)Z(Ae[$e])}}(Ae.exifBuffer),function ve(){ie(65499),ie(132),Z(0);for(var Ae=0;Ae<64;Ae++)Z(w[Ae]);Z(1);for(var $e=0;$e<64;$e++)Z(M[$e])}(),function ne(Ae,$e){ie(65472),ie(17),Z(8),ie($e),ie(Ae),Z(3),Z(1),Z(17),Z(0),Z(2),Z(17),Z(1),Z(3),Z(17),Z(1)}(Ae.width,Ae.height),function Le(){ie(65476),ie(418),Z(0);for(var Ae=0;Ae<16;Ae++)Z(tt[Ae+1]);for(var $e=0;$e<=11;$e++)Z(Ze[$e]);Z(16);for(var et=0;et<16;et++)Z(je[et+1]);for(var Ge=0;Ge<=161;Ge++)Z(z[Ge]);Z(1);for(var He=0;He<16;He++)Z(le[He+1]);for(var ut=0;ut<=11;ut++)Z(ge[ut]);Z(17);for(var yt=0;yt<16;yt++)Z(N[yt+1]);for(var mt=0;mt<=161;mt++)Z(v[mt])}(),function Ne(){ie(65498),ie(12),Z(3),Z(1),Z(0),Z(2),Z(17),Z(3),Z(17),Z(0),Z(63),Z(0)}();var Ge=0,He=0,ut=0;O=0,Y=7,this.encode.displayName="_encode_";for(var ht,Ct,pt,lt,Gt,rn,vt,_t,dn,yt=Ae.data,qe=Ae.height,Ue=4*Ae.width,dt=0;dt<qe;){for(ht=0;ht<Ue;){for(rn=Gt=Ue*dt+ht,vt=-1,_t=0,dn=0;dn<64;dn++)rn=Gt+(_t=dn>>3)*Ue+(vt=4*(7&dn)),dt+_t>=qe&&(rn-=Ue*(dt+1+_t-qe)),ht+vt>=Ue&&(rn-=ht+vt-Ue+4),Ct=yt[rn++],pt=yt[rn++],lt=yt[rn++],q[dn]=(ce[Ct]+ce[pt+256>>0]+ce[lt+512>>0]>>16)-128,me[dn]=(ce[Ct+768>>0]+ce[pt+1024>>0]+ce[lt+1280>>0]>>16)-128,re[dn]=(ce[Ct+1280>>0]+ce[pt+1536>>0]+ce[lt+1792>>0]>>16)-128;Ge=xt(q,y,Ge,R,T),He=xt(me,A,He,C,B),ut=xt(re,A,ut,C,B),ht+=32}dt+=8}if(Y>=0){var xn=[];xn[1]=Y+1,xn[0]=(1<<Y+1)-1,F(xn)}return ie(65497),Buffer.from(k)},function ke(){(new Date).getTime(),b||(b=50),function Ce(){for(var Ae=String.fromCharCode,$e=0;$e<256;$e++)ue[$e]=Ae($e)}(),function f(){R=c(tt,Ze),C=c(le,ge),T=c(je,z),B=c(N,v)}(),function S(){for(var Ae=1,$e=2,et=1;et<=15;et++){for(var Ge=Ae;Ge<$e;Ge++)G[32767+Ge]=et,V[32767+Ge]=[],V[32767+Ge][1]=et,V[32767+Ge][0]=Ge;for(var He=-($e-1);He<=-Ae;He++)G[32767+He]=et,V[32767+He]=[],V[32767+He][1]=et,V[32767+He][0]=$e-1+He;Ae<<=1,$e<<=1}}(),function P(){for(var Ae=0;Ae<256;Ae++)ce[Ae]=19595*Ae,ce[Ae+256>>0]=38470*Ae,ce[Ae+512>>0]=7471*Ae+32768,ce[Ae+768>>0]=-11059*Ae,ce[Ae+1024>>0]=-21709*Ae,ce[Ae+1280>>0]=32768*Ae+8421375,ce[Ae+1536>>0]=-27439*Ae,ce[Ae+1792>>0]=-5329*Ae}(),Be(b),(new Date).getTime()}()}se.exports=function I(b,_){return void 0===_&&(_=50),{data:new D(_).encode(b,_),width:b.width,height:b.height}}},232:se=>{se.exports=function U(b,_,E){function g(y,A){if(!_[y]){if(!b[y]){if(w)return w(y,!0);var C=new Error("Cannot find module '"+y+"'");throw C.code="MODULE_NOT_FOUND",C}var T=_[y]={exports:{}};b[y][0].call(T.exports,function(B){return g(b[y][1][B]||B)},T,T.exports,U,b,_,E)}return _[y].exports}for(var w=void 0,M=0;M<E.length;M++)g(E[M]);return g}({1:[function(U,b,_){var E,g,w,M,y,R={}.hasOwnProperty;E=U("./PriorityQueue/AbstractPriorityQueue"),g=U("./PriorityQueue/ArrayStrategy"),M=U("./PriorityQueue/BinaryHeapStrategy"),w=U("./PriorityQueue/BHeapStrategy"),(y=function(C){function T(B){B||(B={}),B.strategy||(B.strategy=M),B.comparator||(B.comparator=function(V,G){return(V||0)-(G||0)}),T.__super__.constructor.call(this,B)}return function(C,T){for(var B in T)R.call(T,B)&&(C[B]=T[B]);function V(){this.constructor=C}V.prototype=T.prototype,C.prototype=new V,C.__super__=T.prototype}(T,C),T}(E)).ArrayStrategy=g,y.BinaryHeapStrategy=M,y.BHeapStrategy=w,b.exports=y},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(U,b,_){b.exports=function(){function g(w){var M;if(null==(null!=w?w.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=w?w.comparator:void 0))throw"Must pass options.comparator, a comparator";this.priv=new w.strategy(w),this.length=(null!=w&&null!=(M=w.initialValues)?M.length:void 0)||0}return g.prototype.queue=function(w){this.length++,this.priv.queue(w)},g.prototype.dequeue=function(w){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},g.prototype.peek=function(w){if(!this.length)throw"Empty queue";return this.priv.peek()},g.prototype.clear=function(){return this.length=0,this.priv.clear()},g}()},{}],3:[function(U,b,_){var g;g=function(w,M,y){var A,R,C;for(R=0,A=w.length;R<A;)y(w[C=R+A>>>1],M)>=0?R=C+1:A=C;return R},b.exports=function(){function w(M){var y;this.options=M,this.comparator=this.options.comparator,this.data=(null!=(y=this.options.initialValues)?y.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return w.prototype.queue=function(M){var y;y=g(this.data,M,this.comparator),this.data.splice(y,0,M)},w.prototype.dequeue=function(){return this.data.pop()},w.prototype.peek=function(){return this.data[this.data.length-1]},w.prototype.clear=function(){this.data.length=0},w}()},{}],4:[function(U,b,_){b.exports=function(){function g(w){var M,A,R,C,T,B,V;for(this.comparator=(null!=w?w.comparator:void 0)||function(ae,fe){return ae-fe},this.pageSize=(null!=w?w.pageSize:void 0)||512,this.length=0,V=0;1<<V<this.pageSize;)V+=1;if(1<<V!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=V,this._emptyMemoryPageTemplate=M=[],A=0,T=this.pageSize;0<=T?A<T:A>T;0<=T?++A:--A)M.push(null);if(this._memory=[],this._mask=this.pageSize-1,w.initialValues)for(R=0,C=(B=w.initialValues).length;R<C;R++)this.queue(B[R])}return g.prototype.queue=function(w){this.length+=1,this._write(this.length,w),this._bubbleUp(this.length,w)},g.prototype.dequeue=function(){var w,M;return w=this._read(1),M=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,M),this._bubbleDown(1,M)),w},g.prototype.peek=function(){return this._read(1)},g.prototype.clear=function(){this.length=0,this._memory.length=0},g.prototype._write=function(w,M){var y;for(y=w>>this._shift;y>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[y][w&this._mask]=M},g.prototype._read=function(w){return this._memory[w>>this._shift][w&this._mask]},g.prototype._bubbleUp=function(w,M){var y,A,R,C;for(y=this.comparator;w>1&&(A=w&this._mask,w<this.pageSize||A>3?R=w&~this._mask|A>>1:A<2?(R=w-this.pageSize>>this._shift,R+=R&~(this._mask>>1),R|=this.pageSize>>1):R=w-2,!(y(C=this._read(R),M)<0));)this._write(R,M),this._write(w,C),w=R},g.prototype._bubbleDown=function(w,M){var y,A,R,C,T;for(T=this.comparator;w<this.length;)if(w>this._mask&&!(w&this._mask-1)?y=A=w+2:w&this.pageSize>>1?(y=(w&~this._mask)>>1,A=1+(y=1+(y|=w&this._mask>>1)<<this._shift)):A=(y=w+(w&this._mask))+1,y!==A&&A<=this.length)if(R=this._read(y),C=this._read(A),T(R,M)<0&&T(R,C)<=0)this._write(y,M),this._write(w,R),w=y;else{if(!(T(C,M)<0))break;this._write(A,M),this._write(w,C),w=A}else{if(!(y<=this.length))break;if(!(T(R=this._read(y),M)<0))break;this._write(y,M),this._write(w,R),w=y}},g}()},{}],5:[function(U,b,_){b.exports=function(){function g(w){var M;this.comparator=(null!=w?w.comparator:void 0)||function(y,A){return y-A},this.length=0,this.data=(null!=(M=w.initialValues)?M.slice(0):void 0)||[],this._heapify()}return g.prototype._heapify=function(){var w,M,y;if(this.data.length>0)for(w=M=1,y=this.data.length;1<=y?M<y:M>y;w=1<=y?++M:--M)this._bubbleUp(w)},g.prototype.queue=function(w){this.data.push(w),this._bubbleUp(this.data.length-1)},g.prototype.dequeue=function(){var w,M;return M=this.data[0],w=this.data.pop(),this.data.length>0&&(this.data[0]=w,this._bubbleDown(0)),M},g.prototype.peek=function(){return this.data[0]},g.prototype.clear=function(){this.length=0,this.data.length=0},g.prototype._bubbleUp=function(w){for(var M,y;w>0&&this.comparator(this.data[w],this.data[M=w-1>>>1])<0;)y=this.data[M],this.data[M]=this.data[w],this.data[w]=y,w=M},g.prototype._bubbleDown=function(w){var M,y,A,R,C;for(M=this.data.length-1;R=1+(y=1+(w<<1)),A=w,y<=M&&this.comparator(this.data[y],this.data[A])<0&&(A=y),R<=M&&this.comparator(this.data[R],this.data[A])<0&&(A=R),A!==w;)C=this.data[A],this.data[A]=this.data[w],this.data[w]=C,w=A},g}()},{}]},{},[1])(1)},7611:function(se){se.exports=function(){"use strict";function ee(X){return"string"==typeof X||X instanceof String}var D=Number.isFinite||window.isFinite;function I(X){return D(X)}function U(X){return X}function _(X,_e){if(_e.length!==X.length)return!1;for(var Ee=0;Ee<X.length;Ee++)if(_e[Ee].compareArray&&!_e[Ee].compareArray(X[Ee])||_e[Ee]!==X[Ee])return!1;return!0}function E(X,_e){Object.keys(_e).forEach(function(Ee){X[Ee]=_e[Ee]})}function g(){for(var X=1,_e=0,Ee=0;Ee<arguments.length;Ee++){var Oe=arguments[Ee];_e+=y(Oe),X*=Oe}return 0!==_e?M(X,_e):X}function w(X,_e){if(0===_e)throw new Error("Divide by zero");var Ee=Math.pow(10,y(_e));return g(X,Ee/(Ee*_e))}function M(X,_e){return Math.round(X*Math.pow(10,_e))/Math.pow(10,_e)}function y(X){if(!isFinite(X))return 0;for(var _e=0;X%1!=0;)X*=10,_e++;return _e}function A(){var X;if(!this)return X=Object.create(A.prototype),A.apply(X,arguments),X;X=Error.apply(this,arguments),this.name="QtyError",this.message=X.message,this.stack=X.stack}function R(X,_e){throw new A("Incompatible units: "+X+" and "+_e)}A.prototype=Object.create(Error.prototype,{constructor:{value:A}});var C={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],Math.pow(2,10),"prefix"],"<mebi>":[["Mi","Mebi","mebi"],Math.pow(2,20),"prefix"],"<gibi>":[["Gi","Gibi","gibi"],Math.pow(2,30),"prefix"],"<tebi>":[["Ti","Tebi","tebi"],Math.pow(2,40),"prefix"],"<pebi>":[["Pi","Pebi","pebi"],Math.pow(2,50),"prefix"],"<exi>":[["Ei","Exi","exi"],Math.pow(2,60),"prefix"],"<zebi>":[["Zi","Zebi","zebi"],Math.pow(2,70),"prefix"],"<yebi>":[["Yi","Yebi","yebi"],Math.pow(2,80),"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","\u03bc","\xb5","Micro","mc","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi","naut-mile"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.00423333333,"length",["<meter>"]],"<point>":[["pt","point","points"],.000352777778,"length",["<meter>"]],"<redshift>":[["z","red-shift","redshift"],1302773e20,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<datamile>":[["DM","datamile"],1828.8,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],1660538921e-36,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],1660538921e-36,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton","short-ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["tonne","metric-ton"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<foot>","<foot>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<gallon-imp>":[["galimp","gallon-imp","gallons-imp"],.00454609,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],.00094635295,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],.000473176475,"volume",["<meter>","<meter>","<meter>"]],"<pint-imp>":[["ptimp","pint-imp","pints-imp"],.00056826125,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],.000236588238,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce","fluid-ounces"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce-imp>":[["flozimp","floz-imp","fluid-ounce-imp","fluid-ounces-imp"],284130625e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tb","tbsp","tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<bushel>":[["bu","bsh","bushel","bushels"],.035239072,"volume",["<meter>","<meter>","<meter>"]],"<oilbarrel>":[["bbl","oilbarrel","oilbarrels","oil-barrel","oil-barrels"],.158987294928,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel>":[["bl","bl-us","beerbarrel","beerbarrels","beer-barrel","beer-barrels"],.1173477658,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel-imp>":[["blimp","bl-imp","beerbarrel-imp","beerbarrels-imp","beer-barrel-imp","beer-barrels-imp"],.16365924,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<Gal>":[["Gal"],.01,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK","temp-K"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC","temp-C"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF","temp-F"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR","temp-R"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","secs","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","mins","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],86400,"time",["<second>"]],"<week>":[["wk","week","weeks"],604800,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O","cmh2o"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O","inh2o"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit","unit"],16667e-19,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<second>","<second>","<second>","<second>","<ampere>","<ampere>"],["<meter>","<meter>","<kilogram>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<Ah>":[["Ah"],3600,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm","\u03a9","\u2126"],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm","therm-US"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Wh>":[["Wh"],3600,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radians"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<gradian>":[["gon","grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte","bytes"],1,"information",["<byte>"]],"<bit>":[["b","bit","bits"],.125,"information",["<byte>"]],"<Bps>":[["Bps"],1,"information_rate",["<byte>"],["<second>"]],"<bps>":[["bps"],.125,"information_rate",["<byte>"],["<second>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere>":[["VA","volt-ampere"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere-reactive>":[["var","Var","VAr","VAR","volt-ampere-reactive"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","becquerel","becquerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp","base-pair"],1,"counting",["<each>"]],"<nucleotide>":[["nt","nucleotide"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-9,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},T=["<meter>","<kilogram>","<second>","<mole>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],B="<1>",V=[B];function G(X,_e){var Oe=_e[3]||[],Ke=_e[4]||[];if(!I(_e[1]))throw new A(X+": Invalid unit definition. 'scalar' must be a number");Oe.forEach(function(it){if(void 0===C[it])throw new A(X+": Invalid unit definition. Unit "+it+" in 'numerator' is not recognized")}),Ke.forEach(function(it){if(void 0===C[it])throw new A(X+": Invalid unit definition. Unit "+it+" in 'denominator' is not recognized")})}var ae={},fe={},k={},O={},Y={};for(var q in C)if(C.hasOwnProperty(q)){var me=C[q];if("prefix"===me[2]){ae[q]=me[1];for(var re=0;re<me[0].length;re++)fe[me[0][re]]=q}else{G(q,me),k[q]={scalar:me[1],numerator:me[3],denominator:me[4]};for(var ue=0;ue<me[0].length;ue++)O[me[0][ue]]=q}Y[q]=me[0][0]}var we=["length","time","temperature","mass","current","substance","luminosity","currency","information","angle"];function tt(){if(this.signature)return this.signature;for(var X=Ze.call(this),_e=0;_e<X.length;_e++)X[_e]*=Math.pow(20,_e);return X.reduce(function(Ee,Oe){return Ee+Oe},0)}function Ze(){if(!this.isBase())return Ze.call(this.toBase());for(var X=new Array(we.length),_e=0;_e<X.length;_e++)X[_e]=0;for(var Ee,Oe,Ke=0;Ke<this.numerator.length;Ke++)(Ee=C[this.numerator[Ke]])&&(Oe=we.indexOf(Ee[2]))>=0&&(X[Oe]=X[Oe]+1);for(var it=0;it<this.denominator.length;it++)(Ee=C[this.denominator[it]])&&(Oe=we.indexOf(Ee[2]))>=0&&(X[Oe]=X[Oe]-1);return X}var S=new RegExp("^([+-]?\\s*(?:(?:\\d+(?:\\.\\d+)?)|(?:\\.\\d+))(?:[Ee][+-]?\\d+)?)?\\s*([^/]*)(?:/(.+))?$"),P="\\^|\\*{2}",F="[01234]",Z=new RegExp("([^ \\*\\d]+?)(?:"+P+")?(-?"+F+"(?![a-zA-Z]))"),ie=new RegExp("([^ \\*\\d]+?)(?:"+P+")?("+F+"(?![a-zA-Z]))");function Q(X){ee(X)||(X=X.toString()),X=X.trim();var _e=S.exec(X);if(!_e)throw new A(X+": Quantity not recognized");var Ee=_e[1];Ee?(Ee=Ee.replace(/\s/g,""),this.scalar=parseFloat(Ee)):this.scalar=1;for(var it,Ot,jt,Oe=_e[2],Ke=_e[3];_e=Z.exec(Oe);){if(it=parseFloat(_e[2]),isNaN(it))throw new A("Unit exponent is not a number");if(0===it&&!Le.test(_e[1]))throw new A("Unit not recognized");Ot=_e[1]+" ",jt="";for(var sn=0;sn<Math.abs(it);sn++)jt+=Ot;it>=0?Oe=Oe.replace(_e[0],jt):(Ke=Ke?Ke+jt:jt,Oe=Oe.replace(_e[0],""))}for(;_e=ie.exec(Ke);){if(it=parseFloat(_e[2]),isNaN(it))throw new A("Unit exponent is not a number");if(0===it&&!Le.test(_e[1]))throw new A("Unit not recognized");Ot=_e[1]+" ",jt="";for(var Rn=0;Rn<it;Rn++)jt+=Ot;Ke=Ke.replace(_e[0],jt)}Oe&&(this.numerator=xt(Oe.trim())),Ke&&(this.denominator=xt(Ke.trim()))}var ve="("+Object.keys(fe).sort(function(X,_e){return _e.length-X.length}).join("|")+")??("+Object.keys(O).sort(function(X,_e){return _e.length-X.length}).join("|")+")(?:\\b|$)",Le=new RegExp("^\\s*("+ve+"[\\s\\*]*)+$"),Pe=new RegExp(ve,"g"),Ne={};function xt(X){var _e=Ne[X];if(_e)return _e;var Ee,Oe=[];if(!Le.test(X))throw new A("Unit not recognized");for(;Ee=Pe.exec(X);)Oe.push(Ee.slice(1));return Oe=(Oe=(Oe=Oe.map(function(Ke){return fe[Ke[0]]?[fe[Ke[0]],O[Ke[1]]]:[O[Ke[1]]]})).reduce(function(Ke,it){return Ke.concat(it)},[])).filter(function(Ke){return Ke}),Ne[X]=Oe,Oe}function Be(X){return X instanceof ke}function ke(X,_e){if(Ae.apply(null,arguments),!Be(this))return new ke(X,_e);if(this.scalar=null,this.baseScalar=null,this.signature=null,this._conversionCache={},this.numerator=V,this.denominator=V,$e(X)?(this.scalar=X.scalar,this.numerator=X.numerator&&0!==X.numerator.length?X.numerator:V,this.denominator=X.denominator&&0!==X.denominator.length?X.denominator:V):_e?(Q.call(this,_e),this.scalar=X):Q.call(this,X),this.denominator.join("*").indexOf("temp")>=0)throw new A("Cannot divide with temperatures");if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw new A("Cannot multiply by temperatures");if(!_(this.denominator,V))throw new A("Cannot divide with temperatures")}if(this.initValue=X,et.call(this),this.isTemperature()&&this.baseScalar<0)throw new A("Temperatures must not be less than absolute zero")}function Ae(X,_e){if(_e){if(!I(X)||!ee(_e))throw new A("Only number accepted as initialization value when units are explicitly provided")}else if(!(ee(X)||I(X)||Be(X)||$e(X)))throw new A("Only string, number or quantity accepted as single initialization value")}function $e(X){return X&&"object"==typeof X&&X.hasOwnProperty("scalar")}function et(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=tt.call(this);else{var X=this.toBase();this.baseScalar=X.scalar,this.signature=X.signature}}var Ge={"-312078":"elastance","-312058":"resistance","-312038":"inductance","-152058":"potential","-152040":"magnetism","-152038":"magnetism","-7997":"specific_volume","-79":"snap","-59":"jolt","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity","-17":"volumetric_flow","-1":"wavenumber",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7941:"yank",7942:"power",7959:"pressure",7961:"force",7962:"energy",7979:"viscosity",7981:"momentum",7982:"angular_momentum",7997:"density",7998:"area_density",8e3:"mass",152020:"radiation_exposure",159999:"magnetism",16e4:"current",160020:"charge",312058:"conductance",312078:"capacitance",3199980:"activity",3199997:"molar_concentration",32e5:"substance",63999998:"illuminance",64e6:"luminous_power",128e7:"currency",25599999980:"information_rate",256e8:"information",511999999980:"angular_velocity",512e9:"angle"};function mt(X,_e){var Ee=_e.to(qe(X.units()));return ke({scalar:X.scalar+Ee.scalar,numerator:X.numerator,denominator:X.denominator})}function qe(X){if("tempK"===X)return"degK";if("tempC"===X)return"degC";if("tempF"===X)return"degF";if("tempR"===X)return"degR";throw new A("Unknown type for temp conversion from: "+X)}function Ue(X,_e){var Ke,Ee=function ze(X){var Ee,_e=X.units();if(_e.match(/(deg)[CFRK]/))Ee=X.baseScalar;else if("tempK"===_e)Ee=X.scalar;else if("tempC"===_e)Ee=X.scalar;else if("tempF"===_e)Ee=5*X.scalar/9;else{if("tempR"!==_e)throw new A("Unknown type for temp conversion from: "+_e);Ee=5*X.scalar/9}return ke({scalar:Ee,numerator:["<kelvin>"],denominator:V})}(X),Oe=_e.units();if("degK"===Oe)Ke=Ee.scalar;else if("degC"===Oe)Ke=Ee.scalar;else if("degF"===Oe)Ke=9*Ee.scalar/5;else{if("degR"!==Oe)throw new A("Unknown type for degree conversion to: "+Oe);Ke=9*Ee.scalar/5}return ke({scalar:Ke,numerator:_e.numerator,denominator:_e.denominator})}(ke.prototype={constructor:ke}).kind=function(){return Ge[this.signature.toString()]},E(ke.prototype,{isDegrees:function(){return(null===this.signature||400===this.signature)&&1===this.numerator.length&&_(this.denominator,V)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)}}),E(ke.prototype,{to:function(X){var _e,Ee;return null==X?this:ee(X)?(_e=this._conversionCache[X])?_e:(Ee=ke(X)).units()===this.units()?this:(this.isCompatible(Ee)?Ee=Ee.isTemperature()?function ht(X,_e){var Oe,Ee=_e.units();if("tempK"===Ee)Oe=X.baseScalar;else if("tempC"===Ee)Oe=X.baseScalar-273.15;else if("tempF"===Ee)Oe=9*X.baseScalar/5-459.67;else{if("tempR"!==Ee)throw new A("Unknown type for temp conversion to: "+Ee);Oe=9*X.baseScalar/5}return ke({scalar:Oe,numerator:_e.numerator,denominator:_e.denominator})}(this,Ee):Ee.isDegrees()?Ue(this,Ee):ke({scalar:w(this.baseScalar,Ee.baseScalar),numerator:Ee.numerator,denominator:Ee.denominator}):this.isInverse(Ee)?Ee=this.inverse().to(X):R(this.units(),Ee.units()),this._conversionCache[X]=Ee,Ee):this.to(X.units())},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return function dt(X){var Ee,_e=X.units();if(_e.match(/(deg)[CFRK]/))Ee=X.baseScalar;else if("tempK"===_e)Ee=X.scalar;else if("tempC"===_e)Ee=X.scalar+273.15;else if("tempF"===_e)Ee=5*(X.scalar+459.67)/9;else{if("tempR"!==_e)throw new A("Unknown type for temp conversion from: "+_e);Ee=5*X.scalar/9}return ke({scalar:Ee,numerator:["<temp-K>"],denominator:V})}(this);var X=pt[this.units()];return X||(X=function lt(X,_e){for(var it,Ee=[],Oe=[],Ke=1,Ot=0;Ot<X.length;Ot++)ae[it=X[Ot]]?Ke=g(Ke,ae[it]):k[it]&&(Ke*=k[it].scalar,k[it].numerator&&Ee.push(k[it].numerator),k[it].denominator&&Oe.push(k[it].denominator));for(var jt=0;jt<_e.length;jt++)ae[it=_e[jt]]?Ke/=ae[it]:k[it]&&(Ke/=k[it].scalar,k[it].numerator&&Oe.push(k[it].numerator),k[it].denominator&&Ee.push(k[it].denominator));return ke({scalar:Ke,numerator:Ee=Ee.reduce(function(sn,Rn){return sn.concat(Rn)},[]),denominator:Oe=Oe.reduce(function(sn,Rn){return sn.concat(Rn)},[])})}(this.numerator,this.denominator),pt[this.units()]=X),X.mul(this.scalar)},toFloat:function(){if(this.isUnitless())return this.scalar;throw new A("Can't convert to Float unless unitless.  Use Unit#scalar")},toPrec:function(X){if(ee(X)&&(X=ke(X)),I(X)&&(X=ke(X+" "+this.units())),this.isUnitless()?X.isUnitless()||R(this.units(),X.units()):X=X.to(this.units()),0===X.scalar)throw new A("Divide by zero");return ke(g(Math.round(this.scalar/X.scalar),X.scalar)+this.units())}});var pt={};function Gt(X,_e,Ee,Oe){function Ke(en){return en!==B}X=X.filter(Ke),Ee=Ee.filter(Ke),_e=_e.filter(Ke),Oe=Oe.filter(Ke);var it={};function Ot(en,an){for(var Bn,tn,mr,cn=0;cn<en.length;cn++)ae[en[cn]]?(Bn=en[cn+1],mr=ae[tn=en[cn]],cn++):(Bn=en[cn],tn=null,mr=1),Bn&&Bn!==B&&(it[Bn]?(it[Bn][0]+=an,it[Bn][1===an?3:4]*=w(mr,it[Bn][2]?ae[it[Bn][2]]:1)):it[Bn]=[an,Bn,tn,1,1])}Ot(X,1),Ot(_e,-1),Ot(Ee,1),Ot(Oe,-1);var jt=[],sn=[],Rn=1;for(var vi in it)if(it.hasOwnProperty(vi)){var vn,pn=it[vi];if(pn[0]>0)for(vn=0;vn<pn[0];vn++)jt.push(null===pn[2]?pn[1]:[pn[2],pn[1]]);else if(pn[0]<0)for(vn=0;vn<-pn[0];vn++)sn.push(null===pn[2]?pn[1]:[pn[2],pn[1]]);Rn*=w(pn[3],pn[4])}return 0===jt.length&&(jt=V),0===sn.length&&(sn=V),[jt=jt.reduce(function(en,an){return en.concat(an)},[]),sn=sn.reduce(function(en,an){return en.concat(an)},[]),Rn]}function rn(){}ke.parse=function Ce(X){if(!ee(X))throw new A("Argument should be a string");try{return this(X)}catch(_e){return null}},ke.getUnits=function ce(X){var _e,Ee=[],Oe=Object.keys(C);if(void 0===X)for(_e=0;_e<Oe.length;_e++)-1===["","prefix"].indexOf(C[Oe[_e]][2])&&Ee.push(Oe[_e].substr(1,Oe[_e].length-2));else{if(-1===this.getKinds().indexOf(X))throw new A("Kind not recognized");for(_e=0;_e<Oe.length;_e++)C[Oe[_e]][2]===X&&Ee.push(Oe[_e].substr(1,Oe[_e].length-2))}return Ee.sort(function(Ke,it){return Ke.toLowerCase()<it.toLowerCase()?-1:Ke.toLowerCase()>it.toLowerCase()?1:0})},ke.getAliases=function ye(X){if(!O[X])throw new A("Unit not recognized");return C[O[X]][0]},ke.mulSafe=g,ke.divSafe=w,ke.getKinds=function He(){return function b(X){var _e={};return X.filter(function(Ee){return!_e.hasOwnProperty(Ee)&&(_e[Ee]=!0)})}(Object.keys(Ge).map(function(X){return Ge[X]}))},ke.swiftConverter=function Ct(X,_e){var Ke,Ee=ke(X),Oe=ke(_e);return Ee.eq(Oe)?U:(Ke=Ee.isTemperature()?function(it){return Ee.mul(it).to(Oe).scalar}:function(it){return it*Ee.baseScalar/Oe.baseScalar},function(Ot){var jt,sn,Rn;if(Array.isArray(Ot)){for(sn=Ot.length,Rn=[],jt=0;jt<sn;jt++)Rn.push(Ke(Ot[jt]));return Rn}return Ke(Ot)})},ke.Error=A,E(ke.prototype,{add:function(X){if(ee(X)&&(X=ke(X)),this.isCompatible(X)||R(this.units(),X.units()),this.isTemperature()&&X.isTemperature())throw new A("Cannot add two temperatures");return this.isTemperature()?mt(this,X):X.isTemperature()?mt(X,this):ke({scalar:this.scalar+X.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function(X){if(ee(X)&&(X=ke(X)),this.isCompatible(X)||R(this.units(),X.units()),this.isTemperature()&&X.isTemperature())return function ut(X,_e){var Ee=X.units(),Oe=_e.to(Ee),Ke=ke(qe(Ee));return ke({scalar:X.scalar-Oe.scalar,numerator:Ke.numerator,denominator:Ke.denominator})}(this,X);if(this.isTemperature())return function yt(X,_e){var Ee=_e.to(qe(X.units()));return ke({scalar:X.scalar-Ee.scalar,numerator:X.numerator,denominator:X.denominator})}(this,X);if(X.isTemperature())throw new A("Cannot subtract a temperature from a differential degree unit");return ke({scalar:this.scalar-X.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function(X){if(I(X))return ke({scalar:g(this.scalar,X),numerator:this.numerator,denominator:this.denominator});if(ee(X)&&(X=ke(X)),(this.isTemperature()||X.isTemperature())&&!this.isUnitless()&&!X.isUnitless())throw new A("Cannot multiply by temperatures");var _e=this,Ee=X;_e.isCompatible(Ee)&&400!==_e.signature&&(Ee=Ee.to(_e));var Oe=Gt(_e.numerator,_e.denominator,Ee.numerator,Ee.denominator);return ke({scalar:g(_e.scalar,Ee.scalar,Oe[2]),numerator:Oe[0],denominator:Oe[1]})},div:function(X){if(I(X)){if(0===X)throw new A("Divide by zero");return ke({scalar:this.scalar/X,numerator:this.numerator,denominator:this.denominator})}if(ee(X)&&(X=ke(X)),0===X.scalar)throw new A("Divide by zero");if(X.isTemperature())throw new A("Cannot divide with temperatures");if(this.isTemperature()&&!X.isUnitless())throw new A("Cannot divide with temperatures");var _e=this,Ee=X;_e.isCompatible(Ee)&&400!==_e.signature&&(Ee=Ee.to(_e));var Oe=Gt(_e.numerator,_e.denominator,Ee.denominator,Ee.numerator);return ke({scalar:g(_e.scalar,Oe[2])/Ee.scalar,numerator:Oe[0],denominator:Oe[1]})},inverse:function(){if(this.isTemperature())throw new A("Cannot divide with temperatures");if(0===this.scalar)throw new A("Divide by zero");return ke({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})}}),E(ke.prototype,{eq:function(X){return 0===this.compareTo(X)},lt:function(X){return-1===this.compareTo(X)},lte:function(X){return this.eq(X)||this.lt(X)},gt:function(X){return 1===this.compareTo(X)},gte:function(X){return this.eq(X)||this.gt(X)},compareTo:function(X){return ee(X)?this.compareTo(ke(X)):(this.isCompatible(X)||R(this.units(),X.units()),this.baseScalar<X.baseScalar?-1:this.baseScalar===X.baseScalar?0:this.baseScalar>X.baseScalar?1:void 0)},same:function(X){return this.scalar===X.scalar&&this.units()===X.units()}}),E(ke.prototype,{isUnitless:function(){return[this.numerator,this.denominator].every(function(X){return _(X,V)})},isCompatible:function(X){return ee(X)?this.isCompatible(ke(X)):!(!Be(X)||void 0===X.signature)&&this.signature===X.signature},isInverse:function(X){return this.inverse().isCompatible(X)},isBase:function(){return void 0!==this._isBase?this._isBase:this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?(this._isBase=!0,this._isBase):(this.numerator.concat(this.denominator).forEach(function(X){X!==B&&-1===T.indexOf(X)&&(this._isBase=!1)},this),!1===this._isBase||(this._isBase=!0),this._isBase)}}),rn.prototype.get=function(X){return arguments.length>1&&(X=Array.apply(null,arguments)),X.reduce(function(_e,Ee,Oe){if(_e){var Ke=_e[Ee];return Oe===X.length-1?Ke?Ke.data:void 0:Ke}},this)},rn.prototype.set=function(X,_e){return arguments.length>2&&(X=Array.prototype.slice.call(arguments,0,-1),_e=arguments[arguments.length-1]),X.reduce(function(Ee,Oe,Ke){var it=Ee[Oe];return void 0===it&&(it=Ee[Oe]={}),Ke===X.length-1?(it.data=_e,_e):it},this)},ke.formatter=function vt(X,_e){return(X+" "+_e).trim()},E(ke.prototype,{units:function(){if(void 0!==this._units)return this._units;var X=_(this.numerator,V),_e=_(this.denominator,V);if(X&&_e)return this._units="",this._units;var Ee=dn(this.numerator),Oe=dn(this.denominator);return this._units=Ee+(_e?"":"/"+Oe),this._units},toString:function(X,_e){var Ee;if(I(X))Ee=this.units(),_e=X;else if(ee(X))Ee=X;else if(Be(X))return this.toPrec(X).toString(_e);var Oe=this.to(Ee);return((void 0!==_e?M(Oe.scalar,_e):Oe.scalar)+" "+Oe.units()).trim()},format:function(X,_e){1===arguments.length&&"function"==typeof X&&(_e=X,X=void 0),_e=_e||ke.formatter;var Ee=this.to(X);return _e.call(this,Ee.scalar,Ee.units())}});var _t=new rn;function dn(X){var _e=_t.get(X);return _e||(_e=_(X,V)?"1":function Gn(X){return X.reduce(function(Ee,Oe){var Ke=Ee[Oe];return Ke||Ee.push(Ke=Ee[Oe]=[Oe,0]),Ke[1]++,Ee},[]).map(function(Ee){return Ee[0]+(Ee[1]>1?Ee[1]:"")})}(function xn(X){for(var Ee,_e=[],Ke=0;Ke<X.length;Ke++)ae[Ee=X[Ke]]?(_e.push(Y[Ee]+Y[X[Ke+1]]),Ke++):_e.push(Y[Ee]);return _e}(X)).join("*"),_t.set(X,_e),_e)}return ke.version="1.7.6",ke}()},3211:se=>{!function(){function ee(U){for(var b=0,_=U.length-1,E=void 0,g=void 0,w=void 0,M=I(b,_);;){if(_<=b)return U[M];if(_==b+1)return U[b]>U[_]&&D(U,b,_),U[M];for(U[E=I(b,_)]>U[_]&&D(U,E,_),U[b]>U[_]&&D(U,b,_),U[E]>U[b]&&D(U,E,b),D(U,E,b+1),g=b+1,w=_;;){do{g++}while(U[b]>U[g]);do{w--}while(U[w]>U[b]);if(w<g)break;D(U,g,w)}D(U,b,w),w<=M&&(b=g),w>=M&&(_=w-1)}}var D=function(b,_,E){var g;return b[_]=(g=[b[E],b[_]])[0],b[E]=g[1],g},I=function(b,_){return~~((b+_)/2)};se.exports?se.exports=ee:window.median=ee}()},7596:se=>{"use strict";function D(I){this.value=I,this.parent=null,this.rank=0}se.exports=class ee{constructor(){this.nodes=new Map}add(U){var b=this.nodes.get(U);return b||(b=new D(U),this.nodes.set(U,b)),b}union(U,b){const _=this.find(U),E=this.find(b);_!==E&&(_.rank<E.rank?_.parent=E:_.rank>E.rank?E.parent=_:(E.parent=_,_.rank++))}find(U){for(var b=U;null!==b.parent;)b=b.parent;for(var _=U;null!==_.parent;){var E=_;_=_.parent,E.parent=b}return b}connected(U,b){return this.find(U)===this.find(b)}}},4274:(se,ee,D)=>{"use strict";function I(b,_){let E=0;for(let g=0;g<b.length;g++)E+=(b[g]-_[g])*(b[g]-_[g]);return E}function U(b,_){return Math.sqrt(I(b,_))}D.r(ee),D.d(ee,{euclidean:()=>U,squaredEuclidean:()=>I})},9663:(se,ee,D)=>{"use strict";var I=D(8827);se.exports={DEBUG:!1,ifft2DArray:function(b,_,E){var g=new Array(_*E),w=_/2,M=2*(E-1);I.init(w);for(var y={re:new Array(w),im:new Array(w)},A=0;A<E;A++){for(var R=w-1;R>=0;R--)y.re[R]=b[2*R*E+A],y.im[R]=b[(2*R+1)*E+A];for(I.bt(y.re,y.im),R=w-1;R>=0;R--)g[2*R*E+A]=y.re[R],g[(2*R+1)*E+A]=y.im[R]}var C=new Array(w*M);I.init(M);var T={re:new Array(M),im:new Array(M)},B=M*w;for(R=0;R<_;R+=2){for(T.re[0]=g[R*E],T.im[0]=g[(R+1)*E],A=1;A<E;A++)T.re[A]=g[R*E+A],T.im[A]=g[(R+1)*E+A],T.re[M-A]=g[R*E+A],T.im[M-A]=-g[(R+1)*E+A];I.bt(T.re,T.im);var V=R/2*M;for(A=M-1;A>=0;A--)C[V+A]=T.re[A]/B}return C},fft2DArray:function(b,_,E,g){Object.assign({},{inplace:!0});var M=E/2+1,y=2*_,A=new Array(y*M);I.init(E);for(var B,V,G,ae,fe,R={re:new Array(E),im:new Array(E)},C={re:new Array(E),im:new Array(E)},T={re:new Array(E),im:new Array(E)},k=0;k<_/2;k++){R.re=b.slice(B=2*k*E,B+E),R.im=b.slice(B=(2*k+1)*E,B+E),I.fft1d(R.re,R.im),this.reconstructTwoRealFFT(R,C,T),V=4*k*M,G=(4*k+1)*M,ae=(4*k+2)*M,fe=(4*k+3)*M;for(var O=M-1;O>=0;O--)A[V+O]=C.re[O],A[G+O]=C.im[O],A[ae+O]=T.re[O],A[fe+O]=T.im[O]}C=null,T=null;var Y=new Array(y*M);I.init(_);for(var q={re:new Array(_),im:new Array(_)},me=M-1;me>=0;me--){for(k=_-1;k>=0;k--)q.re[k]=A[2*k*M+me],q.im[k]=A[(2*k+1)*M+me],isNaN(q.re[k])&&(q.re[k]=0),isNaN(q.im[k])&&(q.im[k]=0);for(I.fft1d(q.re,q.im),k=_-1;k>=0;k--)Y[2*k*M+me]=q.re[k],Y[(2*k+1)*M+me]=q.im[k]}return Y},reconstructTwoRealFFT:function(b,_,E){var g=b.re.length;_.re[0]=b.re[0],_.im[0]=0,E.re[0]=b.im[0],E.im[0]=0;for(var w,M,y,A,R,C=g/2;C>0;C--)w=.5*(b.re[C]-b.re[R=g-C]),y=.5*(b.im[C]-b.im[R]),A=.5*(b.im[C]+b.im[R]),_.re[C]=M=.5*(b.re[C]+b.re[R]),_.im[C]=y,_.re[R]=M,_.im[R]=-y,E.re[C]=A,E.im[C]=-w,E.re[R]=A,E.im[R]=w},convolute2DI:function(b,_,E,g){for(var M,y=0;y<E/2;y++)for(var A=0;A<g;A++)M=b[2*y*g+A]*_[(2*y+1)*g+A]+b[(2*y+1)*g+A]*_[2*y*g+A],b[2*y*g+A]=b[2*y*g+A]*_[2*y*g+A]-b[(2*y+1)*g+A]*_[(2*y+1)*g+A],b[(2*y+1)*g+A]=M},convolute:function(b,_,E,g,w){for(var M=new Array(g*E),y=0;y<E*g;y++)M[y]=b[y];M=this.fft2DArray(M,E,g);var A=_.length,R=_[0].length,C=new Array(g*E);for(y=0;y<g*E;y++)C[y]=0;for(var T,V=Math.floor((A-1)/2),G=Math.floor((R-1)/2),ae=0;ae<A;ae++){T=(ae-V+E)%E;for(var fe=0;fe<R;fe++)C[T*g+(fe-G+g)%g]=_[ae][fe]}C=this.fft2DArray(C,E,g);var k=2*E,O=g/2+1;return this.convolute2DI(M,C,k,O),this.ifft2DArray(M,k,O)},toRadix2:function(b,_,E){var g,w,M,y,A=E,R=_;if(0===E||0!=(E&E-1)){for(A=0;E>>++A!=0;);A=1<<A}if(0===_||0!=(_&_-1)){for(R=0;_>>++R!=0;);R=1<<R}if(R==_&&A==E)return{data:b,rows:_,cols:E};var B=new Array(R*A),V=Math.floor((R-_)/2)-_,G=Math.floor((A-E)/2)-E;for(g=0;g<R;g++)for(M=g*A,y=(g-V)%_*E,w=0;w<A;w++)B[M+w]=b[y+(w-G)%E];return{data:B,rows:R,cols:A}},crop:function(b,_,E,g,w,M){if(_==g&&E==w)return b;Object.assign({},M);var T,B,V,G,A=new Array(w*g),R=Math.floor((_-g)/2),C=Math.floor((E-w)/2);for(V=0;V<g;V++)for(T=V*w,B=(V+R)*E,G=0;G<w;G++)A[T+G]=b[B+(G+C)];return A}}},8827:function(se,ee){(function(){var I;(I=ee).toString=function(){return"version 0.3.0, released 2013-03"};for(var b=0,_=null,E=null,g={init:function(y){if(0===y||0!=(y&y-1))throw new Error("init: radix-2 required");b=y,g._initArray(),g._makeBitReversalTable(),g._makeCosSinTable()},fft1d:function(y,A){g.fft(y,A,1)},ifft1d:function(y,A){var R=1/b;g.fft(y,A,-1);for(var C=0;C<b;C++)y[C]*=R,A[C]*=R},bt1d:function(y,A){g.fft(y,A,-1)},fft2d:function(y,A){for(var R=[],C=[],T=0,B=0;B<b;B++){T=B*b;for(var V=0;V<b;V++)R[V]=y[V+T],C[V]=A[V+T];g.fft1d(R,C);for(var G=0;G<b;G++)y[G+T]=R[G],A[G+T]=C[G]}for(var ae=0;ae<b;ae++){for(var fe=0;fe<b;fe++)R[fe]=y[T=ae+fe*b],C[fe]=A[T];g.fft1d(R,C);for(var k=0;k<b;k++)y[T=ae+k*b]=R[k],A[T]=C[k]}},ifft2d:function(y,A){for(var R=[],C=[],T=0,B=0;B<b;B++){T=B*b;for(var V=0;V<b;V++)R[V]=y[V+T],C[V]=A[V+T];g.ifft1d(R,C);for(var G=0;G<b;G++)y[G+T]=R[G],A[G+T]=C[G]}for(var ae=0;ae<b;ae++){for(var fe=0;fe<b;fe++)R[fe]=y[T=ae+fe*b],C[fe]=A[T];g.ifft1d(R,C);for(var k=0;k<b;k++)y[T=ae+k*b]=R[k],A[T]=C[k]}},fft:function(y,A,R){for(var C,T,B,V,G,ae,fe,k,O,Y=b>>2,q=0;q<b;q++)q<(V=_[q])&&(G=y[q],y[q]=y[V],y[V]=G,G=A[q],A[q]=A[V],A[V]=G);for(var me=1;me<b;me<<=1){T=0,C=b/(me<<1);for(var re=0;re<me;re++){ae=E[T+Y],fe=R*E[T];for(var ue=re;ue<b;ue+=me<<1)O=ae*A[B=ue+me]-fe*y[B],y[B]=y[ue]-(k=ae*y[B]+fe*A[B]),y[ue]+=k,A[B]=A[ue]-O,A[ue]+=O;T+=C}}},_initArray:function(){_="undefined"!=typeof Uint32Array?new Uint32Array(b):[],E="undefined"!=typeof Float64Array?new Float64Array(1.25*b):[]},_paddingZero:function(){},_makeBitReversalTable:function(){var y=0,A=0,R=0;for(_[0]=0;++y<b;){for(R=b>>1;R<=A;)A-=R,R>>=1;_[y]=A+=R}},_makeCosSinTable:function(){var y=b>>1,A=b>>2,R=b>>3,C=y+A,T=Math.sin(Math.PI/b),B=2*T*T,V=Math.sqrt(B*(2-B)),G=E[A]=1,ae=E[0]=0;T=2*B;for(var fe=1;fe<R;fe++)B+=T*(G-=B),V-=T*(ae+=V),E[fe]=ae,E[A-fe]=G;0!==R&&(E[R]=Math.sqrt(.5));for(var k=0;k<A;k++)E[y-k]=E[k];for(var O=0;O<C;O++)E[O+y]=-E[O]}},w=["init","fft1d","ifft1d","fft2d","ifft2d"],M=0;M<w.length;M++)I[w[M]]=g[w[M]];return I.bt=g.bt1d,I.fft=g.fft1d,I.ifft=g.ifft1d,I}).call(this)},1848:(se,ee,D)=>{"use strict";ee.FFTUtils=D(9663),D(8827)},738:(se,ee,D)=>{"use strict";const{squaredEuclidean:I}=D(4274),U={sigma:1};se.exports=class b{constructor(E){E=Object.assign({},U,E),this.sigma=E.sigma,this.divisor=2*E.sigma*E.sigma}compute(E,g){const w=I(E,g);return Math.exp(-w/this.divisor)}}},4049:se=>{"use strict";const ee={degree:1,constant:1,scale:1};se.exports=class D{constructor(U){U=Object.assign({},ee,U),this.degree=U.degree,this.constant=U.constant,this.scale=U.scale}compute(U,b){for(var _=0,E=0;E<U.length;E++)_+=U[E]*b[E];return Math.pow(this.scale*_+this.constant,this.degree)}}},8241:se=>{"use strict";const ee={alpha:.01,constant:-Math.E};se.exports=class D{constructor(U){U=Object.assign({},ee,U),this.alpha=U.alpha,this.constant=U.constant}compute(U,b){for(var _=0,E=0;E<U.length;E++)_+=U[E]*b[E];return Math.tanh(this.alpha*_+this.constant)}}},9108:(se,ee,D)=>{"use strict";const{Matrix:I,MatrixTransposeView:U}=D(6582),b=D(738),_=D(4049),E=D(8241),g=D(1529),w=D(3749),M=D(2548),y=D(1940),T={gaussian:b,rbf:b,polynomial:_,poly:_,anova:g,cauchy:w,exponential:M,histogram:y,min:y,laplacian:D(1673),multiquadratic:D(3100),rational:D(2791),sigmoid:E,mlp:E};se.exports=class B{constructor(G,ae){if(this.kernelType=G,"linear"!==G)if("string"==typeof G){G=G.toLowerCase();var fe=T[G];if(!fe)throw new Error(`unsupported kernel type: ${G}`);this.kernelFunction=new fe(ae)}else{if("object"!=typeof G||"function"!=typeof G.compute)throw new TypeError("first argument must be a valid kernel type or instance");this.kernelFunction=G}}compute(G,ae){if(G=I.checkMatrix(G),ae=void 0===ae?G:I.checkMatrix(ae),"linear"===this.kernelType)return G.mmul(new U(ae));const fe=new I(G.rows,ae.rows);if(G===ae)for(let k=0;k<G.rows;k++)for(let O=k;O<G.rows;O++){const Y=this.kernelFunction.compute(G.getRow(k),G.getRow(O));fe.set(k,O,Y),fe.set(O,k,Y)}else for(let k=0;k<G.rows;k++)for(let O=0;O<ae.rows;O++)fe.set(k,O,this.kernelFunction.compute(G.getRow(k),ae.getRow(O)));return fe}}},1529:se=>{"use strict";const ee={sigma:1,degree:1};se.exports=class D{constructor(U){U=Object.assign({},ee,U),this.sigma=U.sigma,this.degree=U.degree}compute(U,b){for(var _=0,E=Math.min(U.length,b.length),g=1;g<=E;++g)_+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(U[g-1],g)-Math.pow(b[g-1],g),2)),this.degree);return _}}},3749:(se,ee,D)=>{"use strict";const{squaredEuclidean:I}=D(4274),U={sigma:1};se.exports=class b{constructor(E){E=Object.assign({},U,E),this.sigma=E.sigma}compute(E,g){return 1/(1+I(E,g)/(this.sigma*this.sigma))}}},2548:(se,ee,D)=>{"use strict";const{euclidean:I}=D(4274),U={sigma:1};se.exports=class b{constructor(E){E=Object.assign({},U,E),this.sigma=E.sigma,this.divisor=2*E.sigma*E.sigma}compute(E,g){const w=I(E,g);return Math.exp(-w/this.divisor)}}},1940:se=>{"use strict";se.exports=class ee{compute(I,U){for(var b=Math.min(I.length,U.length),_=0,E=0;E<b;++E)_+=Math.min(I[E],U[E]);return _}}},1673:(se,ee,D)=>{"use strict";const{euclidean:I}=D(4274),U={sigma:1};se.exports=class b{constructor(E){E=Object.assign({},U,E),this.sigma=E.sigma}compute(E,g){const w=I(E,g);return Math.exp(-w/this.sigma)}}},3100:(se,ee,D)=>{"use strict";const{squaredEuclidean:I}=D(4274),U={constant:1};se.exports=class b{constructor(E){E=Object.assign({},U,E),this.constant=E.constant}compute(E,g){return Math.sqrt(I(E,g)+this.constant*this.constant)}}},2791:(se,ee,D)=>{"use strict";const{squaredEuclidean:I}=D(4274),U={constant:1};se.exports=class b{constructor(E){E=Object.assign({},U,E),this.constant=E.constant}compute(E,g){const w=I(E,g);return 1-w/(w+this.constant)}}},221:(se,ee,D)=>{var I=D(1848).FFTUtils;function E(g){var M,y,w=g;if("number"!=typeof g[0]){M=g.length,y=g[0].length,w=new Array(M*y);for(var A=0;A<M;A++)for(var R=0;R<y;R++)w[A*y+R]=g[A][R]}else{var C=Math.sqrt(g.length);Number.isInteger(C)&&(M=C,y=C)}return{data:w,rows:M,cols:y}}se.exports={fft:function U(g,w,M){var C,T,y=E(g),A=y.data,R=Object.assign({normalize:!1,divisor:1,rows:y.rows,cols:y.cols},M);if(!R.rows||!R.cols)throw new Error("Invalid number of rows or columns "+C+" "+T);C=R.rows,T=R.cols;var V,G,B=R.divisor,ae=w.length,fe=w[0].length;if(R.normalize)for(B=0,V=0;V<ae;V++)for(G=0;G<fe;G++)B+=w[V][G];if(0===B)throw new RangeError("convolution: The divisor is equal to zero");var k=I.toRadix2(A,C,T),O=I.convolute(k.data,w,k.rows,k.cols);if(O=I.crop(O,k.rows,k.cols,C,T),0!=B&&1!=B)for(V=0;V<O.length;V++)O[V]/=B;return O},direct:function b(g,w,M){var C,T,y=E(g),A=y.data,R=Object.assign({normalize:!1,divisor:1,rows:y.rows,cols:y.cols},M);if(!R.rows||!R.cols)throw new Error("Invalid number of rows or columns "+C+" "+T);C=R.rows,T=R.cols;var ae,fe,k,O,q,B=R.divisor,V=w.length,G=w[0].length;if(R.normalize)for(B=0,ae=0;ae<V;ae++)for(fe=0;fe<G;fe++)B+=w[ae][fe];if(0===B)throw new RangeError("convolution: The divisor is equal to zero");var ce=new Array(C*T),ye=Math.floor(V/2),we=Math.floor(G/2);for(O=0;O<C;O++)for(k=0;k<T;k++){for(q=0,fe=0;fe<V;fe++)for(ae=0;ae<G;ae++)q+=A[(O+fe-ye+C)%C*T+(k+ae-we+T)%T]*w[V-fe-1][G-ae-1];ce[O*T+k]=q/B}return ce},kernelFactory:{LoG:function _(g,w,M){var y=1e3;M&&M.factor&&(y=M.factor);var R,C,T,B,A=new Array(w);y*=-1;var G=(w-1)/2,ae=2*g*g;for(R=0;R<w;R++)for(A[R]=new Array(w),B=(R-G)*(R-G),C=0;C<w;C++)T=-((C-G)*(C-G)+B)/ae,A[R][C]=Math.round(y*(1+T)*Math.exp(T));return A}},matrix2Array:E}},2739:(se,ee,D)=>{"use strict";D.d(ee,{Z:()=>b});var I=D(4466),U=D(3209);class b{constructor(E){let R,C,T,B,V,G,ae,fe,k,g=(E=U.Z.checkMatrix(E)).clone(),w=g.rows,M=g.columns,y=new Float64Array(w),A=1;for(R=0;R<w;R++)y[R]=R;for(fe=new Float64Array(w),C=0;C<M;C++){for(R=0;R<w;R++)fe[R]=g.get(R,C);for(R=0;R<w;R++){for(k=Math.min(R,C),V=0,T=0;T<k;T++)V+=g.get(R,T)*fe[T];fe[R]-=V,g.set(R,C,fe[R])}for(B=C,R=C+1;R<w;R++)Math.abs(fe[R])>Math.abs(fe[B])&&(B=R);if(B!==C){for(T=0;T<M;T++)G=g.get(B,T),g.set(B,T,g.get(C,T)),g.set(C,T,G);ae=y[B],y[B]=y[C],y[C]=ae,A=-A}if(C<w&&0!==g.get(C,C))for(R=C+1;R<w;R++)g.set(R,C,g.get(R,C)/g.get(C,C))}this.LU=g,this.pivotVector=y,this.pivotSign=A}isSingular(){let E=this.LU,g=E.columns;for(let w=0;w<g;w++)if(0===E.get(w,w))return!0;return!1}solve(E){E=I.Z.checkMatrix(E);let g=this.LU;if(g.rows!==E.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let R,C,T,M=E.columns,y=E.subMatrixRow(this.pivotVector,0,M-1),A=g.columns;for(T=0;T<A;T++)for(R=T+1;R<A;R++)for(C=0;C<M;C++)y.set(R,C,y.get(R,C)-y.get(T,C)*g.get(R,T));for(T=A-1;T>=0;T--){for(C=0;C<M;C++)y.set(T,C,y.get(T,C)/g.get(T,T));for(R=0;R<T;R++)for(C=0;C<M;C++)y.set(R,C,y.get(R,C)-y.get(T,C)*g.get(R,T))}return y}get determinant(){let E=this.LU;if(!E.isSquare())throw new Error("Matrix must be square");let g=this.pivotSign,w=E.columns;for(let M=0;M<w;M++)g*=E.get(M,M);return g}get lowerTriangularMatrix(){let E=this.LU,g=E.rows,w=E.columns,M=new I.Z(g,w);for(let y=0;y<g;y++)for(let A=0;A<w;A++)M.set(y,A,y>A?E.get(y,A):y===A?1:0);return M}get upperTriangularMatrix(){let E=this.LU,g=E.rows,w=E.columns,M=new I.Z(g,w);for(let y=0;y<g;y++)for(let A=0;A<w;A++)M.set(y,A,y<=A?E.get(y,A):0);return M}get pivotPermutationVector(){return Array.from(this.pivotVector)}}},5740:(se,ee,D)=>{"use strict";D.d(ee,{Z:()=>_});var I=D(4466),U=D(3209),b=D(7002);class _{constructor(g){let R,C,T,B,w=(g=U.Z.checkMatrix(g)).clone(),M=g.rows,y=g.columns,A=new Float64Array(y);for(T=0;T<y;T++){let V=0;for(R=T;R<M;R++)V=(0,b.G)(V,w.get(R,T));if(0!==V){for(w.get(T,T)<0&&(V=-V),R=T;R<M;R++)w.set(R,T,w.get(R,T)/V);for(w.set(T,T,w.get(T,T)+1),C=T+1;C<y;C++){for(B=0,R=T;R<M;R++)B+=w.get(R,T)*w.get(R,C);for(B=-B/w.get(T,T),R=T;R<M;R++)w.set(R,C,w.get(R,C)+B*w.get(R,T))}}A[T]=-V}this.QR=w,this.Rdiag=A}solve(g){g=I.Z.checkMatrix(g);let w=this.QR,M=w.rows;if(g.rows!==M)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let C,T,B,V,y=g.columns,A=g.clone(),R=w.columns;for(B=0;B<R;B++)for(T=0;T<y;T++){for(V=0,C=B;C<M;C++)V+=w.get(C,B)*A.get(C,T);for(V=-V/w.get(B,B),C=B;C<M;C++)A.set(C,T,A.get(C,T)+V*w.get(C,B))}for(B=R-1;B>=0;B--){for(T=0;T<y;T++)A.set(B,T,A.get(B,T)/this.Rdiag[B]);for(C=0;C<B;C++)for(T=0;T<y;T++)A.set(C,T,A.get(C,T)-A.get(B,T)*w.get(C,B))}return A.subMatrix(0,R-1,0,y-1)}isFullRank(){let g=this.QR.columns;for(let w=0;w<g;w++)if(0===this.Rdiag[w])return!1;return!0}get upperTriangularMatrix(){let y,A,g=this.QR,w=g.columns,M=new I.Z(w,w);for(y=0;y<w;y++)for(A=0;A<w;A++)M.set(y,A,y<A?g.get(y,A):y===A?this.Rdiag[y]:0);return M}get orthogonalMatrix(){let A,R,C,T,g=this.QR,w=g.rows,M=g.columns,y=new I.Z(w,M);for(C=M-1;C>=0;C--){for(A=0;A<w;A++)y.set(A,C,0);for(y.set(C,C,1),R=C;R<M;R++)if(0!==g.get(C,C)){for(T=0,A=C;A<w;A++)T+=g.get(A,C)*y.get(A,R);for(T=-T/g.get(C,C),A=C;A<w;A++)y.set(A,R,y.get(A,R)+T*g.get(A,C))}}return y}}},6193:(se,ee,D)=>{"use strict";D.d(ee,{Z:()=>_});var I=D(4466),U=D(3209),b=D(7002);class _{constructor(g,w={}){if((g=U.Z.checkMatrix(g)).isEmpty())throw new Error("Matrix must be non-empty");let M=g.rows,y=g.columns;const{computeLeftSingularVectors:A=!0,computeRightSingularVectors:R=!0,autoTranspose:C=!1}=w;let G,T=Boolean(A),B=Boolean(R),V=!1;if(M<y)if(C){G=g.transpose(),M=G.rows,y=G.columns,V=!0;let z=T;T=B,B=z}else G=g.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else G=g.clone();let ae=Math.min(M,y),fe=Math.min(M+1,y),k=new Float64Array(fe),O=new I.Z(M,ae),Y=new I.Z(y,y),q=new Float64Array(y),me=new Float64Array(M),re=new Float64Array(fe);for(let z=0;z<fe;z++)re[z]=z;let ue=Math.min(M-1,y),ce=Math.max(0,Math.min(y-2,M)),ye=Math.max(ue,ce);for(let z=0;z<ye;z++){if(z<ue){k[z]=0;for(let le=z;le<M;le++)k[z]=(0,b.G)(k[z],G.get(le,z));if(0!==k[z]){G.get(z,z)<0&&(k[z]=-k[z]);for(let le=z;le<M;le++)G.set(le,z,G.get(le,z)/k[z]);G.set(z,z,G.get(z,z)+1)}k[z]=-k[z]}for(let le=z+1;le<y;le++){if(z<ue&&0!==k[z]){let ge=0;for(let N=z;N<M;N++)ge+=G.get(N,z)*G.get(N,le);ge=-ge/G.get(z,z);for(let N=z;N<M;N++)G.set(N,le,G.get(N,le)+ge*G.get(N,z))}q[le]=G.get(z,le)}if(T&&z<ue)for(let le=z;le<M;le++)O.set(le,z,G.get(le,z));if(z<ce){q[z]=0;for(let le=z+1;le<y;le++)q[z]=(0,b.G)(q[z],q[le]);if(0!==q[z]){q[z+1]<0&&(q[z]=0-q[z]);for(let le=z+1;le<y;le++)q[le]/=q[z];q[z+1]+=1}if(q[z]=-q[z],z+1<M&&0!==q[z]){for(let le=z+1;le<M;le++)me[le]=0;for(let le=z+1;le<M;le++)for(let ge=z+1;ge<y;ge++)me[le]+=q[ge]*G.get(le,ge);for(let le=z+1;le<y;le++){let ge=-q[le]/q[z+1];for(let N=z+1;N<M;N++)G.set(N,le,G.get(N,le)+ge*me[N])}}if(B)for(let le=z+1;le<y;le++)Y.set(le,z,q[le])}}let we=Math.min(y,M+1);if(ue<y&&(k[ue]=G.get(ue,ue)),M<we&&(k[we-1]=0),ce+1<we&&(q[ce]=G.get(ce,we-1)),q[we-1]=0,T){for(let z=ue;z<ae;z++){for(let le=0;le<M;le++)O.set(le,z,0);O.set(z,z,1)}for(let z=ue-1;z>=0;z--)if(0!==k[z]){for(let le=z+1;le<ae;le++){let ge=0;for(let N=z;N<M;N++)ge+=O.get(N,z)*O.get(N,le);ge=-ge/O.get(z,z);for(let N=z;N<M;N++)O.set(N,le,O.get(N,le)+ge*O.get(N,z))}for(let le=z;le<M;le++)O.set(le,z,-O.get(le,z));O.set(z,z,1+O.get(z,z));for(let le=0;le<z-1;le++)O.set(le,z,0)}else{for(let le=0;le<M;le++)O.set(le,z,0);O.set(z,z,1)}}if(B)for(let z=y-1;z>=0;z--){if(z<ce&&0!==q[z])for(let le=z+1;le<y;le++){let ge=0;for(let N=z+1;N<y;N++)ge+=Y.get(N,z)*Y.get(N,le);ge=-ge/Y.get(z+1,z);for(let N=z+1;N<y;N++)Y.set(N,le,Y.get(N,le)+ge*Y.get(N,z))}for(let le=0;le<y;le++)Y.set(le,z,0);Y.set(z,z,1)}let tt=we-1,Ze=0,je=Number.EPSILON;for(;we>0;){let z,le;for(z=we-2;z>=-1&&-1!==z;z--){const ge=Number.MIN_VALUE+je*Math.abs(k[z]+Math.abs(k[z+1]));if(Math.abs(q[z])<=ge||Number.isNaN(q[z])){q[z]=0;break}}if(z===we-2)le=4;else{let ge;for(ge=we-1;ge>=z&&ge!==z;ge--){let N=(ge!==we?Math.abs(q[ge]):0)+(ge!==z+1?Math.abs(q[ge-1]):0);if(Math.abs(k[ge])<=je*N){k[ge]=0;break}}ge===z?le=3:ge===we-1?le=1:(le=2,z=ge)}switch(z++,le){case 1:{let ge=q[we-2];q[we-2]=0;for(let N=we-2;N>=z;N--){let v=(0,b.G)(k[N],ge),p=k[N]/v,c=ge/v;if(k[N]=v,N!==z&&(ge=-c*q[N-1],q[N-1]=p*q[N-1]),B)for(let f=0;f<y;f++)v=p*Y.get(f,N)+c*Y.get(f,we-1),Y.set(f,we-1,-c*Y.get(f,N)+p*Y.get(f,we-1)),Y.set(f,N,v)}break}case 2:{let ge=q[z-1];q[z-1]=0;for(let N=z;N<we;N++){let v=(0,b.G)(k[N],ge),p=k[N]/v,c=ge/v;if(k[N]=v,ge=-c*q[N],q[N]=p*q[N],T)for(let f=0;f<M;f++)v=p*O.get(f,N)+c*O.get(f,z-1),O.set(f,z-1,-c*O.get(f,N)+p*O.get(f,z-1)),O.set(f,N,v)}break}case 3:{const ge=Math.max(Math.abs(k[we-1]),Math.abs(k[we-2]),Math.abs(q[we-2]),Math.abs(k[z]),Math.abs(q[z])),N=k[we-1]/ge,v=k[we-2]/ge,p=q[we-2]/ge,c=k[z]/ge,f=q[z]/ge,S=((v+N)*(v-N)+p*p)/2,P=N*p*(N*p);let F=0;(0!==S||0!==P)&&(F=S<0?0-Math.sqrt(S*S+P):Math.sqrt(S*S+P),F=P/(S+F));let Z=(c+N)*(c-N)+F,ie=c*f;for(let Q=z;Q<we-1;Q++){let J=(0,b.G)(Z,ie);0===J&&(J=Number.MIN_VALUE);let Me=Z/J,ne=ie/J;if(Q!==z&&(q[Q-1]=J),Z=Me*k[Q]+ne*q[Q],q[Q]=Me*q[Q]-ne*k[Q],ie=ne*k[Q+1],k[Q+1]=Me*k[Q+1],B)for(let ve=0;ve<y;ve++)J=Me*Y.get(ve,Q)+ne*Y.get(ve,Q+1),Y.set(ve,Q+1,-ne*Y.get(ve,Q)+Me*Y.get(ve,Q+1)),Y.set(ve,Q,J);if(J=(0,b.G)(Z,ie),0===J&&(J=Number.MIN_VALUE),Me=Z/J,ne=ie/J,k[Q]=J,Z=Me*q[Q]+ne*k[Q+1],k[Q+1]=-ne*q[Q]+Me*k[Q+1],ie=ne*q[Q+1],q[Q+1]=Me*q[Q+1],T&&Q<M-1)for(let ve=0;ve<M;ve++)J=Me*O.get(ve,Q)+ne*O.get(ve,Q+1),O.set(ve,Q+1,-ne*O.get(ve,Q)+Me*O.get(ve,Q+1)),O.set(ve,Q,J)}q[we-2]=Z,Ze+=1;break}case 4:if(k[z]<=0&&(k[z]=k[z]<0?-k[z]:0,B))for(let ge=0;ge<=tt;ge++)Y.set(ge,z,-Y.get(ge,z));for(;z<tt&&!(k[z]>=k[z+1]);){let ge=k[z];if(k[z]=k[z+1],k[z+1]=ge,B&&z<y-1)for(let N=0;N<y;N++)ge=Y.get(N,z+1),Y.set(N,z+1,Y.get(N,z)),Y.set(N,z,ge);if(T&&z<M-1)for(let N=0;N<M;N++)ge=O.get(N,z+1),O.set(N,z+1,O.get(N,z)),O.set(N,z,ge);z++}Ze=0,we--}}if(V){let z=Y;Y=O,O=z}this.m=M,this.n=y,this.s=k,this.U=O,this.V=Y}solve(g){let w=g,M=this.threshold,y=this.s.length,A=I.Z.zeros(y,y);for(let ae=0;ae<y;ae++)Math.abs(this.s[ae])<=M?A.set(ae,ae,0):A.set(ae,ae,1/this.s[ae]);let R=this.U,C=this.rightSingularVectors,T=C.mmul(A),B=C.rows,V=R.rows,G=I.Z.zeros(B,V);for(let ae=0;ae<B;ae++)for(let fe=0;fe<V;fe++){let k=0;for(let O=0;O<y;O++)k+=T.get(ae,O)*R.get(fe,O);G.set(ae,fe,k)}return G.mmul(w)}solveForDiagonal(g){return this.solve(I.Z.diag(g))}inverse(){let g=this.V,w=this.threshold,M=g.rows,y=g.columns,A=new I.Z(M,this.s.length);for(let V=0;V<M;V++)for(let G=0;G<y;G++)Math.abs(this.s[G])>w&&A.set(V,G,g.get(V,G)/this.s[G]);let R=this.U,C=R.rows,T=R.columns,B=new I.Z(M,C);for(let V=0;V<M;V++)for(let G=0;G<C;G++){let ae=0;for(let fe=0;fe<T;fe++)ae+=A.get(V,fe)*R.get(G,fe);B.set(V,G,ae)}return B}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let g=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,w=0,M=this.s;for(let y=0,A=M.length;y<A;y++)M[y]>g&&w++;return w}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return I.Z.diag(this.s)}}},7002:(se,ee,D)=>{"use strict";function I(U,b){let _=0;return Math.abs(U)>Math.abs(b)?(_=b/U,Math.abs(U)*Math.sqrt(1+_*_)):0!==b?(_=U/b,Math.abs(b)*Math.sqrt(1+_*_)):0}D.d(ee,{G:()=>I})},8837:(se,ee,D)=>{"use strict";D.d(ee,{F:()=>w,S:()=>g});var I=D(2739),U=D(5740),b=D(6193),_=D(4466),E=D(3209);function g(M,y=!1){return M=E.Z.checkMatrix(M),y?new b.Z(M).inverse():w(M,_.Z.eye(M.rows))}function w(M,y,A=!1){return M=E.Z.checkMatrix(M),y=E.Z.checkMatrix(y),A?new b.Z(M).solve(y):M.isSquare()?new I.Z(M).solve(y):new U.Z(M).solve(y)}},6582:(se,ee,D)=>{"use strict";D.r(ee),D.d(ee,{AbstractMatrix:()=>I.X,CHO:()=>ge,CholeskyDecomposition:()=>ge,EVD:()=>we,EigenvalueDecomposition:()=>we,LU:()=>fe.Z,LuDecomposition:()=>fe.Z,Matrix:()=>I.Z,MatrixColumnSelectionView:()=>E,MatrixColumnView:()=>_,MatrixFlipColumnView:()=>g,MatrixFlipRowView:()=>w,MatrixRowSelectionView:()=>y,MatrixRowView:()=>M,MatrixSelectionView:()=>A,MatrixSubView:()=>R,MatrixTransposeView:()=>C.Z,NIPALS:()=>v,Nipals:()=>v,QR:()=>N.Z,QrDecomposition:()=>N.Z,SVD:()=>O.Z,SingularValueDecomposition:()=>O.Z,WrapperMatrix1D:()=>B,WrapperMatrix2D:()=>V.Z,correlation:()=>ce,covariance:()=>ue,default:()=>I.Z,determinant:()=>k,inverse:()=>ae.S,linearDependencies:()=>me,pseudoInverse:()=>re,solve:()=>ae.F,wrap:()=>G});var I=D(4466),U=D(9781),b=D(6362);class _ extends b.Z{constructor(c,f){(0,U.bp)(c,f),super(c,c.rows,1),this.column=f}set(c,f,S){return this.matrix.set(c,this.column,S),this}get(c){return this.matrix.get(c,this.column)}}class E extends b.Z{constructor(c,f){(0,U.g)(c,f),super(c,c.rows,f.length),this.columnIndices=f}set(c,f,S){return this.matrix.set(c,this.columnIndices[f],S),this}get(c,f){return this.matrix.get(c,this.columnIndices[f])}}class g extends b.Z{constructor(c){super(c,c.rows,c.columns)}set(c,f,S){return this.matrix.set(c,this.columns-f-1,S),this}get(c,f){return this.matrix.get(c,this.columns-f-1)}}class w extends b.Z{constructor(c){super(c,c.rows,c.columns)}set(c,f,S){return this.matrix.set(this.rows-c-1,f,S),this}get(c,f){return this.matrix.get(this.rows-c-1,f)}}class M extends b.Z{constructor(c,f){(0,U.zb)(c,f),super(c,1,c.columns),this.row=f}set(c,f,S){return this.matrix.set(this.row,f,S),this}get(c,f){return this.matrix.get(this.row,f)}}class y extends b.Z{constructor(c,f){(0,U.ZR)(c,f),super(c,f.length,c.columns),this.rowIndices=f}set(c,f,S){return this.matrix.set(this.rowIndices[c],f,S),this}get(c,f){return this.matrix.get(this.rowIndices[c],f)}}class A extends b.Z{constructor(c,f,S){(0,U.ZR)(c,f),(0,U.g)(c,S),super(c,f.length,S.length),this.rowIndices=f,this.columnIndices=S}set(c,f,S){return this.matrix.set(this.rowIndices[c],this.columnIndices[f],S),this}get(c,f){return this.matrix.get(this.rowIndices[c],this.columnIndices[f])}}class R extends b.Z{constructor(c,f,S,P,F){(0,U.J5)(c,f,S,P,F),super(c,S-f+1,F-P+1),this.startRow=f,this.startColumn=P}set(c,f,S){return this.matrix.set(this.startRow+c,this.startColumn+f,S),this}get(c,f){return this.matrix.get(this.startRow+c,this.startColumn+f)}}var C=D(5475),T=D(7782);class B extends I.X{constructor(c,f={}){const{rows:S=1}=f;if(c.length%S!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=S,this.columns=c.length/S,this.data=c}set(c,f,S){let P=this._calculateIndex(c,f);return this.data[P]=S,this}get(c,f){let S=this._calculateIndex(c,f);return this.data[S]}_calculateIndex(c,f){return c*this.columns+f}}var V=D(3209);function G(p,c){if((0,T.N)(p))return p[0]&&(0,T.N)(p[0])?new V.Z(p):new B(p,c);throw new Error("the argument is not an array")}var ae=D(8837),fe=D(2739);function k(p){if((p=I.Z.checkMatrix(p)).isSquare()){if(0===p.columns)return 1;let c,f,S,P;if(2===p.columns)return c=p.get(0,0),f=p.get(0,1),S=p.get(1,0),P=p.get(1,1),c*P-f*S;if(3===p.columns){let F,Z,ie;return F=new A(p,[1,2],[1,2]),Z=new A(p,[1,2],[0,2]),ie=new A(p,[1,2],[0,1]),c=p.get(0,0),f=p.get(0,1),S=p.get(0,2),c*k(F)-f*k(Z)+S*k(ie)}return new fe.Z(p).determinant}throw Error("determinant can only be calculated for a square matrix")}var O=D(6193);function Y(p,c){let f=[];for(let S=0;S<p;S++)S!==c&&f.push(S);return f}function q(p,c,f,S=1e-9,P=1e-9){if(p>P)return new Array(c.rows+1).fill(0);{let F=c.addRow(f,[0]);for(let Z=0;Z<F.rows;Z++)Math.abs(F.get(Z,0))<S&&F.set(Z,0,0);return F.to1DArray()}}function me(p,c={}){const{thresholdValue:f=1e-9,thresholdError:S=1e-9}=c;let P=(p=I.Z.checkMatrix(p)).rows,F=new I.Z(P,P);for(let Z=0;Z<P;Z++){let ie=I.Z.columnVector(p.getRow(Z)),Q=p.subMatrixRow(Y(P,Z)).transpose(),Me=new O.Z(Q).solve(ie),ne=I.Z.sub(ie,Q.mmul(Me)).abs().max();F.setRow(Z,q(ne,Me,Z,f,S))}return F}function re(p,c=Number.EPSILON){if((p=I.Z.checkMatrix(p)).isEmpty())return p.transpose();let f=new O.Z(p,{autoTranspose:!0}),S=f.leftSingularVectors,P=f.rightSingularVectors,F=f.diagonal;for(let Z=0;Z<F.length;Z++)F[Z]=Math.abs(F[Z])>c?1/F[Z]:0;return P.mmul(I.Z.diag(F).mmul(S.transpose()))}function ue(p,c=p,f={}){p=new I.Z(p);let S=!1;if("object"!=typeof c||I.Z.isMatrix(c)||(0,T.N)(c)?c=new I.Z(c):(f=c,c=p,S=!0),p.rows!==c.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:P=!0}=f;P&&(p=p.center("column"),S||(c=c.center("column")));const F=p.transpose().mmul(c);for(let Z=0;Z<F.rows;Z++)for(let ie=0;ie<F.columns;ie++)F.set(Z,ie,F.get(Z,ie)*(1/(p.rows-1)));return F}function ce(p,c=p,f={}){p=new I.Z(p);let S=!1;if("object"!=typeof c||I.Z.isMatrix(c)||(0,T.N)(c)?c=new I.Z(c):(f=c,c=p,S=!0),p.rows!==c.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:P=!0,scale:F=!0}=f;P&&(p.center("column"),S||c.center("column")),F&&(p.scale("column"),S||c.scale("column"));const Z=p.standardDeviation("column",{unbiased:!0}),ie=S?Z:c.standardDeviation("column",{unbiased:!0}),Q=p.transpose().mmul(c);for(let J=0;J<Q.rows;J++)for(let Me=0;Me<Q.columns;Me++)Q.set(J,Me,Q.get(J,Me)*(1/(Z[J]*ie[Me]))*(1/(p.rows-1)));return Q}var ye=D(7002);class we{constructor(c,f={}){const{assumeSymmetric:S=!1}=f;if(!(c=V.Z.checkMatrix(c)).isSquare())throw new Error("Matrix is not a square matrix");if(c.isEmpty())throw new Error("Matrix must be non-empty");let J,Me,P=c.columns,F=new I.Z(P,P),Z=new Float64Array(P),ie=new Float64Array(P),Q=c,ne=!1;if(ne=!!S||c.isSymmetric(),ne){for(J=0;J<P;J++)for(Me=0;Me<P;Me++)F.set(J,Me,Q.get(J,Me));(function tt(p,c,f,S){let P,F,Z,ie,Q,J,Me,ne;for(Q=0;Q<p;Q++)f[Q]=S.get(p-1,Q);for(ie=p-1;ie>0;ie--){for(ne=0,Z=0,J=0;J<ie;J++)ne+=Math.abs(f[J]);if(0===ne)for(c[ie]=f[ie-1],Q=0;Q<ie;Q++)f[Q]=S.get(ie-1,Q),S.set(ie,Q,0),S.set(Q,ie,0);else{for(J=0;J<ie;J++)f[J]/=ne,Z+=f[J]*f[J];for(P=f[ie-1],F=Math.sqrt(Z),P>0&&(F=-F),c[ie]=ne*F,Z-=P*F,f[ie-1]=P-F,Q=0;Q<ie;Q++)c[Q]=0;for(Q=0;Q<ie;Q++){for(P=f[Q],S.set(Q,ie,P),F=c[Q]+S.get(Q,Q)*P,J=Q+1;J<=ie-1;J++)F+=S.get(J,Q)*f[J],c[J]+=S.get(J,Q)*P;c[Q]=F}for(P=0,Q=0;Q<ie;Q++)c[Q]/=Z,P+=c[Q]*f[Q];for(Me=P/(Z+Z),Q=0;Q<ie;Q++)c[Q]-=Me*f[Q];for(Q=0;Q<ie;Q++){for(P=f[Q],F=c[Q],J=Q;J<=ie-1;J++)S.set(J,Q,S.get(J,Q)-(P*c[J]+F*f[J]));f[Q]=S.get(ie-1,Q),S.set(ie,Q,0)}}f[ie]=Z}for(ie=0;ie<p-1;ie++){if(S.set(p-1,ie,S.get(ie,ie)),S.set(ie,ie,1),Z=f[ie+1],0!==Z){for(J=0;J<=ie;J++)f[J]=S.get(J,ie+1)/Z;for(Q=0;Q<=ie;Q++){for(F=0,J=0;J<=ie;J++)F+=S.get(J,ie+1)*S.get(J,Q);for(J=0;J<=ie;J++)S.set(J,Q,S.get(J,Q)-F*f[J])}}for(J=0;J<=ie;J++)S.set(J,ie+1,0)}for(Q=0;Q<p;Q++)f[Q]=S.get(p-1,Q),S.set(p-1,Q,0);S.set(p-1,p-1,1),c[0]=0})(P,ie,Z,F),function Ze(p,c,f,S){let P,F,Z,ie,Q,J,Me,ne,ve,Le,Pe,Ne,xt,Ce,Be,ke,Ae;for(Z=1;Z<p;Z++)c[Z-1]=c[Z];c[p-1]=0;let $e=0,et=0,Ge=Number.EPSILON;for(J=0;J<p;J++){for(et=Math.max(et,Math.abs(f[J])+Math.abs(c[J])),Me=J;Me<p&&!(Math.abs(c[Me])<=Ge*et);)Me++;if(Me>J){Ae=0;do{for(Ae+=1,P=f[J],ne=(f[J+1]-P)/(2*c[J]),ve=(0,ye.G)(ne,1),ne<0&&(ve=-ve),f[J]=c[J]/(ne+ve),f[J+1]=c[J]*(ne+ve),Le=f[J+1],F=P-f[J],Z=J+2;Z<p;Z++)f[Z]-=F;for($e+=F,ne=f[Me],Pe=1,Ne=Pe,xt=Pe,Ce=c[J+1],Be=0,ke=0,Z=Me-1;Z>=J;Z--)for(xt=Ne,Ne=Pe,ke=Be,P=Pe*c[Z],F=Pe*ne,ve=(0,ye.G)(ne,c[Z]),c[Z+1]=Be*ve,Be=c[Z]/ve,Pe=ne/ve,ne=Pe*f[Z]-Be*P,f[Z+1]=F+Be*(Pe*P+Be*f[Z]),Q=0;Q<p;Q++)F=S.get(Q,Z+1),S.set(Q,Z+1,Be*S.get(Q,Z)+Pe*F),S.set(Q,Z,Pe*S.get(Q,Z)-Be*F);ne=-Be*ke*xt*Ce*c[J]/Le,c[J]=Be*ne,f[J]=Pe*ne}while(Math.abs(c[J])>Ge*et)}f[J]=f[J]+$e,c[J]=0}for(Z=0;Z<p-1;Z++){for(Q=Z,ne=f[Z],ie=Z+1;ie<p;ie++)f[ie]<ne&&(Q=ie,ne=f[ie]);if(Q!==Z)for(f[Q]=f[Z],f[Z]=ne,ie=0;ie<p;ie++)ne=S.get(ie,Z),S.set(ie,Z,S.get(ie,Q)),S.set(ie,Q,ne)}}(P,ie,Z,F)}else{let ve=new I.Z(P,P),Le=new Float64Array(P);for(Me=0;Me<P;Me++)for(J=0;J<P;J++)ve.set(J,Me,Q.get(J,Me));(function je(p,c,f,S){let Z,ie,Q,J,Me,ne,ve,F=p-1;for(ne=1;ne<=F-1;ne++){for(ve=0,J=ne;J<=F;J++)ve+=Math.abs(c.get(J,ne-1));if(0!==ve){for(Q=0,J=F;J>=ne;J--)f[J]=c.get(J,ne-1)/ve,Q+=f[J]*f[J];for(ie=Math.sqrt(Q),f[ne]>0&&(ie=-ie),Q-=f[ne]*ie,f[ne]=f[ne]-ie,Me=ne;Me<p;Me++){for(Z=0,J=F;J>=ne;J--)Z+=f[J]*c.get(J,Me);for(Z/=Q,J=ne;J<=F;J++)c.set(J,Me,c.get(J,Me)-Z*f[J])}for(J=0;J<=F;J++){for(Z=0,Me=F;Me>=ne;Me--)Z+=f[Me]*c.get(J,Me);for(Z/=Q,Me=ne;Me<=F;Me++)c.set(J,Me,c.get(J,Me)-Z*f[Me])}f[ne]=ve*f[ne],c.set(ne,ne-1,ve*ie)}}for(J=0;J<p;J++)for(Me=0;Me<p;Me++)S.set(J,Me,J===Me?1:0);for(ne=F-1;ne>=1;ne--)if(0!==c.get(ne,ne-1)){for(J=ne+1;J<=F;J++)f[J]=c.get(J,ne-1);for(Me=ne;Me<=F;Me++){for(ie=0,J=ne;J<=F;J++)ie+=f[J]*S.get(J,Me);for(ie=ie/f[ne]/c.get(ne,ne-1),J=ne;J<=F;J++)S.set(J,Me,S.get(J,Me)+ie*f[J])}}})(P,ve,Le,F),function z(p,c,f,S,P){let Ce,Be,ke,Ae,$e,et,Ge,He,ut,yt,mt,qe,Ue,ze,ht,F=p-1,ie=p-1,Q=Number.EPSILON,J=0,Me=0,ne=0,ve=0,Le=0,Pe=0,Ne=0,xt=0;for(Ce=0;Ce<p;Ce++)for((Ce<0||Ce>ie)&&(f[Ce]=P.get(Ce,Ce),c[Ce]=0),Be=Math.max(Ce-1,0);Be<p;Be++)Me+=Math.abs(P.get(Ce,Be));for(;F>=0;){for(Ae=F;Ae>0&&(Pe=Math.abs(P.get(Ae-1,Ae-1))+Math.abs(P.get(Ae,Ae)),0===Pe&&(Pe=Me),!(Math.abs(P.get(Ae,Ae-1))<Q*Pe));)Ae--;if(Ae===F)P.set(F,F,P.get(F,F)+J),f[F]=P.get(F,F),c[F]=0,F--,xt=0;else if(Ae===F-1){if(Ge=P.get(F,F-1)*P.get(F-1,F),ne=(P.get(F-1,F-1)-P.get(F,F))/2,ve=ne*ne+Ge,Ne=Math.sqrt(Math.abs(ve)),P.set(F,F,P.get(F,F)+J),P.set(F-1,F-1,P.get(F-1,F-1)+J),He=P.get(F,F),ve>=0){for(Ne=ne>=0?ne+Ne:ne-Ne,f[F-1]=He+Ne,f[F]=f[F-1],0!==Ne&&(f[F]=He-Ge/Ne),c[F-1]=0,c[F]=0,He=P.get(F,F-1),Pe=Math.abs(He)+Math.abs(Ne),ne=He/Pe,ve=Ne/Pe,Le=Math.sqrt(ne*ne+ve*ve),ne/=Le,ve/=Le,Be=F-1;Be<p;Be++)Ne=P.get(F-1,Be),P.set(F-1,Be,ve*Ne+ne*P.get(F,Be)),P.set(F,Be,ve*P.get(F,Be)-ne*Ne);for(Ce=0;Ce<=F;Ce++)Ne=P.get(Ce,F-1),P.set(Ce,F-1,ve*Ne+ne*P.get(Ce,F)),P.set(Ce,F,ve*P.get(Ce,F)-ne*Ne);for(Ce=0;Ce<=ie;Ce++)Ne=S.get(Ce,F-1),S.set(Ce,F-1,ve*Ne+ne*S.get(Ce,F)),S.set(Ce,F,ve*S.get(Ce,F)-ne*Ne)}else f[F-1]=He+ne,f[F]=He+ne,c[F-1]=Ne,c[F]=-Ne;F-=2,xt=0}else{if(He=P.get(F,F),ut=0,Ge=0,Ae<F&&(ut=P.get(F-1,F-1),Ge=P.get(F,F-1)*P.get(F-1,F)),10===xt){for(J+=He,Ce=0;Ce<=F;Ce++)P.set(Ce,Ce,P.get(Ce,Ce)-He);Pe=Math.abs(P.get(F,F-1))+Math.abs(P.get(F-1,F-2)),He=ut=.75*Pe,Ge=-.4375*Pe*Pe}if(30===xt&&(Pe=(ut-He)/2,Pe=Pe*Pe+Ge,Pe>0)){for(Pe=Math.sqrt(Pe),ut<He&&(Pe=-Pe),Pe=He-Ge/((ut-He)/2+Pe),Ce=0;Ce<=F;Ce++)P.set(Ce,Ce,P.get(Ce,Ce)-Pe);J+=Pe,He=ut=Ge=.964}for(xt+=1,$e=F-2;$e>=Ae&&(Ne=P.get($e,$e),Le=He-Ne,Pe=ut-Ne,ne=(Le*Pe-Ge)/P.get($e+1,$e)+P.get($e,$e+1),ve=P.get($e+1,$e+1)-Ne-Le-Pe,Le=P.get($e+2,$e+1),Pe=Math.abs(ne)+Math.abs(ve)+Math.abs(Le),ne/=Pe,ve/=Pe,Le/=Pe,!($e===Ae||Math.abs(P.get($e,$e-1))*(Math.abs(ve)+Math.abs(Le))<Q*(Math.abs(ne)*(Math.abs(P.get($e-1,$e-1))+Math.abs(Ne)+Math.abs(P.get($e+1,$e+1))))));)$e--;for(Ce=$e+2;Ce<=F;Ce++)P.set(Ce,Ce-2,0),Ce>$e+2&&P.set(Ce,Ce-3,0);for(ke=$e;ke<=F-1&&(ze=ke!==F-1,ke!==$e&&(ne=P.get(ke,ke-1),ve=P.get(ke+1,ke-1),Le=ze?P.get(ke+2,ke-1):0,He=Math.abs(ne)+Math.abs(ve)+Math.abs(Le),0!==He&&(ne/=He,ve/=He,Le/=He)),0!==He);ke++)if(Pe=Math.sqrt(ne*ne+ve*ve+Le*Le),ne<0&&(Pe=-Pe),0!==Pe){for(ke!==$e?P.set(ke,ke-1,-Pe*He):Ae!==$e&&P.set(ke,ke-1,-P.get(ke,ke-1)),ne+=Pe,He=ne/Pe,ut=ve/Pe,Ne=Le/Pe,ve/=ne,Le/=ne,Be=ke;Be<p;Be++)ne=P.get(ke,Be)+ve*P.get(ke+1,Be),ze&&(ne+=Le*P.get(ke+2,Be),P.set(ke+2,Be,P.get(ke+2,Be)-ne*Ne)),P.set(ke,Be,P.get(ke,Be)-ne*He),P.set(ke+1,Be,P.get(ke+1,Be)-ne*ut);for(Ce=0;Ce<=Math.min(F,ke+3);Ce++)ne=He*P.get(Ce,ke)+ut*P.get(Ce,ke+1),ze&&(ne+=Ne*P.get(Ce,ke+2),P.set(Ce,ke+2,P.get(Ce,ke+2)-ne*Le)),P.set(Ce,ke,P.get(Ce,ke)-ne),P.set(Ce,ke+1,P.get(Ce,ke+1)-ne*ve);for(Ce=0;Ce<=ie;Ce++)ne=He*S.get(Ce,ke)+ut*S.get(Ce,ke+1),ze&&(ne+=Ne*S.get(Ce,ke+2),S.set(Ce,ke+2,S.get(Ce,ke+2)-ne*Le)),S.set(Ce,ke,S.get(Ce,ke)-ne),S.set(Ce,ke+1,S.get(Ce,ke+1)-ne*ve)}}}if(0!==Me){for(F=p-1;F>=0;F--)if(ne=f[F],ve=c[F],0===ve)for(Ae=F,P.set(F,F,1),Ce=F-1;Ce>=0;Ce--){for(Ge=P.get(Ce,Ce)-ne,Le=0,Be=Ae;Be<=F;Be++)Le+=P.get(Ce,Be)*P.get(Be,F);if(c[Ce]<0)Ne=Ge,Pe=Le;else if(Ae=Ce,0===c[Ce]?P.set(Ce,F,0!==Ge?-Le/Ge:-Le/(Q*Me)):(He=P.get(Ce,Ce+1),ut=P.get(Ce+1,Ce),ve=(f[Ce]-ne)*(f[Ce]-ne)+c[Ce]*c[Ce],et=(He*Pe-Ne*Le)/ve,P.set(Ce,F,et),P.set(Ce+1,F,Math.abs(He)>Math.abs(Ne)?(-Le-Ge*et)/He:(-Pe-ut*et)/Ne)),et=Math.abs(P.get(Ce,F)),Q*et*et>1)for(Be=Ce;Be<=F;Be++)P.set(Be,F,P.get(Be,F)/et)}else if(ve<0)for(Ae=F-1,Math.abs(P.get(F,F-1))>Math.abs(P.get(F-1,F))?(P.set(F-1,F-1,ve/P.get(F,F-1)),P.set(F-1,F,-(P.get(F,F)-ne)/P.get(F,F-1))):(ht=le(0,-P.get(F-1,F),P.get(F-1,F-1)-ne,ve),P.set(F-1,F-1,ht[0]),P.set(F-1,F,ht[1])),P.set(F,F-1,0),P.set(F,F,1),Ce=F-2;Ce>=0;Ce--){for(yt=0,mt=0,Be=Ae;Be<=F;Be++)yt+=P.get(Ce,Be)*P.get(Be,F-1),mt+=P.get(Ce,Be)*P.get(Be,F);if(Ge=P.get(Ce,Ce)-ne,c[Ce]<0)Ne=Ge,Le=yt,Pe=mt;else if(Ae=Ce,0===c[Ce]?(ht=le(-yt,-mt,Ge,ve),P.set(Ce,F-1,ht[0]),P.set(Ce,F,ht[1])):(He=P.get(Ce,Ce+1),ut=P.get(Ce+1,Ce),qe=(f[Ce]-ne)*(f[Ce]-ne)+c[Ce]*c[Ce]-ve*ve,Ue=2*(f[Ce]-ne)*ve,0===qe&&0===Ue&&(qe=Q*Me*(Math.abs(Ge)+Math.abs(ve)+Math.abs(He)+Math.abs(ut)+Math.abs(Ne))),ht=le(He*Le-Ne*yt+ve*mt,He*Pe-Ne*mt-ve*yt,qe,Ue),P.set(Ce,F-1,ht[0]),P.set(Ce,F,ht[1]),Math.abs(He)>Math.abs(Ne)+Math.abs(ve)?(P.set(Ce+1,F-1,(-yt-Ge*P.get(Ce,F-1)+ve*P.get(Ce,F))/He),P.set(Ce+1,F,(-mt-Ge*P.get(Ce,F)-ve*P.get(Ce,F-1))/He)):(ht=le(-Le-ut*P.get(Ce,F-1),-Pe-ut*P.get(Ce,F),Ne,ve),P.set(Ce+1,F-1,ht[0]),P.set(Ce+1,F,ht[1]))),et=Math.max(Math.abs(P.get(Ce,F-1)),Math.abs(P.get(Ce,F))),Q*et*et>1)for(Be=Ce;Be<=F;Be++)P.set(Be,F-1,P.get(Be,F-1)/et),P.set(Be,F,P.get(Be,F)/et)}for(Ce=0;Ce<p;Ce++)if(Ce<0||Ce>ie)for(Be=Ce;Be<p;Be++)S.set(Ce,Be,P.get(Ce,Be));for(Be=p-1;Be>=0;Be--)for(Ce=0;Ce<=ie;Ce++){for(Ne=0,ke=0;ke<=Math.min(Be,ie);ke++)Ne+=S.get(Ce,ke)*P.get(ke,Be);S.set(Ce,Be,Ne)}}}(P,ie,Z,F,ve)}this.n=P,this.e=ie,this.d=Z,this.V=F}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let F,Z,c=this.n,f=this.e,S=this.d,P=new I.Z(c,c);for(F=0;F<c;F++){for(Z=0;Z<c;Z++)P.set(F,Z,0);P.set(F,F,S[F]),f[F]>0?P.set(F,F+1,f[F]):f[F]<0&&P.set(F,F-1,f[F])}return P}}function le(p,c,f,S){let P,F;return Math.abs(f)>Math.abs(S)?(P=S/f,F=f+P*S,[(p+P*c)/F,(c-P*p)/F]):(P=f/S,F=S+P*f,[(P*p+c)/F,(P*c-p)/F])}class ge{constructor(c){if(!(c=V.Z.checkMatrix(c)).isSymmetric())throw new Error("Matrix is not symmetric");let Z,ie,Q,f=c,S=f.rows,P=new I.Z(S,S),F=!0;for(ie=0;ie<S;ie++){let J=0;for(Q=0;Q<ie;Q++){let Me=0;for(Z=0;Z<Q;Z++)Me+=P.get(Q,Z)*P.get(ie,Z);Me=(f.get(ie,Q)-Me)/P.get(Q,Q),P.set(ie,Q,Me),J+=Me*Me}for(J=f.get(ie,ie)-J,F&=J>0,P.set(ie,ie,Math.sqrt(Math.max(J,0))),Q=ie+1;Q<S;Q++)P.set(ie,Q,0)}this.L=P,this.positiveDefinite=Boolean(F)}isPositiveDefinite(){return this.positiveDefinite}solve(c){c=V.Z.checkMatrix(c);let f=this.L,S=f.rows;if(c.rows!==S)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let Z,ie,Q,P=c.columns,F=c.clone();for(Q=0;Q<S;Q++)for(ie=0;ie<P;ie++){for(Z=0;Z<Q;Z++)F.set(Q,ie,F.get(Q,ie)-F.get(Z,ie)*f.get(Q,Z));F.set(Q,ie,F.get(Q,ie)/f.get(Q,Q))}for(Q=S-1;Q>=0;Q--)for(ie=0;ie<P;ie++){for(Z=Q+1;Z<S;Z++)F.set(Q,ie,F.get(Q,ie)-F.get(Z,ie)*f.get(Z,Q));F.set(Q,ie,F.get(Q,ie)/f.get(Q,Q))}return F}get lowerTriangularMatrix(){return this.L}}var N=D(5740);class v{constructor(c,f={}){c=V.Z.checkMatrix(c);let{Y:S}=f;const{scaleScores:P=!1,maxIterations:F=1e3,terminationCriteria:Z=1e-10}=f;let ie;if(S){if(S=(0,T.N)(S)&&"number"==typeof S[0]?I.Z.columnVector(S):V.Z.checkMatrix(S),S.rows!==c.rows)throw new Error("Y should have the same number of rows as X");ie=S.getColumnVector(0)}else ie=c.getColumnVector(0);let J,Me,ne,ve,Q=1;for(let Le=0;Le<F&&Q>Z;Le++)ne=c.transpose().mmul(ie).div(ie.transpose().mmul(ie).get(0,0)),ne=ne.div(ne.norm()),J=c.mmul(ne).div(ne.transpose().mmul(ne).get(0,0)),Le>0&&(Q=J.clone().sub(ve).pow(2).sum()),ve=J.clone(),S?(Me=S.transpose().mmul(J).div(J.transpose().mmul(J).get(0,0)),Me=Me.div(Me.norm()),ie=S.mmul(Me).div(Me.transpose().mmul(Me).get(0,0))):ie=J;if(S){let Le=c.transpose().mmul(J).div(J.transpose().mmul(J).get(0,0));Le=Le.div(Le.norm());let Pe=c.clone().sub(J.clone().mmul(Le.transpose())),Ne=ie.transpose().mmul(J).div(J.transpose().mmul(J).get(0,0)),xt=S.clone().sub(J.clone().mulS(Ne.get(0,0)).mmul(Me.transpose()));this.t=J,this.p=Le.transpose(),this.w=ne.transpose(),this.q=Me,this.u=ie,this.s=J.transpose().mmul(J),this.xResidual=Pe,this.yResidual=xt,this.betas=Ne}else this.w=ne.transpose(),this.s=J.transpose().mmul(J).sqrt(),this.t=P?J.clone().div(this.s.get(0,0)):J,this.xResidual=c.sub(J.mmul(ne.transpose()))}}},4466:(se,ee,D)=>{"use strict";D.d(ee,{X:()=>je,Z:()=>ge});var I=D(7782);function U(N){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,I.N)(N))throw new TypeError("input must be an array");if(0===N.length)throw new TypeError("input must not be empty");var p=v.fromIndex,c=void 0===p?0:p,f=v.toIndex,S=void 0===f?N.length:f;if(c<0||c>=N.length||!Number.isInteger(c))throw new Error("fromIndex must be a positive integer smaller than length");if(S<=c||S>N.length||!Number.isInteger(S))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var P=N[c],F=c+1;F<S;F++)N[F]>P&&(P=N[F]);return P}function b(N){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,I.N)(N))throw new TypeError("input must be an array");if(0===N.length)throw new TypeError("input must not be empty");var p=v.fromIndex,c=void 0===p?0:p,f=v.toIndex,S=void 0===f?N.length:f;if(c<0||c>=N.length||!Number.isInteger(c))throw new Error("fromIndex must be a positive integer smaller than length");if(S<=c||S>N.length||!Number.isInteger(S))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var P=N[c],F=c+1;F<S;F++)N[F]<P&&(P=N[F]);return P}function _(N){var p,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,I.N)(N))throw new TypeError("input must be an array");if(0===N.length)throw new TypeError("input must not be empty");if(void 0!==v.output){if(!(0,I.N)(v.output))throw new TypeError("output option must be an array if specified");p=v.output}else p=new Array(N.length);var c=b(N),f=U(N);if(c===f)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var S=v.min,P=void 0===S?v.autoMinMax?c:0:S,F=v.max,Z=void 0===F?v.autoMinMax?f:1:F;if(P>=Z)throw new RangeError("min option must be smaller than max option");for(var ie=(Z-P)/(f-c),Q=0;Q<N.length;Q++)p[Q]=(N[Q]-c)*ie+P;return p}const E=" ".repeat(2),g=" ".repeat(4);function M(N,v={}){const{maxRows:p=15,maxColumns:c=10,maxNumSize:f=8}=v;return`${N.constructor.name} {\n${E}[\n${g}${function y(N,v,p,c){const{rows:f,columns:S}=N,P=Math.min(f,v),F=Math.min(S,p),Z=[];for(let ie=0;ie<P;ie++){let Q=[];for(let J=0;J<F;J++)Q.push(A(N.get(ie,J),c));Z.push(`${Q.join(" ")}`)}return F!==S&&(Z[Z.length-1]+=` ... ${S-p} more columns`),P!==f&&Z.push(`... ${f-v} more rows`),Z.join(`\n${g}`)}(N,p,c,f)}\n${E}]\n${E}rows: ${N.rows}\n${E}columns: ${N.columns}\n}`}function A(N,v){const p=String(N);if(p.length<=v)return p.padEnd(v," ");const c=N.toPrecision(v-2);if(c.length<=v)return c;const f=N.toExponential(v-2),S=f.indexOf("e"),P=f.slice(S);return f.slice(0,v-P.length)+P}var C=D(9781);class je{static from1DArray(v,p,c){if(v*p!==c.length)throw new RangeError("data length does not match given dimensions");let S=new ge(v,p);for(let P=0;P<v;P++)for(let F=0;F<p;F++)S.set(P,F,c[P*p+F]);return S}static rowVector(v){let p=new ge(1,v.length);for(let c=0;c<v.length;c++)p.set(0,c,v[c]);return p}static columnVector(v){let p=new ge(v.length,1);for(let c=0;c<v.length;c++)p.set(c,0,v[c]);return p}static zeros(v,p){return new ge(v,p)}static ones(v,p){return new ge(v,p).fill(1)}static rand(v,p,c={}){if("object"!=typeof c)throw new TypeError("options must be an object");const{random:f=Math.random}=c;let S=new ge(v,p);for(let P=0;P<v;P++)for(let F=0;F<p;F++)S.set(P,F,f());return S}static randInt(v,p,c={}){if("object"!=typeof c)throw new TypeError("options must be an object");const{min:f=0,max:S=1e3,random:P=Math.random}=c;if(!Number.isInteger(f))throw new TypeError("min must be an integer");if(!Number.isInteger(S))throw new TypeError("max must be an integer");if(f>=S)throw new RangeError("min must be smaller than max");let F=S-f,Z=new ge(v,p);for(let ie=0;ie<v;ie++)for(let Q=0;Q<p;Q++){let J=f+Math.round(P()*F);Z.set(ie,Q,J)}return Z}static eye(v,p,c){void 0===p&&(p=v),void 0===c&&(c=1);let f=Math.min(v,p),S=this.zeros(v,p);for(let P=0;P<f;P++)S.set(P,P,c);return S}static diag(v,p,c){let f=v.length;void 0===p&&(p=f),void 0===c&&(c=p);let S=Math.min(f,p,c),P=this.zeros(p,c);for(let F=0;F<S;F++)P.set(F,F,v[F]);return P}static min(v,p){v=this.checkMatrix(v),p=this.checkMatrix(p);let c=v.rows,f=v.columns,S=new ge(c,f);for(let P=0;P<c;P++)for(let F=0;F<f;F++)S.set(P,F,Math.min(v.get(P,F),p.get(P,F)));return S}static max(v,p){v=this.checkMatrix(v),p=this.checkMatrix(p);let c=v.rows,f=v.columns,S=new this(c,f);for(let P=0;P<c;P++)for(let F=0;F<f;F++)S.set(P,F,Math.max(v.get(P,F),p.get(P,F)));return S}static checkMatrix(v){return je.isMatrix(v)?v:new ge(v)}static isMatrix(v){return null!=v&&"Matrix"===v.klass}get size(){return this.rows*this.columns}apply(v){if("function"!=typeof v)throw new TypeError("callback must be a function");for(let p=0;p<this.rows;p++)for(let c=0;c<this.columns;c++)v.call(this,p,c);return this}to1DArray(){let v=[];for(let p=0;p<this.rows;p++)for(let c=0;c<this.columns;c++)v.push(this.get(p,c));return v}to2DArray(){let v=[];for(let p=0;p<this.rows;p++){v.push([]);for(let c=0;c<this.columns;c++)v[p].push(this.get(p,c))}return v}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let v=0;v<this.rows;v++)for(let p=0;p<=v;p++)if(this.get(v,p)!==this.get(p,v))return!1;return!0}return!1}isEchelonForm(){let v=0,p=0,c=-1,f=!0,S=!1;for(;v<this.rows&&f;){for(p=0,S=!1;p<this.columns&&!1===S;)0===this.get(v,p)?p++:1===this.get(v,p)&&p>c?(S=!0,c=p):(f=!1,S=!0);v++}return f}isReducedEchelonForm(){let v=0,p=0,c=-1,f=!0,S=!1;for(;v<this.rows&&f;){for(p=0,S=!1;p<this.columns&&!1===S;)0===this.get(v,p)?p++:1===this.get(v,p)&&p>c?(S=!0,c=p):(f=!1,S=!0);for(let P=p+1;P<this.rows;P++)0!==this.get(v,P)&&(f=!1);v++}return f}echelonForm(){let v=this.clone(),p=0,c=0;for(;p<v.rows&&c<v.columns;){let f=p;for(let S=p;S<v.rows;S++)v.get(S,c)>v.get(f,c)&&(f=S);if(0===v.get(f,c))c++;else{v.swapRows(p,f);let S=v.get(p,c);for(let P=c;P<v.columns;P++)v.set(p,P,v.get(p,P)/S);for(let P=p+1;P<v.rows;P++){let F=v.get(P,c)/v.get(p,c);v.set(P,c,0);for(let Z=c+1;Z<v.columns;Z++)v.set(P,Z,v.get(P,Z)-v.get(p,Z)*F)}p++,c++}}return v}reducedEchelonForm(){let v=this.echelonForm(),p=v.columns,c=v.rows,f=c-1;for(;f>=0;)if(0===v.maxRow(f))f--;else{let S=0,P=!1;for(;S<c&&!1===P;)1===v.get(f,S)?P=!0:S++;for(let F=0;F<f;F++){let Z=v.get(F,S);for(let ie=S;ie<p;ie++){let Q=v.get(F,ie)-Z*v.get(f,ie);v.set(F,ie,Q)}}f--}return v}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(v={}){if("object"!=typeof v)throw new TypeError("options must be an object");const{rows:p=1,columns:c=1}=v;if(!Number.isInteger(p)||p<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(c)||c<=0)throw new TypeError("columns must be a positive integer");let f=new ge(this.rows*p,this.columns*c);for(let S=0;S<p;S++)for(let P=0;P<c;P++)f.setSubMatrix(this,this.rows*S,this.columns*P);return f}fill(v){for(let p=0;p<this.rows;p++)for(let c=0;c<this.columns;c++)this.set(p,c,v);return this}neg(){return this.mulS(-1)}getRow(v){(0,C.zb)(this,v);let p=[];for(let c=0;c<this.columns;c++)p.push(this.get(v,c));return p}getRowVector(v){return ge.rowVector(this.getRow(v))}setRow(v,p){(0,C.zb)(this,v),p=(0,C.on)(this,p);for(let c=0;c<this.columns;c++)this.set(v,c,p[c]);return this}swapRows(v,p){(0,C.zb)(this,v),(0,C.zb)(this,p);for(let c=0;c<this.columns;c++){let f=this.get(v,c);this.set(v,c,this.get(p,c)),this.set(p,c,f)}return this}getColumn(v){(0,C.bp)(this,v);let p=[];for(let c=0;c<this.rows;c++)p.push(this.get(c,v));return p}getColumnVector(v){return ge.columnVector(this.getColumn(v))}setColumn(v,p){(0,C.bp)(this,v),p=(0,C.Um)(this,p);for(let c=0;c<this.rows;c++)this.set(c,v,p[c]);return this}swapColumns(v,p){(0,C.bp)(this,v),(0,C.bp)(this,p);for(let c=0;c<this.rows;c++){let f=this.get(c,v);this.set(c,v,this.get(c,p)),this.set(c,p,f)}return this}addRowVector(v){v=(0,C.on)(this,v);for(let p=0;p<this.rows;p++)for(let c=0;c<this.columns;c++)this.set(p,c,this.get(p,c)+v[c]);return this}subRowVector(v){v=(0,C.on)(this,v);for(let p=0;p<this.rows;p++)for(let c=0;c<this.columns;c++)this.set(p,c,this.get(p,c)-v[c]);return this}mulRowVector(v){v=(0,C.on)(this,v);for(let p=0;p<this.rows;p++)for(let c=0;c<this.columns;c++)this.set(p,c,this.get(p,c)*v[c]);return this}divRowVector(v){v=(0,C.on)(this,v);for(let p=0;p<this.rows;p++)for(let c=0;c<this.columns;c++)this.set(p,c,this.get(p,c)/v[c]);return this}addColumnVector(v){v=(0,C.Um)(this,v);for(let p=0;p<this.rows;p++)for(let c=0;c<this.columns;c++)this.set(p,c,this.get(p,c)+v[p]);return this}subColumnVector(v){v=(0,C.Um)(this,v);for(let p=0;p<this.rows;p++)for(let c=0;c<this.columns;c++)this.set(p,c,this.get(p,c)-v[p]);return this}mulColumnVector(v){v=(0,C.Um)(this,v);for(let p=0;p<this.rows;p++)for(let c=0;c<this.columns;c++)this.set(p,c,this.get(p,c)*v[p]);return this}divColumnVector(v){v=(0,C.Um)(this,v);for(let p=0;p<this.rows;p++)for(let c=0;c<this.columns;c++)this.set(p,c,this.get(p,c)/v[p]);return this}mulRow(v,p){(0,C.zb)(this,v);for(let c=0;c<this.columns;c++)this.set(v,c,this.get(v,c)*p);return this}mulColumn(v,p){(0,C.bp)(this,v);for(let c=0;c<this.rows;c++)this.set(c,v,this.get(c,v)*p);return this}max(v){if(this.isEmpty())return NaN;switch(v){case"row":{const p=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.get(c,f)>p[c]&&(p[c]=this.get(c,f));return p}case"column":{const p=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.get(c,f)>p[f]&&(p[f]=this.get(c,f));return p}case void 0:{let p=this.get(0,0);for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.get(c,f)>p&&(p=this.get(c,f));return p}default:throw new Error(`invalid option: ${v}`)}}maxIndex(){(0,C.cT)(this);let v=this.get(0,0),p=[0,0];for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.get(c,f)>v&&(v=this.get(c,f),p[0]=c,p[1]=f);return p}min(v){if(this.isEmpty())return NaN;switch(v){case"row":{const p=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.get(c,f)<p[c]&&(p[c]=this.get(c,f));return p}case"column":{const p=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.get(c,f)<p[f]&&(p[f]=this.get(c,f));return p}case void 0:{let p=this.get(0,0);for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.get(c,f)<p&&(p=this.get(c,f));return p}default:throw new Error(`invalid option: ${v}`)}}minIndex(){(0,C.cT)(this);let v=this.get(0,0),p=[0,0];for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.get(c,f)<v&&(v=this.get(c,f),p[0]=c,p[1]=f);return p}maxRow(v){if((0,C.zb)(this,v),this.isEmpty())return NaN;let p=this.get(v,0);for(let c=1;c<this.columns;c++)this.get(v,c)>p&&(p=this.get(v,c));return p}maxRowIndex(v){(0,C.zb)(this,v),(0,C.cT)(this);let p=this.get(v,0),c=[v,0];for(let f=1;f<this.columns;f++)this.get(v,f)>p&&(p=this.get(v,f),c[1]=f);return c}minRow(v){if((0,C.zb)(this,v),this.isEmpty())return NaN;let p=this.get(v,0);for(let c=1;c<this.columns;c++)this.get(v,c)<p&&(p=this.get(v,c));return p}minRowIndex(v){(0,C.zb)(this,v),(0,C.cT)(this);let p=this.get(v,0),c=[v,0];for(let f=1;f<this.columns;f++)this.get(v,f)<p&&(p=this.get(v,f),c[1]=f);return c}maxColumn(v){if((0,C.bp)(this,v),this.isEmpty())return NaN;let p=this.get(0,v);for(let c=1;c<this.rows;c++)this.get(c,v)>p&&(p=this.get(c,v));return p}maxColumnIndex(v){(0,C.bp)(this,v),(0,C.cT)(this);let p=this.get(0,v),c=[0,v];for(let f=1;f<this.rows;f++)this.get(f,v)>p&&(p=this.get(f,v),c[0]=f);return c}minColumn(v){if((0,C.bp)(this,v),this.isEmpty())return NaN;let p=this.get(0,v);for(let c=1;c<this.rows;c++)this.get(c,v)<p&&(p=this.get(c,v));return p}minColumnIndex(v){(0,C.bp)(this,v),(0,C.cT)(this);let p=this.get(0,v),c=[0,v];for(let f=1;f<this.rows;f++)this.get(f,v)<p&&(p=this.get(f,v),c[0]=f);return c}diag(){let v=Math.min(this.rows,this.columns),p=[];for(let c=0;c<v;c++)p.push(this.get(c,c));return p}norm(v="frobenius"){let p=0;if("max"===v)return this.max();if("frobenius"===v){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)p+=this.get(c,f)*this.get(c,f);return Math.sqrt(p)}throw new RangeError(`unknown norm type: ${v}`)}cumulativeSum(){let v=0;for(let p=0;p<this.rows;p++)for(let c=0;c<this.columns;c++)v+=this.get(p,c),this.set(p,c,v);return this}dot(v){je.isMatrix(v)&&(v=v.to1DArray());let p=this.to1DArray();if(p.length!==v.length)throw new RangeError("vectors do not have the same size");let c=0;for(let f=0;f<p.length;f++)c+=p[f]*v[f];return c}mmul(v){v=ge.checkMatrix(v);let p=this.rows,c=this.columns,f=v.columns,S=new ge(p,f),P=new Float64Array(c);for(let F=0;F<f;F++){for(let Z=0;Z<c;Z++)P[Z]=v.get(Z,F);for(let Z=0;Z<p;Z++){let ie=0;for(let Q=0;Q<c;Q++)ie+=this.get(Z,Q)*P[Q];S.set(Z,F,ie)}}return S}strassen2x2(v){v=ge.checkMatrix(v);let p=new ge(2,2);const c=this.get(0,0),f=v.get(0,0),S=this.get(0,1),P=v.get(0,1),F=this.get(1,0),Z=v.get(1,0),ie=this.get(1,1),Q=v.get(1,1),J=(c+ie)*(f+Q),Me=(F+ie)*f,ne=c*(P-Q),ve=ie*(Z-f),Le=(c+S)*Q,Ce=ne+Le,Be=Me+ve,ke=J-Me+ne+(F-c)*(f+P);return p.set(0,0,J+ve-Le+(S-ie)*(Z+Q)),p.set(0,1,Ce),p.set(1,0,Be),p.set(1,1,ke),p}strassen3x3(v){v=ge.checkMatrix(v);let p=new ge(3,3);const c=this.get(0,0),f=this.get(0,1),S=this.get(0,2),P=this.get(1,0),F=this.get(1,1),Z=this.get(1,2),ie=this.get(2,0),Q=this.get(2,1),J=this.get(2,2),Me=v.get(0,0),ne=v.get(0,1),ve=v.get(0,2),Le=v.get(1,0),Pe=v.get(1,1),Ne=v.get(1,2),xt=v.get(2,0),Ce=v.get(2,1),Be=v.get(2,2),Ae=(c-P)*(-ne+Pe),et=(-c+P+F)*(Me-ne+Pe),Ge=(P+F)*(-Me+ne),He=c*Me,ut=(-c+ie+Q)*(Me-ve+Ne),yt=(-c+ie)*(ve-Ne),mt=(ie+Q)*(-Me+ve),ze=(-S+Q+J)*(Pe+xt-Ce),ht=(S-J)*(Pe-Ce),dt=S*xt,Ct=(Q+J)*(-xt+Ce),pt=(-S+F+Z)*(Ne+xt-Be),lt=(S-Z)*(Ne-Be),Gt=(F+Z)*(-xt+Be),X=(c+f+S-P-F-Q-J)*Pe+et+Ge+He+ze+dt+Ct,_e=He+ut+mt+(c+f+S-F-Z-ie-Q)*Ne+dt+pt+Gt,Ee=Ae+F*(-Me+ne+Le-Pe-Ne-xt+Be)+et+He+dt+pt+lt,Oe=Ae+et+Ge+He+Z*Ce,Ke=dt+pt+lt+Gt+P*ve,it=He+ut+yt+Q*(-Me+ve+Le-Pe-Ne-xt+Ce)+ze+ht+dt,Ot=ze+ht+dt+Ct+ie*ne,jt=He+ut+yt+mt+J*Be;return p.set(0,0,He+dt+f*Le),p.set(0,1,X),p.set(0,2,_e),p.set(1,0,Ee),p.set(1,1,Oe),p.set(1,2,Ke),p.set(2,0,it),p.set(2,1,Ot),p.set(2,2,jt),p}mmulStrassen(v){v=ge.checkMatrix(v);let p=this.clone(),c=p.rows,f=p.columns,S=v.rows,P=v.columns;function F(J,Me,ne){if(J.rows===Me&&J.columns===ne)return J;{let Pe=je.zeros(Me,ne);return Pe=Pe.setSubMatrix(J,0,0),Pe}}f!==S&&console.warn(`Multiplying ${c} x ${f} and ${S} x ${P} matrix: dimensions do not match.`);let Z=Math.max(c,S),ie=Math.max(f,P);return p=F(p,Z,ie),function Q(J,Me,ne,ve){if(ne<=512||ve<=512)return J.mmul(Me);ne%2==1&&ve%2==1?(J=F(J,ne+1,ve+1),Me=F(Me,ne+1,ve+1)):ne%2==1?(J=F(J,ne+1,ve),Me=F(Me,ne+1,ve)):ve%2==1&&(J=F(J,ne,ve+1),Me=F(Me,ne,ve+1));let Le=parseInt(J.rows/2,10),Pe=parseInt(J.columns/2,10),Ne=J.subMatrix(0,Le-1,0,Pe-1),xt=Me.subMatrix(0,Le-1,0,Pe-1),Ce=J.subMatrix(0,Le-1,Pe,J.columns-1),Be=Me.subMatrix(0,Le-1,Pe,Me.columns-1),ke=J.subMatrix(Le,J.rows-1,0,Pe-1),Ae=Me.subMatrix(Le,Me.rows-1,0,Pe-1),$e=J.subMatrix(Le,J.rows-1,Pe,J.columns-1),et=Me.subMatrix(Le,Me.rows-1,Pe,Me.columns-1),Ge=Q(je.add(Ne,$e),je.add(xt,et),Le,Pe),He=Q(je.add(ke,$e),xt,Le,Pe),ut=Q(Ne,je.sub(Be,et),Le,Pe),yt=Q($e,je.sub(Ae,xt),Le,Pe),mt=Q(je.add(Ne,Ce),et,Le,Pe),qe=Q(je.sub(ke,Ne),je.add(xt,Be),Le,Pe),Ue=Q(je.sub(Ce,$e),je.add(Ae,et),Le,Pe),ze=je.add(Ge,yt);ze.sub(mt),ze.add(Ue);let ht=je.add(ut,mt),dt=je.add(He,yt),Ct=je.sub(Ge,He);Ct.add(ut),Ct.add(qe);let pt=je.zeros(2*ze.rows,2*ze.columns);return pt=pt.setSubMatrix(ze,0,0),pt=pt.setSubMatrix(ht,ze.rows,0),pt=pt.setSubMatrix(dt,0,ze.columns),pt=pt.setSubMatrix(Ct,ze.rows,ze.columns),pt.subMatrix(0,ne-1,0,ve-1)}(p,v=F(v,Z,ie),Z,ie)}scaleRows(v={}){if("object"!=typeof v)throw new TypeError("options must be an object");const{min:p=0,max:c=1}=v;if(!Number.isFinite(p))throw new TypeError("min must be a number");if(!Number.isFinite(c))throw new TypeError("max must be a number");if(p>=c)throw new RangeError("min must be smaller than max");let f=new ge(this.rows,this.columns);for(let S=0;S<this.rows;S++){const P=this.getRow(S);P.length>0&&_(P,{min:p,max:c,output:P}),f.setRow(S,P)}return f}scaleColumns(v={}){if("object"!=typeof v)throw new TypeError("options must be an object");const{min:p=0,max:c=1}=v;if(!Number.isFinite(p))throw new TypeError("min must be a number");if(!Number.isFinite(c))throw new TypeError("max must be a number");if(p>=c)throw new RangeError("min must be smaller than max");let f=new ge(this.rows,this.columns);for(let S=0;S<this.columns;S++){const P=this.getColumn(S);P.length&&_(P,{min:p,max:c,output:P}),f.setColumn(S,P)}return f}flipRows(){const v=Math.ceil(this.columns/2);for(let p=0;p<this.rows;p++)for(let c=0;c<v;c++){let f=this.get(p,c),S=this.get(p,this.columns-1-c);this.set(p,c,S),this.set(p,this.columns-1-c,f)}return this}flipColumns(){const v=Math.ceil(this.rows/2);for(let p=0;p<this.columns;p++)for(let c=0;c<v;c++){let f=this.get(c,p),S=this.get(this.rows-1-c,p);this.set(c,p,S),this.set(this.rows-1-c,p,f)}return this}kroneckerProduct(v){v=ge.checkMatrix(v);let p=this.rows,c=this.columns,f=v.rows,S=v.columns,P=new ge(p*f,c*S);for(let F=0;F<p;F++)for(let Z=0;Z<c;Z++)for(let ie=0;ie<f;ie++)for(let Q=0;Q<S;Q++)P.set(f*F+ie,S*Z+Q,this.get(F,Z)*v.get(ie,Q));return P}kroneckerSum(v){if(v=ge.checkMatrix(v),!this.isSquare()||!v.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let p=this.rows,c=v.rows,f=this.kroneckerProduct(ge.eye(c,c)),S=ge.eye(p,p).kroneckerProduct(v);return f.add(S)}transpose(){let v=new ge(this.columns,this.rows);for(let p=0;p<this.rows;p++)for(let c=0;c<this.columns;c++)v.set(c,p,this.get(p,c));return v}sortRows(v=z){for(let p=0;p<this.rows;p++)this.setRow(p,this.getRow(p).sort(v));return this}sortColumns(v=z){for(let p=0;p<this.columns;p++)this.setColumn(p,this.getColumn(p).sort(v));return this}subMatrix(v,p,c,f){(0,C.J5)(this,v,p,c,f);let S=new ge(p-v+1,f-c+1);for(let P=v;P<=p;P++)for(let F=c;F<=f;F++)S.set(P-v,F-c,this.get(P,F));return S}subMatrixRow(v,p,c){if(void 0===p&&(p=0),void 0===c&&(c=this.columns-1),p>c||p<0||p>=this.columns||c<0||c>=this.columns)throw new RangeError("Argument out of range");let f=new ge(v.length,c-p+1);for(let S=0;S<v.length;S++)for(let P=p;P<=c;P++){if(v[S]<0||v[S]>=this.rows)throw new RangeError(`Row index out of range: ${v[S]}`);f.set(S,P-p,this.get(v[S],P))}return f}subMatrixColumn(v,p,c){if(void 0===p&&(p=0),void 0===c&&(c=this.rows-1),p>c||p<0||p>=this.rows||c<0||c>=this.rows)throw new RangeError("Argument out of range");let f=new ge(c-p+1,v.length);for(let S=0;S<v.length;S++)for(let P=p;P<=c;P++){if(v[S]<0||v[S]>=this.columns)throw new RangeError(`Column index out of range: ${v[S]}`);f.set(P-p,S,this.get(P,v[S]))}return f}setSubMatrix(v,p,c){if((v=ge.checkMatrix(v)).isEmpty())return this;(0,C.J5)(this,p,p+v.rows-1,c,c+v.columns-1);for(let P=0;P<v.rows;P++)for(let F=0;F<v.columns;F++)this.set(p+P,c+F,v.get(P,F));return this}selection(v,p){(0,C.ZR)(this,v),(0,C.g)(this,p);let c=new ge(v.length,p.length);for(let f=0;f<v.length;f++){let S=v[f];for(let P=0;P<p.length;P++)c.set(f,P,this.get(S,p[P]))}return c}trace(){let v=Math.min(this.rows,this.columns),p=0;for(let c=0;c<v;c++)p+=this.get(c,c);return p}clone(){let v=new ge(this.rows,this.columns);for(let p=0;p<this.rows;p++)for(let c=0;c<this.columns;c++)v.set(p,c,this.get(p,c));return v}sum(v){switch(v){case"row":return function T(N){let v=(0,C.B4)(N.rows);for(let p=0;p<N.rows;++p)for(let c=0;c<N.columns;++c)v[p]+=N.get(p,c);return v}(this);case"column":return function B(N){let v=(0,C.B4)(N.columns);for(let p=0;p<N.rows;++p)for(let c=0;c<N.columns;++c)v[c]+=N.get(p,c);return v}(this);case void 0:return function V(N){let v=0;for(let p=0;p<N.rows;p++)for(let c=0;c<N.columns;c++)v+=N.get(p,c);return v}(this);default:throw new Error(`invalid option: ${v}`)}}product(v){switch(v){case"row":return function G(N){let v=(0,C.B4)(N.rows,1);for(let p=0;p<N.rows;++p)for(let c=0;c<N.columns;++c)v[p]*=N.get(p,c);return v}(this);case"column":return function ae(N){let v=(0,C.B4)(N.columns,1);for(let p=0;p<N.rows;++p)for(let c=0;c<N.columns;++c)v[c]*=N.get(p,c);return v}(this);case void 0:return function fe(N){let v=1;for(let p=0;p<N.rows;p++)for(let c=0;c<N.columns;c++)v*=N.get(p,c);return v}(this);default:throw new Error(`invalid option: ${v}`)}}mean(v){const p=this.sum(v);switch(v){case"row":for(let c=0;c<this.rows;c++)p[c]/=this.columns;return p;case"column":for(let c=0;c<this.columns;c++)p[c]/=this.rows;return p;case void 0:return p/this.size;default:throw new Error(`invalid option: ${v}`)}}variance(v,p={}){if("object"==typeof v&&(p=v,v=void 0),"object"!=typeof p)throw new TypeError("options must be an object");const{unbiased:c=!0,mean:f=this.mean(v)}=p;if("boolean"!=typeof c)throw new TypeError("unbiased must be a boolean");switch(v){case"row":if(!(0,I.N)(f))throw new TypeError("mean must be an array");return function k(N,v,p){const c=N.rows,f=N.columns,S=[];for(let P=0;P<c;P++){let F=0,Z=0,ie=0;for(let Q=0;Q<f;Q++)ie=N.get(P,Q)-p[P],F+=ie,Z+=ie*ie;S.push(v?(Z-F*F/f)/(f-1):(Z-F*F/f)/f)}return S}(this,c,f);case"column":if(!(0,I.N)(f))throw new TypeError("mean must be an array");return function O(N,v,p){const c=N.rows,f=N.columns,S=[];for(let P=0;P<f;P++){let F=0,Z=0,ie=0;for(let Q=0;Q<c;Q++)ie=N.get(Q,P)-p[P],F+=ie,Z+=ie*ie;S.push(v?(Z-F*F/c)/(c-1):(Z-F*F/c)/c)}return S}(this,c,f);case void 0:if("number"!=typeof f)throw new TypeError("mean must be a number");return function Y(N,v,p){const c=N.rows,f=N.columns,S=c*f;let P=0,F=0,Z=0;for(let ie=0;ie<c;ie++)for(let Q=0;Q<f;Q++)Z=N.get(ie,Q)-p,P+=Z,F+=Z*Z;return v?(F-P*P/S)/(S-1):(F-P*P/S)/S}(this,c,f);default:throw new Error(`invalid option: ${v}`)}}standardDeviation(v,p){"object"==typeof v&&(p=v,v=void 0);const c=this.variance(v,p);if(void 0===v)return Math.sqrt(c);for(let f=0;f<c.length;f++)c[f]=Math.sqrt(c[f]);return c}center(v,p={}){if("object"==typeof v&&(p=v,v=void 0),"object"!=typeof p)throw new TypeError("options must be an object");const{center:c=this.mean(v)}=p;switch(v){case"row":if(!(0,I.N)(c))throw new TypeError("center must be an array");return function q(N,v){for(let p=0;p<N.rows;p++)for(let c=0;c<N.columns;c++)N.set(p,c,N.get(p,c)-v[p])}(this,c),this;case"column":if(!(0,I.N)(c))throw new TypeError("center must be an array");return function me(N,v){for(let p=0;p<N.rows;p++)for(let c=0;c<N.columns;c++)N.set(p,c,N.get(p,c)-v[c])}(this,c),this;case void 0:if("number"!=typeof c)throw new TypeError("center must be a number");return function re(N,v){for(let p=0;p<N.rows;p++)for(let c=0;c<N.columns;c++)N.set(p,c,N.get(p,c)-v)}(this,c),this;default:throw new Error(`invalid option: ${v}`)}}scale(v,p={}){if("object"==typeof v&&(p=v,v=void 0),"object"!=typeof p)throw new TypeError("options must be an object");let c=p.scale;switch(v){case"row":if(void 0===c)c=function ue(N){const v=[];for(let p=0;p<N.rows;p++){let c=0;for(let f=0;f<N.columns;f++)c+=Math.pow(N.get(p,f),2)/(N.columns-1);v.push(Math.sqrt(c))}return v}(this);else if(!(0,I.N)(c))throw new TypeError("scale must be an array");return function ce(N,v){for(let p=0;p<N.rows;p++)for(let c=0;c<N.columns;c++)N.set(p,c,N.get(p,c)/v[p])}(this,c),this;case"column":if(void 0===c)c=function ye(N){const v=[];for(let p=0;p<N.columns;p++){let c=0;for(let f=0;f<N.rows;f++)c+=Math.pow(N.get(f,p),2)/(N.rows-1);v.push(Math.sqrt(c))}return v}(this);else if(!(0,I.N)(c))throw new TypeError("scale must be an array");return function we(N,v){for(let p=0;p<N.rows;p++)for(let c=0;c<N.columns;c++)N.set(p,c,N.get(p,c)/v[c])}(this,c),this;case void 0:if(void 0===c)c=function tt(N){const v=N.size-1;let p=0;for(let c=0;c<N.columns;c++)for(let f=0;f<N.rows;f++)p+=Math.pow(N.get(f,c),2)/v;return Math.sqrt(p)}(this);else if("number"!=typeof c)throw new TypeError("scale must be a number");return function Ze(N,v){for(let p=0;p<N.rows;p++)for(let c=0;c<N.columns;c++)N.set(p,c,N.get(p,c)/v)}(this,c),this;default:throw new Error(`invalid option: ${v}`)}}toString(v){return M(this,v)}}function z(N,v){return N-v}je.prototype.klass="Matrix","undefined"!=typeof Symbol&&(je.prototype[Symbol.for("nodejs.util.inspect.custom")]=function w(){return M(this)}),je.random=je.rand,je.randomInt=je.randInt,je.diagonal=je.diag,je.prototype.diagonal=je.prototype.diag,je.identity=je.eye,je.prototype.negate=je.prototype.neg,je.prototype.tensorProduct=je.prototype.kroneckerProduct;class ge extends je{constructor(v,p){if(super(),ge.isMatrix(v))return v.clone();if(Number.isInteger(v)&&v>=0){if(this.data=[],!(Number.isInteger(p)&&p>=0))throw new TypeError("nColumns must be a positive integer");for(let c=0;c<v;c++)this.data.push(new Float64Array(p))}else{if(!(0,I.N)(v))throw new TypeError("First argument must be a positive number or an array");{const c=v;if("number"!=typeof(p=(v=c.length)?c[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let f=0;f<v;f++){if(c[f].length!==p)throw new RangeError("Inconsistent array dimensions");if(!c[f].every(v=>"number"==typeof v))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(c[f]))}}}this.rows=v,this.columns=p}set(v,p,c){return this.data[v][p]=c,this}get(v,p){return this.data[v][p]}removeRow(v){return(0,C.zb)(this,v),this.data.splice(v,1),this.rows-=1,this}addRow(v,p){return void 0===p&&(p=v,v=this.rows),(0,C.zb)(this,v,!0),p=Float64Array.from((0,C.on)(this,p)),this.data.splice(v,0,p),this.rows+=1,this}removeColumn(v){(0,C.bp)(this,v);for(let p=0;p<this.rows;p++){const c=new Float64Array(this.columns-1);for(let f=0;f<v;f++)c[f]=this.data[p][f];for(let f=v+1;f<this.columns;f++)c[f-1]=this.data[p][f];this.data[p]=c}return this.columns-=1,this}addColumn(v,p){void 0===p&&(p=v,v=this.columns),(0,C.bp)(this,v,!0),p=(0,C.Um)(this,p);for(let c=0;c<this.rows;c++){const f=new Float64Array(this.columns+1);let S=0;for(;S<v;S++)f[S]=this.data[c][S];for(f[S++]=p[c];S<this.columns+1;S++)f[S]=this.data[c][S-1];this.data[c]=f}return this.columns+=1,this}}!function R(N,v){N.prototype.add=function(c){return"number"==typeof c?this.addS(c):this.addM(c)},N.prototype.addS=function(c){for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)+c);return this},N.prototype.addM=function(c){if(c=v.checkMatrix(c),this.rows!==c.rows||this.columns!==c.columns)throw new RangeError("Matrices dimensions must be equal");for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)+c.get(f,S));return this},N.add=function(c,f){return new v(c).add(f)},N.prototype.sub=function(c){return"number"==typeof c?this.subS(c):this.subM(c)},N.prototype.subS=function(c){for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)-c);return this},N.prototype.subM=function(c){if(c=v.checkMatrix(c),this.rows!==c.rows||this.columns!==c.columns)throw new RangeError("Matrices dimensions must be equal");for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)-c.get(f,S));return this},N.sub=function(c,f){return new v(c).sub(f)},N.prototype.subtract=N.prototype.sub,N.prototype.subtractS=N.prototype.subS,N.prototype.subtractM=N.prototype.subM,N.subtract=N.sub,N.prototype.mul=function(c){return"number"==typeof c?this.mulS(c):this.mulM(c)},N.prototype.mulS=function(c){for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)*c);return this},N.prototype.mulM=function(c){if(c=v.checkMatrix(c),this.rows!==c.rows||this.columns!==c.columns)throw new RangeError("Matrices dimensions must be equal");for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)*c.get(f,S));return this},N.mul=function(c,f){return new v(c).mul(f)},N.prototype.multiply=N.prototype.mul,N.prototype.multiplyS=N.prototype.mulS,N.prototype.multiplyM=N.prototype.mulM,N.multiply=N.mul,N.prototype.div=function(c){return"number"==typeof c?this.divS(c):this.divM(c)},N.prototype.divS=function(c){for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)/c);return this},N.prototype.divM=function(c){if(c=v.checkMatrix(c),this.rows!==c.rows||this.columns!==c.columns)throw new RangeError("Matrices dimensions must be equal");for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)/c.get(f,S));return this},N.div=function(c,f){return new v(c).div(f)},N.prototype.divide=N.prototype.div,N.prototype.divideS=N.prototype.divS,N.prototype.divideM=N.prototype.divM,N.divide=N.div,N.prototype.mod=function(c){return"number"==typeof c?this.modS(c):this.modM(c)},N.prototype.modS=function(c){for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)%c);return this},N.prototype.modM=function(c){if(c=v.checkMatrix(c),this.rows!==c.rows||this.columns!==c.columns)throw new RangeError("Matrices dimensions must be equal");for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)%c.get(f,S));return this},N.mod=function(c,f){return new v(c).mod(f)},N.prototype.modulus=N.prototype.mod,N.prototype.modulusS=N.prototype.modS,N.prototype.modulusM=N.prototype.modM,N.modulus=N.mod,N.prototype.and=function(c){return"number"==typeof c?this.andS(c):this.andM(c)},N.prototype.andS=function(c){for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)&c);return this},N.prototype.andM=function(c){if(c=v.checkMatrix(c),this.rows!==c.rows||this.columns!==c.columns)throw new RangeError("Matrices dimensions must be equal");for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)&c.get(f,S));return this},N.and=function(c,f){return new v(c).and(f)},N.prototype.or=function(c){return"number"==typeof c?this.orS(c):this.orM(c)},N.prototype.orS=function(c){for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)|c);return this},N.prototype.orM=function(c){if(c=v.checkMatrix(c),this.rows!==c.rows||this.columns!==c.columns)throw new RangeError("Matrices dimensions must be equal");for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)|c.get(f,S));return this},N.or=function(c,f){return new v(c).or(f)},N.prototype.xor=function(c){return"number"==typeof c?this.xorS(c):this.xorM(c)},N.prototype.xorS=function(c){for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)^c);return this},N.prototype.xorM=function(c){if(c=v.checkMatrix(c),this.rows!==c.rows||this.columns!==c.columns)throw new RangeError("Matrices dimensions must be equal");for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)^c.get(f,S));return this},N.xor=function(c,f){return new v(c).xor(f)},N.prototype.leftShift=function(c){return"number"==typeof c?this.leftShiftS(c):this.leftShiftM(c)},N.prototype.leftShiftS=function(c){for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)<<c);return this},N.prototype.leftShiftM=function(c){if(c=v.checkMatrix(c),this.rows!==c.rows||this.columns!==c.columns)throw new RangeError("Matrices dimensions must be equal");for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)<<c.get(f,S));return this},N.leftShift=function(c,f){return new v(c).leftShift(f)},N.prototype.signPropagatingRightShift=function(c){return"number"==typeof c?this.signPropagatingRightShiftS(c):this.signPropagatingRightShiftM(c)},N.prototype.signPropagatingRightShiftS=function(c){for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)>>c);return this},N.prototype.signPropagatingRightShiftM=function(c){if(c=v.checkMatrix(c),this.rows!==c.rows||this.columns!==c.columns)throw new RangeError("Matrices dimensions must be equal");for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)>>c.get(f,S));return this},N.signPropagatingRightShift=function(c,f){return new v(c).signPropagatingRightShift(f)},N.prototype.rightShift=function(c){return"number"==typeof c?this.rightShiftS(c):this.rightShiftM(c)},N.prototype.rightShiftS=function(c){for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)>>>c);return this},N.prototype.rightShiftM=function(c){if(c=v.checkMatrix(c),this.rows!==c.rows||this.columns!==c.columns)throw new RangeError("Matrices dimensions must be equal");for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,this.get(f,S)>>>c.get(f,S));return this},N.rightShift=function(c,f){return new v(c).rightShift(f)},N.prototype.zeroFillRightShift=N.prototype.rightShift,N.prototype.zeroFillRightShiftS=N.prototype.rightShiftS,N.prototype.zeroFillRightShiftM=N.prototype.rightShiftM,N.zeroFillRightShift=N.rightShift,N.prototype.not=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,~this.get(c,f));return this},N.not=function(c){return new v(c).not()},N.prototype.abs=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.abs(this.get(c,f)));return this},N.abs=function(c){return new v(c).abs()},N.prototype.acos=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.acos(this.get(c,f)));return this},N.acos=function(c){return new v(c).acos()},N.prototype.acosh=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.acosh(this.get(c,f)));return this},N.acosh=function(c){return new v(c).acosh()},N.prototype.asin=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.asin(this.get(c,f)));return this},N.asin=function(c){return new v(c).asin()},N.prototype.asinh=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.asinh(this.get(c,f)));return this},N.asinh=function(c){return new v(c).asinh()},N.prototype.atan=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.atan(this.get(c,f)));return this},N.atan=function(c){return new v(c).atan()},N.prototype.atanh=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.atanh(this.get(c,f)));return this},N.atanh=function(c){return new v(c).atanh()},N.prototype.cbrt=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.cbrt(this.get(c,f)));return this},N.cbrt=function(c){return new v(c).cbrt()},N.prototype.ceil=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.ceil(this.get(c,f)));return this},N.ceil=function(c){return new v(c).ceil()},N.prototype.clz32=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.clz32(this.get(c,f)));return this},N.clz32=function(c){return new v(c).clz32()},N.prototype.cos=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.cos(this.get(c,f)));return this},N.cos=function(c){return new v(c).cos()},N.prototype.cosh=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.cosh(this.get(c,f)));return this},N.cosh=function(c){return new v(c).cosh()},N.prototype.exp=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.exp(this.get(c,f)));return this},N.exp=function(c){return new v(c).exp()},N.prototype.expm1=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.expm1(this.get(c,f)));return this},N.expm1=function(c){return new v(c).expm1()},N.prototype.floor=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.floor(this.get(c,f)));return this},N.floor=function(c){return new v(c).floor()},N.prototype.fround=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.fround(this.get(c,f)));return this},N.fround=function(c){return new v(c).fround()},N.prototype.log=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.log(this.get(c,f)));return this},N.log=function(c){return new v(c).log()},N.prototype.log1p=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.log1p(this.get(c,f)));return this},N.log1p=function(c){return new v(c).log1p()},N.prototype.log10=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.log10(this.get(c,f)));return this},N.log10=function(c){return new v(c).log10()},N.prototype.log2=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.log2(this.get(c,f)));return this},N.log2=function(c){return new v(c).log2()},N.prototype.round=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.round(this.get(c,f)));return this},N.round=function(c){return new v(c).round()},N.prototype.sign=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.sign(this.get(c,f)));return this},N.sign=function(c){return new v(c).sign()},N.prototype.sin=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.sin(this.get(c,f)));return this},N.sin=function(c){return new v(c).sin()},N.prototype.sinh=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.sinh(this.get(c,f)));return this},N.sinh=function(c){return new v(c).sinh()},N.prototype.sqrt=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.sqrt(this.get(c,f)));return this},N.sqrt=function(c){return new v(c).sqrt()},N.prototype.tan=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.tan(this.get(c,f)));return this},N.tan=function(c){return new v(c).tan()},N.prototype.tanh=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.tanh(this.get(c,f)));return this},N.tanh=function(c){return new v(c).tanh()},N.prototype.trunc=function(){for(let c=0;c<this.rows;c++)for(let f=0;f<this.columns;f++)this.set(c,f,Math.trunc(this.get(c,f)));return this},N.trunc=function(c){return new v(c).trunc()},N.pow=function(c,f){return new v(c).pow(f)},N.prototype.pow=function(c){return"number"==typeof c?this.powS(c):this.powM(c)},N.prototype.powS=function(c){for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,Math.pow(this.get(f,S),c));return this},N.prototype.powM=function(c){if(c=v.checkMatrix(c),this.rows!==c.rows||this.columns!==c.columns)throw new RangeError("Matrices dimensions must be equal");for(let f=0;f<this.rows;f++)for(let S=0;S<this.columns;S++)this.set(f,S,Math.pow(this.get(f,S),c.get(f,S)));return this}}(je,ge)},9781:(se,ee,D)=>{"use strict";D.d(ee,{B4:()=>y,J5:()=>M,Um:()=>E,ZR:()=>g,bp:()=>b,cT:()=>R,g:()=>w,on:()=>_,zb:()=>U});var I=D(7782);function U(C,T,B){if(T<0||T>(B?C.rows:C.rows-1))throw new RangeError("Row index out of range")}function b(C,T,B){if(T<0||T>(B?C.columns:C.columns-1))throw new RangeError("Column index out of range")}function _(C,T){if(T.to1DArray&&(T=T.to1DArray()),T.length!==C.columns)throw new RangeError("vector size must be the same as the number of columns");return T}function E(C,T){if(T.to1DArray&&(T=T.to1DArray()),T.length!==C.rows)throw new RangeError("vector size must be the same as the number of rows");return T}function g(C,T){if(!(0,I.N)(T))throw new TypeError("row indices must be an array");for(let B=0;B<T.length;B++)if(T[B]<0||T[B]>=C.rows)throw new RangeError("row indices are out of range")}function w(C,T){if(!(0,I.N)(T))throw new TypeError("column indices must be an array");for(let B=0;B<T.length;B++)if(T[B]<0||T[B]>=C.columns)throw new RangeError("column indices are out of range")}function M(C,T,B,V,G){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(A("startRow",T),A("endRow",B),A("startColumn",V),A("endColumn",G),T>B||V>G||T<0||T>=C.rows||B<0||B>=C.rows||V<0||V>=C.columns||G<0||G>=C.columns)throw new RangeError("Submatrix indices are out of range")}function y(C,T=0){let B=[];for(let V=0;V<C;V++)B.push(T);return B}function A(C,T){if("number"!=typeof T)throw new TypeError(`${C} must be a number`)}function R(C){if(C.isEmpty())throw new Error("Empty matrix has no elements to index")}},6362:(se,ee,D)=>{"use strict";D.d(ee,{Z:()=>U});var I=D(4466);class U extends I.X{constructor(_,E,g){super(),this.matrix=_,this.rows=E,this.columns=g}}},5475:(se,ee,D)=>{"use strict";D.d(ee,{Z:()=>U});var I=D(6362);class U extends I.Z{constructor(_){super(_,_.columns,_.rows)}set(_,E,g){return this.matrix.set(E,_,g),this}get(_,E){return this.matrix.get(E,_)}}},3209:(se,ee,D)=>{"use strict";D.d(ee,{Z:()=>U});var I=D(4466);class U extends I.X{constructor(_){super(),this.data=_,this.rows=_.length,this.columns=_[0].length}set(_,E,g){return this.data[_][E]=g,this}get(_,E){return this.data[_][E]}}},9537:se=>{se.exports=function ee(D,I){D=D||0;for(var U=new Array(D),b=0;b<D;b++)U[b]=I;return U}},8765:se=>{se.exports=function ee(D){return 0===D?1:(D--,D|=D>>1,D|=D>>2,D|=D>>4,D|=D>>8,1+(D|=D>>16))}},7854:se=>{var ee=function(D){"use strict";var b,I=Object.prototype,U=I.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},E=_.iterator||"@@iterator",g=_.asyncIterator||"@@asyncIterator",w=_.toStringTag||"@@toStringTag";function M(z,le,ge){return Object.defineProperty(z,le,{value:ge,enumerable:!0,configurable:!0,writable:!0}),z[le]}try{M({},"")}catch(z){M=function(le,ge,N){return le[ge]=N}}function y(z,le,ge,N){var p=Object.create((le&&le.prototype instanceof G?le:G).prototype),c=new tt(N||[]);return p._invoke=function ue(z,le,ge){var N=R;return function(p,c){if(N===T)throw new Error("Generator is already running");if(N===B){if("throw"===p)throw c;return je()}for(ge.method=p,ge.arg=c;;){var f=ge.delegate;if(f){var S=ce(f,ge);if(S){if(S===V)continue;return S}}if("next"===ge.method)ge.sent=ge._sent=ge.arg;else if("throw"===ge.method){if(N===R)throw N=B,ge.arg;ge.dispatchException(ge.arg)}else"return"===ge.method&&ge.abrupt("return",ge.arg);N=T;var P=A(z,le,ge);if("normal"===P.type){if(N=ge.done?B:C,P.arg===V)continue;return{value:P.arg,done:ge.done}}"throw"===P.type&&(N=B,ge.method="throw",ge.arg=P.arg)}}}(z,ge,c),p}function A(z,le,ge){try{return{type:"normal",arg:z.call(le,ge)}}catch(N){return{type:"throw",arg:N}}}D.wrap=y;var R="suspendedStart",C="suspendedYield",T="executing",B="completed",V={};function G(){}function ae(){}function fe(){}var k={};M(k,E,function(){return this});var O=Object.getPrototypeOf,Y=O&&O(O(Ze([])));Y&&Y!==I&&U.call(Y,E)&&(k=Y);var q=fe.prototype=G.prototype=Object.create(k);function me(z){["next","throw","return"].forEach(function(le){M(z,le,function(ge){return this._invoke(le,ge)})})}function re(z,le){function ge(p,c,f,S){var P=A(z[p],z,c);if("throw"!==P.type){var F=P.arg,Z=F.value;return Z&&"object"==typeof Z&&U.call(Z,"__await")?le.resolve(Z.__await).then(function(ie){ge("next",ie,f,S)},function(ie){ge("throw",ie,f,S)}):le.resolve(Z).then(function(ie){F.value=ie,f(F)},function(ie){return ge("throw",ie,f,S)})}S(P.arg)}var N;this._invoke=function v(p,c){function f(){return new le(function(S,P){ge(p,c,S,P)})}return N=N?N.then(f,f):f()}}function ce(z,le){var ge=z.iterator[le.method];if(ge===b){if(le.delegate=null,"throw"===le.method){if(z.iterator.return&&(le.method="return",le.arg=b,ce(z,le),"throw"===le.method))return V;le.method="throw",le.arg=new TypeError("The iterator does not provide a 'throw' method")}return V}var N=A(ge,z.iterator,le.arg);if("throw"===N.type)return le.method="throw",le.arg=N.arg,le.delegate=null,V;var v=N.arg;return v?v.done?(le[z.resultName]=v.value,le.next=z.nextLoc,"return"!==le.method&&(le.method="next",le.arg=b),le.delegate=null,V):v:(le.method="throw",le.arg=new TypeError("iterator result is not an object"),le.delegate=null,V)}function ye(z){var le={tryLoc:z[0]};1 in z&&(le.catchLoc=z[1]),2 in z&&(le.finallyLoc=z[2],le.afterLoc=z[3]),this.tryEntries.push(le)}function we(z){var le=z.completion||{};le.type="normal",delete le.arg,z.completion=le}function tt(z){this.tryEntries=[{tryLoc:"root"}],z.forEach(ye,this),this.reset(!0)}function Ze(z){if(z){var le=z[E];if(le)return le.call(z);if("function"==typeof z.next)return z;if(!isNaN(z.length)){var ge=-1,N=function v(){for(;++ge<z.length;)if(U.call(z,ge))return v.value=z[ge],v.done=!1,v;return v.value=b,v.done=!0,v};return N.next=N}}return{next:je}}function je(){return{value:b,done:!0}}return ae.prototype=fe,M(q,"constructor",fe),M(fe,"constructor",ae),ae.displayName=M(fe,w,"GeneratorFunction"),D.isGeneratorFunction=function(z){var le="function"==typeof z&&z.constructor;return!!le&&(le===ae||"GeneratorFunction"===(le.displayName||le.name))},D.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,fe):(z.__proto__=fe,M(z,w,"GeneratorFunction")),z.prototype=Object.create(q),z},D.awrap=function(z){return{__await:z}},me(re.prototype),M(re.prototype,g,function(){return this}),D.AsyncIterator=re,D.async=function(z,le,ge,N,v){void 0===v&&(v=Promise);var p=new re(y(z,le,ge,N),v);return D.isGeneratorFunction(le)?p:p.next().then(function(c){return c.done?c.value:p.next()})},me(q),M(q,w,"Generator"),M(q,E,function(){return this}),M(q,"toString",function(){return"[object Generator]"}),D.keys=function(z){var le=[];for(var ge in z)le.push(ge);return le.reverse(),function N(){for(;le.length;){var v=le.pop();if(v in z)return N.value=v,N.done=!1,N}return N.done=!0,N}},D.values=Ze,tt.prototype={constructor:tt,reset:function(z){if(this.prev=0,this.next=0,this.sent=this._sent=b,this.done=!1,this.delegate=null,this.method="next",this.arg=b,this.tryEntries.forEach(we),!z)for(var le in this)"t"===le.charAt(0)&&U.call(this,le)&&!isNaN(+le.slice(1))&&(this[le]=b)},stop:function(){this.done=!0;var le=this.tryEntries[0].completion;if("throw"===le.type)throw le.arg;return this.rval},dispatchException:function(z){if(this.done)throw z;var le=this;function ge(S,P){return p.type="throw",p.arg=z,le.next=S,P&&(le.method="next",le.arg=b),!!P}for(var N=this.tryEntries.length-1;N>=0;--N){var v=this.tryEntries[N],p=v.completion;if("root"===v.tryLoc)return ge("end");if(v.tryLoc<=this.prev){var c=U.call(v,"catchLoc"),f=U.call(v,"finallyLoc");if(c&&f){if(this.prev<v.catchLoc)return ge(v.catchLoc,!0);if(this.prev<v.finallyLoc)return ge(v.finallyLoc)}else if(c){if(this.prev<v.catchLoc)return ge(v.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<v.finallyLoc)return ge(v.finallyLoc)}}}},abrupt:function(z,le){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var N=this.tryEntries[ge];if(N.tryLoc<=this.prev&&U.call(N,"finallyLoc")&&this.prev<N.finallyLoc){var v=N;break}}v&&("break"===z||"continue"===z)&&v.tryLoc<=le&&le<=v.finallyLoc&&(v=null);var p=v?v.completion:{};return p.type=z,p.arg=le,v?(this.method="next",this.next=v.finallyLoc,V):this.complete(p)},complete:function(z,le){if("throw"===z.type)throw z.arg;return"break"===z.type||"continue"===z.type?this.next=z.arg:"return"===z.type?(this.rval=this.arg=z.arg,this.method="return",this.next="end"):"normal"===z.type&&le&&(this.next=le),V},finish:function(z){for(var le=this.tryEntries.length-1;le>=0;--le){var ge=this.tryEntries[le];if(ge.finallyLoc===z)return this.complete(ge.completion,ge.afterLoc),we(ge),V}},catch:function(z){for(var le=this.tryEntries.length-1;le>=0;--le){var ge=this.tryEntries[le];if(ge.tryLoc===z){var N=ge.completion;if("throw"===N.type){var v=N.arg;we(ge)}return v}}throw new Error("illegal catch attempt")},delegateYield:function(z,le,ge){return this.delegate={iterator:Ze(z),resultName:le,nextLoc:ge},"next"===this.method&&(this.arg=b),V}},D}(se.exports);try{regeneratorRuntime=ee}catch(D){"object"==typeof globalThis?globalThis.regeneratorRuntime=ee:Function("r","regeneratorRuntime = r")(ee)}},5555:function(se,ee,D){var I,U;I=function(){return function b(){var _=arguments.length;if(0===_)throw new Error("resolveUrl requires at least one argument; got none.");var E=document.createElement("base");if(E.href=arguments[0],1===_)return E.href;var g=document.getElementsByTagName("head")[0];g.insertBefore(E,g.firstChild);for(var M,w=document.createElement("a"),y=1;y<_;y++)w.href=arguments[y],E.href=M=w.href;return g.removeChild(E),M}},void 0!==(U=I.call(ee,D,ee,se))&&(se.exports=U)},8212:(se,ee,D)=>{"use strict";var I=D(3294),U=D(2903),b=D(4060),_=D(3217);function y(k,O,Y,q){return function(re,ue,ce){var ye=k(k(O(ue[1],ce[0]),O(-ce[1],ue[0])),k(O(re[1],ue[0]),O(-ue[1],re[0]))),we=k(O(re[1],ce[0]),O(-ce[1],re[0])),tt=q(ye,we);return tt[tt.length-1]}}function A(k,O,Y,q){return function(re,ue,ce,ye){var we=k(k(Y(k(O(ce[1],ye[0]),O(-ye[1],ce[0])),ue[2]),k(Y(k(O(ue[1],ye[0]),O(-ye[1],ue[0])),-ce[2]),Y(k(O(ue[1],ce[0]),O(-ce[1],ue[0])),ye[2]))),k(Y(k(O(ue[1],ye[0]),O(-ye[1],ue[0])),re[2]),k(Y(k(O(re[1],ye[0]),O(-ye[1],re[0])),-ue[2]),Y(k(O(re[1],ue[0]),O(-ue[1],re[0])),ye[2])))),tt=k(k(Y(k(O(ce[1],ye[0]),O(-ye[1],ce[0])),re[2]),k(Y(k(O(re[1],ye[0]),O(-ye[1],re[0])),-ce[2]),Y(k(O(re[1],ce[0]),O(-ce[1],re[0])),ye[2]))),k(Y(k(O(ue[1],ce[0]),O(-ce[1],ue[0])),re[2]),k(Y(k(O(re[1],ce[0]),O(-ce[1],re[0])),-ue[2]),Y(k(O(re[1],ue[0]),O(-ue[1],re[0])),ce[2])))),Ze=q(we,tt);return Ze[Ze.length-1]}}function R(k,O,Y,q){return function(re,ue,ce,ye,we){var tt=k(k(k(Y(k(Y(k(O(ye[1],we[0]),O(-we[1],ye[0])),ce[2]),k(Y(k(O(ce[1],we[0]),O(-we[1],ce[0])),-ye[2]),Y(k(O(ce[1],ye[0]),O(-ye[1],ce[0])),we[2]))),ue[3]),k(Y(k(Y(k(O(ye[1],we[0]),O(-we[1],ye[0])),ue[2]),k(Y(k(O(ue[1],we[0]),O(-we[1],ue[0])),-ye[2]),Y(k(O(ue[1],ye[0]),O(-ye[1],ue[0])),we[2]))),-ce[3]),Y(k(Y(k(O(ce[1],we[0]),O(-we[1],ce[0])),ue[2]),k(Y(k(O(ue[1],we[0]),O(-we[1],ue[0])),-ce[2]),Y(k(O(ue[1],ce[0]),O(-ce[1],ue[0])),we[2]))),ye[3]))),k(Y(k(Y(k(O(ce[1],ye[0]),O(-ye[1],ce[0])),ue[2]),k(Y(k(O(ue[1],ye[0]),O(-ye[1],ue[0])),-ce[2]),Y(k(O(ue[1],ce[0]),O(-ce[1],ue[0])),ye[2]))),-we[3]),k(Y(k(Y(k(O(ye[1],we[0]),O(-we[1],ye[0])),ue[2]),k(Y(k(O(ue[1],we[0]),O(-we[1],ue[0])),-ye[2]),Y(k(O(ue[1],ye[0]),O(-ye[1],ue[0])),we[2]))),re[3]),Y(k(Y(k(O(ye[1],we[0]),O(-we[1],ye[0])),re[2]),k(Y(k(O(re[1],we[0]),O(-we[1],re[0])),-ye[2]),Y(k(O(re[1],ye[0]),O(-ye[1],re[0])),we[2]))),-ue[3])))),k(k(Y(k(Y(k(O(ue[1],we[0]),O(-we[1],ue[0])),re[2]),k(Y(k(O(re[1],we[0]),O(-we[1],re[0])),-ue[2]),Y(k(O(re[1],ue[0]),O(-ue[1],re[0])),we[2]))),ye[3]),k(Y(k(Y(k(O(ue[1],ye[0]),O(-ye[1],ue[0])),re[2]),k(Y(k(O(re[1],ye[0]),O(-ye[1],re[0])),-ue[2]),Y(k(O(re[1],ue[0]),O(-ue[1],re[0])),ye[2]))),-we[3]),Y(k(Y(k(O(ce[1],ye[0]),O(-ye[1],ce[0])),ue[2]),k(Y(k(O(ue[1],ye[0]),O(-ye[1],ue[0])),-ce[2]),Y(k(O(ue[1],ce[0]),O(-ce[1],ue[0])),ye[2]))),re[3]))),k(Y(k(Y(k(O(ce[1],ye[0]),O(-ye[1],ce[0])),re[2]),k(Y(k(O(re[1],ye[0]),O(-ye[1],re[0])),-ce[2]),Y(k(O(re[1],ce[0]),O(-ce[1],re[0])),ye[2]))),-ue[3]),k(Y(k(Y(k(O(ue[1],ye[0]),O(-ye[1],ue[0])),re[2]),k(Y(k(O(re[1],ye[0]),O(-ye[1],re[0])),-ue[2]),Y(k(O(re[1],ue[0]),O(-ue[1],re[0])),ye[2]))),ce[3]),Y(k(Y(k(O(ue[1],ce[0]),O(-ce[1],ue[0])),re[2]),k(Y(k(O(re[1],ce[0]),O(-ce[1],re[0])),-ue[2]),Y(k(O(re[1],ue[0]),O(-ue[1],re[0])),ce[2]))),-ye[3]))))),Ze=k(k(k(Y(k(Y(k(O(ye[1],we[0]),O(-we[1],ye[0])),ce[2]),k(Y(k(O(ce[1],we[0]),O(-we[1],ce[0])),-ye[2]),Y(k(O(ce[1],ye[0]),O(-ye[1],ce[0])),we[2]))),re[3]),Y(k(Y(k(O(ye[1],we[0]),O(-we[1],ye[0])),re[2]),k(Y(k(O(re[1],we[0]),O(-we[1],re[0])),-ye[2]),Y(k(O(re[1],ye[0]),O(-ye[1],re[0])),we[2]))),-ce[3])),k(Y(k(Y(k(O(ce[1],we[0]),O(-we[1],ce[0])),re[2]),k(Y(k(O(re[1],we[0]),O(-we[1],re[0])),-ce[2]),Y(k(O(re[1],ce[0]),O(-ce[1],re[0])),we[2]))),ye[3]),Y(k(Y(k(O(ce[1],ye[0]),O(-ye[1],ce[0])),re[2]),k(Y(k(O(re[1],ye[0]),O(-ye[1],re[0])),-ce[2]),Y(k(O(re[1],ce[0]),O(-ce[1],re[0])),ye[2]))),-we[3]))),k(k(Y(k(Y(k(O(ce[1],we[0]),O(-we[1],ce[0])),ue[2]),k(Y(k(O(ue[1],we[0]),O(-we[1],ue[0])),-ce[2]),Y(k(O(ue[1],ce[0]),O(-ce[1],ue[0])),we[2]))),re[3]),Y(k(Y(k(O(ce[1],we[0]),O(-we[1],ce[0])),re[2]),k(Y(k(O(re[1],we[0]),O(-we[1],re[0])),-ce[2]),Y(k(O(re[1],ce[0]),O(-ce[1],re[0])),we[2]))),-ue[3])),k(Y(k(Y(k(O(ue[1],we[0]),O(-we[1],ue[0])),re[2]),k(Y(k(O(re[1],we[0]),O(-we[1],re[0])),-ue[2]),Y(k(O(re[1],ue[0]),O(-ue[1],re[0])),we[2]))),ce[3]),Y(k(Y(k(O(ue[1],ce[0]),O(-ce[1],ue[0])),re[2]),k(Y(k(O(re[1],ce[0]),O(-ce[1],re[0])),-ue[2]),Y(k(O(re[1],ue[0]),O(-ue[1],re[0])),ce[2]))),-we[3])))),je=q(tt,Ze);return je[je.length-1]}}function C(k){return(3===k?y:4===k?A:R)(U,I,b,_)}var T=C(3),B=C(4),V=[function(){return 0},function(){return 0},function(O,Y){return Y[0]-O[0]},function(O,Y,q){var ce,me=(O[1]-q[1])*(Y[0]-q[0]),re=(O[0]-q[0])*(Y[1]-q[1]),ue=me-re;if(me>0){if(re<=0)return ue;ce=me+re}else{if(!(me<0))return ue;if(re>=0)return ue;ce=-(me+re)}var ye=33306690738754716e-32*ce;return ue>=ye||ue<=-ye?ue:T(O,Y,q)},function(O,Y,q,me){var re=O[0]-me[0],ue=Y[0]-me[0],ce=q[0]-me[0],ye=O[1]-me[1],we=Y[1]-me[1],tt=q[1]-me[1],Ze=O[2]-me[2],je=Y[2]-me[2],z=q[2]-me[2],le=ue*tt,ge=ce*we,N=ce*ye,v=re*tt,p=re*we,c=ue*ye,f=Ze*(le-ge)+je*(N-v)+z*(p-c),P=7771561172376103e-31*((Math.abs(le)+Math.abs(ge))*Math.abs(Ze)+(Math.abs(N)+Math.abs(v))*Math.abs(je)+(Math.abs(p)+Math.abs(c))*Math.abs(z));return f>P||-f>P?f:B(O,Y,q,me)}];function G(k){var O=V[k.length];return O||(O=V[k.length]=C(k.length)),O.apply(void 0,k)}function ae(k,O,Y,q,me,re,ue){return function(ye,we,tt,Ze,je){switch(arguments.length){case 0:case 1:return 0;case 2:return q(ye,we);case 3:return me(ye,we,tt);case 4:return re(ye,we,tt,Ze);case 5:return ue(ye,we,tt,Ze,je)}for(var z=new Array(arguments.length),le=0;le<arguments.length;++le)z[le]=arguments[le];return k(z)}}!function fe(){for(;V.length<=5;)V.push(C(V.length));se.exports=ae.apply(void 0,[G].concat(V));for(var k=0;k<=5;++k)se.exports[k]=V[k]}()},5077:(se,ee,D)=>{se.exports=function U(b,_){for(var E=_[0],g=_[1],w=b.length,M=1,y=w,A=0,R=w-1;A<y;R=A++){var C=b[A],T=b[R],B=C[1],V=T[1];if(V<B){if(V<g&&g<B){if(0===(G=I(C,T,_)))return 0;M^=0<G|0}else if(g===B&&B<b[(A+1)%w][1]){if(0===(G=I(C,T,_)))return 0;M^=0<G|0}}else if(B<V){if(B<g&&g<V){if(0===(G=I(C,T,_)))return 0;M^=G<0|0}else if(g===B&&b[(A+1)%w][1]<B){var G;if(0===(G=I(C,T,_)))return 0;M^=G<0|0}}else if(g===B){var k=Math.min(C[0],T[0]),O=Math.max(C[0],T[0]);if(0===A){for(;R>0;){var Y=(R+w-1)%w;if((q=b[Y])[1]!==g)break;var me=q[0];k=Math.min(k,me),O=Math.max(O,me),R=Y}if(0===R)return k<=E&&E<=O?0:1;y=R+1}for(var re=b[(R+w-1)%w][1];A+1<y;){var q;if((q=b[A+1])[1]!==g)break;me=q[0],k=Math.min(k,me),O=Math.max(O,me),A+=1}if(k<=E&&E<=O)return 0;E<k&&re<g!=b[(A+1)%w][1]<g&&(M^=1)}}return 2*M-1};var I=D(8212)},4060:(se,ee,D)=>{"use strict";var I=D(3294),U=D(7448);se.exports=function b(_,E){var g=_.length;if(1===g){var w=I(_[0],E);return w[0]?w:[w[1]]}var M=new Array(2*g),y=[.1,.1],A=[.1,.1],R=0;I(_[0],E,y),y[0]&&(M[R++]=y[0]);for(var C=1;C<g;++C){I(_[C],E,A),U(y[1],A[0],y),y[0]&&(M[R++]=y[0]);var B=A[1],V=y[1],G=B+V,fe=V-(G-B);y[1]=G,fe&&(M[R++]=fe)}return y[1]&&(M[R++]=y[1]),0===R&&(M[R++]=0),M.length=R,M}},3217:se=>{"use strict";se.exports=function D(I,U){var b=0|I.length,_=0|U.length;if(1===b&&1===_)return function ee(I,U){var b=I+U,_=b-I,M=I-(b-_)+(U-_);return M?[M,b]:[b]}(I[0],-U[0]);var V,G,g=new Array(b+_),w=0,M=0,y=0,A=Math.abs,R=I[M],C=A(R),T=-U[y],B=A(T);C<B?(G=R,(M+=1)<b&&(C=A(R=I[M]))):(G=T,(y+=1)<_&&(B=A(T=-U[y]))),M<b&&C<B||y>=_?(V=R,(M+=1)<b&&(C=A(R=I[M]))):(V=T,(y+=1)<_&&(B=A(T=-U[y])));for(var q,me,ae=V+G,fe=ae-V,k=G-fe,O=k,Y=ae;M<b&&y<_;)C<B?(V=R,(M+=1)<b&&(C=A(R=I[M]))):(V=T,(y+=1)<_&&(B=A(T=-U[y]))),(k=(G=O)-(fe=(ae=V+G)-V))&&(g[w++]=k),O=Y-((q=Y+ae)-(me=q-Y))+(ae-me),Y=q;for(;M<b;)(k=(G=O)-(fe=(ae=(V=R)+G)-V))&&(g[w++]=k),O=Y-((q=Y+ae)-(me=q-Y))+(ae-me),Y=q,(M+=1)<b&&(R=I[M]);for(;y<_;)(k=(G=O)-(fe=(ae=(V=T)+G)-V))&&(g[w++]=k),O=Y-((q=Y+ae)-(me=q-Y))+(ae-me),Y=q,(y+=1)<_&&(T=-U[y]);return O&&(g[w++]=O),Y&&(g[w++]=Y),w||(g[w++]=0),g.length=w,g}},2903:se=>{"use strict";se.exports=function D(I,U){var b=0|I.length,_=0|U.length;if(1===b&&1===_)return function ee(I,U){var b=I+U,_=b-I,M=I-(b-_)+(U-_);return M?[M,b]:[b]}(I[0],U[0]);var V,G,g=new Array(b+_),w=0,M=0,y=0,A=Math.abs,R=I[M],C=A(R),T=U[y],B=A(T);C<B?(G=R,(M+=1)<b&&(C=A(R=I[M]))):(G=T,(y+=1)<_&&(B=A(T=U[y]))),M<b&&C<B||y>=_?(V=R,(M+=1)<b&&(C=A(R=I[M]))):(V=T,(y+=1)<_&&(B=A(T=U[y])));for(var q,me,ae=V+G,fe=ae-V,k=G-fe,O=k,Y=ae;M<b&&y<_;)C<B?(V=R,(M+=1)<b&&(C=A(R=I[M]))):(V=T,(y+=1)<_&&(B=A(T=U[y]))),(k=(G=O)-(fe=(ae=V+G)-V))&&(g[w++]=k),O=Y-((q=Y+ae)-(me=q-Y))+(ae-me),Y=q;for(;M<b;)(k=(G=O)-(fe=(ae=(V=R)+G)-V))&&(g[w++]=k),O=Y-((q=Y+ae)-(me=q-Y))+(ae-me),Y=q,(M+=1)<b&&(R=I[M]);for(;y<_;)(k=(G=O)-(fe=(ae=(V=T)+G)-V))&&(g[w++]=k),O=Y-((q=Y+ae)-(me=q-Y))+(ae-me),Y=q,(y+=1)<_&&(T=U[y]);return O&&(g[w++]=O),Y&&(g[w++]=Y),w||(g[w++]=0),g.length=w,g}},9791:(se,ee,D)=>{var I=D(8926).default;const U=D(2841);se.exports={recognize:function(){var E=I(function*(g,w,M){const y=U(M);return yield y.load(),yield y.loadLanguage(w),yield y.initialize(w),y.recognize(g).finally(I(function*(){yield y.terminate()}))});return function(w,M,y){return E.apply(this,arguments)}}(),detect:function(){var E=I(function*(g,w){const M=U(w);return yield M.load(),yield M.loadLanguage("osd"),yield M.initialize("osd"),M.detect(g).finally(I(function*(){yield M.terminate()}))});return function(w,M){return E.apply(this,arguments)}}()}},6057:se=>{se.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},562:se=>{se.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12"}},491:(se,ee,D)=>{const I=D(6057);se.exports={defaultOEM:I.DEFAULT}},1722:se=>{se.exports={langPath:"https://tessdata.projectnaptha.com/4.0.0",workerBlobURL:!0,logger:()=>{}}},804:se=>{se.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},833:(se,ee,D)=>{const I=D(5011);let U=0;se.exports=({id:b,action:_,payload:E={}})=>{let g=b;return void 0===g&&(g=I("Job",U),U+=1),{id:g,action:_,payload:E}}},5873:function(se,ee,D){var I=D(8926).default,U=this;const b=D(833),{log:_}=D(7223),E=D(5011);let g=0;se.exports=()=>{const w=E("Scheduler",g),M={},y={};let A=[];g+=1;const C=()=>Object.keys(M).length,T=()=>{if(0!==A.length){const fe=Object.keys(M);for(let k=0;k<fe.length;k+=1)if(void 0===y[fe[k]]){A[0](M[fe[k]]);break}}},B=(fe,k)=>new Promise((O,Y)=>{const q=b({action:fe,payload:k});A.push(function(){var me=I(function*(re){A.shift(),y[re.id]=q;try{O(yield re[fe].apply(U,[...k,q.id]))}catch(ue){Y(ue)}finally{delete y[re.id],T()}});return function(re){return me.apply(this,arguments)}}()),_(`[${w}]: Add ${q.id} to JobQueue`),_(`[${w}]: JobQueue length=${A.length}`),T()});return{addWorker:fe=>(M[fe.id]=fe,_(`[${w}]: Add ${fe.id}`),_(`[${w}]: Number of workers=${C()}`),T(),fe.id),addJob:function(){var fe=I(function*(k,...O){if(0===C())throw Error(`[${w}]: You need to have at least one worker before adding jobs`);return B(k,O)});return function(O){return fe.apply(this,arguments)}}(),terminate:function(){var fe=I(function*(){Object.keys(M).forEach(function(){var k=I(function*(O){yield M[O].terminate()});return function(O){return k.apply(this,arguments)}}()),A=[]});return function(){return fe.apply(this,arguments)}}(),getQueueLen:()=>A.length,getNumWorkers:C}}},2841:(se,ee,D)=>{var I=D(8926).default;const U=D(3466),b=D(9038),_=D(833),{log:E}=D(7223),g=D(5011),{defaultOEM:w}=D(491),{defaultOptions:M,spawnWorker:y,terminateWorker:A,onMessage:R,loadImage:C,send:T}=D(6893);let B=0;se.exports=(V={})=>{const G=g("Worker",B),c=U(or(or({},M),V)),{logger:ae,errorHandler:fe}=c,k=wC(c,["logger","errorHandler"]),O={},Y={};let q=y(k);B+=1;const me=(f,S)=>{O[f]=S},re=(f,S)=>{Y[f]=S},ue=({id:f,action:S,payload:P})=>new Promise((F,Z)=>{E(`[${G}]: Start ${f}, action=${S}`),me(S,F),re(S,Z),T(q,{workerId:G,jobId:f,action:S,payload:P})}),ge=function(){var f=I(function*(S,P={},F){return ue(_({id:F,action:"recognize",payload:{image:yield C(S),options:P}}))});return function(P){return f.apply(this,arguments)}}(),v=function(){var f=I(function*(S,P){return ue(_({id:P,action:"detect",payload:{image:yield C(S)}}))});return function(P,F){return f.apply(this,arguments)}}(),p=function(){var f=I(function*(){return null!==q&&(A(q),q=null),Promise.resolve()});return function(){return f.apply(this,arguments)}}();return R(q,({workerId:f,jobId:S,status:P,action:F,data:Z})=>{if("resolve"===P){E(`[${f}]: Complete ${S}`);let ie=Z;"recognize"===F?ie=b(Z):"getPDF"===F&&(ie=Array.from(Oi(or({},Z),{length:Object.keys(Z).length}))),O[F]({jobId:S,data:ie})}else if("reject"===P){if(Y[F](Z),!fe)throw Error(Z);fe(Z)}else"progress"===P&&ae(Oi(or({},Z),{userJobId:S}))}),{id:G,worker:q,setResolve:me,setReject:re,load:f=>ue(_({id:f,action:"load",payload:{options:k}})),writeText:(f,S,P)=>ue(_({id:P,action:"FS",payload:{method:"writeFile",args:[f,S]}})),readText:(f,S)=>ue(_({id:S,action:"FS",payload:{method:"readFile",args:[f,{encoding:"utf8"}]}})),removeFile:(f,S)=>ue(_({id:S,action:"FS",payload:{method:"unlink",args:[f]}})),FS:(f,S,P)=>ue(_({id:P,action:"FS",payload:{method:f,args:S}})),loadLanguage:(f="eng",S)=>ue(_({id:S,action:"loadLanguage",payload:{langs:f,options:k}})),initialize:(f="eng",S=w,P)=>ue(_({id:P,action:"initialize",payload:{langs:f,oem:S}})),setParameters:(f={},S)=>ue(_({id:S,action:"setParameters",payload:{params:f}})),recognize:ge,getPDF:(f="Tesseract OCR Result",S=!1,P)=>ue(_({id:P,action:"getPDF",payload:{title:f,textonly:S}})),detect:v,terminate:p}}},5825:(se,ee,D)=>{D(7854);const I=D(5873),U=D(2841),b=D(9791),_=D(804),E=D(6057),g=D(562),{setLogging:w}=D(7223);se.exports=or({languages:_,OEM:E,PSM:g,createScheduler:I,createWorker:U,setLogging:w},b)},9038:se=>{se.exports=ee=>{const D=[],I=[],U=[],b=[],_=[];return ee.blocks.forEach(E=>{E.paragraphs.forEach(g=>{g.lines.forEach(w=>{w.words.forEach(M=>{M.symbols.forEach(y=>{_.push(Oi(or({},y),{page:ee,block:E,paragraph:g,line:w,word:M}))}),b.push(Oi(or({},M),{page:ee,block:E,paragraph:g,line:w}))}),U.push(Oi(or({},w),{page:ee,block:E,paragraph:g}))}),I.push(Oi(or({},g),{page:ee,block:E}))}),D.push(Oi(or({},E),{page:ee}))}),Oi(or({},ee),{blocks:D,paragraphs:I,lines:U,words:b,symbols:_})}},4469:(se,ee,D)=>{const I=D(9456);se.exports=U=>{const b={};return"undefined"!=typeof WorkerGlobalScope?b.type="webworker":I()?b.type="electron":"object"==typeof window?b.type="browser":"object"==typeof process&&(b.type="node"),void 0===U?b:b[U]}},5011:se=>{se.exports=(ee,D)=>`${ee}-${D}-${Math.random().toString(16).slice(3,8)}`},7223:function(se,ee){let D=!1;ee.logging=D,ee.setLogging=I=>{D=I},ee.log=(...I)=>D?console.log.apply(this,I):null},3466:(se,ee,D)=>{const U="browser"===D(4469)("type")?D(5555):b=>b;se.exports=b=>{const _=or({},b);return["corePath","workerPath","langPath"].forEach(E=>{void 0!==b[E]&&(_[E]=U(_[E]))}),_}},7123:(se,ee,D)=>{const I=D(5555),{version:U,dependencies:b}=D(4547),_=D(1722);se.exports=Oi(or({},_),{workerPath:"undefined"!=typeof process&&"development"===process.env.TESS_ENV?I(`/dist/worker.dev.js?nocache=${Math.random().toString(36).slice(3)}`):`https://unpkg.com/tesseract.js@v${U}/dist/worker.min.js`,corePath:`https://unpkg.com/tesseract.js-core@v${b["tesseract.js-core"].substring(1)}/tesseract-core.${"object"==typeof WebAssembly?"wasm":"asm"}.js`})},6893:(se,ee,D)=>{const I=D(7123),U=D(8766),b=D(7694),_=D(256),E=D(6285),g=D(141);se.exports={defaultOptions:I,spawnWorker:U,terminateWorker:b,onMessage:_,send:E,loadImage:g}},141:(se,ee,D)=>{var I=D(8926).default;const U=D(5555),b=D(8403),_=w=>new Promise((M,y)=>{const A=new FileReader;A.onload=()=>{M(A.result)},A.onerror=({target:{error:{code:R}}})=>{y(Error(`File could not be read! Code=${R}`))},A.readAsArrayBuffer(w)}),E=w=>new Promise(M=>{b(w,y=>y.toBlob(M),{orientation:!0,canvas:!0})}),g=function(){var w=I(function*(M){let y=M;if(void 0===M)return"undefined";if("string"==typeof M)if(M.endsWith(".pbm"))y=yield(yield fetch(U(M))).arrayBuffer();else{let A=M;/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(M)||(A=U(M)),y=yield _(yield E(A))}else if(M instanceof HTMLElement)"IMG"===M.tagName&&(y=yield g(M.src)),"VIDEO"===M.tagName&&(y=yield g(M.poster)),"CANVAS"===M.tagName&&(yield new Promise(A=>{M.toBlob(function(){var R=I(function*(C){y=yield _(C),A()});return function(C){return R.apply(this,arguments)}}())}));else if(M instanceof File||M instanceof Blob){let A=M;M.name.endsWith(".pbm")||(A=yield E(A)),y=yield _(A)}return new Uint8Array(y)});return function(y){return w.apply(this,arguments)}}();se.exports=g},256:se=>{se.exports=(ee,D)=>{ee.onmessage=({data:I})=>{D(I)}}},6285:(se,ee,D)=>{var I=D(8926).default;se.exports=function(){var U=I(function*(b,_){b.postMessage(_)});return function(b,_){return U.apply(this,arguments)}}()},8766:se=>{se.exports=({workerPath:ee,workerBlobURL:D})=>{let I;if(Blob&&URL&&D){const U=new Blob([`importScripts("${ee}");`],{type:"application/javascript"});I=new Worker(URL.createObjectURL(U))}else I=new Worker(ee);return I}},7694:se=>{se.exports=ee=>{ee.terminate()}},4213:function(){"use strict";!function(se){if(se.TextEncoder&&se.TextDecoder)return!1;function ee(I="utf-8"){if("utf-8"!==I)throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${I}') is invalid.`)}function D(I="utf-8",U={fatal:!1}){if("utf-8"!==I)throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${I}') is invalid.`);if(U.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(ee.prototype,"encoding",{value:"utf-8"}),ee.prototype.encode=function(I,U={stream:!1}){if(U.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let b=0;const _=I.length;let g=0,w=Math.max(32,_+(_>>1)+7),M=new Uint8Array(w>>3<<3);for(;b<_;){let y=I.charCodeAt(b++);if(y>=55296&&y<=56319){if(b<_){const A=I.charCodeAt(b);56320==(64512&A)&&(++b,y=((1023&y)<<10)+(1023&A)+65536)}if(y>=55296&&y<=56319)continue}if(g+4>M.length){w+=8,w*=1+b/I.length*2,w=w>>3<<3;const A=new Uint8Array(w);A.set(M),M=A}if(0!=(4294967168&y)){if(0==(4294965248&y))M[g++]=y>>6&31|192;else if(0==(4294901760&y))M[g++]=y>>12&15|224,M[g++]=y>>6&63|128;else{if(0!=(4292870144&y))continue;M[g++]=y>>18&7|240,M[g++]=y>>12&63|128,M[g++]=y>>6&63|128}M[g++]=63&y|128}else M[g++]=y}return M.slice(0,g)},Object.defineProperty(D.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(D.prototype,"fatal",{value:!1}),Object.defineProperty(D.prototype,"ignoreBOM",{value:!1}),D.prototype.decode=function(I,U={stream:!1}){if(U.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const b=new Uint8Array(I);let _=0;const E=b.length,g=[];for(;_<E;){const w=b[_++];if(0===w)break;if(0==(128&w))g.push(w);else if(192==(224&w)){const M=63&b[_++];g.push((31&w)<<6|M)}else if(224==(240&w)){const M=63&b[_++],y=63&b[_++];g.push((31&w)<<12|M<<6|y)}else if(240==(248&w)){let R=(7&w)<<18|(63&b[_++])<<12|(63&b[_++])<<6|63&b[_++];R>65535&&(R-=65536,g.push(R>>>10&1023|55296),R=56320|1023&R),g.push(R)}}return String.fromCharCode.apply(null,g)},se.TextEncoder=ee,se.TextDecoder=D}("undefined"!=typeof window?window:"undefined"!=typeof self?self:this)},3294:se=>{"use strict";se.exports=function D(I,U,b){var _=I*U,E=ee*I,w=E-(E-I),M=I-w,y=ee*U,R=y-(y-U),C=U-R,G=M*C-(_-w*R-M*R-w*C);return b?(b[0]=G,b[1]=_,b):[G,_]};var ee=+(Math.pow(2,27)+1)},7448:se=>{"use strict";se.exports=function ee(D,I,U){var b=D+I,_=b-D,g=I-_,w=D-(b-_);return U?(U[0]=w+g,U[1]=b,U):[w+g,b]}},87:function(se,ee,D){var I;se=D.nmd(se),function(U){"object"==typeof global&&global;var V,G,ae,g=String.fromCharCode;function w(me){for(var ye,we,re=[],ue=0,ce=me.length;ue<ce;)(ye=me.charCodeAt(ue++))>=55296&&ye<=56319&&ue<ce?56320==(64512&(we=me.charCodeAt(ue++)))?re.push(((1023&ye)<<10)+(1023&we)+65536):(re.push(ye),ue--):re.push(ye);return re}function y(me){if(me>=55296&&me<=57343)throw Error("Lone surrogate U+"+me.toString(16).toUpperCase()+" is not a scalar value")}function A(me,re){return g(me>>re&63|128)}function R(me){if(0==(4294967168&me))return g(me);var re="";return 0==(4294965248&me)?re=g(me>>6&31|192):0==(4294901760&me)?(y(me),re=g(me>>12&15|224),re+=A(me,6)):0==(4292870144&me)&&(re=g(me>>18&7|240),re+=A(me,12),re+=A(me,6)),re+g(63&me|128)}function T(){if(ae>=G)throw Error("Invalid byte index");var me=255&V[ae];if(ae++,128==(192&me))return 63&me;throw Error("Invalid continuation byte")}function B(){var me,ye;if(ae>G)throw Error("Invalid byte index");if(ae==G)return!1;if(me=255&V[ae],ae++,0==(128&me))return me;if(192==(224&me)){if((ye=(31&me)<<6|T())>=128)return ye;throw Error("Invalid continuation byte")}if(224==(240&me)){if((ye=(15&me)<<12|T()<<6|T())>=2048)return y(ye),ye;throw Error("Invalid continuation byte")}if(240==(248&me)&&(ye=(7&me)<<18|T()<<12|T()<<6|T())>=65536&&ye<=1114111)return ye;throw Error("Invalid UTF-8 detected")}var k={version:"2.1.2",encode:function C(me){for(var re=w(me),ue=re.length,ce=-1,we="";++ce<ue;)we+=R(re[ce]);return we},decode:function fe(me){V=w(me),G=V.length,ae=0;for(var ue,re=[];!1!==(ue=B());)re.push(ue);return function M(me){for(var ce,re=me.length,ue=-1,ye="";++ue<re;)(ce=me[ue])>65535&&(ye+=g((ce-=65536)>>>10&1023|55296),ce=56320|1023&ce),ye+=g(ce);return ye}(re)}};void 0!==(I=function(){return k}.call(ee,D,ee,se))&&(se.exports=I)}()},814:(se,ee,D)=>{"use strict";var I=D(458),U=navigator.hardwareConcurrency||1;function _(E,g){if("string"!=typeof E&&"function"!=typeof E)throw new TypeError("func argument must be a function");if(void 0===g&&(g={}),"object"!=typeof g||null===g)throw new TypeError("options argument must be an object");this._workerCode=E.toString(),this._numWorkers=void 0===g.maxWorkers||"auto"===g.maxWorkers?Math.min(U-1,1):g.maxWorkers>0?Math.min(g.maxWorkers,U):U,this._workers=new Map,this._timeout=g.timeout||0,this._terminateOnError=!!g.terminateOnError;var w=g.deps;"string"==typeof w&&(w=[w]),Array.isArray(w)||(w=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(w)}_.prototype._init=function(E){for(var g=I.newWorkerURL(this._workerCode,E),w=0;w<this._numWorkers;w++){var M=new Worker(g);M.onmessage=this._onmessage.bind(this,M),M.onerror=this._onerror.bind(this,M),M.running=!1,M.id=w,this._workers.set(M,null)}URL.revokeObjectURL(g)},_.prototype._onerror=function(E,g){if(!this._terminated){this._working--,E.running=!1;var w=this._workers.get(E);w&&w[1](g.message),this._workers.set(E,null),this._terminateOnError?this.terminate():this._exec()}},_.prototype._onmessage=function(E,g){if(!this._terminated){this._working--,E.running=!1;var w=this._workers.get(E);w&&w[0](g.data.data),this._workers.set(E,null),this._exec()}},_.prototype._exec=function(){for(var E of this._workers.keys()){if(this._working===this._numWorkers||0===this._waiting.length)return;if(!E.running)for(var g=0;g<this._waiting.length;g++){var w=this._waiting[g];if("number"!=typeof w[4]||w[4]===E.id){this._waiting.splice(g,1),E.postMessage({action:"exec",event:w[0],args:w[1]},w[2]),E.running=!0,E.time=Date.now(),this._workers.set(E,w[3]),this._working++;break}}}},_.prototype.terminate=function(){if(!this._terminated){for(var E of this._workers)E[0].terminate(),E[1]&&E[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},_.prototype.postAll=function(E,g){if(this._terminated)throw new Error("Cannot post (terminated)");var w=[];for(var M of this._workers.keys())w.push(this.post(E,g,[],M.id));return Promise.all(w)},_.prototype.post=function(E,g,w,M){void 0===g&&(g=[]),void 0===w&&(w=[]),Array.isArray(g)||(g=[g]),Array.isArray(w)||(w=[w]);var y=this;return new Promise(function(A,R){if(y._terminated)throw new Error("Cannot post (terminated)");y._waiting.push([E,g,w,[A,R],M]),y._exec()})},se.exports=_},458:(se,ee)=>{"use strict";var I=function(){function b(){this._listeners={}}self.window=self,b.prototype.on=function(E,g){if(this._listeners[E])throw new RangeError("there is already a listener for "+E);if("function"!=typeof g)throw new TypeError("callback argument must be a function");this._listeners[E]=g},b.prototype._send=function(E,g,w){void 0===w?w=[]:Array.isArray(w)||(w=[w]),self.postMessage({id:E,data:g},w)},b.prototype._trigger=function(E,g){if(!this._listeners[E])throw new Error("event "+E+" is not defined");this._listeners[E].apply(null,g)};var _=new b;self.onmessage=function(E){switch(E.data.action){case"exec":E.data.args.unshift(function(g,w){_._send(E.data.id,g,w)}),_._trigger(E.data.event,E.data.args);break;case"ping":_._send(E.data.id,"pong");break;default:throw new Error("unexpected action: "+E.data.action)}}}.toString().split('"CODE";');ee.newWorkerURL=function(b,_){var E=new Blob(["(",I[0],"importScripts.apply(self, "+JSON.stringify(_)+");\n","(",b,")();",I[1],")();"],{type:"application/javascript"});return URL.createObjectURL(E)}},8926:se=>{function ee(I,U,b,_,E,g,w){try{var M=I[g](w),y=M.value}catch(A){return void b(A)}M.done?U(y):Promise.resolve(y).then(_,E)}se.exports=function D(I){return function(){var U=this,b=arguments;return new Promise(function(_,E){var g=I.apply(U,b);function w(y){ee(g,_,E,w,M,"next",y)}function M(y){ee(g,_,E,w,M,"throw",y)}w(void 0)})}},se.exports.__esModule=!0,se.exports.default=se.exports},2898:se=>{"use strict";se.exports={version:"1.0.1"}},4547:se=>{"use strict";se.exports=JSON.parse('{"name":"tesseract.js","version":"2.1.5","description":"Pure Javascript Multilingual OCR","main":"src/index.js","types":"src/index.d.ts","unpkg":"dist/tesseract.min.js","jsdelivr":"dist/tesseract.min.js","scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json","prepublishOnly":"npm run build","wait":"rimraf dist && wait-on http://localhost:3000/dist/tesseract.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html","lint":"eslint src","lint:fix":"eslint --fix src","postinstall":"opencollective-postinstall || true"},"browser":{"./src/worker/node/index.js":"./src/worker/browser/index.js"},"author":"","contributors":["jeromewu"],"license":"Apache-2.0","devDependencies":{"@babel/core":"^7.7.7","@babel/preset-env":"^7.7.7","acorn":"^6.4.0","babel-loader":"^8.1.0","cors":"^2.8.5","eslint":"^7.2.0","eslint-config-airbnb-base":"^14.2.0","eslint-plugin-import":"^2.22.1","expect.js":"^0.3.1","express":"^4.17.1","mocha":"^8.1.3","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","nyc":"^15.1.0","rimraf":"^2.7.1","wait-on":"^3.3.0","webpack":"^4.44.2","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.12","webpack-dev-middleware":"^3.7.2"},"dependencies":{"blueimp-load-image":"^3.0.0","bmp-js":"^0.1.0","file-type":"^12.4.1","idb-keyval":"^3.2.0","is-electron":"^2.2.0","is-url":"^1.2.4","jpeg-autorotate":"^7.1.1","node-fetch":"^2.6.0","opencollective-postinstall":"^2.0.2","regenerator-runtime":"^0.13.3","resolve-url":"^0.2.1","tesseract.js-core":"^2.2.0","zlibjs":"^0.3.1"},"repository":{"type":"git","url":"https://github.com/naptha/tesseract.js.git"},"bugs":{"url":"https://github.com/naptha/tesseract.js/issues"},"homepage":"https://github.com/naptha/tesseract.js","collective":{"type":"opencollective","url":"https://opencollective.com/tesseractjs"}}')}},se=>{se(se.s=8254)}]);